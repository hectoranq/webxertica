"use strict";(self.webpackChunkwebfirebase=self.webpackChunkwebfirebase||[]).push([[179],{58:(Is,tr,Oe)=>{Oe.d(tr,{$s:()=>je,BH:()=>Lt,DV:()=>hr,Dv:()=>Jr,G6:()=>dr,GJ:()=>fn,L:()=>nt,LL:()=>K,Pz:()=>Dt,Sg:()=>An,UG:()=>L,UI:()=>is,US:()=>Gt,Wj:()=>Ra,Wl:()=>Se,Yr:()=>ln,ZB:()=>we,ZR:()=>ie,aH:()=>On,b$:()=>wt,cI:()=>he,dS:()=>Li,eu:()=>$,g5:()=>W,gK:()=>Dn,gQ:()=>ss,h$:()=>Jt,hl:()=>U,hu:()=>ke,jU:()=>Pe,lb:()=>wr,m9:()=>zn,ne:()=>qs,p$:()=>le,pd:()=>Ts,r3:()=>nr,ru:()=>Ye,tV:()=>X,uI:()=>ue,ug:()=>Eo,vZ:()=>Er,w1:()=>en,w9:()=>$n,xO:()=>yo,xb:()=>Rr,z$:()=>Ke,zI:()=>j,zd:()=>vo});const I={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},ke=function(R,C){if(!R)throw W(C)},W=function(R){return new Error("Firebase Database ("+I.SDK_VERSION+") INTERNAL ASSERT FAILED: "+R)},Ue=function(R){const C=[];let M=0;for(let J=0;J<R.length;J++){let F=R.charCodeAt(J);F<128?C[M++]=F:F<2048?(C[M++]=F>>6|192,C[M++]=63&F|128):55296==(64512&F)&&J+1<R.length&&56320==(64512&R.charCodeAt(J+1))?(F=65536+((1023&F)<<10)+(1023&R.charCodeAt(++J)),C[M++]=F>>18|240,C[M++]=F>>12&63|128,C[M++]=F>>6&63|128,C[M++]=63&F|128):(C[M++]=F>>12|224,C[M++]=F>>6&63|128,C[M++]=63&F|128)}return C},Gt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(R,C){if(!Array.isArray(R))throw Error("encodeByteArray takes an array as a parameter");this.init_();const M=C?this.byteToCharMapWebSafe_:this.byteToCharMap_,J=[];for(let F=0;F<R.length;F+=3){const Q=R[F],Ze=F+1<R.length,ut=Ze?R[F+1]:0,xt=F+2<R.length,mn=xt?R[F+2]:0;let Br=(15&ut)<<2|mn>>6,tn=63&mn;xt||(tn=64,Ze||(Br=64)),J.push(M[Q>>2],M[(3&Q)<<4|ut>>4],M[Br],M[tn])}return J.join("")},encodeString(R,C){return this.HAS_NATIVE_SUPPORT&&!C?btoa(R):this.encodeByteArray(Ue(R),C)},decodeString(R,C){return this.HAS_NATIVE_SUPPORT&&!C?atob(R):function(R){const C=[];let M=0,J=0;for(;M<R.length;){const F=R[M++];if(F<128)C[J++]=String.fromCharCode(F);else if(F>191&&F<224){const Q=R[M++];C[J++]=String.fromCharCode((31&F)<<6|63&Q)}else if(F>239&&F<365){const xt=((7&F)<<18|(63&R[M++])<<12|(63&R[M++])<<6|63&R[M++])-65536;C[J++]=String.fromCharCode(55296+(xt>>10)),C[J++]=String.fromCharCode(56320+(1023&xt))}else{const Q=R[M++],Ze=R[M++];C[J++]=String.fromCharCode((15&F)<<12|(63&Q)<<6|63&Ze)}}return C.join("")}(this.decodeStringToByteArray(R,C))},decodeStringToByteArray(R,C){this.init_();const M=C?this.charToByteMapWebSafe_:this.charToByteMap_,J=[];for(let F=0;F<R.length;){const Q=M[R.charAt(F++)],ut=F<R.length?M[R.charAt(F)]:0;++F;const mn=F<R.length?M[R.charAt(F)]:64;++F;const Re=F<R.length?M[R.charAt(F)]:64;if(++F,null==Q||null==ut||null==mn||null==Re)throw new Wt;J.push(Q<<2|ut>>4),64!==mn&&(J.push(ut<<4&240|mn>>2),64!==Re&&J.push(mn<<6&192|Re))}return J},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let R=0;R<this.ENCODED_VALS.length;R++)this.byteToCharMap_[R]=this.ENCODED_VALS.charAt(R),this.charToByteMap_[this.byteToCharMap_[R]]=R,this.byteToCharMapWebSafe_[R]=this.ENCODED_VALS_WEBSAFE.charAt(R),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[R]]=R,R>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(R)]=R,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(R)]=R)}}};class Wt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Jt=function(R){const C=Ue(R);return Gt.encodeByteArray(C,!0)},nt=function(R){return Jt(R).replace(/\./g,"")},X=function(R){try{return Gt.decodeString(R,!0)}catch(C){console.error("base64Decode failed: ",C)}return null};function le(R){return we(void 0,R)}function we(R,C){if(!(C instanceof Object))return C;switch(C.constructor){case Date:return new Date(C.getTime());case Object:void 0===R&&(R={});break;case Array:R=[];break;default:return C}for(const M in C)!C.hasOwnProperty(M)||!ht(M)||(R[M]=we(R[M],C[M]));return R}function ht(R){return"__proto__"!==R}const Be=()=>{try{return function Et(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const R=process.env.__FIREBASE_DEFAULTS__;return R?JSON.parse(R):void 0})()||(()=>{if(typeof document>"u")return;let R;try{R=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const C=R&&X(R[1]);return C&&JSON.parse(C)})()}catch(R){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${R}`)}},On=()=>{var R;return null===(R=Be())||void 0===R?void 0:R.config},Dt=R=>{var C;return null===(C=Be())||void 0===C?void 0:C[`_${R}`]};class Lt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((C,M)=>{this.resolve=C,this.reject=M})}wrapCallback(C){return(M,J)=>{M?this.reject(M):this.resolve(J),"function"==typeof C&&(this.promise.catch(()=>{}),1===C.length?C(M):C(M,J))}}}function An(R,C){if(R.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const J=C||"demo-project",F=R.iat||0,Q=R.sub||R.user_id;if(!Q)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ze=Object.assign({iss:`https://securetoken.google.com/${J}`,aud:J,iat:F,exp:F+3600,auth_time:F,sub:Q,user_id:Q,firebase:{sign_in_provider:"custom",identities:{}}},R);return[nt(JSON.stringify({alg:"none",type:"JWT"})),nt(JSON.stringify(Ze)),""].join(".")}function Ke(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ue(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ke())}function L(){var R;const C=null===(R=Be())||void 0===R?void 0:R.forceEnvironment;if("node"===C)return!0;if("browser"===C)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Pe(){return"object"==typeof self&&self.self===self}function Ye(){const R="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof R&&void 0!==R.id}function wt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function en(){const R=Ke();return R.indexOf("MSIE ")>=0||R.indexOf("Trident/")>=0}function ln(){return!0===I.NODE_CLIENT||!0===I.NODE_ADMIN}function dr(){return!L()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function U(){try{return"object"==typeof indexedDB}catch{return!1}}function $(){return new Promise((R,C)=>{try{let M=!0;const J="validate-browser-context-for-indexeddb-analytics-module",F=self.indexedDB.open(J);F.onsuccess=()=>{F.result.close(),M||self.indexedDB.deleteDatabase(J),R(!0)},F.onupgradeneeded=()=>{M=!1},F.onerror=()=>{var Q;C((null===(Q=F.error)||void 0===Q?void 0:Q.message)||"")}}catch(M){C(M)}})}function j(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ie extends Error{constructor(C,M,J){super(M),this.code=C,this.customData=J,this.name="FirebaseError",Object.setPrototypeOf(this,ie.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,K.prototype.create)}}class K{constructor(C,M,J){this.service=C,this.serviceName=M,this.errors=J}create(C,...M){const J=M[0]||{},F=`${this.service}/${C}`,Q=this.errors[C],Ze=Q?function fe(R,C){return R.replace(rt,(M,J)=>{const F=C[J];return null!=F?String(F):`<${J}?>`})}(Q,J):"Error";return new ie(F,`${this.serviceName}: ${Ze} (${F}).`,J)}}const rt=/\{\$([^}]+)}/g;function he(R){return JSON.parse(R)}function Se(R){return JSON.stringify(R)}const Ct=function(R){let C={},M={},J={},F="";try{const Q=R.split(".");C=he(X(Q[0])||""),M=he(X(Q[1])||""),F=Q[2],J=M.d||{},delete M.d}catch{}return{header:C,claims:M,data:J,signature:F}},$n=function(R){const M=Ct(R).claims;return!!M&&"object"==typeof M&&M.hasOwnProperty("iat")},fn=function(R){const C=Ct(R).claims;return"object"==typeof C&&!0===C.admin};function nr(R,C){return Object.prototype.hasOwnProperty.call(R,C)}function hr(R,C){if(Object.prototype.hasOwnProperty.call(R,C))return R[C]}function Rr(R){for(const C in R)if(Object.prototype.hasOwnProperty.call(R,C))return!1;return!0}function is(R,C,M){const J={};for(const F in R)Object.prototype.hasOwnProperty.call(R,F)&&(J[F]=C.call(M,R[F],F,R));return J}function Er(R,C){if(R===C)return!0;const M=Object.keys(R),J=Object.keys(C);for(const F of M){if(!J.includes(F))return!1;const Q=R[F],Ze=C[F];if(pn(Q)&&pn(Ze)){if(!Er(Q,Ze))return!1}else if(Q!==Ze)return!1}for(const F of J)if(!M.includes(F))return!1;return!0}function pn(R){return null!==R&&"object"==typeof R}function yo(R){const C=[];for(const[M,J]of Object.entries(R))Array.isArray(J)?J.forEach(F=>{C.push(encodeURIComponent(M)+"="+encodeURIComponent(F))}):C.push(encodeURIComponent(M)+"="+encodeURIComponent(J));return C.length?"&"+C.join("&"):""}function vo(R){const C={};return R.replace(/^\?/,"").split("&").forEach(J=>{if(J){const[F,Q]=J.split("=");C[decodeURIComponent(F)]=decodeURIComponent(Q)}}),C}function Ts(R){const C=R.indexOf("?");if(!C)return"";const M=R.indexOf("#",C);return R.substring(C,M>0?M:void 0)}class ss{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let C=1;C<this.blockSize;++C)this.pad_[C]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(C,M){M||(M=0);const J=this.W_;if("string"==typeof C)for(let Re=0;Re<16;Re++)J[Re]=C.charCodeAt(M)<<24|C.charCodeAt(M+1)<<16|C.charCodeAt(M+2)<<8|C.charCodeAt(M+3),M+=4;else for(let Re=0;Re<16;Re++)J[Re]=C[M]<<24|C[M+1]<<16|C[M+2]<<8|C[M+3],M+=4;for(let Re=16;Re<80;Re++){const Br=J[Re-3]^J[Re-8]^J[Re-14]^J[Re-16];J[Re]=4294967295&(Br<<1|Br>>>31)}let mn,rr,F=this.chain_[0],Q=this.chain_[1],Ze=this.chain_[2],ut=this.chain_[3],xt=this.chain_[4];for(let Re=0;Re<80;Re++){Re<40?Re<20?(mn=ut^Q&(Ze^ut),rr=1518500249):(mn=Q^Ze^ut,rr=1859775393):Re<60?(mn=Q&Ze|ut&(Q|Ze),rr=2400959708):(mn=Q^Ze^ut,rr=3395469782);const Br=(F<<5|F>>>27)+mn+xt+rr+J[Re]&4294967295;xt=ut,ut=Ze,Ze=4294967295&(Q<<30|Q>>>2),Q=F,F=Br}this.chain_[0]=this.chain_[0]+F&4294967295,this.chain_[1]=this.chain_[1]+Q&4294967295,this.chain_[2]=this.chain_[2]+Ze&4294967295,this.chain_[3]=this.chain_[3]+ut&4294967295,this.chain_[4]=this.chain_[4]+xt&4294967295}update(C,M){if(null==C)return;void 0===M&&(M=C.length);const J=M-this.blockSize;let F=0;const Q=this.buf_;let Ze=this.inbuf_;for(;F<M;){if(0===Ze)for(;F<=J;)this.compress_(C,F),F+=this.blockSize;if("string"==typeof C){for(;F<M;)if(Q[Ze]=C.charCodeAt(F),++Ze,++F,Ze===this.blockSize){this.compress_(Q),Ze=0;break}}else for(;F<M;)if(Q[Ze]=C[F],++Ze,++F,Ze===this.blockSize){this.compress_(Q),Ze=0;break}}this.inbuf_=Ze,this.total_+=M}digest(){const C=[];let M=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let F=this.blockSize-1;F>=56;F--)this.buf_[F]=255&M,M/=256;this.compress_(this.buf_);let J=0;for(let F=0;F<5;F++)for(let Q=24;Q>=0;Q-=8)C[J]=this.chain_[F]>>Q&255,++J;return C}}function qs(R,C){const M=new bo(R,C);return M.subscribe.bind(M)}class bo{constructor(C,M){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=M,this.task.then(()=>{C(this)}).catch(J=>{this.error(J)})}next(C){this.forEachObserver(M=>{M.next(C)})}error(C){this.forEachObserver(M=>{M.error(C)}),this.close(C)}complete(){this.forEachObserver(C=>{C.complete()}),this.close()}subscribe(C,M,J){let F;if(void 0===C&&void 0===M&&void 0===J)throw new Error("Missing Observer.");F=function Ho(R,C){if("object"!=typeof R||null===R)return!1;for(const M of C)if(M in R&&"function"==typeof R[M])return!0;return!1}(C,["next","error","complete"])?C:{next:C,error:M,complete:J},void 0===F.next&&(F.next=Kt),void 0===F.error&&(F.error=Kt),void 0===F.complete&&(F.complete=Kt);const Q=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?F.error(this.finalError):F.complete()}catch{}}),this.observers.push(F),Q}unsubscribeOne(C){void 0===this.observers||void 0===this.observers[C]||(delete this.observers[C],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(C){if(!this.finalized)for(let M=0;M<this.observers.length;M++)this.sendOne(M,C)}sendOne(C,M){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[C])try{M(this.observers[C])}catch(J){typeof console<"u"&&console.error&&console.error(J)}})}close(C){this.finalized||(this.finalized=!0,void 0!==C&&(this.finalError=C),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Kt(){}const Jr=function(R,C,M,J){let F;if(J<C?F="at least "+C:J>M&&(F=0===M?"none":"no more than "+M),F)throw new Error(R+" failed: Was called with "+J+(1===J?" argument.":" arguments.")+" Expects "+F+".")};function Dn(R,C){return`${R} failed: ${C} argument `}function Ra(R,C,M,J){if((!J||M)&&"function"!=typeof M)throw new Error(Dn(R,C)+"must be a valid function.")}function wr(R,C,M,J){if((!J||M)&&("object"!=typeof M||null===M))throw new Error(Dn(R,C)+"must be a valid context object.")}const Li=function(R){const C=[];let M=0;for(let J=0;J<R.length;J++){let F=R.charCodeAt(J);if(F>=55296&&F<=56319){const Q=F-55296;J++,ke(J<R.length,"Surrogate pair missing trail surrogate."),F=65536+(Q<<10)+(R.charCodeAt(J)-56320)}F<128?C[M++]=F:F<2048?(C[M++]=F>>6|192,C[M++]=63&F|128):F<65536?(C[M++]=F>>12|224,C[M++]=F>>6&63|128,C[M++]=63&F|128):(C[M++]=F>>18|240,C[M++]=F>>12&63|128,C[M++]=F>>6&63|128,C[M++]=63&F|128)}return C},Eo=function(R){let C=0;for(let M=0;M<R.length;M++){const J=R.charCodeAt(M);J<128?C++:J<2048?C+=2:J>=55296&&J<=56319?(C+=4,M++):C+=3}return C},wo=1e3,ge=2,re=144e5,ve=.5;function je(R,C=wo,M=ge){const J=C*Math.pow(M,R),F=Math.round(ve*J*(Math.random()-.5)*2);return Math.min(re,J+F)}function zn(R){return R&&R._delegate?R._delegate:R}},986:(Is,tr,Oe)=>{function I(n){return"function"==typeof n}function ke(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const W=ke(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Ue(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class mt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(I(r))try{r()}catch(s){e=s instanceof W?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Jt(s)}catch(o){e=e??[],o instanceof W?e=[...e,...o.errors]:e.push(o)}}if(e)throw new W(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Jt(e);else{if(e instanceof mt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ue(t,e)}remove(e){const{_finalizers:t}=this;t&&Ue(t,e),e instanceof mt&&e._removeParent(this)}}mt.EMPTY=(()=>{const n=new mt;return n.closed=!0,n})();const Gt=mt.EMPTY;function Wt(n){return n instanceof mt||n&&"closed"in n&&I(n.remove)&&I(n.add)&&I(n.unsubscribe)}function Jt(n){I(n)?n():n.unsubscribe()}const nt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},X={setTimeout(n,e,...t){const{delegate:r}=X;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=X;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function le(n){X.setTimeout(()=>{const{onUnhandledError:e}=nt;if(!e)throw n;e(n)})}function we(){}const ht=st("C",void 0,void 0);function st(n,e,t){return{kind:n,value:e,error:t}}let qe=null;function Be(n){if(nt.useDeprecatedSynchronousErrorHandling){const e=!qe;if(e&&(qe={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=qe;if(qe=null,t)throw r}}else n()}class xn extends mt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Wt(e)&&e.add(this)):this.destination=Pe}static create(e,t,r){return new An(e,t,r)}next(e){this.isStopped?L(function Hn(n){return st("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?L(function Et(n){return st("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?L(ht,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const On=Function.prototype.bind;function Dt(n,e){return On.call(n,e)}class Lt{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Ke(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Ke(r)}else Ke(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Ke(t)}}}class An extends xn{constructor(e,t,r){let i;if(super(),I(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&nt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Dt(e.next,s),error:e.error&&Dt(e.error,s),complete:e.complete&&Dt(e.complete,s)}):i=e}this.destination=new Lt(i)}}function Ke(n){nt.useDeprecatedSynchronousErrorHandling?function hn(n){nt.useDeprecatedSynchronousErrorHandling&&qe&&(qe.errorThrown=!0,qe.error=n)}(n):le(n)}function L(n,e){const{onStoppedNotification:t}=nt;t&&X.setTimeout(()=>t(n,e))}const Pe={closed:!0,next:we,error:function ue(n){throw n},complete:we},Ye="function"==typeof Symbol&&Symbol.observable||"@@observable";function wt(n){return n}function en(n){return 0===n.length?wt:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let at=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function U(n){return n&&n instanceof xn||function dr(n){return n&&I(n.next)&&I(n.error)&&I(n.complete)}(n)&&Wt(n)}(t)?t:new An(t,r,i);return Be(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=ln(r))((i,s)=>{const o=new An({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Ye](){return this}pipe(...t){return en(t)(this)}toPromise(t){return new(t=ln(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function ln(n){var e;return null!==(e=n??nt.Promise)&&void 0!==e?e:Promise}const $=ke(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let j=(()=>{class n extends at{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new Y(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new $}next(t){Be(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){Be(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Be(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Gt:(this.currentObservers=null,s.push(t),new mt(()=>{this.currentObservers=null,Ue(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new at;return t.source=this,t}}return n.create=(e,t)=>new Y(e,t),n})();class Y extends j{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:Gt}}function ie(n){return I(n?.lift)}function K(n){return e=>{if(ie(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function fe(n,e,t,r,i){return new rt(n,e,t,r,i)}class rt extends xn{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function he(n,e){return K((t,r)=>{let i=0;t.subscribe(fe(r,s=>{r.next(n.call(e,s,i++))}))})}var Se=Oe(582);const Ct=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Nt(n){return I(n?.then)}function kt(n){return I(n[Ye])}function $n(n){return Symbol.asyncIterator&&I(n?.[Symbol.asyncIterator])}function fn(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const hr=function nr(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Rr(n){return I(n?.[hr])}function is(n){return(0,Se.FC)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,Se.qq)(t.read());if(i)return yield(0,Se.qq)(void 0);yield yield(0,Se.qq)(r)}}finally{t.releaseLock()}})}function Er(n){return I(n?.getReader)}function pn(n){if(n instanceof at)return n;if(null!=n){if(kt(n))return function zs(n){return new at(e=>{const t=n[Ye]();if(I(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Ct(n))return function yo(n){return new at(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Nt(n))return function vo(n){return new at(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,le)})}(n);if($n(n))return ss(n);if(Rr(n))return function Ts(n){return new at(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Er(n))return function qs(n){return ss(is(n))}(n)}throw fn(n)}function ss(n){return new at(e=>{(function bo(n,e){var t,r,i,s;return(0,Se.mG)(this,void 0,void 0,function*(){try{for(t=(0,Se.KL)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Ln(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Kt(n,e,t=1/0){return I(e)?Kt((r,i)=>he((s,o)=>e(r,s,i,o))(pn(n(r,i))),t):("number"==typeof e&&(t=e),K((r,i)=>function Ho(n,e,t,r,i,s,o,a){const l=[];let c=0,h=0,p=!1;const g=()=>{p&&!l.length&&!c&&e.complete()},_=E=>c<r?v(E):l.push(E),v=E=>{s&&e.next(E),c++;let T=!1;pn(t(E,h++)).subscribe(fe(e,P=>{i?.(P),s?_(P):e.next(P)},()=>{T=!0},void 0,()=>{if(T)try{for(c--;l.length&&c<r;){const P=l.shift();o?Ln(e,o,()=>v(P)):v(P)}g()}catch(P){e.error(P)}}))};return n.subscribe(fe(e,_,()=>{p=!0,g()})),()=>{a?.()}}(r,i,n,t)))}function Jr(n=1/0){return Kt(wt,n)}const Dn=new at(n=>n.complete());function Li(n){return n[n.length-1]}function Eo(n){return I(Li(n))?n.pop():void 0}function Vi(n){return function wr(n){return n&&I(n.schedule)}(Li(n))?n.pop():void 0}function ge(n,e=0){return K((t,r)=>{t.subscribe(fe(r,i=>Ln(r,n,()=>r.next(i),e),()=>Ln(r,n,()=>r.complete(),e),i=>Ln(r,n,()=>r.error(i),e)))})}function re(n,e=0){return K((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function zn(n,e){if(!n)throw new Error("Iterable cannot be null");return new at(t=>{Ln(t,e,()=>{const r=n[Symbol.asyncIterator]();Ln(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function M(n,e){return e?function C(n,e){if(null!=n){if(kt(n))return function ve(n,e){return pn(n).pipe(re(e),ge(e))}(n,e);if(Ct(n))return function Bt(n,e){return new at(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(Nt(n))return function je(n,e){return pn(n).pipe(re(e),ge(e))}(n,e);if($n(n))return zn(n,e);if(Rr(n))return function Zt(n,e){return new at(t=>{let r;return Ln(t,e,()=>{r=n[hr](),Ln(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>I(r?.return)&&r.return()})}(n,e);if(Er(n))return function R(n,e){return zn(is(n),e)}(n,e)}throw fn(n)}(n,e):pn(n)}function J(...n){const e=Vi(n),t=function wo(n,e){return"number"==typeof Li(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?pn(r[0]):Jr(t)(M(r,e)):Dn}class F extends j{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function Q(...n){return M(n,Vi(n))}function Ze(n={}){const{connector:e=(()=>new j),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,l,c=0,h=!1,p=!1;const g=()=>{a?.unsubscribe(),a=void 0},_=()=>{g(),o=l=void 0,h=p=!1},v=()=>{const E=o;_(),E?.unsubscribe()};return K((E,T)=>{c++,!p&&!h&&g();const P=l=l??e();T.add(()=>{c--,0===c&&!p&&!h&&(a=ut(v,i))}),P.subscribe(T),!o&&c>0&&(o=new An({next:D=>P.next(D),error:D=>{p=!0,g(),a=ut(_,t,D),P.error(D)},complete:()=>{h=!0,g(),a=ut(_,r),P.complete()}}),pn(E).subscribe(o))})(s)}}function ut(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new An({next:()=>{r.unsubscribe(),n()}});return pn(e(...t)).subscribe(r)}function xt(n,e){return K((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(fe(r,l=>{i?.unsubscribe();let c=0;const h=s++;pn(n(l,h)).subscribe(i=fe(r,p=>r.next(e?e(l,p,h,c++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function mn(n,e=wt){return n=n??rr,K((t,r)=>{let i,s=!0;t.subscribe(fe(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function rr(n,e){return n===e}function Re(n){for(let e in n)if(n[e]===Re)return e;throw Error("Could not find renamed property on target object.")}function Br(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function tn(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(tn).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Cs(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Gc=Re({__forward_ref__:Re});function $t(n){return n.__forward_ref__=$t,n.toString=function(){return tn(this())},n}function He(n){return Il(n)?n():n}function Il(n){return"function"==typeof n&&n.hasOwnProperty(Gc)&&n.__forward_ref__===$t}function Tl(n){return n&&!!n.\u0275providers}const ee="https://g.co/ng/security#xss";class S extends Error{constructor(e,t){super(function Le(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function Ie(n){return"string"==typeof n?n:null==n?"":String(n)}function Mr(n,e){throw new S(-201,!1)}function os(n,e){null==n&&function Ge(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function pe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ot(n){return{providers:n.providers||[],imports:n.imports||[]}}function Fd(n){return Op(n,Wc)||Op(n,Ma)}function Op(n,e){return n.hasOwnProperty(e)?n[e]:null}function Ld(n){return n&&(n.hasOwnProperty(Fp)||n.hasOwnProperty(uv))?n[Fp]:null}const Wc=Re({\u0275prov:Re}),Fp=Re({\u0275inj:Re}),Ma=Re({ngInjectableDef:Re}),uv=Re({ngInjectorDef:Re});var gt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(gt||{});let Lp;function yi(n){const e=Lp;return Lp=n,e}function Ud(n,e,t){const r=Fd(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&gt.Optional?null:void 0!==e?e:void Mr(tn(n))}const Qt=globalThis;class te{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=pe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Zc={},Qc="__NG_DI_FLAG__",zo="ngTempTokenPath",Hp=/\n/gm,xs="__source";let Cl;function qo(n){const e=Cl;return Cl=n,e}function zp(n,e=gt.Default){if(void 0===Cl)throw new S(-203,!1);return null===Cl?Ud(n,void 0,e):Cl.get(n,e&gt.Optional?null:void 0,e)}function B(n,e=gt.Default){return(function Vd(){return Lp}()||zp)(He(n),e)}function de(n,e=gt.Default){return B(n,Hd(e))}function Hd(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Yc(n){const e=[];for(let t=0;t<n.length;t++){const r=He(n[t]);if(Array.isArray(r)){if(0===r.length)throw new S(900,!1);let i,s=gt.Default;for(let o=0;o<r.length;o++){const a=r[o],l=bT(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}e.push(B(i,s))}else e.push(B(r))}return e}function As(n,e){return n[Qc]=e,n.prototype[Qc]=e,n}function bT(n){return n[Qc]}function Go(n){return{toString:n}.toString()}var xl=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(xl||{}),ir=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(ir||{});const ti={},_t=[],Jc=Re({\u0275cmp:Re}),$d=Re({\u0275dir:Re}),zd=Re({\u0275pipe:Re}),mv=Re({\u0275mod:Re}),vi=Re({\u0275fac:Re}),eu=Re({__NG_ELEMENT_ID__:Re}),tu=Re({__NG_ENV_ID__:Re});function qp(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function qd(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];Ui(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function Gd(n){return 3===n||4===n||6===n}function Ui(n){return 64===n.charCodeAt(0)}function Al(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||gv(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function gv(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const Wd="ng-template";function Kd(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if("string"==typeof s&&i){const o=n[r++];if(t&&"class"===s&&-1!==qp(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function Gp(n){return 4===n.type&&n.value!==Wd}function _v(n,e,t){return e===(4!==n.type||t?n.value:Wd)}function wT(n,e,t){let r=4;const i=n.attrs||[],s=function Kp(n){for(let e=0;e<n.length;e++)if(Gd(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!_v(n,l,t)||""===l&&1===e.length){if(Bi(r))return!1;o=!0}}else{const c=8&r?l:e[++a];if(8&r&&null!==n.attrs){if(!Kd(n.attrs,c,t)){if(Bi(r))return!1;o=!0}continue}const p=Wp(8&r?"class":l,i,Gp(n),t);if(-1===p){if(Bi(r))return!1;o=!0;continue}if(""!==c){let g;g=p>s?"":i[p+1].toLowerCase();const _=8&r?g:null;if(_&&-1!==qp(_,c,0)||2&r&&c!==g){if(Bi(r))return!1;o=!0}}}}else{if(!o&&!Bi(r)&&!Bi(l))return!1;if(o&&Bi(l))continue;o=!1,r=l|1&r}}return Bi(r)||o}function Bi(n){return 0==(1&n)}function Wp(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function yv(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function Zd(n,e,t=!1){for(let r=0;r<e.length;r++)if(wT(n,e[r],t))return!0;return!1}function Zp(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function Qp(n,e){return n?":not("+e.trim()+")":e}function Yp(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Bi(o)&&(e+=Qp(s,i),i=""),r=o,s=s||!Bi(r);t++}return""!==i&&(e+=Qp(s,i)),e}function Hr(n){return Go(()=>{const e=Ev(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===xl.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ir.Emulated,styles:n.styles||_t,_:null,schemas:n.schemas||null,tView:null,id:""};Xd(t);const r=n.dependencies;return t.directiveDefs=Jd(r,!1),t.pipeDefs=Jd(r,!0),t.id=function IT(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function vv(n){return It(n)||fr(n)}function em(n){return null!==n}function jt(n){return Go(()=>({type:n.type,bootstrap:n.bootstrap||_t,declarations:n.declarations||_t,imports:n.imports||_t,exports:n.exports||_t,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function bv(n,e){if(null==n)return ti;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function Te(n){return Go(()=>{const e=Ev(n);return Xd(e),e})}function It(n){return n[Jc]||null}function fr(n){return n[$d]||null}function Tr(n){return n[zd]||null}function ni(n,e){const t=n[mv]||null;if(!t&&!0===e)throw new Error(`Type ${tn(n)} does not have '\u0275mod' property.`);return t}function Ev(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||ti,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||_t,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:bv(n.inputs,e),outputs:bv(n.outputs)}}function Xd(n){n.features?.forEach(e=>e(n))}function Jd(n,e){if(!n)return null;const t=e?Tr:vv;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(em)}const _n=0,be=1,Je=2,yn=3,ji=4,nu=5,Cr=6,Dl=7,qn=8,Ws=9,Sl=10,et=11,Pa=12,wv=13,Ko=14,Gn=15,Na=16,Rl=17,as=18,ru=19,eh=20,Zo=21,Ds=22,iu=23,ka=24,yt=25,th=1,nh=2,Ks=7,Oa=9,Pr=11;function bi(n){return Array.isArray(n)&&"object"==typeof n[th]}function ri(n){return Array.isArray(n)&&!0===n[th]}function Iv(n){return 0!=(4&n.flags)}function Ml(n){return n.componentOffset>-1}function rm(n){return 1==(1&n.flags)}function Hi(n){return!!n.template}function im(n){return 0!=(512&n[Je])}function Fa(n,e){return n.hasOwnProperty(vi)?n[vi]:null}let $r=null,Ss=!1;function ls(n){const e=$r;return $r=n,e}const Dv={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Sv(n){if(!Yo(n)||n.dirty){if(!n.producerMustRecompute(n)&&!Rv(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function ih(n){n.dirty=!0,function Wn(n){if(void 0===n.liveConsumerNode)return;const e=Ss;Ss=!0;try{for(const t of n.liveConsumerNode)t.dirty||ih(t)}finally{Ss=e}}(n),n.consumerMarkedDirty?.(n)}function lm(n){return n&&(n.nextProducerIndex=0),ls(n)}function ou(n,e){if(ls(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Yo(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)sh(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Rv(n){La(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Sv(t),r!==t.version))return!0}return!1}function Mv(n){if(La(n),Yo(n))for(let e=0;e<n.producerNode.length;e++)sh(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function sh(n,e){if(function kl(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),La(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)sh(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];La(i),i.producerIndexOfThis[r]=e}}function Yo(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function La(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let oh=null;const Lv=()=>{},fm=(()=>({...Dv,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:Lv}))();class MT{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function $i(){return Vv}function Vv(n){return n.type.prototype.ngOnChanges&&(n.setInput=PT),Uv}function Uv(){const n=jv(this),e=n?.current;if(e){const t=n.previous;if(t===ti)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function PT(n,e,t,r){const i=this.declaredInputs[t],s=jv(n)||function pm(n,e){return n[Bv]=e}(n,{previous:ti,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[i];o[i]=new MT(l&&l.currentValue,e,a===ti),n[r]=e}$i.ngInherit=!0;const Bv="__ngSimpleChanges__";function jv(n){return n[Bv]||null}const Zs=function(n,e,t){};function Yt(n){for(;Array.isArray(n);)n=n[_n];return n}function Fl(n,e){return Yt(e[n])}function Ei(n,e){return Yt(e[n.index])}function Ll(n,e){return n.data[e]}function ii(n,e){const t=e[n];return bi(t)?t:t[_n]}function Qs(n,e){return null==e?null:n[e]}function ym(n){n[Rl]=0}function FT(n){1024&n[Je]||(n[Je]|=1024,uh(n,1))}function $v(n){1024&n[Je]&&(n[Je]&=-1025,uh(n,-1))}function uh(n,e){let t=n[yn];if(null===t)return;t[nu]+=e;let r=t;for(t=t[yn];null!==t&&(1===e&&1===r[nu]||-1===e&&0===r[nu]);)t[nu]+=e,r=t,t=t[yn]}const We={lFrame:eb(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Gv(){return We.bindingsEnabled}function Xo(){return null!==We.skipHydrationRootTNode}function se(){return We.lFrame.lView}function St(){return We.lFrame.tView}function Nr(){let n=Kv();for(;null!==n&&64===n.type;)n=n.parent;return n}function Kv(){return We.lFrame.currentTNode}function Ys(n,e){const t=We.lFrame;t.currentTNode=n,t.isParent=e}function Tm(){return We.lFrame.isParent}function cu(){We.lFrame.isParent=!1}function Vl(){return We.lFrame.bindingIndex++}function HT(n,e){const t=We.lFrame;t.bindingIndex=t.bindingRootIndex=n,du(e)}function du(n){We.lFrame.currentDirectiveIndex=n}function Xv(){return We.lFrame.currentQueryIndex}function Am(n){We.lFrame.currentQueryIndex=n}function Dm(n){const e=n[be];return 2===e.type?e.declTNode:1===e.type?n[Cr]:null}function Jv(n,e,t){if(t&gt.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&gt.Host||(i=Dm(s),null===i||(s=s[Ko],10&i.type))););if(null===i)return!1;e=i,n=s}const r=We.lFrame=Rm();return r.currentTNode=e,r.lView=n,!0}function Sm(n){const e=Rm(),t=n[be];We.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Rm(){const n=We.lFrame,e=null===n?null:n.child;return null===e?eb(n):e}function eb(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function hu(){const n=We.lFrame;return We.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const tb=hu;function Mm(){const n=hu();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function si(){return We.lFrame.selectedIndex}function Ua(n){We.lFrame.selectedIndex=n}function Sn(){const n=We.lFrame;return Ll(n.tView,n.selectedIndex)}let rb=!0;function fh(){return rb}function xo(n){rb=n}function ph(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),null!=h&&(n.destroyHooks??=[]).push(t,h)}}function mh(n,e,t){_h(n,e,3,t)}function gh(n,e,t,r){(3&n[Je])===t&&_h(n,e,t,r)}function Nm(n,e){let t=n[Je];(3&t)===e&&(t&=8191,t+=1,n[Je]=t)}function _h(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let l=void 0!==r?65535&n[Rl]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(n[Rl]+=65536),(a<s||-1==s)&&(ZT(n,t,e,l),n[Rl]=(4294901760&n[Rl])+l+2),l++}function yh(n,e){Zs(4,n,e);const t=ls(null);try{e.call(n)}finally{ls(t),Zs(5,n,e)}}function ZT(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[Je]>>13<n[Rl]>>16&&(3&n[Je])===e&&(n[Je]+=8192,yh(a,s)):yh(a,s)}const Jo=-1;class fu{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function vh(n){return n!==Jo}function Ul(n){return 32767&n}function mu(n,e){let t=function YT(n){return n>>16}(n),r=e;for(;t>0;)r=r[Ko],t--;return r}let Fm=!0;function bh(n){const e=Fm;return Fm=n,e}const Lm=255,sb=5;let kk=0;const eo={};function Eh(n,e){const t=wh(n,e);if(-1!==t)return t;const r=e[be];r.firstCreatePass&&(n.injectorIndex=e.length,Vm(r.data,n),Vm(e,null),Vm(r.blueprint,null));const i=Ih(n,e),s=n.injectorIndex;if(vh(i)){const o=Ul(i),a=mu(i,e),l=a[be].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=i,s}function Vm(n,e){n.push(0,0,0,0,0,0,0,0,e)}function wh(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Ih(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=db(i),null===r)return Jo;if(t++,i=i[Ko],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return Jo}function gu(n,e,t){!function Ba(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(eu)&&(r=t[eu]),null==r&&(r=t[eu]=kk++);const i=r&Lm;e.data[n+(i>>sb)]|=1<<i}(n,e,t)}function ob(n,e,t){if(t&gt.Optional||void 0!==n)return n;Mr()}function Th(n,e,t,r){if(t&gt.Optional&&void 0===r&&(r=null),!(t&(gt.Self|gt.Host))){const i=n[Ws],s=yi(void 0);try{return i?i.get(e,r,t&gt.Optional):Ud(e,r,t&gt.Optional)}finally{yi(s)}}return ob(r,0,t)}function ab(n,e,t,r=gt.Default,i){if(null!==n){if(2048&e[Je]&&!(r&gt.Self)){const o=function tC(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[Je]&&!(512&o[Je]);){const a=lb(s,o,t,r|gt.Self,eo);if(a!==eo)return a;let l=s.parent;if(!l){const c=o[eh];if(c){const h=c.get(t,eo,r);if(h!==eo)return h}l=db(o),o=o[Ko]}s=l}return i}(n,e,t,r,eo);if(o!==eo)return o}const s=lb(n,e,t,r,eo);if(s!==eo)return s}return Th(e,t,r,i)}function lb(n,e,t,r,i){const s=function JT(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(eu)?n[eu]:void 0;return"number"==typeof e?e>=0?e&Lm:eC:e}(t);if("function"==typeof s){if(!Jv(e,n,r))return r&gt.Host?ob(i,0,r):Th(e,t,r,i);try{let o;if(o=s(r),null!=o||r&gt.Optional)return o;Mr()}finally{tb()}}else if("number"==typeof s){let o=null,a=wh(n,e),l=Jo,c=r&gt.Host?e[Gn][Cr]:null;for((-1===a||r&gt.SkipSelf)&&(l=-1===a?Ih(n,e):e[a+8],l!==Jo&&ub(r,!1)?(o=e[be],a=Ul(l),e=mu(l,e)):a=-1);-1!==a;){const h=e[be];if(cb(s,a,h.data)){const p=Um(a,e,t,o,r,c);if(p!==eo)return p}l=e[a+8],l!==Jo&&ub(r,e[be].data[a+8]===c)&&cb(s,a,e)?(o=h,a=Ul(l),e=mu(l,e)):a=-1}}return i}function Um(n,e,t,r,i,s){const o=e[be],a=o.data[n+8],h=Ch(a,o,t,null==r?Ml(a)&&Fm:r!=o&&0!=(3&a.type),i&gt.Host&&s===a);return null!==h?ja(e,o,h,a):eo}function Ch(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,h=s>>20,g=i?a+h:n.directiveEnd;for(let _=r?a:a+h;_<g;_++){const v=o[_];if(_<l&&t===v||_>=l&&v.type===t)return _}if(i){const _=o[l];if(_&&Hi(_)&&_.type===t)return l}return null}function ja(n,e,t,r){let i=n[t];const s=e.data;if(function ib(n){return n instanceof fu}(i)){const o=i;o.resolving&&function jr(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new S(-200,`Circular dependency in DI detected for ${n}${t}`)}(function Ve(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ie(n)}(s[t]));const a=bh(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?yi(o.injectImpl):null;Jv(n,r,gt.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function KT(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Vv(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==c&&yi(c),bh(a),o.resolving=!1,tb()}}return i}function cb(n,e,t){return!!(t[e+(n>>sb)]&1<<n)}function ub(n,e){return!(n&gt.Self||n&gt.Host&&e)}class oi{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return ab(this._tNode,this._lView,e,Hd(r),t)}}function eC(){return new oi(Nr(),se())}function pr(n){return Go(()=>{const e=n.prototype.constructor,t=e[vi]||_u(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[vi]||_u(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function _u(n){return Il(n)?()=>{const e=_u(He(n));return e&&e()}:Fa(n)}function db(n){const e=n[be],t=e.type;return 2===t?e.declTNode:1===t?n[Cr]:null}function ea(n){return function XT(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(Gd(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(Nr(),n)}const Hl="__parameters__";function zl(n,e,t){return Go(()=>{const r=function Hm(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,c,h){const p=l.hasOwnProperty(Hl)?l[Hl]:Object.defineProperty(l,Hl,{value:[]})[Hl];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function xr(n,e){n.forEach(t=>Array.isArray(t)?xr(t,e):e(t))}function Gl(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function vu(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function bu(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}function zi(n,e,t){let r=Ha(n,e);return r>=0?n[1|r]=t:(r=~r,function iC(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function to(n,e){const t=Ha(n,e);if(t>=0)return n[1|t]}function Ha(n,e){return function mb(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const Ao=As(zl("Optional"),8),$a=As(zl("SkipSelf"),4);function Cb(n){return 128==(128&n.flags)}var Wl=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Wl||{});const hC=new Map;let M6=0;const pC="__ngContext__";function Ti(n,e){bi(e)?(n[pC]=e[ru],function N6(n){hC.set(n[ru],n)}(e)):n[pC]=e}let mC;function gC(n,e){return mC(n,e)}function Ym(n){const e=n[yn];return ri(e)?e[yn]:e}function nO(n){return iO(n[Pa])}function rO(n){return iO(n[ji])}function iO(n){for(;null!==n&&!ri(n);)n=n[ji];return n}function Rh(n,e,t,r,i){if(null!=r){let s,o=!1;ri(r)?s=r:bi(r)&&(o=!0,r=r[_n]);const a=Yt(r);0===n&&null!==t?null==i?lO(e,t,a):Tu(e,t,a,i||null,!0):1===n&&null!==t?Tu(e,t,a,i||null,!0):2===n?function Pb(n,e,t){const r=Rb(n,e);r&&function X6(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function t8(n,e,t,r,i){const s=t[Ks];s!==Yt(t)&&Rh(e,n,r,s,i);for(let a=Pr;a<t.length;a++){const l=t[a];Jm(l[be],l,n,e,r,s)}}(e,n,s,t,i)}}function Db(n,e,t){return n.createElement(e,t)}function oO(n,e){const t=n[Oa],r=t.indexOf(e);$v(e),t.splice(r,1)}function Sb(n,e){if(n.length<=Pr)return;const t=Pr+e,r=n[t];if(r){const i=r[Na];null!==i&&i!==n&&oO(i,r),e>0&&(n[t-1][ji]=r[ji]);const s=vu(n,Pr+e);!function z6(n,e){Jm(n,e,e[et],2,null,null),e[_n]=null,e[Cr]=null}(r[be],r);const o=s[as];null!==o&&o.detachView(s[be]),r[yn]=null,r[ji]=null,r[Je]&=-129}return r}function yC(n,e){if(!(256&e[Je])){const t=e[et];e[iu]&&Mv(e[iu]),e[ka]&&Mv(e[ka]),t.destroyNode&&Jm(n,e,t,3,null,null),function W6(n){let e=n[Pa];if(!e)return vC(n[be],n);for(;e;){let t=null;if(bi(e))t=e[Pa];else{const r=e[Pr];r&&(t=r)}if(!t){for(;e&&!e[ji]&&e!==n;)bi(e)&&vC(e[be],e),e=e[yn];null===e&&(e=n),bi(e)&&vC(e[be],e),t=e&&e[ji]}e=t}}(e)}}function vC(n,e){if(!(256&e[Je])){e[Je]&=-129,e[Je]|=256,function Y6(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof fu)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];Zs(4,a,l);try{l.call(a)}finally{Zs(5,a,l)}}else{Zs(4,i,s);try{s.call(i)}finally{Zs(5,i,s)}}}}}(n,e),function Q6(n,e){const t=n.cleanup,r=e[Dl];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[Dl]=null);const i=e[Zo];if(null!==i){e[Zo]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[be].type&&e[et].destroy();const t=e[Na];if(null!==t&&ri(e[yn])){t!==e[yn]&&oO(t,e);const r=e[as];null!==r&&r.detachView(n)}!function k6(n){hC.delete(n[ru])}(e)}}function bC(n,e,t){return function aO(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[_n];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===ir.None||s===ir.Emulated)return null}return Ei(r,t)}}(n,e.parent,t)}function Tu(n,e,t,r,i){n.insertBefore(e,t,r,i)}function lO(n,e,t){n.appendChild(e,t)}function cO(n,e,t,r,i){null!==r?Tu(n,e,t,r,i):lO(n,e,t)}function Rb(n,e){return n.parentNode(e)}function uO(n,e,t){return hO(n,e,t)}let EC,Nb,CC,kb,hO=function dO(n,e,t){return 40&n.type?Ei(n,t):null};function Mb(n,e,t,r){const i=bC(n,r,e),s=e[et],a=uO(r.parent||e[Cr],r,e);if(null!=i)if(Array.isArray(t))for(let l=0;l<t.length;l++)cO(s,i,t[l],a,!1);else cO(s,i,t,a,!1);void 0!==EC&&EC(s,r,e,t,i)}function Xm(n,e){if(null!==e){const t=e.type;if(3&t)return Ei(e,n);if(4&t)return wC(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Xm(n,r);{const i=n[e.index];return ri(i)?wC(-1,i):Yt(i)}}if(32&t)return gC(e,n)()||Yt(n[e.index]);{const r=pO(n,e);return null!==r?Array.isArray(r)?r[0]:Xm(Ym(n[Gn]),r):Xm(n,e.next)}}return null}function pO(n,e){return null!==e?n[Gn][Cr].projection[e.projection]:null}function wC(n,e){const t=Pr+n+1;if(t<e.length){const r=e[t],i=r[be].firstChild;if(null!==i)return Xm(r,i)}return e[Ks]}function IC(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],l=t.type;if(o&&0===e&&(a&&Ti(Yt(a),r),t.flags|=2),32!=(32&t.flags))if(8&l)IC(n,e,t.child,r,i,s,!1),Rh(e,n,i,a,s);else if(32&l){const c=gC(t,r);let h;for(;h=c();)Rh(e,n,i,h,s);Rh(e,n,i,a,s)}else 16&l?gO(n,e,r,t,i,s):Rh(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Jm(n,e,t,r,i,s){IC(t,r,n.firstChild,e,i,s,!1)}function gO(n,e,t,r,i,s){const o=t[Gn],l=o[Cr].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Rh(e,n,i,l[c],s);else{let c=l;const h=o[yn];Cb(r)&&(c.flags|=128),IC(n,e,c,h,i,s,!0)}}function _O(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function yO(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&qd(n,e,r),null!==i&&_O(n,e,i),null!==s&&function r8(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function Mh(n){return function TC(){if(void 0===Nb&&(Nb=null,Qt.trustedTypes))try{Nb=Qt.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Nb}()?.createHTML(n)||n}function EO(n){return function xC(){if(void 0===kb&&(kb=null,Qt.trustedTypes))try{kb=Qt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return kb}()?.createScriptURL(n)||n}class Cu{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ee})`}}class l8 extends Cu{getTypeName(){return"HTML"}}class c8 extends Cu{getTypeName(){return"Style"}}class u8 extends Cu{getTypeName(){return"Script"}}class d8 extends Cu{getTypeName(){return"URL"}}class h8 extends Cu{getTypeName(){return"ResourceURL"}}function Ms(n){return n instanceof Cu?n.changingThisBreaksApplicationSecurity:n}function na(n,e){const t=function f8(n){return n instanceof Cu&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${ee})`)}return t===e}class v8{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Mh(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class b8{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=Mh(e),t}}const w8=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Ob(n){return(n=String(n)).match(w8)?n:"unsafe:"+n}function za(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function eg(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const IO=za("area,br,col,hr,img,wbr"),TO=za("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),CO=za("rp,rt"),AC=eg(IO,eg(TO,za("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),eg(CO,za("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),eg(CO,TO)),DC=za("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),xO=eg(DC,za("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),za("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),I8=za("script,style,template");class T8{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!AC.hasOwnProperty(t))return this.sanitizedSomething=!0,!I8.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),o=s.name,a=o.toLowerCase();if(!xO.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;DC[a]&&(l=Ob(l)),this.buf.push(" ",o,'="',AO(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();AC.hasOwnProperty(t)&&!IO.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(AO(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const C8=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,x8=/([^\#-~ |!])/g;function AO(n){return n.replace(/&/g,"&amp;").replace(C8,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(x8,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Fb;function DO(n,e){let t=null;try{Fb=Fb||function wO(n){const e=new b8(n);return function E8(){try{return!!(new window.DOMParser).parseFromString(Mh(""),"text/html")}catch{return!1}}()?new v8(e):e}(n);let r=e?String(e):"";t=Fb.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=Fb.getInertBodyElement(r)}while(r!==s);return Mh((new T8).sanitizeChildren(SC(t)||t))}finally{if(t){const r=SC(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function SC(n){return"content"in n&&function A8(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var ai=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(ai||{});function SO(n){const e=tg();return e?e.sanitize(ai.URL,n)||"":na(n,"URL")?Ms(n):Ob(Ie(n))}function RO(n){const e=tg();if(e)return EO(e.sanitize(ai.RESOURCE_URL,n)||"");if(na(n,"ResourceURL"))return EO(Ms(n));throw new S(904,!1)}function tg(){const n=se();return n&&n[Sl].sanitizer}const ng=new te("ENVIRONMENT_INITIALIZER"),PO=new te("INJECTOR",-1),NO=new te("INJECTOR_DEF_TYPES");class RC{get(e,t=Zc){if(t===Zc){const r=new Error(`NullInjectorError: No provider for ${tn(e)}!`);throw r.name="NullInjectorError",r}return t}}function k8(...n){return{\u0275providers:OO(0,n),\u0275fromNgModule:!0}}function OO(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return xr(e,o=>{const a=o;Lb(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&FO(i,s),t}function FO(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];MC(i,s=>{e(s,r)})}}function Lb(n,e,t,r){if(!(n=He(n)))return!1;let i=null,s=Ld(n);const o=!s&&It(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const l=n.ngModule;if(s=Ld(l),!s)return!1;i=l}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)Lb(c,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;r.add(i);try{xr(s.imports,h=>{Lb(h,e,t,r)&&(c||=[],c.push(h))})}finally{}void 0!==c&&FO(c,e)}if(!a){const c=Fa(i)||(()=>new i);e({provide:i,useFactory:c,deps:_t},i),e({provide:NO,useValue:i,multi:!0},i),e({provide:ng,useValue:()=>B(i),multi:!0},i)}const l=s.providers;if(null!=l&&!a){const c=n;MC(l,h=>{e(h,c)})}}}return i!==n&&void 0!==n.providers}function MC(n,e){for(let t of n)Tl(t)&&(t=t.\u0275providers),Array.isArray(t)?MC(t,e):e(t)}const O8=Re({provide:String,useValue:Re});function PC(n){return null!==n&&"object"==typeof n&&O8 in n}function xu(n){return"function"==typeof n}const NC=new te("Set Injector scope."),Vb={},L8={};let kC;function Ub(){return void 0===kC&&(kC=new RC),kC}class no{}class Nh extends no{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,FC(e,o=>this.processProvider(o)),this.records.set(PO,kh(void 0,this)),i.has("environment")&&this.records.set(no,kh(void 0,this));const s=this.records.get(NC);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(NO.multi,_t,gt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=qo(this),r=yi(void 0);try{return e()}finally{qo(t),yi(r)}}get(e,t=Zc,r=gt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(tu))return e[tu](this);r=Hd(r);const s=qo(this),o=yi(void 0);try{if(!(r&gt.SkipSelf)){let l=this.records.get(e);if(void 0===l){const c=function H8(n){return"function"==typeof n||"object"==typeof n&&n instanceof te}(e)&&Fd(e);l=c&&this.injectableDefInScope(c)?kh(OC(e),Vb):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(r&gt.Self?Ub():this.parent).get(e,t=r&gt.Optional&&t===Zc?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[zo]=a[zo]||[]).unshift(tn(e)),s)throw a;return function ET(n,e,t,r){const i=n[zo];throw e[xs]&&i.unshift(e[xs]),n.message=function Xc(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=tn(e);if(Array.isArray(e))i=e.map(tn).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):tn(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Hp,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[zo]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{yi(o),qo(s)}}resolveInjectorInitializers(){const e=qo(this),t=yi(void 0);try{const i=this.get(ng.multi,_t,gt.Self);for(const s of i)s()}finally{qo(e),yi(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(tn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new S(205,!1)}processProvider(e){let t=xu(e=He(e))?e:He(e&&e.provide);const r=function U8(n){return PC(n)?kh(void 0,n.useValue):kh(UO(n),Vb)}(e);if(xu(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=kh(void 0,Vb,!0),i.factory=()=>Yc(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===Vb&&(t.value=L8,t.value=t.factory()),"object"==typeof t.value&&t.value&&function j8(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=He(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function OC(n){const e=Fd(n),t=null!==e?e.factory:Fa(n);if(null!==t)return t;if(n instanceof te)throw new S(204,!1);if(n instanceof Function)return function V8(n){const e=n.length;if(e>0)throw bu(e,"?"),new S(204,!1);const t=function cv(n){return n&&(n[Wc]||n[Ma])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new S(204,!1)}function UO(n,e,t){let r;if(xu(n)){const i=He(n);return Fa(i)||OC(i)}if(PC(n))r=()=>He(n.useValue);else if(function VO(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Yc(n.deps||[]));else if(function LO(n){return!(!n||!n.useExisting)}(n))r=()=>B(He(n.useExisting));else{const i=He(n&&(n.useClass||n.provide));if(!function B8(n){return!!n.deps}(n))return Fa(i)||OC(i);r=()=>new i(...Yc(n.deps))}return r}function kh(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function FC(n,e){for(const t of n)Array.isArray(t)?FC(t,e):t&&Tl(t)?FC(t.\u0275providers,e):e(t)}const Bb=new te("AppId",{providedIn:"root",factory:()=>$8}),$8="ng",BO=new te("Platform Initializer"),Ps=new te("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Oh=new te("AnimationModuleType"),LC=new te("CSP nonce",{providedIn:"root",factory:()=>function Ph(){if(void 0!==CC)return CC;if(typeof document<"u")return document;throw new S(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let jO=(n,e,t)=>null;function qC(n,e,t=!1){return jO(n,e,t)}class J8{}class zO{}class t9{resolveComponentFactory(e){throw function e9(n){const e=Error(`No component factory found for ${tn(n)}.`);return e.ngComponent=n,e}(e)}}let Gb=(()=>{class n{static#e=this.NULL=new t9}return n})();function n9(){return Vh(Nr(),se())}function Vh(n,e){return new Zn(Ei(n,e))}let Zn=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=n9}return n})();function r9(n){return n instanceof Zn?n.nativeElement:n}class sg{}let qa=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function i9(){const n=se(),t=ii(Nr().index,n);return(bi(t)?t:n)[et]}()}return n})(),s9=(()=>{class n{static#e=this.\u0275prov=pe({token:n,providedIn:"root",factory:()=>null})}return n})();class Kl{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const GO=new Kl("16.2.12"),KC={};function QO(n,e=null,t=null,r){const i=YO(n,e,t,r);return i.resolveInjectorInitializers(),i}function YO(n,e=null,t=null,r,i=new Set){const s=[t||_t,k8(n)];return r=r||("object"==typeof n?void 0:tn(n)),new Nh(s,e||Ub(),r||null,i)}let hs=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=Zc;static#t=this.NULL=new RC;static create(t,r){if(Array.isArray(t))return QO({name:""},r,t,"");{const i=t.name??"";return QO({name:i},t.parent,t.providers,i)}}static#n=this.\u0275prov=pe({token:n,providedIn:"any",factory:()=>B(PO)});static#r=this.__NG_ELEMENT_ID__=-1}return n})();function QC(n){return n.ngOriginalError}class ro{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&QC(e);for(;t&&QC(t);)t=QC(t);return t||null}}function XC(n){return e=>{setTimeout(n,void 0,e)}}const Qn=class h9 extends j{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=XC(s),i&&(i=XC(i)),o&&(o=XC(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof mt&&e.add(a),a}};function JO(...n){}class Xe{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Qn(!1),this.onMicrotaskEmpty=new Qn(!1),this.onStable=new Qn(!1),this.onError=new Qn(!1),typeof Zone>"u")throw new S(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function f9(){const n="function"==typeof Qt.requestAnimationFrame;let e=Qt[n?"requestAnimationFrame":"setTimeout"],t=Qt[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function g9(n){const e=()=>{!function m9(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Qt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,ex(n),n.isCheckStableRunning=!0,JC(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),ex(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(function y9(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,s,o,a);try{return e1(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),t1(n)}},onInvoke:(t,r,i,s,o,a,l)=>{try{return e1(n),t.invoke(i,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),t1(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,ex(n),JC(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Xe.isInAngularZone())throw new S(909,!1)}static assertNotInAngularZone(){if(Xe.isInAngularZone())throw new S(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,p9,JO,JO);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const p9={};function JC(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function ex(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function e1(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function t1(n){n._nesting--,JC(n)}class _9{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Qn,this.onMicrotaskEmpty=new Qn,this.onStable=new Qn,this.onError=new Qn}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const n1=new te("",{providedIn:"root",factory:r1});function r1(){const n=de(Xe);let e=!0;return J(new at(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new at(i=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{Xe.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=n.onUnstable.subscribe(()=>{Xe.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(Ze()))}function Ga(n){return n instanceof Function?n():n}let tx=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=pe({token:n,providedIn:"root",factory:()=>new n})}return n})();function og(n){for(;n;){n[Je]|=64;const e=Ym(n);if(im(n)&&!e)return n;n=e}return null}const c1=new te("",{providedIn:"root",factory:()=>!1});let Kb=null;function f1(n,e){return n[e]??g1()}function p1(n,e){const t=g1();t.producerNode?.length&&(n[e]=Kb,t.lView=n,Kb=m1())}const D9={...Dv,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{og(n.lView)},lView:null};function m1(){return Object.create(D9)}function g1(){return Kb??=m1(),Kb}const lt={};function sr(n){_1(St(),se(),si()+n,!1)}function _1(n,e,t,r){if(!r)if(3==(3&e[Je])){const s=n.preOrderCheckHooks;null!==s&&mh(e,s,t)}else{const s=n.preOrderHooks;null!==s&&gh(e,s,0,t)}Ua(t)}function H(n,e=gt.Default){const t=se();return null===t?B(n,e):ab(Nr(),t,He(n),e)}function nx(){throw new Error("invalid")}function Zb(n,e,t,r,i,s,o,a,l,c,h){const p=e.blueprint.slice();return p[_n]=i,p[Je]=140|r,(null!==c||n&&2048&n[Je])&&(p[Je]|=2048),ym(p),p[yn]=p[Ko]=n,p[qn]=t,p[Sl]=o||n&&n[Sl],p[et]=a||n&&n[et],p[Ws]=l||n&&n[Ws]||null,p[Cr]=s,p[ru]=function P6(){return M6++}(),p[Ds]=h,p[eh]=c,p[Gn]=2==e.type?n[Gn]:p,p}function jh(n,e,t,r,i){let s=n.data[e];if(null===s)s=function rx(n,e,t,r,i){const s=Kv(),o=Tm(),l=n.data[e]=function F9(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return Xo()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(n,e,t,r,i),function Qv(){return We.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function Va(){const n=We.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Ys(s,!0),s}function ag(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function y1(n,e,t,r,i){const s=f1(e,iu),o=si(),a=2&r;try{Ua(-1),a&&e.length>yt&&_1(n,e,yt,!1),Zs(a?2:0,i);const c=a?s:null,h=lm(c);try{null!==c&&(c.dirty=!1),t(r,i)}finally{ou(c,h)}}finally{a&&null===e[iu]&&p1(e,iu),Ua(o),Zs(a?3:1,i)}}function ix(n,e,t){if(Iv(e)){const r=ls(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{ls(r)}}}function sx(n,e,t){Gv()&&(function $9(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;Ml(t)&&function Q9(n,e,t){const r=Ei(e,n),i=v1(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=Qb(n,Zb(n,i,null,o,r,e,null,n[Sl].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Eh(t,e),Ti(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const l=n.data[a],c=ja(e,n,a,t);Ti(c,e),null!==o&&Y9(0,a-i,c,l,0,o),Hi(l)&&(ii(t.index,e)[qn]=ja(e,n,a,t))}}(n,e,t,Ei(t,e)),64==(64&t.flags)&&T1(n,e,t))}function ox(n,e,t=Ei){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function v1(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=ax(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function ax(n,e,t,r,i,s,o,a,l,c,h){const p=yt+r,g=p+i,_=function R9(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:lt);return t}(p,g),v="function"==typeof c?c():c;return _[be]={type:n,blueprint:_,template:t,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:v,incompleteFirstPass:!1,ssrId:h}}let b1=n=>null;function E1(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?w1(t,e,i,s):r.hasOwnProperty(i)&&w1(t,e,r[i],s)}return t}function w1(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function Ns(n,e,t,r,i,s,o,a){const l=Ei(e,t);let h,c=e.inputs;!a&&null!=c&&(h=c[r])?(hx(n,t,h,r,i),Ml(e)&&function U9(n,e){const t=ii(e,n);16&t[Je]||(t[Je]|=64)}(t,e.index)):3&e.type&&(r=function V9(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(l,r,i))}function lx(n,e,t,r){if(Gv()){const i=null===r?null:{"":-1},s=function q9(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(Zd(e,o.selectors,!1))if(r||(r=[]),Hi(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),cx(n,e,a.length)}else r.unshift(o),cx(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&I1(n,e,t,o,i,a),i&&function G9(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new S(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=Al(t.mergedAttrs,t.attrs)}function I1(n,e,t,r,i,s){for(let c=0;c<r.length;c++)gu(Eh(t,e),n,r[c].type);!function K9(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let c=0;c<r.length;c++){const h=r[c];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,l=ag(n,e,r.length,null);for(let c=0;c<r.length;c++){const h=r[c];t.mergedAttrs=Al(t.mergedAttrs,h.hostAttrs),Z9(n,t,e,l,h),W9(l,h,i),null!==h.contentQueries&&(t.flags|=4),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(t.flags|=64);const p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}!function L9(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let l=null,c=null;for(let h=e.directiveStart;h<i;h++){const p=s[h],g=t?t.get(p):null,v=g?g.outputs:null;l=E1(p.inputs,h,l,g?g.inputs:null),c=E1(p.outputs,h,c,v);const E=null===l||null===o||Gp(e)?null:X9(l,h,o);a.push(E)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(n,t,s)}function T1(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function Yv(){return We.lFrame.currentDirectiveIndex}();try{Ua(s);for(let a=r;a<i;a++){const l=n.data[a],c=e[a];du(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&z9(l,c)}}finally{Ua(-1),du(o)}}function z9(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function cx(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function W9(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Hi(e)&&(t[""]=n)}}function Z9(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=Fa(i.type)),o=new fu(s,Hi(i),H);n.blueprint[r]=o,t[r]=o,function j9(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function H9(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,ag(n,t,i.hostVars,lt),i)}function ra(n,e,t,r,i,s){const o=Ei(n,e);!function ux(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?Ie(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[et],o,s,n.value,t,r,i)}function Y9(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)C1(r,t,o[a++],o[a++],o[a++])}function C1(n,e,t,r,i){const s=ls(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{ls(s)}}function X9(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function x1(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function A1(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];Am(t[r]),o.contentQueries(2,e[s],s)}}}function Qb(n,e){return n[Pa]?n[wv][ji]=e:n[Pa]=e,n[wv]=e,e}function dx(n,e,t){Am(0);const r=ls(null);try{e(n,t)}finally{ls(r)}}function D1(n){return n[Dl]||(n[Dl]=[])}function S1(n){return n.cleanup||(n.cleanup=[])}function M1(n,e){const t=n[Ws],r=t?t.get(ro,null):null;r&&r.handleError(e)}function hx(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];C1(n.data[o],e[o],r,a,i)}}function J9(n,e){const t=ii(e,n),r=t[be];!function eK(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[_n];null!==i&&null===t[Ds]&&(t[Ds]=qC(i,t[Ws])),fx(r,t,t[qn])}function fx(n,e,t){Sm(e);try{const r=n.viewQuery;null!==r&&dx(1,r,t);const i=n.template;null!==i&&y1(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&A1(n,e),n.staticViewQueries&&dx(2,n.viewQuery,t);const s=n.components;null!==s&&function tK(n,e){for(let t=0;t<e.length;t++)J9(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Je]&=-5,Mm()}}let P1=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function RT(n,e,t){const r=Object.create(fm);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>ih(r),run:()=>{if(r.dirty=!1,r.hasRun&&!Rv(r))return;r.hasRun=!0;const o=lm(r);try{r.cleanupFn(),r.cleanupFn=Lv,r.fn(i)}finally{ou(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(t,c=>{this.all.has(c)&&this.queue.set(c,s)},i);let a;this.all.add(o),o.notify();const l=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(l),{destroy:l}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=pe({token:n,providedIn:"root",factory:()=>new n})}return n})();function Yb(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Cs(i,a):2==s&&(r=Cs(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function lg(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];null!==s&&r.push(Yt(s)),ri(s)&&N1(s,r);const o=t.type;if(8&o)lg(n,e,t.child,r);else if(32&o){const a=gC(t,e);let l;for(;l=a();)r.push(l)}else if(16&o){const a=pO(e,t);if(Array.isArray(a))r.push(...a);else{const l=Ym(e[Gn]);lg(l[be],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function N1(n,e){for(let t=Pr;t<n.length;t++){const r=n[t],i=r[be].firstChild;null!==i&&lg(r[be],r,i,e)}n[Ks]!==n[_n]&&e.push(n[Ks])}function Xb(n,e,t,r=!0){const i=e[Sl],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{k1(n,e,n.template,t)}catch(l){throw r&&M1(e,l),l}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function k1(n,e,t,r){const i=e[Je];if(256!=(256&i)){e[Sl].effectManager?.flush(),Sm(e);try{ym(e),function hh(n){return We.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&y1(n,e,t,2,r);const o=3==(3&i);if(o){const c=n.preOrderCheckHooks;null!==c&&mh(e,c,null)}else{const c=n.preOrderHooks;null!==c&&gh(e,c,0,null),Nm(e,0)}if(function iK(n){for(let e=nO(n);null!==e;e=rO(e)){if(!e[nh])continue;const t=e[Oa];for(let r=0;r<t.length;r++){FT(t[r])}}}(e),O1(e,2),null!==n.contentQueries&&A1(n,e),o){const c=n.contentCheckHooks;null!==c&&mh(e,c)}else{const c=n.contentHooks;null!==c&&gh(e,c,1),Nm(e,1)}!function S9(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=f1(e,ka);try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)Ua(~s);else{const o=s,a=t[++i],l=t[++i];HT(a,o),r.dirty=!1;const c=lm(r);try{l(2,e[o])}finally{ou(r,c)}}}}finally{null===e[ka]&&p1(e,ka),Ua(-1)}}(n,e);const a=n.components;null!==a&&L1(e,a,0);const l=n.viewQuery;if(null!==l&&dx(2,l,r),o){const c=n.viewCheckHooks;null!==c&&mh(e,c)}else{const c=n.viewHooks;null!==c&&gh(e,c,2),Nm(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Je]&=-73,$v(e)}finally{Mm()}}}function O1(n,e){for(let t=nO(n);null!==t;t=rO(t))for(let r=Pr;r<t.length;r++)F1(t[r],e)}function sK(n,e,t){F1(ii(e,n),t)}function F1(n,e){if(!function kT(n){return 128==(128&n[Je])}(n))return;const t=n[be],r=n[Je];if(80&r&&0===e||1024&r||2===e)k1(t,n,t.template,n[qn]);else if(n[nu]>0){O1(n,1);const i=t.components;null!==i&&L1(n,i,1)}}function L1(n,e,t){for(let r=0;r<e.length;r++)sK(n,e[r],t)}class cg{get rootNodes(){const e=this._lView,t=e[be];return lg(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[qn]}set context(e){this._lView[qn]=e}get destroyed(){return 256==(256&this._lView[Je])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[yn];if(ri(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(Sb(e,r),vu(t,r))}this._attachedToViewContainer=!1}yC(this._lView[be],this._lView)}onDestroy(e){!function zv(n,e){if(256==(256&n[Je]))throw new S(911,!1);null===n[Zo]&&(n[Zo]=[]),n[Zo].push(e)}(this._lView,e)}markForCheck(){og(this._cdRefInjectingView||this._lView)}detach(){this._lView[Je]&=-129}reattach(){this._lView[Je]|=128}detectChanges(){Xb(this._lView[be],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new S(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function G6(n,e){Jm(n,e,e[et],2,null,null)}(this._lView[be],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new S(902,!1);this._appRef=e}}class oK extends cg{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Xb(e[be],e,e[qn],!1)}checkNoChanges(){}get context(){return null}}class V1 extends Gb{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=It(e);return new ug(t,this.ngModule)}}function U1(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class lK{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Hd(r);const i=this.injector.get(e,KC,r);return i!==KC||t===KC?i:this.parentInjector.get(e,t,r)}}class ug extends zO{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=U1(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return U1(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function Yd(n){return n.map(Yp).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof no?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new lK(e,s):e,a=o.get(sg,null);if(null===a)throw new S(407,!1);const p={rendererFactory:a,sanitizer:o.get(s9,null),effectManager:o.get(P1,null),afterRenderEventManager:o.get(tx,null)},g=a.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",v=r?function M9(n,e,t,r){const s=r.get(c1,!1)||t===ir.ShadowDom,o=n.selectRootElement(e,s);return function P9(n){b1(n)}(o),o}(g,r,this.componentDef.encapsulation,o):Db(g,_,function aK(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(_)),P=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let D=null;null!==v&&(D=qC(v,o,!0));const k=ax(0,null,null,1,0,null,null,null,null,null,null),G=Zb(null,k,null,P,null,null,p,g,o,null,D);let ce,De;Sm(G);try{const ze=this.componentDef;let Pt,Ur=null;ze.findHostDirectiveDefs?(Pt=[],Ur=new Map,ze.findHostDirectiveDefs(ze,Pt,Ur),Pt.push(ze)):Pt=[ze];const ws=function uK(n,e){const t=n[be],r=yt;return n[r]=e,jh(t,r,2,"#host",null)}(G,v),fT=function dK(n,e,t,r,i,s,o){const a=i[be];!function hK(n,e,t,r){for(const i of n)e.mergedAttrs=Al(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(Yb(e,e.mergedAttrs,!0),null!==t&&yO(r,t,e))}(r,n,e,o);let l=null;null!==e&&(l=qC(e,i[Ws]));const c=s.rendererFactory.createRenderer(e,t);let h=16;t.signals?h=4096:t.onPush&&(h=64);const p=Zb(i,v1(t),null,h,i[n.index],n,s,c,null,null,l);return a.firstCreatePass&&cx(a,n,r.length-1),Qb(i,p),i[n.index]=p}(ws,v,ze,Pt,G,p,g);De=Ll(k,yt),v&&function pK(n,e,t,r){if(r)qd(n,t,["ng-version",GO.full]);else{const{attrs:i,classes:s}=function Xp(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Bi(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&qd(n,t,i),s&&s.length>0&&_O(n,t,s.join(" "))}}(g,ze,v,r),void 0!==t&&function mK(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(De,this.ngContentSelectors,t),ce=function fK(n,e,t,r,i,s){const o=Nr(),a=i[be],l=Ei(o,i);I1(a,i,o,t,null,r);for(let h=0;h<t.length;h++)Ti(ja(i,a,o.directiveStart+h,o),i);T1(a,i,o),l&&Ti(l,i);const c=ja(i,a,o.directiveStart+o.componentOffset,o);if(n[qn]=i[qn]=c,null!==s)for(const h of s)h(c,e);return ix(a,o,n),c}(fT,ze,Pt,Ur,G,[gK]),fx(k,G,null)}finally{Mm()}return new cK(this.componentType,ce,Vh(De,G),G,De)}}class cK extends J8{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new oK(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;hx(s[be],s,i,e,t),this.previousInputValues.set(e,t),og(ii(this._tNode.index,s))}}get injector(){return new oi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function gK(){const n=Nr();ph(se()[be],n)}function Vt(n){let e=function B1(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(Hi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new S(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=Jb(n.inputs),o.inputTransforms=Jb(n.inputTransforms),o.declaredInputs=Jb(n.declaredInputs),o.outputs=Jb(n.outputs);const a=i.hostBindings;a&&bK(n,a);const l=i.viewQuery,c=i.contentQueries;if(l&&yK(n,l),c&&vK(n,c),Br(n.inputs,i.inputs),Br(n.declaredInputs,i.declaredInputs),Br(n.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),Br(o.inputTransforms,i.inputTransforms)),Hi(i)&&i.data.animation){const h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Vt&&(t=!1)}}e=Object.getPrototypeOf(e)}!function _K(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Al(i.hostAttrs,t=Al(t,i.hostAttrs))}}(r)}function Jb(n){return n===ti?{}:n===_t?[]:n}function yK(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function vK(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function bK(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function z1(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(t[r]=i[2])}n.inputTransforms=t}function eE(n){return!!function px(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Ci(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function qi(n,e,t,r){const i=se();return Ci(i,Vl(),e)&&(St(),ra(Sn(),i,n,e,t,r)),qi}function Or(n,e,t,r,i,s,o,a){const l=se(),c=St(),h=n+yt,p=c.firstCreatePass?function qK(n,e,t,r,i,s,o,a,l){const c=e.consts,h=jh(e,n,4,o||null,Qs(c,a));lx(e,t,h,Qs(c,l)),ph(e,h);const p=h.tView=ax(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return null!==e.queries&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}(h,c,l,e,t,r,i,s,o):c.data[h];Ys(p,!1);const g=rF(c,l,p,n);fh()&&Mb(c,l,g,p),Ti(g,l),Qb(l,l[h]=x1(g,l,g,p)),rm(p)&&sx(c,l,p),null!=o&&ox(l,p,a)}let rF=function iF(n,e,t,r){return xo(!0),e[et].createComment("")};function bx(n){return function cs(n,e){return n[e]}(function jT(){return We.lFrame.contextLView}(),yt+n)}function cn(n,e,t){const r=se();return Ci(r,Vl(),e)&&Ns(St(),Sn(),r,n,e,r[et],t,!1),cn}function Ex(n,e,t,r,i){const o=i?"class":"style";hx(n,t,e.inputs[o],o,r)}function ct(n,e,t,r){const i=se(),s=St(),o=yt+n,a=i[et],l=s.firstCreatePass?function ZK(n,e,t,r,i,s){const o=e.consts,l=jh(e,n,2,r,Qs(o,i));return lx(e,t,l,Qs(o,s)),null!==l.attrs&&Yb(l,l.attrs,!1),null!==l.mergedAttrs&&Yb(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,i,e,t,r):s.data[o],c=sF(s,i,l,a,e,n);i[o]=c;const h=rm(l);return Ys(l,!0),yO(a,c,l),32!=(32&l.flags)&&fh()&&Mb(s,i,c,l),0===function LT(){return We.lFrame.elementDepthCount}()&&Ti(c,i),function lu(){We.lFrame.elementDepthCount++}(),h&&(sx(s,i,l),ix(s,l,i)),null!==r&&ox(i,l),ct}function tt(){let n=Nr();Tm()?cu():(n=n.parent,Ys(n,!1));const e=n;(function bm(n){return We.skipHydrationRootTNode===n})(e)&&function Wv(){We.skipHydrationRootTNode=null}(),function VT(){We.lFrame.elementDepthCount--}();const t=St();return t.firstCreatePass&&(ph(t,n),Iv(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function Pk(n){return 0!=(8&n.flags)}(e)&&Ex(t,e,se(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function km(n){return 0!=(16&n.flags)}(e)&&Ex(t,e,se(),e.stylesWithoutHost,!1),tt}function li(n,e,t,r){return ct(n,e,t,r),tt(),li}let sF=(n,e,t,r,i,s)=>(xo(!0),Db(r,i,function nb(){return We.lFrame.currentNamespace}()));function mg(n){return!!n&&"function"==typeof n.then}function lF(n){return!!n&&"function"==typeof n.subscribe}function Ar(n,e,t,r){const i=se(),s=St(),o=Nr();return function uF(n,e,t,r,i,s,o){const a=rm(r),c=n.firstCreatePass&&S1(n),h=e[qn],p=D1(e);let g=!0;if(3&r.type||o){const E=Ei(r,e),T=o?o(E):E,P=p.length,D=o?G=>o(Yt(G[r.index])):r.index;let k=null;if(!o&&a&&(k=function n7(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[Dl],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==k)(k.__ngLastListenerFn__||k).__ngNextListenerFn__=s,k.__ngLastListenerFn__=s,g=!1;else{s=hF(r,e,h,s,!1);const G=t.listen(T,i,s);p.push(s,G),c&&c.push(i,D,P,P+1)}}else s=hF(r,e,h,s,!1);const _=r.outputs;let v;if(g&&null!==_&&(v=_[i])){const E=v.length;if(E)for(let T=0;T<E;T+=2){const ce=e[v[T]][v[T+1]].subscribe(s),De=p.length;p.push(s,ce),c&&c.push(i,r.index,De,-(De+1))}}}(s,i,i[et],o,n,e,r),Ar}function dF(n,e,t,r){try{return Zs(6,e,t),!1!==t(r)}catch(i){return M1(n,i),!1}finally{Zs(7,e,t)}}function hF(n,e,t,r,i){return function s(o){if(o===Function)return r;og(n.componentOffset>-1?ii(n.index,e):e);let l=dF(e,t,r,o),c=s.__ngNextListenerFn__;for(;c;)l=dF(e,t,c,o)&&l,c=c.__ngNextListenerFn__;return i&&!1===l&&o.preventDefault(),l}}function Ka(n=1){return function $T(n){return(We.lFrame.contextLView=function zT(n,e){for(;n>0;)e=e[Ko],n--;return e}(n,We.lFrame.contextLView))[qn]}(n)}function r7(n,e){let t=null;const r=function Qd(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?Zd(n,s,!0):Zp(r,s))return i}else t=i}return t}function Zl(n){const e=se()[Gn][Cr];if(!e.projection){const r=e.projection=bu(n?n.length:1,null),i=r.slice();let s=e.child;for(;null!==s;){const o=n?r7(s,n):0;null!==o&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s),s=s.next}}}function or(n,e=0,t){const r=se(),i=St(),s=jh(i,yt+n,16,null,t||null);null===s.projection&&(s.projection=e),cu(),(!r[Ds]||Xo())&&32!=(32&s.flags)&&function e8(n,e,t){gO(e[et],0,e,t,bC(n,t,e),uO(t.parent||e[Cr],t,e))}(i,r,s)}function sE(n,e){return n<<17|e<<2}function Ql(n){return n>>17&32767}function Cx(n){return 2|n}function Du(n){return(131068&n)>>2}function xx(n,e){return-131069&n|e<<2}function Ax(n){return 1|n}function wF(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?Ql(s):Du(s),l=!1;for(;0!==a&&(!1===l||o);){const h=n[a+1];c7(n[a],e)&&(l=!0,n[a+1]=r?Ax(h):Cx(h)),a=r?Ql(h):Du(h)}l&&(n[t+1]=r?Cx(s):Ax(s))}function c7(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Ha(n,e)>=0}function ci(n,e){return function Do(n,e,t,r){const i=se(),s=St(),o=function Js(n){const e=We.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function MF(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[si()],o=function RF(n,e){return e>=n.expandoStartIndex}(n,t);(function OF(n,e){return 0!=(n.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function y7(n,e,t,r){const i=function xm(n){const e=We.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=gg(t=Dx(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=Dx(i,n,e,t,r),null===s){let l=function v7(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Du(r))return n[Ql(r)]}(n,e,r);void 0!==l&&Array.isArray(l)&&(l=Dx(null,n,e,l[1],r),l=gg(l,e.attrs,r),function b7(n,e,t,r){n[Ql(t?e.classBindings:e.styleBindings)]=r}(n,e,r,l))}else s=function E7(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=gg(r,n[s].hostAttrs,t);return gg(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function a7(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Ql(o),l=Du(o);n[r]=t;let h,c=!1;if(Array.isArray(t)?(h=t[1],(null===h||Ha(t,h)>0)&&(c=!0)):h=t,i)if(0!==l){const g=Ql(n[a+1]);n[r+1]=sE(g,a),0!==g&&(n[g+1]=xx(n[g+1],r)),n[a+1]=function s7(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=sE(a,0),0!==a&&(n[a+1]=xx(n[a+1],r)),a=r;else n[r+1]=sE(l,0),0===a?a=r:n[l+1]=xx(n[l+1],r),l=r;c&&(n[r+1]=Cx(n[r+1])),wF(n,h,r,!0),wF(n,h,r,!1),function l7(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Ha(s,e)>=0&&(t[r+1]=Ax(t[r+1]))}(e,h,n,r,s),o=sE(a,l),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==lt&&Ci(i,o,e)&&function NF(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1],h=function o7(n){return 1==(1&n)}(c)?kF(l,e,t,i,Du(c),o):void 0;oE(h)||(oE(s)||function i7(n){return 2==(2&n)}(c)&&(s=kF(l,null,t,i,a,o)),function n8(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:Wl.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Wl.Important),n.setStyle(t,r,i,s))}}(r,o,Fl(si(),t),i,s))}(s,s.data[si()],i,i[et],n,i[o+1]=function C7(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=tn(Ms(n)))),n}(e,t),r,o)}(n,e,null,!0),ci}function Dx(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=gg(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function gg(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),zi(n,o,!!t||e[++s]))}return void 0===n?null:n}function kF(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const l=n[i],c=Array.isArray(l),h=c?l[1]:l,p=null===h;let g=t[i+1];g===lt&&(g=p?_t:void 0);let _=p?to(g,r):h===r?g:void 0;if(c&&!oE(_)&&(_=to(l,r)),oE(_)&&(a=_,o))return a;const v=n[i+1];i=o?Ql(v):Du(v)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=to(l,r))}return a}function oE(n){return void 0!==n}function Yn(n,e=""){const t=se(),r=St(),i=n+yt,s=r.firstCreatePass?jh(r,i,1,e,null):r.data[i],o=FF(r,t,s,e,n);t[i]=o,fh()&&Mb(r,t,o,s),Ys(s,!1)}let FF=(n,e,t,r,i)=>(xo(!0),function Ab(n,e){return n.createText(e)}(e[et],r));function _g(n){return Sx("",n,""),_g}function Sx(n,e,t){const r=se(),i=function $h(n,e,t,r){return Ci(n,Vl(),t)?e+Ie(t)+r:lt}(r,n,e,t);return i!==lt&&function Wa(n,e,t){const r=Fl(e,n);!function sO(n,e,t){n.setValue(e,t)}(n[et],r,t)}(r,si(),i),Sx}function aE(n,e,t){const r=se();return Ci(r,Vl(),e)&&Ns(St(),Sn(),r,n,e,r[et],t,!0),aE}const Jh="en-US";let rL=Jh;function Px(n,e,t,r,i){if(n=He(n),Array.isArray(n))for(let s=0;s<n.length;s++)Px(n[s],e,t,r,i);else{const s=St(),o=se(),a=Nr();let l=xu(n)?n:He(n.provide);const c=UO(n),h=1048575&a.providerIndexes,p=a.directiveStart,g=a.providerIndexes>>20;if(xu(n)||!n.multi){const _=new fu(c,i,H),v=kx(l,e,i?h:h+g,p);-1===v?(gu(Eh(a,o),s,l),Nx(s,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(_),o.push(_)):(t[v]=_,o[v]=_)}else{const _=kx(l,e,h+g,p),v=kx(l,e,h,h+g),T=v>=0&&t[v];if(i&&!T||!i&&!(_>=0&&t[_])){gu(Eh(a,o),s,l);const P=function GZ(n,e,t,r,i){const s=new fu(n,t,H);return s.multi=[],s.index=e,s.componentProviders=0,DL(s,i,r&&!t),s}(i?qZ:zZ,t.length,i,r,c);!i&&T&&(t[v].providerFactory=P),Nx(s,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(P),o.push(P)}else Nx(s,n,_>-1?_:v,DL(t[i?v:_],c,!i&&r));!i&&r&&T&&t[v].componentProviders++}}}function Nx(n,e,t,r){const i=xu(e),s=function F8(n){return!!n.useClass}(e);if(i||s){const l=(s?He(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const h=c.indexOf(t);-1===h?c.push(t,[r,l]):c[h+1].push(r,l)}else c.push(t,l)}}}function DL(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function kx(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function zZ(n,e,t,r){return Ox(this.multi,[])}function qZ(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=ja(t,t[be],this.providerFactory.index,r);s=a.slice(0,o),Ox(i,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],Ox(i,s);return s}function Ox(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function bn(n,e=[]){return t=>{t.providersResolver=(r,i)=>function $Z(n,e,t){const r=St();if(r.firstCreatePass){const i=Hi(n);Px(t,r.data,r.blueprint,i,!0),Px(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class Ru{}class SL{}class Fx extends Ru{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new V1(this);const i=ni(e);this._bootstrapComponents=Ga(i.bootstrap),this._r3Injector=YO(e,t,[{provide:Ru,useValue:this},{provide:Gb,useValue:this.componentFactoryResolver},...r],tn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Lx extends SL{constructor(e){super(),this.moduleType=e}create(e){return new Fx(this.moduleType,e,[])}}class RL extends Ru{constructor(e){super(),this.componentFactoryResolver=new V1(this),this.instance=null;const t=new Nh([...e.providers,{provide:Ru,useValue:this},{provide:Gb,useValue:this.componentFactoryResolver}],e.parent||Ub(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Vx(n,e,t=null){return new RL({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let ZZ=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=OO(0,t.type),i=r.length>0?Vx([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=pe({token:n,providedIn:"environment",factory:()=>new n(B(no))})}return n})();function ML(n){n.getStandaloneInjector=e=>e.get(ZZ).getOrCreateStandaloneInjector(n)}function EQ(){return this._results[Symbol.iterator]()}class Bx{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Qn)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Bx.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=EQ)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=function us(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function zm(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function IQ(n,e,t,r=!0){const i=e[be];if(function K6(n,e,t,r){const i=Pr+r,s=t.length;r>0&&(t[i-1][ji]=e),r<s-Pr?(e[ji]=t[i],Gl(t,Pr+r,e)):(t.push(e),e[ji]=null),e[yn]=t;const o=e[Na];null!==o&&t!==o&&function Z6(n,e){const t=n[Oa];e[Gn]!==e[yn][yn][Gn]&&(n[nh]=!0),null===t?n[Oa]=[e]:t.push(e)}(o,e);const a=e[as];null!==a&&a.insertView(n),e[Je]|=128}(i,e,n,t),r){const s=wC(t,n),o=e[et],a=Rb(o,n[Ks]);null!==a&&function q6(n,e,t,r,i,s){r[_n]=i,r[Cr]=e,Jm(n,r,t,1,i,s)}(i,n[Cr],o,e,a,s)}}let Za=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=xQ}return n})();const TQ=Za,CQ=class extends TQ{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function wQ(n,e,t,r){const i=e.tView,a=Zb(n,i,t,4096&n[Je]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[Na]=n[e.index];const c=n[as];return null!==c&&(a[as]=c.createEmbeddedView(i)),fx(i,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new cg(i)}};function xQ(){return hE(Nr(),se())}function hE(n,e){return 4&n.type?new CQ(e,n,Vh(n,e)):null}let Ro=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=PQ}return n})();function PQ(){return ZL(Nr(),se())}const NQ=Ro,WL=class extends NQ{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Vh(this._hostTNode,this._hostLView)}get injector(){return new oi(this._hostTNode,this._hostLView)}get parentInjector(){const e=Ih(this._hostTNode,this._hostLView);if(vh(e)){const t=mu(e,this._hostLView),r=Ul(e);return new oi(t[be].data[r+8],t)}return new oi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=KL(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Pr}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,s){const o=e&&!function yu(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const E=t||{};a=E.index,r=E.injector,i=E.projectableNodes,s=E.environmentInjector||E.ngModuleRef}const l=o?e:new ug(It(e)),c=r||this.parentInjector;if(!s&&null==l.ngModule){const T=(o?c:this.parentInjector).get(no,null);T&&(s=T)}It(l.componentType??{});const _=l.create(c,i,null,s);return this.insertImpl(_.hostView,a,false),_}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function OT(n){return ri(n[yn])}(i)){const l=this.indexOf(e);if(-1!==l)this.detach(l);else{const c=i[yn],h=new WL(c,c[Cr],c[yn]);h.detach(h.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return IQ(a,i,o,!r),e.attachToViewContainerRef(),Gl(jx(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=KL(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=Sb(this._lContainer,t);r&&(vu(jx(this._lContainer),t),yC(r[be],r))}detach(e){const t=this._adjustIndex(e,-1),r=Sb(this._lContainer,t);return r&&null!=vu(jx(this._lContainer),t)?new cg(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function KL(n){return n[8]}function jx(n){return n[8]||(n[8]=[])}function ZL(n,e){let t;const r=e[n.index];return ri(r)?t=r:(t=x1(r,e,null,n),e[n.index]=t,Qb(e,t)),QL(t,e,n,r),new WL(t,n,e)}let QL=function YL(n,e,t,r){if(n[Ks])return;let i;i=8&t.type?Yt(r):function kQ(n,e){const t=n[et],r=t.createComment(""),i=Ei(e,n);return Tu(t,Rb(t,i),r,function J6(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[Ks]=i};class Hx{constructor(e){this.queryList=e,this.matches=null}clone(){return new Hx(this.queryList)}setDirty(){this.queryList.setDirty()}}class $x{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const o=t.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new $x(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==nV(e,t).matches&&this.queries[t].setDirty()}}class XL{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class zx{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new zx(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class qx{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new qx(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,LQ(t,s)),this.matchTNodeWithReadOption(e,t,Ch(t,e,s,!1,!1))}else r===Za?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Ch(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Zn||i===Ro||i===Za&&4&t.type)this.addMatch(t.index,-2);else{const s=Ch(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function LQ(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function UQ(n,e,t,r){return-1===t?function VQ(n,e){return 11&n.type?Vh(n,e):4&n.type?hE(n,e):null}(e,n):-2===t?function BQ(n,e,t){return t===Zn?Vh(e,n):t===Za?hE(e,n):t===Ro?ZL(e,n):void 0}(n,e,r):ja(n,n[be],t,e)}function JL(n,e,t,r){const i=e[as].queries[r];if(null===i.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:UQ(e,s[c],o[l+1],t.metadata.read))}i.matches=a}return i.matches}function Gx(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const o=JL(n,e,i,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)r.push(o[a/2]);else{const c=s[a+1],h=e[-l];for(let p=Pr;p<h.length;p++){const g=h[p];g[Na]===g[yn]&&Gx(g[be],g,c,r)}if(null!==h[Oa]){const p=h[Oa];for(let g=0;g<p.length;g++){const _=p[g];Gx(_[be],_,c,r)}}}}}return r}function xi(n){const e=se(),t=St(),r=Xv();Am(r+1);const i=nV(t,r);if(n.dirty&&function NT(n){return 4==(4&n[Je])}(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const s=i.crossesNgTemplate?Gx(t,e,r,[]):JL(t,e,i,r);n.reset(s,r9),n.notifyOnChanges()}return!0}return!1}function Yl(n,e,t){const r=St();r.firstCreatePass&&(tV(r,new XL(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),eV(r,se(),e)}function Qa(n,e,t,r){const i=St();if(i.firstCreatePass){const s=Nr();tV(i,new XL(e,t,r),s.index),function HQ(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(i,n),2==(2&t)&&(i.staticContentQueries=!0)}eV(i,se(),t)}function Ai(){return function jQ(n,e){return n[as].queries[e].queryList}(se(),Xv())}function eV(n,e,t){const r=new Bx(4==(4&t));(function O9(n,e,t,r){const i=D1(e);i.push(t),n.firstCreatePass&&S1(n).push(r,i.length-1)})(n,e,r,r.destroy),null===e[as]&&(e[as]=new $x),e[as].queries.push(new Hx(r))}function tV(n,e,t){null===n.queries&&(n.queries=new zx),n.queries.track(new qx(e,t))}function nV(n,e){return n.queries.getByIndex(e)}function rV(n,e){return hE(n,e)}const mE=new te("Application Initializer");let Xx=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=de(mE,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(mg(s))t.push(s);else if(lF(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bV=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const aa=new te("LocaleId",{providedIn:"root",factory:()=>de(aa,gt.Optional|gt.SkipSelf)||function cY(){return typeof $localize<"u"&&$localize.locale||Jh}()});let EV=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new F(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class hY{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let wV=(()=>{class n{compileModuleSync(t){return new Lx(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=Ga(ni(t).declarations).reduce((o,a)=>{const l=It(a);return l&&o.push(new ug(l)),o},[]);return new hY(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const xV=new te(""),_E=new te("");let rA,tA=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,rA||(function kY(n){rA=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Xe.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||n)(B(Xe),B(nA),B(_E))};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac})}return n})(),nA=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return rA?.findTestabilityInTree(this,t,r)??null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Xl=null;const AV=new te("AllowMultipleToken"),iA=new te("PlatformDestroyListeners"),yE=new te("appBootstrapListener");class SV{constructor(e,t){this.name=e,this.token=t}}function MV(n,e,t=[]){const r=`Platform: ${e}`,i=new te(r);return(s=[])=>{let o=sA();if(!o||o.injector.get(AV,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function LY(n){if(Xl&&!Xl.get(AV,!1))throw new S(400,!1);(function DV(){!function xT(n){oh=n}(()=>{throw new S(600,!1)})})(),Xl=n;const e=n.get(NV);(function RV(n){n.get(BO,null)?.forEach(t=>t())})(n)}(function PV(n=[],e){return hs.create({name:e,providers:[{provide:NC,useValue:"platform"},{provide:iA,useValue:new Set([()=>Xl=null])},...n]})}(a,r))}return function UY(n){const e=sA();if(!e)throw new S(401,!1);return e}()}}function sA(){return Xl?.get(NV)??null}let NV=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function BY(n="zone.js",e){return"noop"===n?new _9:"zone.js"===n?new Xe(e):n}(r?.ngZone,function kV(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function KZ(n,e,t){return new Fx(n,e,t)}(t.moduleType,this.injector,function UV(n){return[{provide:Xe,useFactory:n},{provide:ng,multi:!0,useFactory:()=>{const e=de(HY,{optional:!0});return()=>e.initialize()}},{provide:VV,useFactory:jY},{provide:n1,useFactory:r1}]}(()=>i)),o=s.injector.get(ro,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:l=>{o.handleError(l)}});s.onDestroy(()=>{vE(this._modules,s),a.unsubscribe()})}),function OV(n,e,t){try{const r=t();return mg(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(Xx);return a.runInitializers(),a.donePromise.then(()=>(function iL(n){os(n,"Expected localeId to be defined"),"string"==typeof n&&(rL=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(aa,Jh)||Jh),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=FV({},r);return function OY(n,e,t){const r=new Lx(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(Jl);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new S(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new S(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(iA,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||n)(B(hs))};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function FV(n,e){return Array.isArray(e)?e.reduce(FV,n):{...n,...e}}let Jl=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=de(VV),this.zoneIsStable=de(n1),this.componentTypes=[],this.components=[],this.isStable=de(EV).hasPendingTasks.pipe(xt(t=>t?Q(!1):this.zoneIsStable),mn(),Ze()),this._injector=de(no)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof zO;if(!this._injector.get(Xx).done)throw!i&&function Wo(n){const e=It(n)||fr(n)||Tr(n);return null!==e&&e.standalone}(t),new S(405,!1);let o;o=i?t:this._injector.get(Gb).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function FY(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Ru),c=o.create(hs.NULL,[],r||o.selector,a),h=c.location.nativeElement,p=c.injector.get(xV,null);return p?.registerApplication(h),c.onDestroy(()=>{this.detachView(c.hostView),vE(this.components,c),p?.unregisterApplication(h)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new S(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;vE(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(yE,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>vE(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new S(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function vE(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const VV=new te("",{providedIn:"root",factory:()=>de(ro).handleError.bind(void 0)});function jY(){const n=de(Xe),e=de(ro);return t=>n.runOutsideAngular(()=>e.handleError(t))}let HY=(()=>{class n{constructor(){this.zone=de(Xe),this.applicationRef=de(Jl)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let Ag=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=zY}return n})();function zY(n){return function qY(n,e,t){if(Ml(n)&&!t){const r=ii(n.index,e);return new cg(r,r)}return 47&n.type?new cg(e[Gn],e):null}(Nr(),se(),16==(16&n))}class $V{constructor(){}supports(e){return eE(e)}create(e){return new YY(e)}}const QY=(n,e)=>e;class YY{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||QY}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<qV(r,i,s)?t:r,a=qV(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const c=a-i,h=l-i;if(c!=h){for(let g=0;g<c;g++){const _=g<s.length?s[g]:s[g]=0,v=_+g;h<=v&&v<c&&(s[g]=_+1)}s[o.previousIndex]=h-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!eE(e))throw new S(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function AK(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new XY(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new zV),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new zV),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class XY{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class JY{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class zV{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new JY,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function qV(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function WV(){return new wE([new $V])}let wE=(()=>{class n{static#e=this.\u0275prov=pe({token:n,providedIn:"root",factory:WV});constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||WV()),deps:[[n,new $a,new Ao]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new S(901,!1)}}return n})();const iX=MV(null,"core",[]);let sX=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(r){return new(r||n)(B(Jl))};static#t=this.\u0275mod=jt({type:n});static#n=this.\u0275inj=Ot({})}return n})();function rf(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let dA=null;function ec(){return dA}class vX{}const nn=new te("DocumentToken");let hA=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=pe({token:n,factory:function(){return de(EX)},providedIn:"platform"})}return n})();const bX=new te("Location Initialized");let EX=(()=>{class n extends hA{constructor(){super(),this._doc=de(nn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ec().getBaseHref(this._doc)}onPopState(t){const r=ec().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=ec().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=pe({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function fA(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function r2(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ya(n){return n&&"?"!==n[0]?"?"+n:n}let Pu=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=pe({token:n,factory:function(){return de(s2)},providedIn:"root"})}return n})();const i2=new te("appBaseHref");let s2=(()=>{class n extends Pu{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??de(nn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return fA(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ya(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+Ya(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+Ya(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(B(hA),B(i2,8))};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wX=(()=>{class n extends Pu{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=fA(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Ya(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Ya(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(B(hA),B(i2,8))};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac})}return n})(),pA=(()=>{class n{constructor(t){this._subject=new Qn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function CX(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(r2(o2(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ya(r))}normalize(t){return n.stripTrailingSlash(function TX(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,o2(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ya(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ya(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=Ya;static#t=this.joinWithSlash=fA;static#n=this.stripTrailingSlash=r2;static#r=this.\u0275fac=function(r){return new(r||n)(B(Pu))};static#i=this.\u0275prov=pe({token:n,factory:function(){return function IX(){return new pA(B(Pu))}()},providedIn:"root"})}return n})();function o2(n){return n.replace(/\/index.html$/,"")}class hJ{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let _2=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new hJ(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),y2(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{y2(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(H(Ro),H(Za),H(wE))};static#t=this.\u0275dir=Te({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function y2(n,e){n.context.$implicit=e.item}let v2=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new fJ,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){b2("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){b2("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(H(Ro),H(Za))};static#t=this.\u0275dir=Te({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class fJ{constructor(){this.$implicit=null,this.ngIf=null}}function b2(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${tn(e)}'.`)}class CA{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let kE=(()=>{class n{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews.length>0&&t!==this._defaultUsed){this._defaultUsed=t;for(const r of this._defaultViews)r.enforceState(t)}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Te({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0})}return n})(),E2=(()=>{class n{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new CA(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static#e=this.\u0275fac=function(r){return new(r||n)(H(Ro),H(Za),H(kE,9))};static#t=this.\u0275dir=Te({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0})}return n})(),I2=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:i,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=r.createEmbeddedView(i,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}static#e=this.\u0275fac=function(r){return new(r||n)(H(Ro))};static#t=this.\u0275dir=Te({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[$i]})}return n})(),OE=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=jt({type:n});static#n=this.\u0275inj=Ot({})}return n})();const C2="browser";function x2(n){return n===C2}function FE(n){return"server"===n}let HJ=(()=>{class n{static#e=this.\u0275prov=pe({token:n,providedIn:"root",factory:()=>new $J(B(nn),window)})}return n})();class $J{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function zJ(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class pee extends vX{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class RA extends pee{static makeCurrent(){!function yX(n){dA||(dA=n)}(new RA)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function mee(){return Pg=Pg||document.querySelector("base"),Pg?Pg.getAttribute("href"):null}();return null==t?null:function gee(n){UE=UE||document.createElement("a"),UE.setAttribute("href",n);const e=UE.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Pg=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function cJ(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let UE,Pg=null,yee=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac})}return n})();const MA=new te("EventManagerPlugins");let M2=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new S(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(B(MA),B(Xe))};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac})}return n})();class P2{constructor(e){this._doc=e}}const PA="ng-app-id";let N2=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=FE(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${PA}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(PA),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(PA,this.appId),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(B(nn),B(Bb),B(LC,8),B(Ps))};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac})}return n})();const NA={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},kA=/%COMP%/g,wee=new te("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function O2(n,e){return e.map(t=>t.replace(kA,n))}let OA=(()=>{class n{constructor(t,r,i,s,o,a,l,c=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=FE(a),this.defaultRenderer=new FA(t,o,l,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===ir.ShadowDom&&(r={...r,encapsulation:ir.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof L2?i.applyToHost(t):i instanceof LA&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case ir.Emulated:s=new L2(l,c,r,this.appId,h,o,a,p);break;case ir.ShadowDom:return new xee(l,c,t,r,o,a,this.nonce,p);default:s=new LA(l,c,r,h,o,a,p)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(B(M2),B(N2),B(Bb),B(wee),B(nn),B(Ps),B(Xe),B(LC))};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac})}return n})();class FA{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(NA[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(F2(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(F2(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new S(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=NA[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=NA[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Wl.DashCase|Wl.Important)?e.style.setProperty(t,r,i&Wl.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Wl.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=ec().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function F2(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class xee extends FA{constructor(e,t,r,i,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=O2(i.id,i.styles);for(const h of c){const p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class LA extends FA{constructor(e,t,r,i,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=l?O2(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class L2 extends LA{constructor(e,t,r,i,s,o,a,l){const c=i+"-"+r.id;super(e,t,r,s,o,a,l,c),this.contentAttr=function Iee(n){return"_ngcontent-%COMP%".replace(kA,n)}(c),this.hostAttr=function Tee(n){return"_nghost-%COMP%".replace(kA,n)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Aee=(()=>{class n extends P2{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(B(nn))};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac})}return n})();const V2=["alt","control","meta","shift"],Dee={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},See={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ree=(()=>{class n extends P2{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ec().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),V2.forEach(c=>{const h=r.indexOf(c);h>-1&&(r.splice(h,1),o+=c+".")}),o+=s,0!=r.length||0===s.length)return null;const l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(t,r){let i=Dee[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),V2.forEach(o=>{o!==i&&(0,See[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(B(nn))};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac})}return n})();const B2=[{provide:Ps,useValue:C2},{provide:BO,useValue:function Mee(){RA.makeCurrent()},multi:!0},{provide:nn,useFactory:function Nee(){return function a8(n){CC=n}(document),document},deps:[]}],kee=MV(iX,"browser",B2),Oee=new te(""),j2=[{provide:_E,useClass:class _ee{addToWindow(e){Qt.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new S(5103,!1);return s},Qt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Qt.getAllAngularRootElements=()=>e.getAllRootElements(),Qt.frameworkStabilizers||(Qt.frameworkStabilizers=[]),Qt.frameworkStabilizers.push(r=>{const i=Qt.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(l){o=o||l,s--,0==s&&r(o)};i.forEach(l=>{l.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?ec().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:xV,useClass:tA,deps:[Xe,nA,_E]},{provide:tA,useClass:tA,deps:[Xe,nA,_E]}],H2=[{provide:NC,useValue:"root"},{provide:ro,useFactory:function Pee(){return new ro},deps:[]},{provide:MA,useClass:Aee,multi:!0,deps:[nn,Xe,Ps]},{provide:MA,useClass:Ree,multi:!0,deps:[nn]},OA,N2,M2,{provide:sg,useExisting:OA},{provide:class qJ{},useClass:yee,deps:[]},[]];let $2=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Bb,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(B(Oee,12))};static#t=this.\u0275mod=jt({type:n});static#n=this.\u0275inj=Ot({providers:[...H2,...j2],imports:[OE,sX]})}return n})(),z2=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(B(nn))};static#t=this.\u0275prov=pe({token:n,factory:function(r){let i=null;return i=r?new r:function Lee(){return new z2(B(nn))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;let UA=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=pe({token:n,factory:function(r){let i=null;return i=r?new(r||n):B(W2),i},providedIn:"root"})}return n})(),W2=(()=>{class n extends UA{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case ai.NONE:return r;case ai.HTML:return na(r,"HTML")?Ms(r):DO(this._doc,String(r)).toString();case ai.STYLE:return na(r,"Style")?Ms(r):r;case ai.SCRIPT:if(na(r,"Script"))return Ms(r);throw new S(5200,!1);case ai.URL:return na(r,"URL")?Ms(r):Ob(String(r));case ai.RESOURCE_URL:if(na(r,"ResourceURL"))return Ms(r);throw new S(5201,!1);default:throw new S(5202,!1)}}bypassSecurityTrustHtml(t){return function p8(n){return new l8(n)}(t)}bypassSecurityTrustStyle(t){return function m8(n){return new c8(n)}(t)}bypassSecurityTrustScript(t){return function g8(n){return new u8(n)}(t)}bypassSecurityTrustUrl(t){return function _8(n){return new d8(n)}(t)}bypassSecurityTrustResourceUrl(t){return function y8(n){return new h8(n)}(t)}static#e=this.\u0275fac=function(r){return new(r||n)(B(nn))};static#t=this.\u0275prov=pe({token:n,factory:function(r){let i=null;return i=r?new r:function jee(n){return new W2(n.get(nn))}(B(hs)),i},providedIn:"root"})}return n})();const{isArray:$ee}=Array,{getPrototypeOf:zee,prototype:qee,keys:Gee}=Object;function Z2(n){if(1===n.length){const e=n[0];if($ee(e))return{args:e,keys:null};if(function Wee(n){return n&&"object"==typeof n&&zee(n)===qee}(e)){const t=Gee(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:Kee}=Array;function Q2(n){return he(e=>function Zee(n,e){return Kee(e)?n(...e):n(e)}(n,e))}function Y2(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function BE(...n){const e=Vi(n),t=Eo(n),{args:r,keys:i}=Z2(n);if(0===r.length)return M([],e);const s=new at(function Qee(n,e,t=wt){return r=>{X2(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let l=0;l<i;l++)X2(e,()=>{const c=M(n[l],e);let h=!1;c.subscribe(fe(r,p=>{s[l]=p,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>Y2(i,o):wt));return t?s.pipe(Q2(t)):s}function X2(n,e,t){n?Ln(t,n,e):e()}const jE=ke(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function HE(...n){return function Yee(){return Jr(1)}()(M(n,Vi(n)))}function J2(n){return new at(e=>{pn(n()).subscribe(e)})}function af(n,e){const t=I(n)?n:()=>n,r=i=>i.error(t());return new at(e?i=>e.schedule(r,0,i):r)}function BA(){return K((n,e)=>{let t=null;n._refCount++;const r=fe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class eU extends at{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,ie(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new mt;const t=this.getSubject();e.add(this.source.subscribe(fe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=mt.EMPTY)}return e}refCount(){return BA()(this)}}function nc(n){return n<=0?()=>Dn:K((e,t)=>{let r=0;e.subscribe(fe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Ng(...n){const e=Vi(n);return K((t,r)=>{(e?HE(n,t,e):HE(n,t)).subscribe(r)})}function ui(n,e){return K((t,r)=>{let i=0;t.subscribe(fe(r,s=>n.call(e,s,i++)&&r.next(s)))})}function $E(n){return K((e,t)=>{let r=!1;e.subscribe(fe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function tU(n=Xee){return K((e,t)=>{let r=!1;e.subscribe(fe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Xee(){return new jE}function el(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ui((i,s)=>n(i,s,r)):wt,nc(1),t?$E(e):tU(()=>new jE))}function lf(n,e){return I(e)?Kt(n,e,1):Kt(n,1)}function gr(n,e,t){const r=I(n)||e||t?{next:n,error:e,complete:t}:n;return r?K((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(fe(s,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),s.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),s.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),s.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):wt}function rc(n){return K((e,t)=>{let s,r=null,i=!1;r=e.subscribe(fe(t,void 0,void 0,o=>{s=pn(n(o,rc(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function cf(n,e){return K(function Jee(n,e,t,r,i){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(fe(o,h=>{const p=c++;l=a?n(l,h,p):(a=!0,h),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}(n,e,arguments.length>=2,!0))}function jA(n){return n<=0?()=>Dn:K((e,t)=>{let r=[];e.subscribe(fe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function zE(n){return K((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Nu(n){return K((e,t)=>{pn(n).subscribe(fe(t,()=>t.complete(),we)),!t.closed&&e.subscribe(t)})}const ft="primary",kg=Symbol("RouteTitle");class nte{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function uf(n){return new nte(n)}function rte(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function la(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!nU(n[i],e[i]))return!1;return!0}function nU(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function rU(n){return n.length>0?n[n.length-1]:null}function ic(n){return function Hee(n){return!!n&&(n instanceof at||I(n.lift)&&I(n.subscribe))}(n)?n:mg(n)?M(Promise.resolve(n)):Q(n)}const ste={exact:function oU(n,e,t){if(!ku(n.segments,e.segments)||!qE(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!oU(n.children[r],e.children[r],t))return!1;return!0},subset:aU},iU={exact:function ote(n,e){return la(n,e)},subset:function ate(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>nU(n[t],e[t]))},ignored:()=>!0};function sU(n,e,t){return ste[t.paths](n.root,e.root,t.matrixParams)&&iU[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function aU(n,e,t){return lU(n,e,e.segments,t)}function lU(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ku(i,t)||e.hasChildren()||!qE(i,t,r))}if(n.segments.length===t.length){if(!ku(n.segments,t)||!qE(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!aU(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(ku(n.segments,i)&&qE(n.segments,i,r)&&n.children[ft])&&lU(n.children[ft],e,s,r)}}function qE(n,e,t){return e.every((r,i)=>iU[t](n[i].parameters,r.parameters))}class df{constructor(e=new rn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=uf(this.queryParams)),this._queryParamMap}toString(){return ute.serialize(this)}}class rn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return GE(this)}}class Og{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=uf(this.parameters)),this._parameterMap}toString(){return dU(this)}}function ku(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Fg=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=pe({token:n,factory:function(){return new HA},providedIn:"root"})}return n})();class HA{parse(e){const t=new Ete(e);return new df(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Lg(e.root,!0)}`,r=function fte(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${WE(t)}=${WE(i)}`).join("&"):`${WE(t)}=${WE(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function dte(n){return encodeURI(n)}(e.fragment)}`:""}`}}const ute=new HA;function GE(n){return n.segments.map(e=>dU(e)).join("/")}function Lg(n,e){if(!n.hasChildren())return GE(n);if(e){const t=n.children[ft]?Lg(n.children[ft],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==ft&&r.push(`${i}:${Lg(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function cte(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ft&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ft&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===ft?[Lg(n.children[ft],!1)]:[`${i}:${Lg(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[ft]?`${GE(n)}/${t[0]}`:`${GE(n)}/(${t.join("//")})`}}function cU(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function WE(n){return cU(n).replace(/%3B/gi,";")}function $A(n){return cU(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function KE(n){return decodeURIComponent(n)}function uU(n){return KE(n.replace(/\+/g,"%20"))}function dU(n){return`${$A(n.path)}${function hte(n){return Object.keys(n).map(e=>`;${$A(e)}=${$A(n[e])}`).join("")}(n.parameters)}`}const pte=/^[^\/()?;#]+/;function zA(n){const e=n.match(pte);return e?e[0]:""}const mte=/^[^\/()?;=#]+/,_te=/^[^=?&#]+/,vte=/^[^&#]+/;class Ete{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new rn([],{}):new rn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ft]=new rn(e,t)),r}parseSegment(){const e=zA(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new S(4009,!1);return this.capture(e),new Og(KE(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function gte(n){const e=n.match(mte);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=zA(this.remaining);i&&(r=i,this.capture(r))}e[KE(t)]=KE(r)}parseQueryParam(e){const t=function yte(n){const e=n.match(_te);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function bte(n){const e=n.match(vte);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=uU(t),s=uU(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=zA(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new S(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ft);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[ft]:new rn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new S(4011,!1)}}function hU(n){return n.segments.length>0?new rn([],{[ft]:n}):n}function fU(n){const e={};for(const r of Object.keys(n.children)){const s=fU(n.children[r]);if(r===ft&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function wte(n){if(1===n.numberOfChildren&&n.children[ft]){const e=n.children[ft];return new rn(n.segments.concat(e.segments),e.children)}return n}(new rn(n.segments,e))}function Ou(n){return n instanceof df}function pU(n){let e;const i=hU(function t(s){const o={};for(const l of s.children){const c=t(l);o[l.outlet]=c}const a=new rn(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function mU(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return qA(i,i,i,t,r);const s=function Tte(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new _U(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]="string"==typeof c?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new _U(t,e,r)}(e);if(s.toRoot())return qA(i,i,new rn([],{}),t,r);const o=function Cte(n,e,t){if(n.isAbsolute)return new QE(e,!0,0);if(!t)return new QE(e,!1,NaN);if(null===t.parent)return new QE(t,!0,0);const r=ZE(n.commands[0])?0:1;return function xte(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new S(4005,!1);i=r.segments.length}return new QE(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?Ug(o.segmentGroup,o.index,s.commands):yU(o.segmentGroup,o.index,s.commands);return qA(i,o.segmentGroup,a,t,r)}function ZE(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Vg(n){return"object"==typeof n&&null!=n&&n.outlets}function qA(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(h=>`${h}`):`${c}`}),o=n===e?t:gU(n,e,t);const a=hU(fU(o));return new df(a,s,i)}function gU(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:gU(s,e,t)}),new rn(n.segments,r)}class _U{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ZE(r[0]))throw new S(4003,!1);const i=r.find(Vg);if(i&&i!==rU(r))throw new S(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class QE{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function yU(n,e,t){if(n||(n=new rn([],{})),0===n.segments.length&&n.hasChildren())return Ug(n,e,t);const r=function Dte(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(Vg(a))break;const l=`${a}`,c=r<t.length-1?t[r+1]:null;if(i>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!bU(l,c,o))return s;r+=2}else{if(!bU(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new rn(n.segments.slice(0,r.pathIndex),{});return s.children[ft]=new rn(n.segments.slice(r.pathIndex),n.children),Ug(s,0,i)}return r.match&&0===i.length?new rn(n.segments,{}):r.match&&!n.hasChildren()?GA(n,e,t):r.match?Ug(n,0,i):GA(n,e,t)}function Ug(n,e,t){if(0===t.length)return new rn(n.segments,{});{const r=function Ate(n){return Vg(n[0])?n[0].outlets:{[ft]:n}}(t),i={};if(Object.keys(r).some(s=>s!==ft)&&n.children[ft]&&1===n.numberOfChildren&&0===n.children[ft].segments.length){const s=Ug(n.children[ft],e,t);return new rn(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=yU(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new rn(n.segments,i)}}function GA(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Vg(s)){const l=Ste(s.outlets);return new rn(r,l)}if(0===i&&ZE(t[0])){r.push(new Og(n.segments[e].path,vU(t[0]))),i++;continue}const o=Vg(s)?s.outlets[ft]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&ZE(a)?(r.push(new Og(o,vU(a))),i+=2):(r.push(new Og(o,{})),i++)}return new rn(r,{})}function Ste(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=GA(new rn([],{}),0,r))}),e}function vU(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function bU(n,e,t){return n==t.path&&la(e,t.parameters)}const Bg="imperative";class ca{constructor(e,t){this.id=e,this.url=t}}class YE extends ca{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class tl extends ca{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class jg extends ca{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class hf extends ca{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class XE extends ca{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class EU extends ca{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rte extends ca{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mte extends ca{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Pte extends ca{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nte extends ca{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kte{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ote{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Fte{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Lte{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vte{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ute{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wU{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class WA{}class KA{constructor(e){this.url=e}}class Bte{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Hg,this.attachRef=null}}let Hg=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Bte,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class IU{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=ZA(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=ZA(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=QA(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return QA(e,this._root).map(t=>t.value)}}function ZA(n,e){if(n===e.value)return e;for(const t of e.children){const r=ZA(n,t);if(r)return r}return null}function QA(n,e){if(n===e.value)return[e];for(const t of e.children){const r=QA(n,t);if(r.length)return r.unshift(e),r}return[]}class nl{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ff(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class TU extends IU{constructor(e,t){super(e),this.snapshot=t,YA(this,e)}toString(){return this.snapshot.toString()}}function CU(n,e){const t=function jte(n,e){const o=new JE([],{},{},"",{},ft,e,null,{});return new AU("",new nl(o,[]))}(0,e),r=new F([new Og("",{})]),i=new F({}),s=new F({}),o=new F({}),a=new F(""),l=new pf(r,i,o,a,s,ft,e,t.root);return l.snapshot=t.root,new TU(new nl(l,[]),t)}class pf{constructor(e,t,r,i,s,o,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(he(c=>c[kg]))??Q(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(he(e=>uf(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(he(e=>uf(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function xU(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function Hte(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class JE{get title(){return this.data?.[kg]}constructor(e,t,r,i,s,o,a,l,c){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=uf(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=uf(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class AU extends IU{constructor(e,t){super(t),this.url=e,YA(this,t)}toString(){return DU(this._root)}}function YA(n,e){e.value._routerState=n,e.children.forEach(t=>YA(n,t))}function DU(n){const e=n.children.length>0?` { ${n.children.map(DU).join(", ")} } `:"";return`${n.value}${e}`}function XA(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,la(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),la(e.params,t.params)||n.paramsSubject.next(t.params),function ite(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!la(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),la(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function JA(n,e){const t=la(n.params,e.params)&&function lte(n,e){return ku(n,e)&&n.every((t,r)=>la(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||JA(n.parent,e.parent))}let eD=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ft,this.activateEvents=new Qn,this.deactivateEvents=new Qn,this.attachEvents=new Qn,this.detachEvents=new Qn,this.parentContexts=de(Hg),this.location=de(Ro),this.changeDetector=de(Ag),this.environmentInjector=de(no),this.inputBinder=de(e0,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new S(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new S(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new S(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new S(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new $te(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:l,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Te({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[$i]})}return n})();class $te{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===pf?this.route:e===Hg?this.childContexts:this.parent.get(e,t)}}const e0=new te("");let SU=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=BE([r.queryParams,r.params,r.data]).pipe(xt(([s,o,a],l)=>(a={...s,...o,...a},0===l?Q(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function _X(n){const e=It(n);if(!e)return null;const t=new ug(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac})}return n})();function $g(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function qte(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return $g(n,r,i);return $g(n,r)})}(n,e,t);return new nl(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>$g(n,a)),o}}const r=function Gte(n){return new pf(new F(n.url),new F(n.params),new F(n.queryParams),new F(n.fragment),new F(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>$g(n,s));return new nl(r,i)}}const tD="ngNavigationCancelingError";function RU(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Ou(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=MU(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function MU(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[tD]=!0,r.cancellationCode=e,t&&(r.url=t),r}function PU(n){return n&&n[tD]}let NU=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Hr({type:n,selectors:[["ng-component"]],standalone:!0,features:[ML],decls:1,vars:0,template:function(r,i){1&r&&li(0,"router-outlet")},dependencies:[eD],encapsulation:2})}return n})();function nD(n){const e=n.children&&n.children.map(nD),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ft&&(t.component=NU),t}function No(n){return n.outlet||ft}function zg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class ene{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),XA(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=ff(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=ff(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=ff(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=ff(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Ute(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Lte(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(XA(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),XA(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=zg(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class kU{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class t0{constructor(e,t){this.component=e,this.route=t}}function tne(n,e,t){const r=n._root;return qg(r,e?e._root:null,t,[r.value])}function mf(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function yT(n){return null!==Fd(n)}(n)?e.get(n):n:r}function qg(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=ff(e);return n.children.forEach(o=>{(function rne(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function ine(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ku(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ku(n.url,e.url)||!la(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!JA(n,e)||!la(n.queryParams,e.queryParams);default:return!JA(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new kU(r)):(s.data=o.data,s._resolvedData=o._resolvedData),qg(n,e,s.component?a?a.children:null:t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new t0(a.outlet.component,o))}else o&&Gg(e,a,i),i.canActivateChecks.push(new kU(r)),qg(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Gg(a,t.getContext(o),i)),i}function Gg(n,e,t){const r=ff(n),i=n.value;Object.entries(r).forEach(([s,o])=>{Gg(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new t0(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Wg(n){return"function"==typeof n}function OU(n){return n instanceof jE||"EmptyError"===n?.name}const n0=Symbol("INITIAL_VALUE");function gf(){return xt(n=>BE(n.map(e=>e.pipe(nc(1),Ng(n0)))).pipe(he(e=>{for(const t of e)if(!0!==t){if(t===n0)return n0;if(!1===t||t instanceof df)return t}return!0}),ui(e=>e!==n0),nc(1)))}function FU(n){return function Fn(...n){return en(n)}(gr(e=>{if(Ou(e))throw RU(0,e)}),he(e=>!0===e))}class r0{constructor(e){this.segmentGroup=e||null}}class LU{constructor(e){this.urlTree=e}}function _f(n){return af(new r0(n))}function VU(n){return af(new LU(n))}class Tne{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new S(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Q(r);if(i.numberOfChildren>1||!i.children[ft])return af(new S(4e3,!1));i=i.children[ft]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new df(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,r,i)}),new rn(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new S(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const rD={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Cne(n,e,t,r,i){const s=iD(n,e,t);return s.matched?(r=function Kte(n,e){return n.providers&&!n._injector&&(n._injector=Vx(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function Ene(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Q(i.map(o=>{const a=mf(o,n);return ic(function une(n){return n&&Wg(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(gf(),FU()):Q(!0)}(r,e,t).pipe(he(o=>!0===o?s:{...rD}))):Q(s)}function iD(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...rD}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||rte)(t,n,e);if(!i)return{...rD};const s={};Object.entries(i.posParams??{}).forEach(([a,l])=>{s[a]=l.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function UU(n,e,t,r){return t.length>0&&function Dne(n,e,t){return t.some(r=>s0(n,e,r)&&No(r)!==ft)}(n,t,r)?{segmentGroup:new rn(e,Ane(r,new rn(t,n.children))),slicedSegments:[]}:0===t.length&&function Sne(n,e,t){return t.some(r=>s0(n,e,r))}(n,t,r)?{segmentGroup:new rn(n.segments,xne(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new rn(n.segments,n.children),slicedSegments:t}}function xne(n,e,t,r,i){const s={};for(const o of r)if(s0(n,t,o)&&!i[No(o)]){const a=new rn([],{});s[No(o)]=a}return{...i,...s}}function Ane(n,e){const t={};t[ft]=e;for(const r of n)if(""===r.path&&No(r)!==ft){const i=new rn([],{});t[No(r)]=i}return t}function s0(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class Nne{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new Tne(this.urlSerializer,this.urlTree)}noMatchError(e){return new S(4002,!1)}recognize(){const e=UU(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,ft).pipe(rc(t=>{if(t instanceof LU)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof r0?this.noMatchError(t):t}),he(t=>{const r=new JE([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ft,this.rootComponentType,null,{}),i=new nl(r,t),s=new AU("",i),o=function Ite(n,e,t=null,r=null){return mU(pU(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,ft).pipe(rc(r=>{throw r instanceof r0?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=xU(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return M(i).pipe(lf(s=>{const o=r.children[s],a=function Xte(n,e){const t=n.filter(r=>No(r)===e);return t.push(...n.filter(r=>No(r)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),cf((s,o)=>(s.push(...o),s)),$E(null),function ete(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ui((i,s)=>n(i,s,r)):wt,jA(1),t?$E(e):tU(()=>new jE))}(),Kt(s=>{if(null===s)return _f(r);const o=BU(s);return function kne(n){n.sort((e,t)=>e.value.outlet===ft?-1:t.value.outlet===ft?1:e.value.outlet.localeCompare(t.value.outlet))}(o),Q(o)}))}processSegment(e,t,r,i,s,o){return M(t).pipe(lf(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe(rc(l=>{if(l instanceof r0)return Q(null);throw l}))),el(a=>!!a),rc(a=>{if(OU(a))return function Mne(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?Q([]):_f(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return function Rne(n,e,t,r){return!!(No(n)===r||r!==ft&&s0(e,t,n))&&("**"===n.path||iD(e,n,t).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):_f(i):_f(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?VU(s):this.applyRedirects.lineralizeSegments(r,s).pipe(Kt(o=>{const a=new rn(o,{});return this.processSegment(e,t,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:h}=iD(t,i,s);if(!a)return _f(t);const p=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,h);return i.redirectTo.startsWith("/")?VU(p):this.applyRedirects.lineralizeSegments(i,p).pipe(Kt(g=>this.processSegment(e,r,t,g.concat(c),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a;if("**"===r.path){const l=i.length>0?rU(i).parameters:{};a=Q({snapshot:new JE(i,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,jU(r),No(r),r.component??r._loadedComponent??null,r,HU(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=Cne(t,r,i,e).pipe(he(({matched:l,consumedSegments:c,remainingSegments:h,parameters:p})=>l?{snapshot:new JE(c,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,jU(r),No(r),r.component??r._loadedComponent??null,r,HU(r)),consumedSegments:c,remainingSegments:h}:null));return a.pipe(xt(l=>null===l?_f(t):this.getChildConfig(e=r._injector??e,r,i).pipe(xt(({routes:c})=>{const h=r._loadedInjector??e,{snapshot:p,consumedSegments:g,remainingSegments:_}=l,{segmentGroup:v,slicedSegments:E}=UU(t,g,_,c);if(0===E.length&&v.hasChildren())return this.processChildren(h,c,v).pipe(he(P=>null===P?null:[new nl(p,P)]));if(0===c.length&&0===E.length)return Q([new nl(p,[])]);const T=No(r)===s;return this.processSegment(h,c,v,E,T?ft:s,!0).pipe(he(P=>[new nl(p,P)]))}))))}getChildConfig(e,t,r){return t.children?Q({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Q({routes:t._loadedRoutes,injector:t._loadedInjector}):function bne(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Q(!0):Q(i.map(o=>{const a=mf(o,n);return ic(function one(n){return n&&Wg(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(gf(),FU())}(e,t,r).pipe(Kt(i=>i?this.configLoader.loadChildren(e,t).pipe(gr(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function Ine(n){return af(MU(!1,3))}())):Q({routes:[],injector:e})}}function One(n){const e=n.value.routeConfig;return e&&""===e.path}function BU(n){const e=[],t=new Set;for(const r of n){if(!One(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=BU(r.children);e.push(new nl(r.value,i))}return e.filter(r=>!t.has(r))}function jU(n){return n.data||{}}function HU(n){return n.resolve||{}}function $U(n){return"string"==typeof n.title||null===n.title}function sD(n){return xt(e=>{const t=n(e);return t?M(t).pipe(he(()=>e)):Q(e)})}const yf=new te("ROUTES");let oD=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=de(wV)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Q(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=ic(t.loadComponent()).pipe(he(zU),gr(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),zE(()=>{this.componentLoaders.delete(t)})),i=new eU(r,()=>new j).pipe(BA());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Q({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function Hne(n,e,t,r){return ic(n.loadChildren()).pipe(he(zU),Kt(i=>i instanceof SL||Array.isArray(i)?Q(i):M(e.compileModuleAsync(i))),he(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(yf,[],{optional:!0,self:!0}).flat()),{routes:o.map(nD),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(zE(()=>{this.childrenLoaders.delete(r)})),o=new eU(s,()=>new j).pipe(BA());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zU(n){return function $ne(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let o0=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new j,this.transitionAbortSubject=new j,this.configLoader=de(oD),this.environmentInjector=de(no),this.urlSerializer=de(Fg),this.rootContexts=de(Hg),this.inputBindingEnabled=null!==de(e0,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Q(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Ote(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new kte(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new F({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Bg,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ui(s=>0!==s.id),he(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),xt(s=>{this.currentTransition=s;let o=!1,a=!1;return Q(s).pipe(gr(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),xt(l=>{const c=l.currentBrowserUrl.toString(),h=!t.navigated||l.extractedUrl.toString()!==c||c!==l.currentUrlTree.toString();if(!h&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const g="";return this.events.next(new hf(l.id,this.urlSerializer.serialize(l.rawUrl),g,0)),l.resolve(null),Dn}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Q(l).pipe(xt(g=>{const _=this.transitions?.getValue();return this.events.next(new YE(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),_!==this.transitions?.getValue()?Dn:Promise.resolve(g)}),function Fne(n,e,t,r,i,s){return Kt(o=>function Pne(n,e,t,r,i,s,o="emptyOnly"){return new Nne(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(he(({state:a,tree:l})=>({...o,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),gr(g=>{s.targetSnapshot=g.targetSnapshot,s.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:g.urlAfterRedirects};const _=new EU(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(_)}));if(h&&t.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){const{id:g,extractedUrl:_,source:v,restoredState:E,extras:T}=l,P=new YE(g,this.urlSerializer.serialize(_),v,E);this.events.next(P);const D=CU(0,this.rootComponentType).snapshot;return this.currentTransition=s={...l,targetSnapshot:D,urlAfterRedirects:_,extras:{...T,skipLocationChange:!1,replaceUrl:!1}},Q(s)}{const g="";return this.events.next(new hf(l.id,this.urlSerializer.serialize(l.extractedUrl),g,1)),l.resolve(null),Dn}}),gr(l=>{const c=new Rte(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),he(l=>(this.currentTransition=s={...l,guards:tne(l.targetSnapshot,l.currentSnapshot,this.rootContexts)},s)),function hne(n,e){return Kt(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?Q({...t,guardsResult:!0}):function fne(n,e,t,r){return M(n).pipe(Kt(i=>function vne(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Q(s.map(a=>{const l=zg(e)??i,c=mf(a,l);return ic(function cne(n){return n&&Wg(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,r):l.runInContext(()=>c(n,e,t,r))).pipe(el())})).pipe(gf()):Q(!0)}(i.component,i.route,t,e,r)),el(i=>!0!==i,!0))}(o,r,i,n).pipe(Kt(a=>a&&function sne(n){return"boolean"==typeof n}(a)?function pne(n,e,t,r){return M(e).pipe(lf(i=>HE(function gne(n,e){return null!==n&&e&&e(new Fte(n)),Q(!0)}(i.route.parent,r),function mne(n,e){return null!==n&&e&&e(new Vte(n)),Q(!0)}(i.route,r),function yne(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function nne(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>J2(()=>Q(o.guards.map(l=>{const c=zg(o.node)??t,h=mf(l,c);return ic(function lne(n){return n&&Wg(n.canActivateChild)}(h)?h.canActivateChild(r,n):c.runInContext(()=>h(r,n))).pipe(el())})).pipe(gf())));return Q(s).pipe(gf())}(n,i.path,t),function _ne(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Q(!0);const i=r.map(s=>J2(()=>{const o=zg(e)??t,a=mf(s,o);return ic(function ane(n){return n&&Wg(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(el())}));return Q(i).pipe(gf())}(n,i.route,t))),el(i=>!0!==i,!0))}(r,s,n,e):Q(a)),he(a=>({...t,guardsResult:a})))})}(this.environmentInjector,l=>this.events.next(l)),gr(l=>{if(s.guardsResult=l.guardsResult,Ou(l.guardsResult))throw RU(0,l.guardsResult);const c=new Mte(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),ui(l=>!!l.guardsResult||(this.cancelNavigationTransition(l,"",3),!1)),sD(l=>{if(l.guards.canActivateChecks.length)return Q(l).pipe(gr(c=>{const h=new Pte(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}),xt(c=>{let h=!1;return Q(c).pipe(function Lne(n,e){return Kt(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Q(t);let s=0;return M(i).pipe(lf(o=>function Vne(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!$U(i)&&(s[kg]=i.title),function Une(n,e,t,r){const i=function Bne(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Q({});const s={};return M(i).pipe(Kt(o=>function jne(n,e,t,r){const i=zg(e)??r,s=mf(n,i);return ic(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(el(),gr(a=>{s[o]=a}))),jA(1),function tte(n){return he(()=>n)}(s),rc(o=>OU(o)?Dn:af(o)))}(s,n,e,r).pipe(he(o=>(n._resolvedData=o,n.data=xU(n,t).resolve,i&&$U(i)&&(n.data[kg]=i.title),null)))}(o.route,r,n,e)),gr(()=>s++),jA(1),Kt(o=>s===i.length?Q(t):Dn))})}(t.paramsInheritanceStrategy,this.environmentInjector),gr({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(c,"",2)}}))}),gr(c=>{const h=new Nte(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}))}),sD(l=>{const c=h=>{const p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(gr(g=>{h.component=g}),he(()=>{})));for(const g of h.children)p.push(...c(g));return p};return BE(c(l.targetSnapshot.root)).pipe($E(),nc(1))}),sD(()=>this.afterPreactivation()),he(l=>{const c=function zte(n,e,t){const r=$g(n,e._root,t?t._root:void 0);return new TU(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s={...l,targetRouterState:c},s}),gr(()=>{this.events.next(new WA)}),((n,e,t,r)=>he(i=>(new ene(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),nc(1),gr({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new tl(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),Nu(this.transitionAbortSubject.pipe(gr(l=>{throw l}))),zE(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),rc(l=>{if(a=!0,PU(l))this.events.next(new jg(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),function Wte(n){return PU(n)&&Ou(n.url)}(l)?this.events.next(new KA(l.url)):s.resolve(!1);else{this.events.next(new XE(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(l))}catch(c){s.reject(c)}}return Dn}))}))}cancelNavigationTransition(t,r,i){const s=new jg(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qU(n){return n!==Bg}let GU=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===ft);return r}getResolvedTitleForRoute(t){return t.data[kg]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=pe({token:n,factory:function(){return de(zne)},providedIn:"root"})}return n})(),zne=(()=>{class n extends GU{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(B(z2))};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qne=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=pe({token:n,factory:function(){return de(Wne)},providedIn:"root"})}return n})();class Gne{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Wne=(()=>{class n extends Gne{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=pr(n)))(i||n)}}();static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const a0=new te("",{providedIn:"root",factory:()=>({})});let Kne=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=pe({token:n,factory:function(){return de(Zne)},providedIn:"root"})}return n})(),Zne=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Kg=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Kg||{});function WU(n,e){n.events.pipe(ui(t=>t instanceof tl||t instanceof jg||t instanceof XE||t instanceof hf),he(t=>t instanceof tl||t instanceof hf?Kg.COMPLETE:t instanceof jg&&(0===t.code||1===t.code)?Kg.REDIRECTING:Kg.FAILED),ui(t=>t!==Kg.REDIRECTING),nc(1)).subscribe(()=>{e()})}function Qne(n){throw n}function Yne(n,e,t){return e.parse("/")}const Xne={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Jne={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let zr=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=de(bV),this.isNgZoneEnabled=!1,this._events=new j,this.options=de(a0,{optional:!0})||{},this.pendingTasks=de(EV),this.errorHandler=this.options.errorHandler||Qne,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Yne,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=de(Kne),this.routeReuseStrategy=de(qne),this.titleStrategy=de(GU),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=de(yf,{optional:!0})?.flat()??[],this.navigationTransitions=de(o0),this.urlSerializer=de(Fg),this.location=de(pA),this.componentInputBindingEnabled=!!de(e0,{optional:!0}),this.eventsSubscription=new mt,this.isNgZoneEnabled=de(Xe)instanceof Xe&&Xe.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new df,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=CU(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(KU(r)&&this._events.next(r));if(r instanceof YE)qU(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof hf)this.rawUrlTree=i.rawUrl;else if(r instanceof EU){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof WA)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof jg)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof KA){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||qU(i.source)};this.scheduleNavigation(s,Bg,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof XE&&this.restoreHistory(i,!0),r instanceof tl&&(this.navigated=!0),KU(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Bg,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const l={...i};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(nD),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:o;let p,h=null;switch(a){case"merge":h={...this.currentUrlTree.queryParams,...s};break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}null!==h&&(h=this.removeEmptyProps(h));try{p=pU(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),p=this.currentUrlTree.root}return mU(p,t,h,c??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Ou(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Bg,null,r)}navigate(t,r={skipLocationChange:!1}){return function ere(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new S(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...Xne}:!1===r?{...Jne}:r,Ou(t))return sU(this.currentUrlTree,t,i);const s=this.parseUrl(t);return sU(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((p,g)=>{a=p,l=g});const h=this.pendingTasks.add();return WU(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(p=>Promise.reject(p))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function KU(n){return!(n instanceof WA||n instanceof KA)}let l0=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new j,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const l=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===l||"area"===l,this.isAnchorElement?this.subscription=t.events.subscribe(c=>{c instanceof tl&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function MO(n,e,t){return function N8(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?RO:SO}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(H(zr),H(pf),ea("tabindex"),H(qa),H(Zn),H(Pu))};static#t=this.\u0275dir=Te({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&Ar("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&qi("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",rf],skipLocationChange:["skipLocationChange","skipLocationChange",rf],replaceUrl:["replaceUrl","replaceUrl",rf],routerLink:"routerLink"},standalone:!0,features:[z1,$i]})}return n})();class ZU{}let rre=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ui(t=>t instanceof tl),lf(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=Vx(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return M(i).pipe(Jr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Q(null);const s=i.pipe(Kt(o=>null===o?Q(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?M([s,this.loader.loadComponent(r)]).pipe(Jr()):s})}static#e=this.\u0275fac=function(r){return new(r||n)(B(zr),B(wV),B(no),B(ZU),B(oD))};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const aD=new te("");let QU=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof YE?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof tl?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof hf&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof wU&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new wU(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){nx()};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac})}return n})();function rl(n,e){return{\u0275kind:n,\u0275providers:e}}function XU(){const n=de(hs);return e=>{const t=n.get(Jl);if(e!==t.components[0])return;const r=n.get(zr),i=n.get(JU);1===n.get(lD)&&r.initialNavigation(),n.get(eB,null,gt.Optional)?.setUpPreloading(),n.get(aD,null,gt.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const JU=new te("",{factory:()=>new j}),lD=new te("",{providedIn:"root",factory:()=>1}),eB=new te("");function are(n){return rl(0,[{provide:eB,useExisting:rre},{provide:ZU,useExisting:n}])}const tB=new te("ROUTER_FORROOT_GUARD"),cre=[pA,{provide:Fg,useClass:HA},zr,Hg,{provide:pf,useFactory:function YU(n){return n.routerState.root},deps:[zr]},oD,[]];function ure(){return new SV("Router",zr)}let nB=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[cre,[],{provide:yf,multi:!0,useValue:t},{provide:tB,useFactory:pre,deps:[[zr,new Ao,new $a]]},{provide:a0,useValue:r||{}},r?.useHash?{provide:Pu,useClass:wX}:{provide:Pu,useClass:s2},{provide:aD,useFactory:()=>{const n=de(HJ),e=de(Xe),t=de(a0),r=de(o0),i=de(Fg);return t.scrollOffset&&n.setOffset(t.scrollOffset),new QU(i,r,n,e,t)}},r?.preloadingStrategy?are(r.preloadingStrategy).\u0275providers:[],{provide:SV,multi:!0,useFactory:ure},r?.initialNavigation?mre(r):[],r?.bindToComponentInputs?rl(8,[SU,{provide:e0,useExisting:SU}]).\u0275providers:[],[{provide:rB,useFactory:XU},{provide:yE,multi:!0,useExisting:rB}]]}}static forChild(t){return{ngModule:n,providers:[{provide:yf,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(B(tB,8))};static#t=this.\u0275mod=jt({type:n});static#n=this.\u0275inj=Ot({})}return n})();function pre(n){return"guarded"}function mre(n){return["disabled"===n.initialNavigation?rl(3,[{provide:mE,multi:!0,useFactory:()=>{const e=de(zr);return()=>{e.setUpLocationChangeListener()}}},{provide:lD,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?rl(2,[{provide:lD,useValue:0},{provide:mE,multi:!0,deps:[hs],useFactory:e=>{const t=e.get(bX,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(zr),s=e.get(JU);WU(i,()=>{r(!0)}),e.get(o0).afterPreactivation=()=>(r(!0),s.closed?Q(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const rB=new te("");var z=Oe(861);function cD(n){return ui((e,t)=>n<=t)}const uD=new te("ngx-google-analytics-settings",{factory:()=>({trackingCode:"",enableTracing:!1})}),iB=new te("ngx-window",{providedIn:"root",factory:()=>{const{defaultView:n}=de(nn);if(!n)throw new Error("Window is not available");return n}}),yre=new te("ngx-data-layer",{providedIn:"root",factory:()=>function _re(n){return n?n.dataLayer=n.dataLayer||[]:null}(de(iB))}),sB=new te("ngx-gtag-fn",{providedIn:"root",factory:()=>function vre(n,e){return n?n.gtag=n.gtag||function(){e.push(arguments)}:null}(de(iB),de(yre))});let vf=(()=>{class n{constructor(t,r,i){this.settings=t,this._document=r,this._gtag=i}get document(){return this._document}throw(t){this.settings.enableTracing&&console&&console.error&&console.error(t)}toKeyValue(t){return t.size>0?Array.from(t).reduce((r,[i,s])=>Object.defineProperty(r,i,{value:s,enumerable:!0}),{}):void 0}gtag(...t){try{this._gtag(...t.filter(r=>void 0!==r))}catch(r){this.throw(r)}}event(t,r,i,s,o,a){try{const l=new Map;r&&l.set("event_category",r),i&&l.set("event_label",i),s&&l.set("value",s),void 0!==o&&l.set("interaction",o),a&&Object.entries(a).map(([h,p])=>l.set(h,p));const c=this.toKeyValue(l);c?this.gtag("event",t,c):this.gtag("event",t)}catch(l){this.throw(l)}}pageView(t,r,i,s){try{const o=new Map([["page_path",t]]);r&&o.set("page_title",r),(i||this.document)&&o.set("page_location",i||this.document.location.href),s&&Object.entries(s).map(([a,l])=>o.set(a,l)),this.gtag("config",this.settings.trackingCode,this.toKeyValue(o))}catch(o){this.throw(o)}}appView(t,r,i,s,o){try{const a=new Map([["screen_name",t],["app_name",r]]);i&&a.set("app_id",i),s&&a.set("app_version",s),o&&a.set("app_installer_id",o),this.gtag("event","screen_view",this.toKeyValue(a))}catch(a){this.throw(a)}}set(...t){try{this._gtag("set",...t)}catch(r){this.throw(r)}}exception(t,r){try{const i=new Map;t&&i.set("description",t),r&&i.set("fatal",r),this.toKeyValue(i)?this.gtag("event","exception",this.toKeyValue(i)):this.gtag("event","exception")}catch(i){this.throw(i)}}}return n.\u0275fac=function(t){return new(t||n)(B(uD),B(nn),B(sB))},n.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ere={provide:mE,multi:!0,useFactory:function wre(n,e,t){return(0,z.Z)(function*(){if(!n.trackingCode)return void console.error("Empty tracking code for Google Analytics. Make sure to provide one when initializing NgxGoogleAnalyticsModule.");if(!e)return void console.error("Was not possible create or read gtag() fn. Make sure this module is running on a Browser w/ access to Window interface.");t||console.error("Was not possible to access Document interface. Make sure this module is running on a Browser w/ access do Document interface."),n.uri=n.uri||`https://www.googletagmanager.com/gtag/js?id=${n.trackingCode}`,n.initCommands=n?.initCommands??[],n.initCommands.find(s=>"config"===s.command)||n.initCommands.unshift({command:"config",values:[n.trackingCode]}),n.initCommands.find(s=>"js"===s.command)||n.initCommands.unshift({command:"js",values:[new Date]});for(const s of n.initCommands)e(s.command,...s.values);const r=t.createElement("script");r.async=!0,r.src=n.uri,n.nonce&&r.setAttribute("nonce",n.nonce),t.getElementsByTagName("head")[0].appendChild(r)})},deps:[uD,sB,nn]},oB=new te("ngx-google-analytics-routing-settings",{factory:()=>({})}),Ire={provide:yE,multi:!0,useFactory:function Tre(n,e){return function(){var t=(0,z.Z)(function*(r){const i=r.injector.get(zr),{include:s=[],exclude:o=[]}=n??{},a=aB(s),l=aB(o),c=i.events.pipe(ui(h=>h instanceof tl),cD(1),ui(h=>!(a.length>0)||a.some(p=>p.test(h.urlAfterRedirects))),ui(h=>!(l.length>0&&l.some(p=>p.test(h.urlAfterRedirects))))).subscribe(h=>e.pageView(h.urlAfterRedirects,void 0));r.onDestroy(()=>c.unsubscribe())});return function(r){return t.apply(this,arguments)}}()},deps:[oB,vf]};function aB(n){return n.map(e=>e instanceof RegExp?e:new RegExp(`^${e.replace("*",".*")}$`,"i"))}let lB=(()=>{class n{static forRoot(t,r=[],i,s,o){return{ngModule:n,providers:[{provide:uD,useValue:{trackingCode:t,initCommands:r,uri:i,enableTracing:s,nonce:o}},Ere]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=jt({type:n}),n.\u0275inj=Ot({}),n})(),Cre=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:oB,useValue:t??{}}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=jt({type:n}),n.\u0275inj=Ot({providers:[Ire],imports:[OE,lB]}),n})();var _r=Oe(303);(0,_r.registerVersion)("firebase","10.8.0","app");class Dre extends mt{constructor(e,t){super()}schedule(e,t=0){return this}}const c0={setInterval(n,e,...t){const{delegate:r}=c0;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=c0;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class cB extends Dre{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return c0.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&c0.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ue(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const dD={now:()=>(dD.delegate||Date).now(),delegate:void 0};class Zg{constructor(e,t=Zg.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Zg.now=dD.now;class uB extends Zg{constructor(e,t=Zg.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const Mre=new class Rre extends uB{}(class Sre extends cB{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),u0=new uB(cB),Fu=new Kl("ANGULARFIRE2_VERSION");class d0{constructor(){return((n,e)=>{const t=(0,_r.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r})(Nre)}}const Nre="app-check";function bf(){}class dB{zone;delegate;constructor(e,t=Mre){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class kre{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bf,{},bf,bf)),t.pipe(gr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let h0=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new dB(Zone.current)),this.insideAngular=t.run(()=>new dB(Zone.current,u0)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(B(Xe))};static \u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ef(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function hB(n){return n.pipe(ge(Ef().outsideAngular))}function yr(n){return function Fre(n){return function(t){return(t=t.lift(new kre(n.ngZone))).pipe(re(n.outsideAngular),ge(n.insideAngular))}}(Ef())(n)}var ms=Oe(106);ms.Z.registerVersion("firebase","10.8.0","app-compat");const Bre=["ngOnDestroy"],fB=(n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(Bre.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const l=a?.[s];return"function"==typeof l?l.bind(a):l?.then?l.then(c=>t.run(()=>c)):t.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>o[l],apply:(a,l,c)=>o.then(h=>{const p=h?.(...c);return r?.spy?.apply&&r.spy.apply(s,c,p),p})})})});class hD{constructor(e){return e}}const wf=new te("angularfire2.app.options"),If=new te("angularfire2.app.name");function Qg(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=ms.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>ms.Z.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;jre("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new hD(o)}const jre=(n,...e)=>{},Hre={provide:hD,useFactory:Qg,deps:[wf,Xe,[new Ao,If]]};let $re=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:wf,useValue:t},{provide:If,useValue:r}]}}constructor(t){ms.Z.registerVersion("angularfire",Fu.full,"core"),ms.Z.registerVersion("angularfire",Fu.full,"app-compat"),ms.Z.registerVersion("angular",GO.full,t.toString())}static \u0275fac=function(r){return new(r||n)(B(Ps))};static \u0275mod=jt({type:n});static \u0275inj=Ot({providers:[Hre]})}return n})();function Yg(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function zre(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(mB("error",`${e} was already initialized on the ${t} Firebase App with different settings.${qre?" You may need to reload as Firebase is not HMR aware.":""}`),mB("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const qre=typeof module<"u"&&!!module.hot,mB=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[];class Gre extends j{constructor(e=1/0,t=1/0,r=dD){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let l=1;l<r.length&&r[l]<=o;l+=2)a=l;a&&r.splice(0,a+1)}}}function f0(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,Ze({connector:()=>new Gre(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const Kre=new te("angularfire2.performance.instrumentationEnabled"),Zre=new te("angularfire2.performance.dataCollectionEnabled");let sc=(()=>{class n{zone;performance;constructor(t,r,i,s,o){return this.zone=s,this.performance=Q(void 0).pipe(xt(()=>x2(o)?s.runOutsideAngular(()=>Oe.e(784).then(Oe.bind(Oe,784))):Dn),he(()=>Yg("performance","AngularFirePerformance",t.name,()=>{const a=s.runOutsideAngular(()=>t.performance());return!1===r&&(a.instrumentationEnabled=!1),!1===i&&(a.dataCollectionEnabled=!1),a},[r,i])),f0({bufferSize:1,refCount:!1})),fB(this,this.performance,s)}static \u0275fac=function(r){return new(r||n)(B(hD),B(Kre,8),B(Zre,8),B(Xe),B(Ps))};static \u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();const gB="_isStableEnd";let fD,Yre=(()=>{class n{disposable;constructor(t){typeof window<"u"&&window.performance?.mark&&(this.disposable=t.isStable.pipe(el(r=>r),gr(()=>{window.performance.mark(gB),window.performance.measure("isStable","Zone",gB)})).subscribe())}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}static \u0275fac=function(r){return new(r||n)(B(Jl))};static \u0275prov=pe({token:n,factory:n.\u0275fac})}return n})(),Xre=(()=>{class n{constructor(t,r){ms.Z.registerVersion("angularfire",Fu.full,"perf-compat"),t.dataCollectionEnabled.then(()=>{})}static \u0275fac=function(r){return new(r||n)(B(sc),B(Yre,8))};static \u0275mod=jt({type:n});static \u0275inj=Ot({providers:[sc]})}return n})();try{fD=typeof Intl<"u"&&Intl.v8BreakIterator}catch{fD=!1}let Tf,ua=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?x2(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!fD)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(r){return new(r||n)(B(Ps))};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const _B=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function yB(){if(Tf)return Tf;if("object"!=typeof document||!document)return Tf=new Set(_B),Tf;let n=document.createElement("input");return Tf=new Set(_B.filter(e=>(n.setAttribute("type",e),n.type===e))),Tf}let Jg,pD;function e_(n){return function Jre(){if(null==Jg&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Jg=!0}))}finally{Jg=Jg||!1}return Jg}()?n:!!n.capture}function Cf(n){return n.composedPath?n.composedPath()[0]:n.target}function il(n){return null!=n&&"false"!=`${n}`}function vB(n){return Array.isArray(n)?n:[n]}function Uu(n){return n instanceof Zn?n.nativeElement:n}function bB(n,e=u0){return K((t,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const c=s;s=null,r.next(c)}};function l(){const c=o+n,h=e.now();if(h<c)return i=this.schedule(void 0,c-h),void r.add(i);a()}t.subscribe(fe(r,c=>{s=c,o=e.now(),i||(i=e.schedule(l,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}const EB=new Set;let Bu,cie=(()=>{class n{constructor(t,r){this._platform=t,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):die}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function uie(n,e){if(!EB.has(n))try{Bu||(Bu=document.createElement("style"),e&&(Bu.nonce=e),Bu.setAttribute("type","text/css"),document.head.appendChild(Bu)),Bu.sheet&&(Bu.sheet.insertRule(`@media ${n} {body{ }}`,0),EB.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static#e=this.\u0275fac=function(r){return new(r||n)(B(ua),B(LC,8))};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function die(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let hie=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new j}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return wB(vB(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let s=BE(wB(vB(t)).map(o=>this._registerQuery(o).observable));return s=HE(s.pipe(nc(1)),s.pipe(cD(1),bB(0))),s.pipe(he(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),s={observable:new at(o=>{const a=l=>this._zone.run(()=>o.next(l));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(Ng(r),he(({matches:o})=>({query:t,matches:o})),Nu(this._destroySubject)),mql:r};return this._queries.set(t,s),s}static#e=this.\u0275fac=function(r){return new(r||n)(B(cie),B(Xe))};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function wB(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function xB(n){return 0===n.buttons||0===n.detail}function AB(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const bie=new te("cdk-input-modality-detector-options"),Eie={ignoreKeys:[18,17,224,91,16]},xf=e_({passive:!0,capture:!0});let wie=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,r,i,s){this._platform=t,this._mostRecentTarget=null,this._modality=new F(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Cf(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(xB(o)?"keyboard":"mouse"),this._mostRecentTarget=Cf(o))},this._onTouchstart=o=>{AB(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Cf(o))},this._options={...Eie,...s},this.modalityDetected=this._modality.pipe(cD(1)),this.modalityChanged=this.modalityDetected.pipe(mn()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,xf),i.addEventListener("mousedown",this._onMousedown,xf),i.addEventListener("touchstart",this._onTouchstart,xf)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,xf),document.removeEventListener("mousedown",this._onMousedown,xf),document.removeEventListener("touchstart",this._onTouchstart,xf))}static#e=this.\u0275fac=function(r){return new(r||n)(B(ua),B(Xe),B(nn),B(bie,8))};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Tie=new te("cdk-focus-monitor-default-options"),m0=e_({passive:!0,capture:!0});let Cie=(()=>{class n{constructor(t,r,i,s,o){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new j,this._rootNodeFocusAndBlurListener=a=>{for(let c=Cf(a);c;c=c.parentElement)"focus"===a.type?this._onFocus(a,c):this._onBlur(a,c)},this._document=s,this._detectionMode=o?.detectionMode||0}monitor(t,r=!1){const i=Uu(t);if(!this._platform.isBrowser||1!==i.nodeType)return Q();const s=function tie(n){if(function eie(){if(null==pD){const n=typeof document<"u"?document.head:null;pD=!(!n||!n.createShadowRoot&&!n.attachShadow)}return pD}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),o=this._elementInfo.get(i);if(o)return r&&(o.checkChildren=!0),o.subject;const a={checkChildren:r,subject:new j,rootNode:s};return this._elementInfo.set(i,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const r=Uu(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const s=Uu(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,r,l)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),s=Cf(t);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,m0),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,m0)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Nu(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,m0),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,m0),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,s)=>{(s===t||i.checkChildren&&s.contains(t))&&r.push([s,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(r))return!0;return!1}static#e=this.\u0275fac=function(r){return new(r||n)(B(Xe),B(ua),B(wie),B(nn,8),B(Tie,8))};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const SB="cdk-high-contrast-black-on-white",RB="cdk-high-contrast-white-on-black",mD="cdk-high-contrast-active";let xie=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=de(hie).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(mD,SB,RB),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(mD,SB):2===r&&t.add(mD,RB)}}static#e=this.\u0275fac=function(r){return new(r||n)(B(ua),B(nn))};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Aie=new te("cdk-dir-doc",{providedIn:"root",factory:function Die(){return de(nn)}}),Sie=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Mie=(()=>{class n{constructor(t){this.value="ltr",this.change=new Qn,t&&(this.value=function Rie(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?Sie.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(r){return new(r||n)(B(Aie,8))};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),MB=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=jt({type:n});static#n=this.\u0275inj=Ot({})}return n})();const Nie=new te("mat-sanity-checks",{providedIn:"root",factory:function Pie(){return!0}});let ao=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function nie(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static#e=this.\u0275fac=function(r){return new(r||n)(B(xie),B(Nie,8),B(nn))};static#t=this.\u0275mod=jt({type:n});static#n=this.\u0275inj=Ot({imports:[MB,MB]})}return n})();function kie(n){return class extends n{get disabled(){return this._disabled}set disabled(e){this._disabled=il(e)}constructor(...e){super(...e),this._disabled=!1}}}function kB(n,e){return class extends n{get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}constructor(...t){super(...t),this.defaultColor=e,this.color=e}}}function Oie(n){return class extends n{get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=il(e)}constructor(...e){super(...e),this._disableRipple=!1}}}function Fie(n){return class extends n{updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}constructor(...e){super(...e),this.errorState=!1}}}let Vie=(()=>{class n{isErrorState(t,r){return!!(t&&t.invalid&&(t.touched||r&&r.submitted))}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Uie{constructor(e,t,r,i=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const OB=e_({passive:!0,capture:!0});class Bie{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=Cf(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,r,i){const s=this._events.get(t);if(s){const o=s.get(r);o?o.add(i):s.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,OB)})}removeHandler(e,t,r){const i=this._events.get(e);if(!i)return;const s=i.get(t);s&&(s.delete(r),0===s.size&&i.delete(t),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,OB)))}}const FB={enterDuration:225,exitDuration:150},LB=e_({passive:!0,capture:!0}),VB=["mousedown","touchstart"],UB=["mouseup","mouseleave","touchend","touchcancel"];class g0{static#e=this._eventManager=new Bie;constructor(e,t,r,i){this._target=e,this._ngZone=t,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Uu(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...FB,...r.animation};r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const o=r.radius||function Hie(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),a=e-i.left,l=t-i.top,c=s.enterDuration,h=document.createElement("div");h.classList.add("mat-ripple-element"),h.style.left=a-o+"px",h.style.top=l-o+"px",h.style.height=2*o+"px",h.style.width=2*o+"px",null!=r.color&&(h.style.backgroundColor=r.color),h.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(h);const p=window.getComputedStyle(h),_=p.transitionDuration,v="none"===p.transitionProperty||"0s"===_||"0s, 0s"===_||0===i.width&&0===i.height,E=new Uie(this,h,r,v);h.style.transform="scale3d(1, 1, 1)",E.state=0,r.persistent||(this._mostRecentTransientRipple=E);let T=null;return!v&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const P=()=>this._finishRippleTransition(E),D=()=>this._destroyRipple(E);h.addEventListener("transitionend",P),h.addEventListener("transitioncancel",D),T={onTransitionEnd:P,onTransitionCancel:D}}),this._activeRipples.set(E,T),(v||!c)&&this._finishRippleTransition(E),E}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...FB,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Uu(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,VB.forEach(r=>{g0._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{UB.forEach(t=>{this._triggerElement.addEventListener(t,this,LB)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=xB(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!AB(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(VB.forEach(t=>g0._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&UB.forEach(t=>e.removeEventListener(t,this,LB)))}}const BB=new te("mat-ripple-global-options");let $ie=(()=>{class n{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,r,i,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new g0(this,r,t,i)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,{...this.rippleConfig,...i}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}static#e=this.\u0275fac=function(r){return new(r||n)(H(Zn),H(Xe),H(ua),H(BB,8),H(Oh,8))};static#t=this.\u0275dir=Te({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,i){2&r&&ci("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return n})(),zie=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=jt({type:n});static#n=this.\u0275inj=Ot({imports:[ao,ao]})}return n})();const jB={capture:!0},HB=["focus","click","mouseenter","touchstart"],gD="mat-ripple-loader-uninitialized",_D="mat-ripple-loader-class-name",$B="mat-ripple-loader-centered",_0="mat-ripple-loader-disabled";let qie=(()=>{class n{constructor(){this._document=de(nn,{optional:!0}),this._animationMode=de(Oh,{optional:!0}),this._globalRippleOptions=de(BB,{optional:!0}),this._platform=de(ua),this._ngZone=de(Xe),this._hosts=new Map,this._onInteraction=t=>{if(!(t.target instanceof HTMLElement))return;const i=t.target.closest(`[${gD}]`);i&&this._createRipple(i)},this._ngZone.runOutsideAngular(()=>{for(const t of HB)this._document?.addEventListener(t,this._onInteraction,jB)})}ngOnDestroy(){const t=this._hosts.keys();for(const r of t)this.destroyRipple(r);for(const r of HB)this._document?.removeEventListener(r,this._onInteraction,jB)}configureRipple(t,r){t.setAttribute(gD,""),(r.className||!t.hasAttribute(_D))&&t.setAttribute(_D,r.className||""),r.centered&&t.setAttribute($B,""),r.disabled&&t.setAttribute(_0,"")}getRipple(t){return this._hosts.get(t)||this._createRipple(t)}setDisabled(t,r){const i=this._hosts.get(t);i?i.disabled=r:r?t.setAttribute(_0,""):t.removeAttribute(_0)}_createRipple(t){if(!this._document)return;const r=this._hosts.get(t);if(r)return r;t.querySelector(".mat-ripple")?.remove();const i=this._document.createElement("span");i.classList.add("mat-ripple",t.getAttribute(_D)),t.append(i);const s=new $ie(new Zn(i),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return s._isInitialized=!0,s.trigger=t,s.centered=t.hasAttribute($B),s.disabled=t.hasAttribute(_0),this.attachRipple(t,s),s}attachRipple(t,r){t.removeAttribute(gD),this._hosts.set(t,r)}destroyRipple(t){const r=this._hosts.get(t);r&&(r.ngOnDestroy(),this._hosts.delete(t))}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zB(...n){const e=Eo(n),{args:t,keys:r}=Z2(n),i=new at(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let h=0;h<o;h++){let p=!1;pn(t[h]).subscribe(fe(s,g=>{p||(p=!0,c--),a[h]=g},()=>l--,void 0,()=>{(!l||!p)&&(c||s.next(r?Y2(r,a):a),s.complete())}))}});return e?i.pipe(Q2(e)):i}class yD{}class sl{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof sl?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new sl;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof sl?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Gie{encodeKey(e){return qB(e)}encodeValue(e){return qB(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Kie=/%(\d[a-f0-9])/gi,Zie={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function qB(n){return encodeURIComponent(n).replace(Kie,(e,t)=>Zie[t]??e)}function y0(n){return`${n}`}class oc{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Gie,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Wie(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(y0):[y0(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new oc({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(y0(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(y0(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Qie{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function GB(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function WB(n){return typeof Blob<"u"&&n instanceof Blob}function KB(n){return typeof FormData<"u"&&n instanceof FormData}class n_{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Yie(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new sl),this.context||(this.context=new Qie),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new oc,this.urlWithParams=t}serializeBody(){return null===this.body?null:GB(this.body)||WB(this.body)||KB(this.body)||function Xie(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof oc?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||KB(this.body)?null:WB(this.body)?this.body.type||null:GB(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof oc?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,c=e.params||this.params;const h=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((p,g)=>p.set(g,e.setHeaders[g]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((p,g)=>p.set(g,e.setParams[g]),c)),new n_(t,r,s,{params:c,headers:l,context:h,reportProgress:a,responseType:i,withCredentials:o})}}var bD=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(bD||{});class Jie{constructor(e,t=200,r="OK"){this.headers=e.headers||new sl,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class r_ extends Jie{constructor(e={}){super(e),this.type=bD.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new r_({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function ED(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let wD=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof n_)s=t;else{let l,c;l=i.headers instanceof sl?i.headers:new sl(i.headers),i.params&&(c=i.params instanceof oc?i.params:new oc({fromObject:i.params})),s=new n_(t,r,void 0!==i.body?i.body:null,{headers:l,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const o=Q(s).pipe(lf(l=>this.handler.handle(l)));if(t instanceof n_||"events"===i.observe)return o;const a=o.pipe(ui(l=>l instanceof r_));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(he(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(he(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(he(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(he(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new oc).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,ED(i,r))}post(t,r,i={}){return this.request("POST",t,ED(i,r))}put(t,r,i={}){return this.request("PUT",t,ED(i,r))}static#e=this.\u0275fac=function(r){return new(r||n)(B(yD))};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac})}return n})();const vse=["*"];let E0;function i_(n){return function bse(){if(void 0===E0&&(E0=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(E0=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return E0}()?.createHTML(n)||n}function ij(n){return Error(`Unable to find icon with the name "${n}"`)}function sj(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function oj(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Hu{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let w0=(()=>{class n{constructor(t,r,i,s){this._httpClient=t,this._sanitizer=r,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,s){return this._addSvgIconConfig(t,r,new Hu(i,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,s){const o=this._sanitizer.sanitize(ai.HTML,i);if(!o)throw oj(i);const a=i_(o);return this._addSvgIconConfig(t,r,new Hu("",a,s))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new Hu(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const s=this._sanitizer.sanitize(ai.HTML,r);if(!s)throw oj(r);const o=i_(s);return this._addSvgIconSetConfig(t,new Hu("",o,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(ai.RESOURCE_URL,t);if(!r)throw sj(t);const i=this._cachedIconsByUrl.get(r);return i?Q(I0(i)):this._loadSvgIconFromConfig(new Hu(t,null)).pipe(gr(s=>this._cachedIconsByUrl.set(r,s)),he(s=>I0(s)))}getNamedSvgIcon(t,r=""){const i=aj(r,t);let s=this._svgIconConfigs.get(i);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,t),s)return this._svgIconConfigs.set(i,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(r);return o?this._getSvgFromIconSetConfigs(t,o):af(ij(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Q(I0(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(he(r=>I0(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?Q(i):zB(r.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(rc(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(ai.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),Q(null)})))).pipe(he(()=>{const o=this._extractIconWithNameFromAnySet(t,r);if(!o)throw ij(t);return o}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const s=r[i];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(gr(r=>t.svgText=r),he(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Q(null):this._fetchIcon(t).pipe(gr(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const s=t.querySelector(`[id="${r}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,i);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),i);const a=this._svgElementFromString(i_("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(i_("<svg></svg>")),i=t.attributes;for(let s=0;s<i.length;s++){const{name:o,value:a}=i[s];"id"!==o&&r.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){const{url:r,options:i}=t,s=i?.withCredentials??!1;if(!this._httpClient)throw function Ese(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const o=this._sanitizer.sanitize(ai.RESOURCE_URL,r);if(!o)throw sj(r);const a=this._inProgressUrlFetches.get(o);if(a)return a;const l=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(he(c=>i_(c)),zE(()=>this._inProgressUrlFetches.delete(o)),Ze());return this._inProgressUrlFetches.set(o,l),l}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(aj(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const s=this._resolvers[i](r,t);if(s)return Ise(s)?new Hu(s.url,null,s.options):new Hu(s,null)}}static#e=this.\u0275fac=function(r){return new(r||n)(B(wD,8),B(UA),B(nn,8),B(ro))};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function I0(n){return n.cloneNode(!0)}function aj(n,e){return n+":"+e}function Ise(n){return!(!n.url||!n.options)}const Tse=kB(class{constructor(n){this._elementRef=n}}),Cse=new te("MAT_ICON_DEFAULT_OPTIONS"),xse=new te("mat-icon-location",{providedIn:"root",factory:function Ase(){const n=de(nn),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),lj=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Dse=lj.map(n=>`[${n}]`).join(", "),Sse=/^url\(['"]?#(.*?)['"]?\)$/;let Rse=(()=>{class n extends Tse{get inline(){return this._inline}set inline(t){this._inline=il(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}constructor(t,r,i,s,o,a){super(t),this._iconRegistry=r,this._location=s,this._errorHandler=o,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=mt.EMPTY,a&&(a.color&&(this.color=this.defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),i||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>t.classList.remove(i)),r.forEach(i=>t.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,s)=>{i.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(Dse),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)lj.forEach(o=>{const a=r[s],l=a.getAttribute(o),c=l?l.match(Sse):null;if(c){let h=i.get(a);h||(h=[],i.set(a,h)),h.push({name:o,value:c[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(nc(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${s.message}`))})}}static#e=this.\u0275fac=function(r){return new(r||n)(H(Zn),H(w0),ea("aria-hidden"),H(xse),H(ro),H(Cse,8))};static#t=this.\u0275cmp=Hr({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(r,i){2&r&&(qi("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet)("fontIcon",i._usingFontIcon()?i.fontIcon:null),ci("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Vt],ngContentSelectors:vse,decls:1,vars:0,template:function(r,i){1&r&&(Zl(),or(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return n})(),Mse=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=jt({type:n});static#n=this.\u0275inj=Ot({imports:[ao,ao]})}return n})();function Pse(n,e){if(1&n&&(ct(0,"div",13)(1,"div",14)(2,"mat-icon"),Yn(3),tt()(),ct(4,"h3"),Yn(5),tt()()),2&n){const t=e.$implicit;sr(3),_g(t.icon),sr(2),_g(t.name)}}let Nse=(()=>{class n{constructor(t,r,i){this.router=t,this.gaService=r,this.perf=i,this.products=[{name:"Abre tu cuenta de Ahorro",icon:"home"},{name:"Solicita tu Cr\xe9dito Digital",icon:"credit_card"},{name:"Conoce nuestros seguros",icon:"admin_panel_settings"},{name:"Descarga Banca M\xf3vil",icon:"phone_iphone"}]}ngOnInit(){this.gaService.pageView("/menu","P\xe1gina de menu")}buttonAhorro(){this.router.navigate(["/ahorro"])}buttonMovi(){this.router.navigate(["/movimiento"])}buttonTras(){this.router.navigate(["/transferencia"])}someFunction1(){var t=this;return(0,z.Z)(function*(){const r=yield t.perf.trace("ahorro");r.start(),yield t.buttonAhorro(),r.stop()})()}someFunction2(){var t=this;return(0,z.Z)(function*(){const r=yield t.perf.trace("movimiento");r.start(),yield t.buttonMovi(),r.stop()})()}someFunction3(){var t=this;return(0,z.Z)(function*(){const r=yield t.perf.trace("transferencia");r.start(),yield t.buttonTras(),r.stop()})()}static#e=this.\u0275fac=function(r){return new(r||n)(H(zr),H(vf),H(sc))};static#t=this.\u0275cmp=Hr({type:n,selectors:[["app-menu"]],decls:26,vars:1,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],[1,"container","navbar-container"],["href","#",1,"navbar-brand"],[1,"navbar-nav","ml-auto"],["routerLink","/movimiento","href","#",1,"nav-item","nav-link"],["routerLink","/transferencia","href","#",1,"nav-item","nav-link"],["routerLink","/ahorro","href","#",1,"nav-item","nav-link"],[1,"card-container"],[1,"content"],[2,"font-size","3em"],[1,"product-grid"],[1,"product-container"],["class","product-card",4,"ngFor","ngForOf"],[1,"product-card"],[1,"icon-wrapper"]],template:function(r,i){1&r&&(ct(0,"nav",0)(1,"div",1)(2,"a",2),Yn(3,"AppDemo"),tt(),ct(4,"div",3)(5,"a",4),Yn(6,"Movimientos"),tt(),ct(7,"a",5),Yn(8,"Transferencias"),tt(),ct(9,"a",6),Yn(10,"Ahorros"),tt()()()(),li(11,"br"),ct(12,"div",7)(13,"div",8)(14,"h4"),Yn(15,"Ahorros en:"),tt(),ct(16,"h1",9),Yn(17," Bs 2000.00"),tt()()(),li(18,"br"),ct(19,"div",10)(20,"h2"),Yn(21,"Nuestros productos"),tt(),ct(22,"p"),Yn(23,"\xa1Conoce los productos que puedes obtener desde la comodidad de tu casa!"),tt(),ct(24,"div",11),Or(25,Pse,6,2,"div",12),tt()()),2&r&&(sr(25),cn("ngForOf",i.products))},dependencies:[_2,l0,Rse],styles:[".navbar-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.card-container[_ngcontent-%COMP%]{width:98%;padding:10px 20px 30px;margin:20px;display:flex;justify-content:center;align-items:center;height:20%;box-shadow:0 4px 8px #0000001a;border-radius:8px}.product-grid[_ngcontent-%COMP%]{text-align:center}.product-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;flex-wrap:wrap}.product-card[_ngcontent-%COMP%]{width:200px;padding:20px;margin:10px;box-shadow:0 4px 8px #0000001a;border-radius:8px;text-align:center}.icon-wrapper[_ngcontent-%COMP%]{padding:20px}.online-btn[_ngcontent-%COMP%]{background-color:#00f;color:#fff;border:none;padding:10px 20px;margin-top:10px;border-radius:4px;cursor:pointer}.online-btn[_ngcontent-%COMP%]:hover{background-color:#00008b}"]})}return n})();const kse=["mat-button",""],Ose=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],Fse=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],Lse=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],Vse=kB(kie(Oie(class{constructor(n){this._elementRef=n}})));let Use=(()=>{class n extends Vse{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(t){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,t)}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=il(t),this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(t){this._disabled=il(t),this._updateRippleDisabled()}constructor(t,r,i,s){super(t),this._platform=r,this._ngZone=i,this._animationMode=s,this._focusMonitor=de(Cie),this._rippleLoader=de(qie),this._isFab=!1,this._disableRipple=!1,this._disabled=!1,this._rippleLoader?.configureRipple(this._elementRef.nativeElement,{className:"mat-mdc-button-ripple"});const o=t.nativeElement.classList;for(const a of Lse)this._hasHostAttributes(a.selector)&&a.mdcClasses.forEach(l=>{o.add(l)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(t="program",r){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,r):this._elementRef.nativeElement.focus(r)}_hasHostAttributes(...t){return t.some(r=>this._elementRef.nativeElement.hasAttribute(r))}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static#e=this.\u0275fac=function(r){nx()};static#t=this.\u0275dir=Te({type:n,features:[Vt]})}return n})(),T0=(()=>{class n extends Use{constructor(t,r,i,s){super(t,r,i,s)}static#e=this.\u0275fac=function(r){return new(r||n)(H(Zn),H(ua),H(Xe),H(Oh,8))};static#t=this.\u0275cmp=Hr({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(r,i){2&r&&(qi("disabled",i.disabled||null),ci("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Vt],attrs:kse,ngContentSelectors:Fse,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,i){1&r&&(Zl(Ose),li(0,"span",0),or(1),ct(2,"span",1),or(3,1),tt(),or(4,2),li(5,"span",2)(6,"span",3)),2&r&&ci("mdc-button__ripple",!i._isFab)("mdc-fab__ripple",i._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}return n})(),Hse=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=jt({type:n});static#n=this.\u0275inj=Ot({imports:[ao,zie,ao]})}return n})(),$se=(()=>{class n{constructor(t,r,i){this.router=t,this.gaService=r,this.perf=i}buttonVolver(){this.router.navigate(["/menu"])}someFunction(){var t=this;return(0,z.Z)(function*(){const r=yield t.perf.trace("ahorro");r.start(),yield t.buttonVolver(),r.stop()})()}static#e=this.\u0275fac=function(r){return new(r||n)(H(zr),H(vf),H(sc))};static#t=this.\u0275cmp=Hr({type:n,selectors:[["app-ahorro"]],decls:8,vars:0,consts:[[1,"card-container"],[1,"content"],["mat-raised-button","","color","primary",3,"click"]],template:function(r,i){1&r&&(ct(0,"h1"),Yn(1," AHORROS "),tt(),ct(2,"div",0)(3,"h1"),Yn(4,"AHORROS"),tt(),li(5,"div",1),tt(),ct(6,"button",2),Ar("click",function(){return i.buttonVolver()}),Yn(7,"Continuar"),tt())},dependencies:[T0],styles:[".card-container[_ngcontent-%COMP%]{width:98%;padding:10px 20px 30px;margin:20px;display:flex;justify-content:center;align-items:center;height:20%;box-shadow:0 4px 8px #0000001a;border-radius:8px}"]})}return n})(),zse=(()=>{class n{constructor(t,r,i){this.router=t,this.gaService=r,this.perf=i}buttonVolver(){this.router.navigate(["/menu"])}someFunction(){var t=this;return(0,z.Z)(function*(){const r=yield t.perf.trace("movimiento");r.start(),yield t.buttonVolver(),r.stop()})()}static#e=this.\u0275fac=function(r){return new(r||n)(H(zr),H(vf),H(sc))};static#t=this.\u0275cmp=Hr({type:n,selectors:[["app-movimiento"]],decls:6,vars:0,consts:[[1,"card-container"],[1,"content"],["mat-raised-button","","color","primary",3,"click"]],template:function(r,i){1&r&&(ct(0,"div",0)(1,"h1"),Yn(2,"MOVIMIENTOS"),tt(),li(3,"div",1),tt(),ct(4,"button",2),Ar("click",function(){return i.buttonVolver()}),Yn(5,"Continuar"),tt())},dependencies:[T0],styles:[".card-container[_ngcontent-%COMP%]{width:98%;padding:10px 20px 30px;margin:20px;display:flex;justify-content:center;align-items:center;height:20%;box-shadow:0 4px 8px #0000001a;border-radius:8px}"]})}return n})(),qse=(()=>{class n{constructor(t,r,i){this.router=t,this.gaService=r,this.perf=i}buttonVolver(){this.router.navigate(["/menu"])}someFunction(){var t=this;return(0,z.Z)(function*(){const r=yield t.perf.trace("transferencia");r.start(),yield t.buttonVolver(),r.stop()})()}static#e=this.\u0275fac=function(r){return new(r||n)(H(zr),H(vf),H(sc))};static#t=this.\u0275cmp=Hr({type:n,selectors:[["app-transferencia"]],decls:6,vars:0,consts:[[1,"card-container"],[1,"content"],["mat-raised-button","","color","primary",3,"click"]],template:function(r,i){1&r&&(ct(0,"div",0)(1,"h1"),Yn(2,"TRANSFERENCIAS"),tt(),li(3,"div",1),tt(),ct(4,"button",2),Ar("click",function(){return i.buttonVolver()}),Yn(5,"Continuar"),tt())},dependencies:[T0],styles:[".card-container[_ngcontent-%COMP%]{width:98%;padding:10px 20px 30px;margin:20px;display:flex;justify-content:center;align-items:center;height:20%;box-shadow:0 4px 8px #0000001a;border-radius:8px}"]})}return n})();var w=Oe(58),lo=Oe(537),Zi=Oe(879);Oe(812);const TD="@firebase/remote-config";class Gse{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}const uj="remote-config",gs=new w.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"}),Yse=["1","true","t","yes","y","on"];class CD{constructor(e,t=""){this._source=e,this._value=t}asString(){return this._value}asBoolean(){return"static"!==this._source&&Yse.indexOf(this._value.toLowerCase())>=0}asNumber(){if("static"===this._source)return 0;let e=Number(this._value);return isNaN(e)&&(e=0),e}getSource(){return this._source}}function xD(){return(xD=(0,z.Z)(function*(n){const e=(0,w.m9)(n),[t,r]=yield Promise.all([e._storage.getLastSuccessfulFetchResponse(),e._storage.getActiveConfigEtag()]);return!!(t&&t.config&&t.eTag&&t.eTag!==r)&&(yield Promise.all([e._storageCache.setActiveConfig(t.config),e._storage.setActiveConfigEtag(t.eTag)]),!0)})).apply(this,arguments)}function AD(){return(AD=(0,z.Z)(function*(n){const e=(0,w.m9)(n),t=new Gse;setTimeout((0,z.Z)(function*(){t.abort()}),e.settings.fetchTimeoutMillis);try{yield e._client.fetch({cacheMaxAgeMillis:e.settings.minimumFetchIntervalMillis,signal:t}),yield e._storageCache.setLastFetchStatus("success")}catch(r){const i=function Kse(n,e){return n instanceof w.ZR&&-1!==n.code.indexOf(e)}(r,"fetch-throttle")?"throttle":"failure";throw yield e._storageCache.setLastFetchStatus(i),r}})).apply(this,arguments)}class roe{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var t=this;return(0,z.Z)(function*(){const[r,i]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(i&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const s=yield t.client.fetch(e),o=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&o.push(t.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(o),s})()}}function ioe(n=navigator){return n.languages&&n.languages[0]||n.language}class soe{constructor(e,t,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){var t=this;return(0,z.Z)(function*(){const[r,i]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),o=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},l={sdk_version:t.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:t.appId,language_code:ioe()},c={method:"POST",headers:a,body:JSON.stringify(l)},h=fetch(o,c),p=new Promise((P,D)=>{e.signal.addEventListener(()=>{const k=new Error("The operation was aborted.");k.name="AbortError",D(k)})});let g;try{yield Promise.race([h,p]),g=yield h}catch(P){let D="fetch-client-network";throw"AbortError"===P?.name&&(D="fetch-timeout"),gs.create(D,{originalErrorMessage:P?.message})}let _=g.status;const v=g.headers.get("ETag")||void 0;let E,T;if(200===g.status){let P;try{P=yield g.json()}catch(D){throw gs.create("fetch-client-parse",{originalErrorMessage:D?.message})}E=P.entries,T=P.state}if("INSTANCE_STATE_UNSPECIFIED"===T?_=500:"NO_CHANGE"===T?_=304:("NO_TEMPLATE"===T||"EMPTY_CONFIG"===T)&&(E={}),304!==_&&200!==_)throw gs.create("fetch-status",{httpStatus:_});return{status:_,eTag:v,config:E}})()}}class loe{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return(0,z.Z)(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var i=this;return(0,z.Z)(function*(){yield function ooe(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(gs.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const s=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),s}catch(s){if(!function aoe(n){if(!(n instanceof w.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const o={throttleEndTimeMillis:Date.now()+(0,w.$s)(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(o),i.attemptFetch(e,o)}})()}}class doe{constructor(e,t,r,i,s){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function C0(n,e){const t=n.target.error||void 0;return gs.create(e,{originalErrorMessage:t&&t?.message})}const $u="app_namespace_store";class moe{constructor(e,t,r,i=function poe(){return new Promise((n,e)=>{try{const t=indexedDB.open("firebase_remote_config",1);t.onerror=r=>{e(C0(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore($u,{keyPath:"compositeKey"})}}catch(t){e(gs.create("storage-open",{originalErrorMessage:t?.message}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return(0,z.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,s)=>{const a=r.transaction([$u],"readonly").objectStore($u),l=t.createCompositeKey(e);try{const c=a.get(l);c.onerror=h=>{s(C0(h,"storage-get"))},c.onsuccess=h=>{const p=h.target.result;i(p?p.value:void 0)}}catch(c){s(gs.create("storage-get",{originalErrorMessage:c?.message}))}})})()}set(e,t){var r=this;return(0,z.Z)(function*(){const i=yield r.openDbPromise;return new Promise((s,o)=>{const l=i.transaction([$u],"readwrite").objectStore($u),c=r.createCompositeKey(e);try{const h=l.put({compositeKey:c,value:t});h.onerror=p=>{o(C0(p,"storage-set"))},h.onsuccess=()=>{s()}}catch(h){o(gs.create("storage-set",{originalErrorMessage:h?.message}))}})})()}delete(e){var t=this;return(0,z.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,s)=>{const a=r.transaction([$u],"readwrite").objectStore($u),l=t.createCompositeKey(e);try{const c=a.delete(l);c.onerror=h=>{s(C0(h,"storage-delete"))},c.onsuccess=()=>{i()}}catch(c){s(gs.create("storage-delete",{originalErrorMessage:c?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class goe{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return(0,z.Z)(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),s=yield t;s&&(e.lastFetchStatus=s);const o=yield r;o&&(e.lastSuccessfulFetchTimestampMillis=o);const a=yield i;a&&(e.activeConfig=a)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function DD(){return DD=(0,z.Z)(function*(n){return n=(0,w.m9)(n),yield function toe(n){return AD.apply(this,arguments)}(n),function Jse(n){return xD.apply(this,arguments)}(n)}),DD.apply(this,arguments)}function hj(n,e){return I(e)?xt(()=>n,e):xt(()=>n)}!function _oe(){(0,_r._registerComponent)(new lo.wA(uj,function n(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw gs.create("registration-window");if(!(0,w.hl)())throw gs.create("indexed-db-unavailable");const{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw gs.create("registration-project-id");if(!o)throw gs.create("registration-api-key");if(!a)throw gs.create("registration-app-id");const l=new moe(a,r.name,t=t||"firebase"),c=new goe(l),h=new Zi.Yd(TD);h.logLevel=Zi.in.ERROR;const p=new soe(i,_r.SDK_VERSION,t,s,o,a),g=new loe(p,l),_=new roe(g,l,c,h),v=new doe(r,_,c,l,h);return function eoe(n){const e=(0,w.m9)(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(v),v},"PUBLIC").setMultipleInstances(!0)),(0,_r.registerVersion)(TD,"0.4.5"),(0,_r.registerVersion)(TD,"0.4.5","esm2017")}(),Oe(999);const RD=new te("angularfire2.auth.use-emulator"),MD=new te("angularfire2.auth.settings"),PD=new te("angularfire2.auth.tenant-id"),ND=new te("angularfire2.auth.langugage-code"),kD=new te("angularfire2.auth.use-device-language"),OD=new te("angularfire.auth.persistence"),FD=(n,e,t,r,i,s,o,a)=>Yg(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const l=e.runOutsideAngular(()=>n.auth());if(t&&l.useEmulator(...t),r&&(l.tenantId=r),l.languageCode=i,s&&l.useDeviceLanguage(),o)for(const[c,h]of Object.entries(o))l.settings[c]=h;return a&&l.setPersistence(a),l},[t,r,i,s,o,a]);let x0=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,l,c,h,p,g,_){const v=new j,E=Q(void 0).pipe(ge(o.outsideAngular),xt(()=>s.runOutsideAngular(()=>Promise.resolve().then(Oe.bind(Oe,999)))),he(()=>Qg(t,s,r)),he(T=>FD(T,s,a,c,h,p,l,g)),f0({bufferSize:1,refCount:!1}));if(FE(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Q(null);else{E.pipe(el()).subscribe();const T=E.pipe(xt(k=>k.getRedirectResult().then(G=>G,()=>null)),yr,f0({bufferSize:1,refCount:!1})),P=E.pipe(xt(k=>new at(G=>({unsubscribe:s.runOutsideAngular(()=>k.onAuthStateChanged(ce=>G.next(ce),ce=>G.error(ce),()=>G.complete()))})))),D=E.pipe(xt(k=>new at(G=>({unsubscribe:s.runOutsideAngular(()=>k.onIdTokenChanged(ce=>G.next(ce),ce=>G.error(ce),()=>G.complete()))}))));this.authState=T.pipe(hj(P),re(o.outsideAngular),ge(o.insideAngular)),this.user=T.pipe(hj(D),re(o.outsideAngular),ge(o.insideAngular)),this.idToken=this.user.pipe(xt(k=>k?M(k.getIdToken()):Q(null))),this.idTokenResult=this.user.pipe(xt(k=>k?M(k.getIdTokenResult()):Q(null))),this.credential=J(T,v,this.authState.pipe(ui(k=>!k))).pipe(he(k=>k?.user?k:null),re(o.outsideAngular),ge(o.insideAngular))}return fB(this,E,s,{spy:{apply:(T,P,D)=>{(T.startsWith("signIn")||T.startsWith("createUser"))&&D.then(k=>v.next(k))}}})}static \u0275fac=function(r){return new(r||n)(B(wf),B(If,8),B(Ps),B(Xe),B(h0),B(RD,8),B(MD,8),B(PD,8),B(ND,8),B(kD,8),B(OD,8),B(d0,8))};static \u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),boe=(()=>{class n{constructor(){ms.Z.registerVersion("angularfire",Fu.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=jt({type:n});static \u0275inj=Ot({providers:[x0]})}return n})();function LD(){return K((n,e)=>{let t,r=!1;n.subscribe(fe(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var Ee,Eoe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ko={},VD=VD||{},ot=Eoe||self;function A0(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function o_(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var UD="closure_uid_"+(1e9*Math.random()>>>0),Ioe=0;function Toe(n,e,t){return n.call.apply(n.bind,arguments)}function Coe(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Di(n,e,t){return(Di=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Toe:Coe).apply(null,arguments)}function D0(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function qr(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function lc(){this.s=this.s,this.o=this.o}lc.prototype.s=!1,lc.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function woe(n){Object.prototype.hasOwnProperty.call(n,UD)&&n[UD]||(n[UD]=++Ioe)}(this)},lc.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const fj=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function BD(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function pj(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(A0(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let o=0;o<s;o++)n[i+o]=r[o]}else n.push(r)}}function Si(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Si.prototype.h=function(){this.defaultPrevented=!0};var Aoe=function(){if(!ot.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{const t=()=>{};ot.addEventListener("test",t,e),ot.removeEventListener("test",t,e)}catch{}return n}();function a_(n){return/^[\s\xa0]*$/.test(n)}function S0(){var n=ot.navigator;return n&&(n=n.userAgent)?n:""}function da(n){return-1!=S0().indexOf(n)}function jD(n){return jD[" "](n),n}jD[" "]=function(){};var $D,n,Soe=da("Opera"),Af=da("Trident")||da("MSIE"),mj=da("Edge"),HD=mj||Af,gj=da("Gecko")&&!(-1!=S0().toLowerCase().indexOf("webkit")&&!da("Edge"))&&!(da("Trident")||da("MSIE"))&&!da("Edge"),Roe=-1!=S0().toLowerCase().indexOf("webkit")&&!da("Edge");function _j(){var n=ot.document;return n?n.documentMode:void 0}e:{var zD="",qD=(n=S0(),gj?/rv:([^\);]+)(\)|;)/.exec(n):mj?/Edge\/([\d\.]+)/.exec(n):Af?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Roe?/WebKit\/(\S+)/.exec(n):Soe?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(qD&&(zD=qD?qD[1]:""),Af){var GD=_j();if(null!=GD&&GD>parseFloat(zD)){$D=String(GD);break e}}$D=zD}var Moe=ot.document&&Af&&(_j()||parseInt($D,10))||void 0;function l_(n,e){if(Si.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(gj){e:{try{jD(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Poe[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&l_.$.h.call(this)}}qr(l_,Si);var Poe={2:"touch",3:"pen",4:"mouse"};l_.prototype.h=function(){l_.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var c_="closure_listenable_"+(1e6*Math.random()|0),Noe=0;function koe(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++Noe,this.fa=this.ia=!1}function R0(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function KD(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function vj(n){const e={};for(const t in n)e[t]=n[t];return e}const bj="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ej(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<bj.length;s++)t=bj[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function M0(n){this.src=n,this.g={},this.h=0}function ZD(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=fj(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(R0(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function QD(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==r)return i}return-1}M0.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var o=QD(n,e,r,i);return-1<o?(e=n[o],t||(e.ia=!1)):((e=new koe(e,this.src,s,!!r,i)).ia=t,n.push(e)),e};var YD="closure_lm_"+(1e6*Math.random()|0),XD={};function wj(n,e,t,r,i){if(r&&r.once)return Tj(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)wj(n,e[s],t,r,i);return null}return t=nS(t),n&&n[c_]?n.O(e,t,o_(r)?!!r.capture:!!r,i):Ij(n,e,t,!1,r,i)}function Ij(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var o=o_(i)?!!i.capture:!!i,a=eS(n);if(a||(n[YD]=a=new M0(n)),(t=a.add(e,t,r,o,s)).proxy)return t;if(r=function Foe(){const e=Loe;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Aoe||(i=o),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(xj(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Tj(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Tj(n,e[s],t,r,i);return null}return t=nS(t),n&&n[c_]?n.P(e,t,o_(r)?!!r.capture:!!r,i):Ij(n,e,t,!0,r,i)}function Cj(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)Cj(n,e[s],t,r,i);else r=o_(r)?!!r.capture:!!r,t=nS(t),n&&n[c_]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=QD(s=n.g[e],t,r,i))&&(R0(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=eS(n))&&(e=n.g[e.toString()],n=-1,e&&(n=QD(e,t,r,i)),(t=-1<n?e[n]:null)&&JD(t))}function JD(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[c_])ZD(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(xj(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=eS(e))?(ZD(t,n),0==t.h&&(t.src=null,e[YD]=null)):R0(n)}}}function xj(n){return n in XD?XD[n]:XD[n]="on"+n}function Loe(n,e){if(n.fa)n=!0;else{e=new l_(e,this);var t=n.listener,r=n.la||n.src;n.ia&&JD(n),n=t.call(r,e)}return n}function eS(n){return(n=n[YD])instanceof M0?n:null}var tS="__closure_events_fn_"+(1e9*Math.random()>>>0);function nS(n){return"function"==typeof n?n:(n[tS]||(n[tS]=function(e){return n.handleEvent(e)}),n[tS])}function Gr(){lc.call(this),this.i=new M0(this),this.S=this,this.J=null}function di(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Si(e,n);else if(e instanceof Si)e.target=e.target||n;else{var i=e;Ej(e=new Si(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];i=P0(o,r,!0,e)&&i}if(i=P0(o=e.g=n,r,!0,e)&&i,i=P0(o,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=P0(o=e.g=t[s],r,!1,e)&&i}function P0(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==t){var a=o.listener,l=o.la||o.src;o.ia&&ZD(n.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}qr(Gr,lc),Gr.prototype[c_]=!0,Gr.prototype.removeEventListener=function(n,e,t,r){Cj(this,n,e,t,r)},Gr.prototype.N=function(){if(Gr.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)R0(t[r]);delete n.g[e],n.h--}}this.J=null},Gr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Gr.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var rS=ot.JSON.stringify;function Uoe(){var n=iS;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Aj=new class Voe{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new joe,n=>n.reset());class joe{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Hoe(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function $oe(n){ot.setTimeout(()=>{throw n},0)}let u_,d_=!1,iS=new class Boe{constructor(){this.h=this.g=null}add(e,t){const r=Aj.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},Dj=()=>{const n=ot.Promise.resolve(void 0);u_=()=>{n.then(zoe)}};var zoe=()=>{for(var n;n=Uoe();){try{n.h.call(n.g)}catch(t){$oe(t)}var e=Aj;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}d_=!1};function N0(n,e){Gr.call(this),this.h=n||1,this.g=e||ot,this.j=Di(this.qb,this),this.l=Date.now()}function sS(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function oS(n,e,t){if("function"==typeof n)t&&(n=Di(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Di(n.handleEvent,n)}return 2147483647<Number(e)?-1:ot.setTimeout(n,e||0)}function Sj(n){n.g=oS(()=>{n.g=null,n.i&&(n.i=!1,Sj(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}qr(N0,Gr),(Ee=N0.prototype).ga=!1,Ee.T=null,Ee.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),di(this,"tick"),this.ga&&(sS(this),this.start()))}},Ee.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ee.N=function(){N0.$.N.call(this),sS(this),delete this.g};class qoe extends lc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Sj(this)}N(){super.N(),this.g&&(ot.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function h_(n){lc.call(this),this.h=n,this.g={}}qr(h_,lc);var Rj=[];function Mj(n,e,t,r){Array.isArray(t)||(t&&(Rj[0]=t.toString()),t=Rj);for(var i=0;i<t.length;i++){var s=wj(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function Pj(n){KD(n.g,function(e,t){this.g.hasOwnProperty(t)&&JD(e)},n),n.g={}}function k0(){this.g=!0}function Df(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Zoe(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return rS(t)}catch{return e}}(n,t)+(r?" "+r:"")})}h_.prototype.N=function(){h_.$.N.call(this),Pj(this)},h_.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},k0.prototype.Ea=function(){this.g=!1},k0.prototype.info=function(){};var zu={},Nj=null;function O0(){return Nj=Nj||new Gr}function kj(n){Si.call(this,zu.Ta,n)}function f_(n){const e=O0();di(e,new kj(e))}function Oj(n,e){Si.call(this,zu.STAT_EVENT,n),this.stat=e}function Qi(n){const e=O0();di(e,new Oj(e,n))}function Fj(n,e){Si.call(this,zu.Ua,n),this.size=e}function p_(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return ot.setTimeout(function(){n()},e)}zu.Ta="serverreachability",qr(kj,Si),zu.STAT_EVENT="statevent",qr(Oj,Si),zu.Ua="timingevent",qr(Fj,Si);var F0={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Lj={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function aS(){}function Uj(){}aS.prototype.h=null;var uS,m_={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function lS(){Si.call(this,"d")}function cS(){Si.call(this,"c")}function L0(){}function g_(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new h_(this),this.P=Qoe,this.V=new N0(n=HD?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Bj}function Bj(){this.i=null,this.g="",this.h=!1}qr(lS,Si),qr(cS,Si),qr(L0,aS),L0.prototype.g=function(){return new XMLHttpRequest},L0.prototype.i=function(){return{}},uS=new L0;var Qoe=45e3,jj={},dS={};function hS(n,e,t){n.L=1,n.A=j0(ol(e)),n.u=t,n.S=!0,Hj(n,null)}function Hj(n,e){n.G=Date.now(),__(n),n.B=ol(n.A);var t=n.B,r=n.W;Array.isArray(r)||(r=[String(r)]),Xj(t.i,"t",r),n.o=0,t=n.l.J,n.h=new Bj,n.g=wH(n.l,t?e:null,!n.u),0<n.O&&(n.M=new qoe(Di(n.Pa,n,n.g),n.O)),Mj(n.U,n.g,"readystatechange",n.nb),e=n.I?vj(n.I):{},n.u?(n.v||(n.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.B,n.v,n.u,e)):(n.v="GET",n.g.ha(n.B,n.v,null,e)),f_(),function Goe(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var h=c[0];c=c[1];var p=h.split("_");o=2<=p.length&&"type"==p[1]?o+(h+"=")+c+"&":o+(h+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+o})}(n.j,n.v,n.B,n.m,n.W,n.u)}function $j(n){return!!n.g&&"GET"==n.v&&2!=n.L&&n.l.Ha}function zj(n,e,t){let i,r=!0;for(;!n.J&&n.o<t.length;){if(i=Yoe(n,t),i==dS){4==e&&(n.s=4,Qi(14),r=!1),Df(n.j,n.m,null,"[Incomplete Response]");break}if(i==jj){n.s=4,Qi(15),Df(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Df(n.j,n.m,i,null),fS(n,i)}$j(n)&&0!=n.o&&(n.h.g=n.h.g.slice(n.o),n.o=0),4!=e||0!=t.length||n.h.h||(n.s=1,Qi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),bS(e),e.M=!0,Qi(11))):(Df(n.j,n.m,t,"[Invalid Chunked Response]"),qu(n),y_(n))}function Yoe(n,e){var t=n.o,r=e.indexOf("\n",t);return-1==r?dS:(t=Number(e.substring(t,r)),isNaN(t)?jj:(r+=1)+t>e.length?dS:(e=e.slice(r,r+t),n.o=r+t,e))}function __(n){n.Y=Date.now()+n.P,qj(n,n.P)}function qj(n,e){if(null!=n.C)throw Error("WatchDog timer not null");n.C=p_(Di(n.lb,n),e)}function V0(n){n.C&&(ot.clearTimeout(n.C),n.C=null)}function y_(n){0==n.l.H||n.J||yH(n.l,n)}function qu(n){V0(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,sS(n.V),Pj(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function fS(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||pS(t.i,n)))if(!n.K&&pS(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;W0(t),q0(t)}vS(t),Qi(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=p_(Di(t.ib,t),6e3));if(1>=tH(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Wu(t,11)}else if((n.K||t.g==n)&&W0(t),!a_(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(t.V=c[0],c=c[1],2==t.H)if("c"==c[0]){t.K=c[1],t.pa=c[2];const h=c[3];null!=h&&(t.ra=h,t.l.info("VER="+t.ra));const p=c[4];null!=p&&(t.Ga=p,t.l.info("SVER="+t.Ga));const g=c[5];null!=g&&"number"==typeof g&&0<g&&(t.L=r=1.5*g,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const _=n.g;if(_){const v=_.g?_.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(v){var s=r.i;s.g||-1==v.indexOf("spdy")&&-1==v.indexOf("quic")&&-1==v.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(mS(s,s.h),s.h=null))}if(r.F){const E=_.g?_.g.getResponseHeader("X-HTTP-Session-Id"):null;E&&(r.Da=E,Mn(r.I,r.F,E))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var o=n;if((r=t).wa=EH(r,r.J?r.pa:null,r.Y),o.K){nH(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(V0(a),__(a)),r.g=o}else gH(r);0<t.j.length&&G0(t)}else"stop"!=c[0]&&"close"!=c[0]||Wu(t,7);else 3==t.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Wu(t,7):yS(t):"noop"!=c[0]&&t.h&&t.h.Aa(c),t.A=0)}f_()}catch{}}function Gj(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(A0(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Joe(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(A0(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Xoe(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(A0(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(Ee=g_.prototype).setTimeout=function(n){this.P=n},Ee.nb=function(n){n=n.target;const e=this.M;e&&3==ha(n)?e.l():this.Pa(n)},Ee.Pa=function(n){try{if(n==this.g)e:{const h=ha(this.g);var e=this.g.Ia();if(this.g.da(),!(3>h)&&(3!=h||HD||this.g&&(this.h.h||this.g.ja()||uH(this.g)))){this.J||4!=h||7==e||f_(),V0(this);var t=this.g.da();this.ca=t;t:if($j(this)){var r=uH(this.g);n="";var i=r.length,s=4==ha(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){qu(this),y_(this);var o="";break t}this.h.i=new ot.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=n,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==t,function Woe(n,e,t,r,i,s,o){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+o})}(this.j,this.v,this.B,this.m,this.W,h,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!a_(a)){var c=a;break t}}c=null}if(!(t=c)){this.i=!1,this.s=3,Qi(12),qu(this),y_(this);break e}Df(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fS(this,t)}this.S?(zj(this,h,o),HD&&this.i&&3==h&&(Mj(this.U,this.V,"tick",this.mb),this.V.start())):(Df(this.j,this.m,o,null),fS(this,o)),4==h&&qu(this),this.i&&!this.J&&(4==h?yH(this.l,this):(this.i=!1,__(this)))}else(function _ae(n){const e={};n=(n.g&&2<=ha(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(a_(n[r]))continue;var t=Hoe(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[i]||[];e[i]=s,s.push(t)}!function Ooe(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<o.indexOf("Unknown SID")?(this.s=3,Qi(12)):(this.s=0,Qi(13)),qu(this),y_(this)}}}catch{}},Ee.mb=function(){if(this.g){var n=ha(this.g),e=this.g.ja();this.o<e.length&&(V0(this),zj(this,n,e),this.i&&4!=n&&__(this))}},Ee.cancel=function(){this.J=!0,qu(this)},Ee.lb=function(){this.C=null;const n=Date.now();0<=n-this.Y?(function Koe(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(f_(),Qi(17)),qu(this),this.s=2,y_(this)):qj(this,this.Y-n)};var Wj=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gu(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Gu){this.h=n.h,U0(this,n.j),this.s=n.s,this.g=n.g,B0(this,n.m),this.l=n.l;var e=n.i,t=new E_;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Kj(this,t),this.o=n.o}else n&&(e=String(n).match(Wj))?(this.h=!1,U0(this,e[1]||"",!0),this.s=v_(e[2]||""),this.g=v_(e[3]||"",!0),B0(this,e[4]),this.l=v_(e[5]||"",!0),Kj(this,e[6]||"",!0),this.o=v_(e[7]||"")):(this.h=!1,this.i=new E_(null,this.h))}function ol(n){return new Gu(n)}function U0(n,e,t){n.j=t?v_(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function B0(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Kj(n,e,t){e instanceof E_?(n.i=e,function oae(n,e){e&&!n.j&&(cc(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Qj(this,r),Xj(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=b_(e,iae)),n.i=new E_(e,n.h))}function Mn(n,e,t){n.i.set(e,t)}function j0(n){return Mn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function v_(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function b_(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,tae),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function tae(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Gu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(b_(e,Zj,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(b_(e,Zj,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(b_(t,"/"==t.charAt(0)?rae:nae,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",b_(t,sae)),n.join("")};var Zj=/[#\/\?@]/g,nae=/[#\?:]/g,rae=/[#\?]/g,iae=/[#\?@]/g,sae=/#/g;function E_(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function cc(n){n.g||(n.g=new Map,n.h=0,n.i&&function eae(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Qj(n,e){cc(n),e=Sf(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Yj(n,e){return cc(n),e=Sf(n,e),n.g.has(e)}function Xj(n,e,t){Qj(n,e),0<t.length&&(n.i=null,n.g.set(Sf(n,e),BD(t)),n.h+=t.length)}function Sf(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Jj(n){this.l=n||lae,n=ot.PerformanceNavigationTiming?0<(n=ot.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(ot.g&&ot.g.Ka&&ot.g.Ka()&&ot.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ee=E_.prototype).add=function(n,e){cc(this),this.i=null,n=Sf(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ee.forEach=function(n,e){cc(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Ee.ta=function(){cc(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},Ee.Z=function(n){cc(this);let e=[];if("string"==typeof n)Yj(this,n)&&(e=e.concat(this.g.get(Sf(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Ee.set=function(n,e){return cc(this),this.i=null,Yj(this,n=Sf(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ee.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Ee.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),n.push(i)}}return this.i=n.join("&")};var lae=10;function eH(n){return!!n.h||!!n.g&&n.g.size>=n.j}function tH(n){return n.h?1:n.g?n.g.size:0}function pS(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function mS(n,e){n.g?n.g.add(e):n.h=e}function nH(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function rH(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return BD(n.i)}Jj.prototype.cancel=function(){if(this.i=rH(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var cae=class{stringify(n){return ot.JSON.stringify(n,void 0)}parse(n){return ot.JSON.parse(n,void 0)}};function uae(){this.g=new cae}function dae(n,e,t){const r=t||"";try{Gj(n,function(i,s){let o=i;o_(i)&&(o=rS(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function H0(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function w_(n){this.l=n.ec||null,this.j=n.ob||!1}function $0(n,e){Gr.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=gS,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}qr(w_,aS),w_.prototype.g=function(){return new $0(this.l,this.j)},w_.prototype.i=function(n){return function(){return n}}({}),qr($0,Gr);var gS=0;function iH(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function I_(n){n.readyState=4,n.l=null,n.j=null,n.A=null,T_(n)}function T_(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ee=$0.prototype).open=function(n,e){if(this.readyState!=gS)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,T_(this)},Ee.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||ot).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Ee.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,I_(this)),this.readyState=gS},Ee.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,T_(this)),this.g&&(this.readyState=3,T_(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ot.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;iH(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Ee.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?I_(this):T_(this),3==this.readyState&&iH(this)}},Ee.Za=function(n){this.g&&(this.response=this.responseText=n,I_(this))},Ee.Ya=function(n){this.g&&(this.response=n,I_(this))},Ee.ka=function(){this.g&&I_(this)},Ee.setRequestHeader=function(n,e){this.v.append(n,e)},Ee.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ee.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty($0.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var fae=ot.JSON.parse;function lr(n){Gr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=sH,this.L=this.M=!1}qr(lr,Gr);var sH="",pae=/^https?$/i,mae=["POST","PUT"];function oH(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,aH(n),z0(n)}function aH(n){n.F||(n.F=!0,di(n,"complete"),di(n,"error"))}function lH(n){if(n.h&&typeof VD<"u"&&(!n.C[1]||4!=ha(n)||2!=n.da()))if(n.v&&4==ha(n))oS(n.La,0,n);else if(di(n,"readystatechange"),4==ha(n)){n.h=!1;try{const o=n.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===o){var i=String(n.I).match(Wj)[1]||null;!i&&ot.self&&ot.self.location&&(i=ot.self.location.protocol.slice(0,-1)),r=!pae.test(i?i.toLowerCase():"")}t=r}if(t)di(n,"complete"),di(n,"success");else{n.m=6;try{var s=2<ha(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",aH(n)}}finally{z0(n)}}}function z0(n,e){if(n.g){cH(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||di(n,"ready");try{t.onreadystatechange=r}catch{}}}function cH(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(ot.clearTimeout(n.A),n.A=null)}function ha(n){return n.g?n.g.readyState:0}function uH(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case sH:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function dH(n){let e="";return KD(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function _S(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=dH(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Mn(n,e,t))}function C_(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function hH(n){this.Ga=0,this.j=[],this.l=new k0,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=C_("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=C_("baseRetryDelayMs",5e3,n),this.hb=C_("retryDelaySeedMs",1e4,n),this.eb=C_("forwardChannelMaxRetries",2,n),this.xa=C_("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new Jj(n&&n.concurrentRequestLimit),this.Ja=new uae,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function yS(n){if(fH(n),3==n.H){var e=n.W++,t=ol(n.I);if(Mn(t,"SID",n.K),Mn(t,"RID",e),Mn(t,"TYPE","terminate"),x_(n,t),(e=new g_(n,n.l,e)).L=2,e.A=j0(ol(t)),t=!1,ot.navigator&&ot.navigator.sendBeacon)try{t=ot.navigator.sendBeacon(e.A.toString(),"")}catch{}!t&&ot.Image&&((new Image).src=e.A,t=!0),t||(e.g=wH(e.l,null),e.g.ha(e.A)),e.G=Date.now(),__(e)}bH(n)}function q0(n){n.g&&(bS(n),n.g.cancel(),n.g=null)}function fH(n){q0(n),n.u&&(ot.clearTimeout(n.u),n.u=null),W0(n),n.i.cancel(),n.m&&("number"==typeof n.m&&ot.clearTimeout(n.m),n.m=null)}function G0(n){if(!eH(n.i)&&!n.m){n.m=!0;var e=n.Na;u_||Dj(),d_||(u_(),d_=!0),iS.add(e,n),n.C=0}}function pH(n,e){var t;t=e?e.m:n.W++;const r=ol(n.I);Mn(r,"SID",n.K),Mn(r,"RID",t),Mn(r,"AID",n.V),x_(n,r),n.o&&n.s&&_S(r,n.o,n.s),t=new g_(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=mH(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),mS(n.i,t),hS(t,r,e)}function x_(n,e){n.na&&KD(n.na,function(t,r){Mn(e,r,t)}),n.h&&Gj({},function(t,r){Mn(e,r,t)})}function mH(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Di(n.h.Va,n.h,n):null;e:{var i=n.j;let s=-1;for(;;){const o=["count="+t];-1==s?0<t?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<t;l++){let c=i[l].g;const h=i[l].map;if(c-=s,0>c)s=Math.max(0,i[l].g-100),a=!1;else try{dae(h,o,"req"+c+"_")}catch{r&&r(h)}}if(a){r=o.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function gH(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;u_||Dj(),d_||(u_(),d_=!0),iS.add(e,n),n.A=0}}function vS(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=p_(Di(n.Ma,n),vH(n,n.A)),n.A++,0))}function bS(n){null!=n.B&&(ot.clearTimeout(n.B),n.B=null)}function _H(n){n.g=new g_(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=ol(n.wa);Mn(e,"RID","rpc"),Mn(e,"SID",n.K),Mn(e,"AID",n.V),Mn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Mn(e,"TO",n.qa),Mn(e,"TYPE","xmlhttp"),x_(n,e),n.o&&n.s&&_S(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.A=j0(ol(e)),t.u=null,t.S=!0,Hj(t,n)}function W0(n){null!=n.v&&(ot.clearTimeout(n.v),n.v=null)}function yH(n,e){var t=null;if(n.g==e){W0(n),bS(n),n.g=null;var r=2}else{if(!pS(n.i,e))return;t=e.F,nH(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.u?e.u.length:0,e=Date.now()-e.G;var i=n.C;di(r=O0(),new Fj(r,t)),G0(n)}else gH(n);else if(3==(i=e.s)||0==i&&0<e.ca||!(1==r&&function yae(n,e){return!(tH(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=p_(Di(n.Na,n,e),vH(n,n.C)),n.C++,0)))}(n,e)||2==r&&vS(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Wu(n,5);break;case 4:Wu(n,10);break;case 3:Wu(n,6);break;default:Wu(n,2)}}function vH(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Wu(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Di(n.pb,n);t||(t=new Gu("//www.google.com/images/cleardot.gif"),ot.location&&"http"==ot.location.protocol||U0(t,"https"),j0(t)),function hae(n,e){const t=new k0;if(ot.Image){const r=new Image;r.onload=D0(H0,t,r,"TestLoadImage: loaded",!0,e),r.onerror=D0(H0,t,r,"TestLoadImage: error",!1,e),r.onabort=D0(H0,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=D0(H0,t,r,"TestLoadImage: timeout",!1,e),ot.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Qi(2);n.H=0,n.h&&n.h.za(e),bH(n),fH(n)}function bH(n){if(n.H=0,n.ma=[],n.h){const e=rH(n.i);(0!=e.length||0!=n.j.length)&&(pj(n.ma,e),pj(n.ma,n.j),n.i.i.length=0,BD(n.j),n.j.length=0),n.h.ya()}}function EH(n,e,t){var r=t instanceof Gu?ol(t):new Gu(t);if(""!=r.g)e&&(r.g=e+"."+r.g),B0(r,r.m);else{var i=ot.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Gu(null);r&&U0(s,r),e&&(s.g=e),i&&B0(s,i),t&&(s.l=t),r=s}return e=n.Da,(t=n.F)&&e&&Mn(r,t,e),Mn(r,"VER",n.ra),x_(n,r),r}function wH(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new lr(n.Ha&&!n.va?new w_({ob:t}):n.va)).Oa(n.J),e}function IH(){}function K0(){if(Af&&!(10<=Number(Moe)))throw Error("Environmental error: no available transport.")}function Os(n,e){Gr.call(this),this.g=new hH(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!a_(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!a_(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Rf(this)}function TH(n){lS.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function CH(){cS.call(this),this.status=1}function Rf(n){this.g=n}function Oo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function ES(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],o=(e=n.g[0])+(s^(t=n.g[1])&((i=n.g[2])^s))+r[0]+3614090360&4294967295;o=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=t+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(t^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(t|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(t|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(t|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=t+((o=e+(i^(t|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~t))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+s&4294967295}function sn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var s=0|n[i];r&&s==e||(t[i]=s,r=!1)}this.g=t}(Ee=lr.prototype).Oa=function(n){this.M=n},Ee.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():uS.g(),this.C=function Vj(n){return n.h||(n.h=n.i())}(this.u?this.u:uS),this.g.onreadystatechange=Di(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void oH(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=ot.FormData&&n instanceof ot.FormData,!(0<=fj(mae,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of t)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{cH(this),0<this.B&&((this.L=function gae(n){return Af&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Di(this.ua,this)):this.A=oS(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){oH(this,s)}},Ee.ua=function(){typeof VD<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,di(this,"timeout"),this.abort(8))},Ee.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,di(this,"complete"),di(this,"abort"),z0(this))},Ee.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),z0(this,!0)),lr.$.N.call(this)},Ee.La=function(){this.s||(this.G||this.v||this.l?lH(this):this.kb())},Ee.kb=function(){lH(this)},Ee.isActive=function(){return!!this.g},Ee.da=function(){try{return 2<ha(this)?this.g.status:-1}catch{return-1}},Ee.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ee.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),fae(e)}},Ee.Ia=function(){return this.m},Ee.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ee=hH.prototype).ra=8,Ee.H=1,Ee.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new g_(this,this.l,n);let s=this.s;if(this.U&&(s?(s=vj(s),Ej(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=mH(this,i,e),Mn(t=ol(this.I),"RID",n),Mn(t,"CVER",22),this.F&&Mn(t,"X-HTTP-Session-Id",this.F),x_(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(dH(s)))+"&"+e:this.o&&_S(t,this.o,s)),mS(this.i,i),this.bb&&Mn(t,"TYPE","init"),this.P?(Mn(t,"$req",e),Mn(t,"SID","null"),i.aa=!0,hS(i,t,null)):hS(i,t,e),this.H=2}}else 3==this.H&&(n?pH(this,n):0==this.j.length||eH(this.i)||pH(this))},Ee.Ma=function(){if(this.u=null,_H(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=p_(Di(this.jb,this),n)}},Ee.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Qi(10),q0(this),_H(this))},Ee.ib=function(){null!=this.v&&(this.v=null,q0(this),vS(this),Qi(19))},Ee.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Qi(2)):(this.l.info("Failed to ping google.com"),Qi(1))},Ee.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ee=IH.prototype).Ba=function(){},Ee.Aa=function(){},Ee.za=function(){},Ee.ya=function(){},Ee.isActive=function(){return!0},Ee.Va=function(){},K0.prototype.g=function(n,e){return new Os(n,e)},qr(Os,Gr),Os.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Qi(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=EH(n,null,n.Y),G0(n)},Os.prototype.close=function(){yS(this.g)},Os.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=rS(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&G0(e)},Os.prototype.N=function(){this.g.h=null,delete this.j,yS(this.g),delete this.g,Os.$.N.call(this)},qr(TH,lS),qr(CH,cS),qr(Rf,IH),Rf.prototype.Ba=function(){di(this.g,"a")},Rf.prototype.Aa=function(n){di(this.g,new TH(n))},Rf.prototype.za=function(n){di(this.g,new CH)},Rf.prototype.ya=function(){di(this.g,"b")},qr(Oo,function vae(){this.blockSize=-1}),Oo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Oo.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=t;)ES(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(r[i++]=n.charCodeAt(s++),i==this.blockSize){ES(this,r),i=0;break}}else for(;s<e;)if(r[i++]=n[s++],i==this.blockSize){ES(this,r),i=0;break}}this.h=i,this.i+=e},Oo.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var bae={};function wS(n){return-128<=n&&128>n?function Doe(n,e){var t=bae;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new sn([0|e],0>e?-1:0)}):new sn([0|n],0>n?-1:0)}function fa(n){if(isNaN(n)||!isFinite(n))return Mf;if(0>n)return hi(fa(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=IS;return new sn(e,0)}var IS=4294967296,Mf=wS(0),TS=wS(1),AH=wS(16777216);function al(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function co(n){return-1==n.h}function hi(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new sn(t,~n.h).add(TS)}function Z0(n,e){return n.add(hi(e))}function Q0(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function A_(n,e){this.g=n,this.h=e}function Y0(n,e){if(al(e))throw Error("division by zero");if(al(n))return new A_(Mf,Mf);if(co(n))return e=Y0(hi(n),e),new A_(hi(e.g),hi(e.h));if(co(e))return e=Y0(n,hi(e)),new A_(hi(e.g),e.h);if(30<n.g.length){if(co(n)||co(e))throw Error("slowDivide_ only works with positive integers.");for(var t=TS,r=e;0>=r.X(n);)t=DH(t),r=DH(r);var i=Pf(t,1),s=Pf(r,1);for(r=Pf(r,2),t=Pf(t,2);!al(r);){var o=s.add(r);0>=o.X(n)&&(i=i.add(t),s=o),r=Pf(r,1),t=Pf(t,1)}return e=Z0(n,i.R(e)),new A_(i,e)}for(i=Mf;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),o=(s=fa(t)).R(e);co(o)||0<o.X(n);)o=(s=fa(t-=r)).R(e);al(s)&&(s=TS),i=i.add(s),n=Z0(n,o)}return new A_(i,n)}function DH(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new sn(t,n.h)}function Pf(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],s=0;s<r;s++)i[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new sn(i,n.h)}(Ee=sn.prototype).ea=function(){if(co(this))return-hi(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:IS+r)*e,e*=IS}return n},Ee.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(al(this))return"0";if(co(this))return"-"+hi(this).toString(n);for(var e=fa(Math.pow(n,6)),t=this,r="";;){var i=Y0(t,e).g,s=((0<(t=Z0(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(al(t=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},Ee.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Ee.X=function(n){return co(n=Z0(this,n))?-1:al(n)?0:1},Ee.abs=function(){return co(this)?hi(this):this},Ee.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&n.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=o>>>16,t[i]=(o&=65535)<<16|(s&=65535)}return new sn(t,-2147483648&t[t.length-1]?-1:0)},Ee.R=function(n){if(al(this)||al(n))return Mf;if(co(this))return co(n)?hi(this).R(hi(n)):hi(hi(this).R(n));if(co(n))return hi(this.R(hi(n)));if(0>this.X(AH)&&0>n.X(AH))return fa(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=n.D(i)>>>16,l=65535&n.D(i);t[2*r+2*i]+=o*l,Q0(t,2*r+2*i),t[2*r+2*i+1]+=s*l,Q0(t,2*r+2*i+1),t[2*r+2*i+1]+=o*a,Q0(t,2*r+2*i+1),t[2*r+2*i+2]+=s*a,Q0(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new sn(t,0)},Ee.gb=function(n){return Y0(this,n).h},Ee.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new sn(t,this.h&n.h)},Ee.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new sn(t,this.h|n.h)},Ee.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new sn(t,this.h^n.h)},K0.prototype.createWebChannel=K0.prototype.g,Os.prototype.send=Os.prototype.u,Os.prototype.open=Os.prototype.m,Os.prototype.close=Os.prototype.close,F0.NO_ERROR=0,F0.TIMEOUT=8,F0.HTTP_ERROR=6,Lj.COMPLETE="complete",Uj.EventType=m_,m_.OPEN="a",m_.CLOSE="b",m_.ERROR="c",m_.MESSAGE="d",Gr.prototype.listen=Gr.prototype.O,lr.prototype.listenOnce=lr.prototype.P,lr.prototype.getLastError=lr.prototype.Sa,lr.prototype.getLastErrorCode=lr.prototype.Ia,lr.prototype.getStatus=lr.prototype.da,lr.prototype.getResponseJson=lr.prototype.Wa,lr.prototype.getResponseText=lr.prototype.ja,lr.prototype.send=lr.prototype.ha,lr.prototype.setWithCredentials=lr.prototype.Oa,Oo.prototype.digest=Oo.prototype.l,Oo.prototype.reset=Oo.prototype.reset,Oo.prototype.update=Oo.prototype.j,sn.prototype.add=sn.prototype.add,sn.prototype.multiply=sn.prototype.R,sn.prototype.modulo=sn.prototype.gb,sn.prototype.compare=sn.prototype.X,sn.prototype.toNumber=sn.prototype.ea,sn.prototype.toString=sn.prototype.toString,sn.prototype.getBits=sn.prototype.D,sn.fromNumber=fa,sn.fromString=function xH(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return hi(xH(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=fa(Math.pow(e,8)),r=Mf,i=0;i<n.length;i+=8){var s=Math.min(8,n.length-i),o=parseInt(n.substring(i,i+s),e);8>s?(s=fa(Math.pow(e,s)),r=r.R(s).add(fa(o))):r=(r=r.R(t)).add(fa(o))}return r};var Eae=ko.createWebChannelTransport=function(){return new K0},wae=ko.getStatEventTarget=function(){return O0()},CS=ko.ErrorCode=F0,Iae=ko.EventType=Lj,Tae=ko.Event=zu,SH=ko.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},X0=(ko.FetchXmlHttpFactory=w_,ko.WebChannel=Uj),Cae=ko.XhrIo=lr,xae=ko.Md5=Oo,Nf=ko.Integer=sn;const RH="@firebase/firestore";class Wr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wr.UNAUTHENTICATED=new Wr(null),Wr.GOOGLE_CREDENTIALS=new Wr("google-credentials-uid"),Wr.FIRST_PARTY=new Wr("first-party-uid"),Wr.MOCK_USER=new Wr("mock-user");let kf="10.8.0";const uc=new Zi.Yd("@firebase/firestore");function Of(){return uc.logLevel}function ae(n,...e){if(uc.logLevel<=Zi.in.DEBUG){const t=e.map(xS);uc.debug(`Firestore (${kf}): ${n}`,...t)}}function vr(n,...e){if(uc.logLevel<=Zi.in.ERROR){const t=e.map(xS);uc.error(`Firestore (${kf}): ${n}`,...t)}}function _s(n,...e){if(uc.logLevel<=Zi.in.WARN){const t=e.map(xS);uc.warn(`Firestore (${kf}): ${n}`,...t)}}function xS(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Ae(n="Unexpected state"){const e=`FIRESTORE (${kf}) INTERNAL ASSERTION FAILED: `+n;throw vr(e),new Error(e)}function Ne(n,e){n||Ae()}function me(n,e){return n}const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends w.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Lr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class MH{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Sae{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Wr.UNAUTHENTICATED))}shutdown(){}}class Rae{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Mae{constructor(e){this.t=e,this.currentUser=Wr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve();let o=new Lr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Lr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable((0,z.Z)(function*(){yield c.promise,yield s(r.currentUser)}))},l=c=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Lr)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ne("string"==typeof r.accessToken),new MH(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ne(null===e||"string"==typeof e),new Wr(e)}}class Pae{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Wr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Nae{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Pae(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Wr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class PH{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kae{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{null!=s.error&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ae("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ne("string"==typeof t.token),this.R=t.token,new PH(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Oae(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class NH{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=Oae(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function it(n,e){return n<e?-1:n>e?1:0}function Ff(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function kH(n){return n+"\0"}class Vn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new oe(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new oe(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new oe(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Vn.fromMillis(Date.now())}static fromDate(e){return Vn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Vn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?it(this.nanoseconds,e.nanoseconds):it(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Fe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Fe(e)}static min(){return new Fe(new Vn(0,0))}static max(){return new Fe(new Vn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class D_{constructor(e,t,r){void 0===t?t=0:t>e.length&&Ae(),void 0===r?r=e.length-t:r>e.length-t&&Ae(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===D_.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof D_?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Rt extends D_{construct(e,t,r){return new Rt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new oe(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Rt(t)}static emptyPath(){return new Rt([])}}const Fae=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pn extends D_{construct(e,t,r){return new Pn(e,t,r)}static isValidIdentifier(e){return Fae.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Pn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new oe(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new oe(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new oe(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new oe(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pn(t)}static emptyPath(){return new Pn([])}}class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Rt.fromString(e))}static fromName(e){return new ye(Rt.fromString(e).popFirst(5))}static empty(){return new ye(Rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Rt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Rt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Rt(e.slice()))}}class Lf{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function AS(n){return n.fields.find(e=>2===e.kind)}function Ku(n){return n.fields.filter(e=>2!==e.kind)}Lf.UNKNOWN_ID=-1;class Zu{constructor(e,t){this.fieldPath=e,this.kind=t}}class Vf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Vf(0,Fs.min())}}function OH(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Fe.fromTimestamp(1e9===r?new Vn(t+1,0):new Vn(t,r));return new Fs(i,ye.empty(),e)}function FH(n){return new Fs(n.readTime,n.key,-1)}class Fs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Fs(Fe.min(),ye.empty(),-1)}static max(){return new Fs(Fe.max(),ye.empty(),-1)}}function DS(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ye.comparator(n.documentKey,e.documentKey),0!==t?t:it(n.largestBatchId,e.largestBatchId))}const LH="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class VH{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function dc(n){return SS.apply(this,arguments)}function SS(){return SS=(0,z.Z)(function*(n){if(n.code!==q.FAILED_PRECONDITION||n.message!==LH)throw n;ae("LocalStore","Unexpectedly lost primary lease")}),SS.apply(this,arguments)}class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new V((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof V?t:V.resolve(t)}catch(t){return V.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):V.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):V.reject(t)}static resolve(e){return new V((t,r)=>{t(e)})}static reject(e){return new V((t,r)=>{r(e)})}static waitFor(e){return new V((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=V.resolve(!1);for(const r of e)t=t.next(i=>i?V.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new V((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new V((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class J0{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Lr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new S_(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=RS(r.target.error);this.V.reject(new S_(e,i))}}static open(e,t,r,i){try{return new J0(t,e.transaction(i,r))}catch(s){throw new S_(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ae("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Bae(t)}}class uo{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===uo.S((0,w.z$)())&&vr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ae("SimpleDb","Removing database:",e),Qu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,w.hl)())return!1;if(uo.C())return!0;const e=(0,w.z$)(),t=uo.S(e),r=0<t&&t<10,i=uo.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var t=this;return(0,z.Z)(function*(){return t.db||(ae("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new S_(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new oe(q.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new oe(q.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new S_(e,a))},s.onupgradeneeded=o=>{ae("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.N(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{ae("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,z.Z)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.O(e);const l=J0.open(s.db,e,o?"readonly":"readwrite",r),c=i(l).next(h=>(l.g(),h)).catch(h=>(l.abort(h),V.reject(h))).toPromise();return c.catch(()=>{}),yield l.m,c}catch(l){const c=l,h="FirebaseError"!==c.name&&a<3;if(ae("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),s.close(),!h)return Promise.reject(c)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Uae{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Qu(this.k.delete())}}class S_ extends oe{constructor(e,t){super(q.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function hc(n){return"IndexedDbTransactionError"===n.name}class Bae{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ae("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ae("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Qu(r)}add(e){return ae("SimpleDb","ADD",this.store.name,e,e),Qu(this.store.add(e))}get(e){return Qu(this.store.get(e)).next(t=>(void 0===t&&(t=null),ae("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ae("SimpleDb","DELETE",this.store.name,e),Qu(this.store.delete(e))}count(){return ae("SimpleDb","COUNT",this.store.name),Qu(this.store.count())}W(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new V((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.G(s,(a,l)=>{o.push(l)}).next(()=>o)}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new V((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,t){ae("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.J=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.G(i,t)}Z(e){const t=this.cursor({});return new V((r,i)=>{t.onerror=s=>{const o=RS(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,t){const r=[];return new V((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new Uae(a),c=t(a.primaryKey,a.value,l);if(c instanceof V){const h=c.catch(p=>(l.done(),V.reject(p)));r.push(h)}l.isDone?i():null===l.$?a.continue():a.continue(l.$)}}).next(()=>V.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Qu(n){return new V((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=RS(r.target.error);t(i)}})}let UH=!1;function RS(n){const e=uo.S((0,w.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new oe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return UH||(UH=!0,setTimeout(()=>{throw r},0)),r}}return n}class jae{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var t=this;ae("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,z.Z)(function*(){t.task=null;try{ae("IndexBackfiller",`Documents written: ${yield t.X.te()}`)}catch(r){hc(r)?ae("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield dc(r)}yield t.ee(6e4)}))}}class Hae{constructor(e,t){this.localStore=e,this.persistence=t}te(e=50){var t=this;return(0,z.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.ne(r,e))})()}ne(e,t){const r=new Set;let i=t,s=!0;return V.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return ae("IndexBackfiller",`Processing collection: ${o}`),this.re(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}re(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(i,s)).next(a=>(ae("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}ie(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=FH(s);DS(o,r)>0&&(r=o)}),new Fs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ls=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}return n._e=-1,n})();function R_(n){return null==n}function M_(n){return 0===n&&1/n==-1/0}function BH(n){return"number"==typeof n&&Number.isInteger(n)&&!M_(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Ri(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=jH(e)),e=$ae(n.get(t),e);return jH(e)}function $ae(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function jH(n){return n+"\x01\x01"}function pa(n){const e=n.length;if(Ne(e>=2),2===e)return Ne("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Rt.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&Ae(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let l;0===i.length?l=a:(i+=a,l=i,i=""),r.push(l);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:Ae()}s=o+2}return new Rt(r)}const HH=["userId","batchId"];function ew(n,e){return[n,Ri(e)]}function $H(n,e,t){return[n,Ri(e),t]}const zae={},qae=["prefixPath","collectionGroup","readTime","documentId"],Gae=["prefixPath","collectionGroup","documentId"],Wae=["collectionGroup","readTime","prefixPath","documentId"],Kae=["canonicalId","targetId"],Zae=["targetId","path"],Qae=["path","targetId"],Yae=["collectionId","parent"],Xae=["indexId","uid"],Jae=["uid","sequenceNumber"],ele=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],tle=["indexId","uid","orderedDocumentKey"],nle=["userId","collectionPath","documentId"],rle=["userId","collectionPath","largestBatchId"],ile=["userId","collectionGroup","largestBatchId"],zH=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],sle=[...zH,"documentOverlays"],qH=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],GH=qH,ole=[...GH,"indexConfiguration","indexState","indexEntries"];class MS extends VH{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function Kr(n,e){const t=me(n);return uo.M(t.ae,e)}function WH(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function fc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function KH(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class wn{constructor(e,t){this.comparator=e,this.root=t||fi.EMPTY}insert(e,t){return new wn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,fi.BLACK,null,null))}remove(e){return new wn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tw(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tw(this.root,e,this.comparator,!1)}getReverseIterator(){return new tw(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tw(this.root,e,this.comparator,!0)}}class tw{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class fi{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??fi.RED,this.left=i??fi.EMPTY,this.right=s??fi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new fi(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return fi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return fi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,fi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,fi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ae();const e=this.left.check();if(e!==this.right.check())throw Ae();return e+(this.isRed()?0:1)}}fi.EMPTY=null,fi.RED=!0,fi.BLACK=!1,fi.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae()}get value(){throw Ae()}get color(){throw Ae()}get left(){throw Ae()}get right(){throw Ae()}copy(e,t,r,i,s){return this}insert(e,t,r){return new fi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class an{constructor(e){this.comparator=e,this.data=new wn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ZH(this.data.getIterator())}getIteratorFrom(e){return new ZH(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof an)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new an(this.comparator);return t.data=e,t}}class ZH{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Uf(n){return n.hasNext()?n.getNext():void 0}class ys{constructor(e){this.fields=e,e.sort(Pn.comparator)}static empty(){return new ys([])}unionWith(e){let t=new an(Pn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ys(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ff(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class QH extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Vr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new QH("Invalid base64 string: "+s):s}}(e);return new Vr(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Vr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return it(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vr.EMPTY_BYTE_STRING=new Vr("");const lle=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pc(n){if(Ne(!!n),"string"==typeof n){let e=0;const t=lle.exec(n);if(Ne(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:cr(n.seconds),nanos:cr(n.nanos)}}function cr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ll(n){return"string"==typeof n?Vr.fromBase64String(n):Vr.fromUint8Array(n)}function nw(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function rw(n){const e=n.mapValue.fields.__previous_value__;return nw(e)?rw(e):e}function P_(n){const e=pc(n.mapValue.fields.__local_write_time__.timestampValue);return new Vn(e.seconds,e.nanos)}class cle{constructor(e,t,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class mc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new mc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof mc&&e.projectId===this.projectId&&e.database===this.database}}const gc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},iw={nullValue:"NULL_VALUE"};function _c(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?nw(n)?4:e$(n)?9007199254740991:10:Ae()}function ma(n,e){if(n===e)return!0;const t=_c(n);if(t!==_c(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return P_(n).isEqual(P_(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=pc(i.timestampValue),a=pc(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,ll(n.bytesValue).isEqual(ll(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return cr(i.geoPointValue.latitude)===cr(s.geoPointValue.latitude)&&cr(i.geoPointValue.longitude)===cr(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return cr(i.integerValue)===cr(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=cr(i.doubleValue),a=cr(s.doubleValue);return o===a?M_(o)===M_(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Ff(n.arrayValue.values||[],e.arrayValue.values||[],ma);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(WH(o)!==WH(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(void 0===a[l]||!ma(o[l],a[l])))return!1;return!0}(n,e);default:return Ae()}var s}function N_(n,e){return void 0!==(n.values||[]).find(t=>ma(t,e))}function yc(n,e){if(n===e)return 0;const t=_c(n),r=_c(e);if(t!==r)return it(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return it(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=cr(s.integerValue||s.doubleValue),l=cr(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return YH(n.timestampValue,e.timestampValue);case 4:return YH(P_(n),P_(e));case 5:return it(n.stringValue,e.stringValue);case 6:return function(s,o){const a=ll(s),l=ll(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=it(a[c],l[c]);if(0!==h)return h}return it(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=it(cr(s.latitude),cr(o.latitude));return 0!==a?a:it(cr(s.longitude),cr(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const h=yc(a[c],l[c]);if(h)return h}return it(a.length,l.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===gc.mapValue&&o===gc.mapValue)return 0;if(s===gc.mapValue)return 1;if(o===gc.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let p=0;p<l.length&&p<h.length;++p){const g=it(l[p],h[p]);if(0!==g)return g;const _=yc(a[l[p]],c[h[p]]);if(0!==_)return _}return it(l.length,h.length)}(n.mapValue,e.mapValue);default:throw Ae()}}function YH(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return it(n,e);const t=pc(n),r=pc(e),i=it(t.seconds,r.seconds);return 0!==i?i:it(t.nanos,r.nanos)}function Bf(n){return PS(n)}function PS(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=pc(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ll(n.bytesValue).toBase64():"referenceValue"in n?ye.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=PS(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${PS(t.fields[o])}`;return i+"}"}(n.mapValue):Ae()}function Yu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function NS(n){return!!n&&"integerValue"in n}function k_(n){return!!n&&"arrayValue"in n}function XH(n){return!!n&&"nullValue"in n}function JH(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ow(n){return!!n&&"mapValue"in n}function O_(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return fc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=O_(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=O_(n.arrayValue.values[t]);return e}return Object.assign({},n)}function e$(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function ule(n){return"nullValue"in n?iw:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Yu(mc.empty(),ye.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Ae()}function dle(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Yu(mc.empty(),ye.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?gc:Ae()}function t$(n,e){const t=yc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function n$(n,e){const t=yc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class pi{constructor(e){this.value=e}static empty(){return new pi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ow(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=O_(t)}setAll(e){let t=Pn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=O_(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());ow(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ma(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ow(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){fc(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new pi(O_(this.value))}}function r$(n){const e=[];return fc(n.fields,(t,r)=>{const i=new Pn([t]);if(ow(r)){const s=r$(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new ys(e)}class Nn{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Nn(e,0,Fe.min(),Fe.min(),Fe.min(),pi.empty(),0)}static newFoundDocument(e,t,r,i){return new Nn(e,1,t,Fe.min(),r,i,0)}static newNoDocument(e,t){return new Nn(e,2,t,Fe.min(),Fe.min(),pi.empty(),0)}static newUnknownDocument(e,t){return new Nn(e,3,t,Fe.min(),Fe.min(),pi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Fe.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class vc{constructor(e,t){this.position=e,this.inclusive=t}}function i$(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?ye.comparator(ye.fromName(o.referenceValue),t.key):yc(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function s$(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ma(n.position[t],e.position[t]))return!1;return!0}class F_{constructor(e,t="asc"){this.field=e,this.dir=t}}function hle(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class o${}class Mt extends o${constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new fle(e,t,r):"array-contains"===t?new gle(e,r):"in"===t?new h$(e,r):"not-in"===t?new _le(e,r):"array-contains-any"===t?new yle(e,r):new Mt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new ple(e,r):new mle(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(yc(t,this.value)):null!==t&&_c(this.value)===_c(t)&&this.matchesComparison(yc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class on extends o${constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new on(e,t)}matches(e){return jf(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function jf(n){return"and"===n.op}function kS(n){return"or"===n.op}function OS(n){return a$(n)&&jf(n)}function a$(n){for(const e of n.filters)if(e instanceof on)return!1;return!0}function FS(n){if(n instanceof Mt)return n.field.canonicalString()+n.op.toString()+Bf(n.value);if(OS(n))return n.filters.map(e=>FS(e)).join(",");{const e=n.filters.map(t=>FS(t)).join(",");return`${n.op}(${e})`}}function l$(n,e){return n instanceof Mt?(r=n,(i=e)instanceof Mt&&r.op===i.op&&r.field.isEqual(i.field)&&ma(r.value,i.value)):n instanceof on?function(r,i){return i instanceof on&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&l$(o,i.filters[a]),!0)}(n,e):void Ae();var r,i}function c$(n,e){const t=n.filters.concat(e);return on.create(t,n.op)}function u$(n){return n instanceof Mt?`${(t=n).field.canonicalString()} ${t.op} ${Bf(t.value)}`:n instanceof on?function(t){return t.op.toString()+" {"+t.getFilters().map(u$).join(" ,")+"}"}(n):"Filter";var t}class fle extends Mt{constructor(e,t,r){super(e,t,r),this.key=ye.fromName(r.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class ple extends Mt{constructor(e,t){super(e,"in",t),this.keys=d$(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class mle extends Mt{constructor(e,t){super(e,"not-in",t),this.keys=d$(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function d$(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ye.fromName(r.referenceValue))}class gle extends Mt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return k_(t)&&N_(t.arrayValue,this.value)}}class h$ extends Mt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&N_(this.value.arrayValue,t)}}class _le extends Mt{constructor(e,t){super(e,"not-in",t)}matches(e){if(N_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!N_(this.value.arrayValue,t)}}class yle extends Mt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!k_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>N_(this.value.arrayValue,r))}}class vle{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function LS(n,e=null,t=[],r=[],i=null,s=null,o=null){return new vle(n,e,t,r,i,s,o)}function Xu(n){const e=me(n);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>FS(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),R_(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Bf(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Bf(r)).join(",")),e.ce=t}return e.ce}function L_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!hle(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!l$(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!s$(n.startAt,e.startAt)&&s$(n.endAt,e.endAt)}function aw(n){return ye.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function lw(n,e){return n.filters.filter(t=>t instanceof Mt&&t.field.isEqual(e))}function f$(n,e,t){let r=iw,i=!0;for(const s of lw(n,e)){let o=iw,a=!0;switch(s.op){case"<":case"<=":o=ule(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=iw}t$({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];t$({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function p$(n,e,t){let r=gc,i=!0;for(const s of lw(n,e)){let o=gc,a=!0;switch(s.op){case">=":case">":o=dle(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=gc}n$({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];n$({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class cl{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null}}function m$(n,e,t,r,i,s,o,a){return new cl(n,e,t,r,i,s,o,a)}function Hf(n){return new cl(n)}function g$(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function VS(n){return null!==n.collectionGroup}function $f(n){const e=me(n);if(null===e.le){e.le=[];const t=new Set;for(const s of e.explicitOrderBy)e.le.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new an(Pn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.le.push(new F_(s,r))}),t.has(Pn.keyField().canonicalString())||e.le.push(new F_(Pn.keyField(),r))}return e.le}function Yi(n){const e=me(n);return e.he||(e.he=function _$(n,e){if("F"===n.limitType)return LS(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new F_(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new vc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new vc(n.startAt.position,n.startAt.inclusive):null;return LS(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,$f(n))),e.he}function US(n,e){const t=n.filters.concat([e]);return new cl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function cw(n,e,t){return new cl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function V_(n,e){return L_(Yi(n),Yi(e))&&n.limitType===e.limitType}function y$(n){return`${Xu(Yi(n))}|lt:${n.limitType}`}function zf(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>u$(i)).join(", ")}]`),R_(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Bf(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Bf(i)).join(",")),`Target(${r})`}(Yi(n))}; limitType=${n.limitType})`}function U_(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ye.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of $f(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,l){const c=i$(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,$f(r),i)||r.endAt&&!function(o,a,l){const c=i$(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,$f(r),i)));var r,i}function v$(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function b$(n){return(e,t)=>{let r=!1;for(const i of $f(n)){const s=ble(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function ble(n,e,t){const r=n.field.isKeyField()?ye.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return null!==l&&null!==c?yc(l,c):Ae()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ae()}}class ul{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){fc(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return KH(this.inner)}size(){return this.innerSize}}const Ele=new wn(ye.comparator);function vs(){return Ele}const E$=new wn(ye.comparator);function B_(...n){let e=E$;for(const t of n)e=e.insert(t.key,t);return e}function w$(n){let e=E$;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ga(){return j_()}function I$(){return j_()}function j_(){return new ul(n=>n.toString(),(n,e)=>n.isEqual(e))}const wle=new wn(ye.comparator),Ile=new an(ye.comparator);function pt(...n){let e=Ile;for(const t of n)e=e.add(t);return e}const Tle=new an(it);function BS(){return Tle}function T$(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:M_(e)?"-0":e}}function C$(n){return{integerValue:""+n}}function x$(n,e){return BH(e)?C$(e):T$(n,e)}class uw{constructor(){this._=void 0}}function Cle(n,e,t){return n instanceof qf?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&nw(s)&&(s=rw(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Ju?D$(n,e):n instanceof ed?S$(n,e):function(i,s){const o=A$(i,s),a=R$(o)+R$(i.Ie);return NS(o)&&NS(i.Ie)?C$(a):T$(i.serializer,a)}(n,e)}function xle(n,e,t){return n instanceof Ju?D$(n,e):n instanceof ed?S$(n,e):t}function A$(n,e){return n instanceof Gf?NS(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class qf extends uw{}class Ju extends uw{constructor(e){super(),this.elements=e}}function D$(n,e){const t=M$(e);for(const r of n.elements)t.some(i=>ma(i,r))||t.push(r);return{arrayValue:{values:t}}}class ed extends uw{constructor(e){super(),this.elements=e}}function S$(n,e){let t=M$(e);for(const r of n.elements)t=t.filter(i=>!ma(i,r));return{arrayValue:{values:t}}}class Gf extends uw{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function R$(n){return cr(n.integerValue||n.doubleValue)}function M$(n){return k_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class H_{constructor(e,t){this.field=e,this.transform=t}}class Dle{constructor(e,t){this.version=e,this.transformResults=t}}class Un{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Un}static exists(e){return new Un(void 0,e)}static updateTime(e){return new Un(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dw(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class hw{}function P$(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Kf(n.key,Un.none()):new Wf(n.key,n.data,Un.none());{const t=n.data,r=pi.empty();let i=new an(Pn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new dl(n.key,r,new ys(i.toArray()),Un.none())}}function Sle(n,e,t){n instanceof Wf?function(i,s,o){const a=i.value.clone(),l=O$(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof dl?function(i,s,o){if(!dw(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=O$(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(k$(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function $_(n,e,t,r){return n instanceof Wf?function(s,o,a,l){if(!dw(s.precondition,o))return a;const c=s.value.clone(),h=F$(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof dl?function(s,o,a,l){if(!dw(s.precondition,o))return a;const c=F$(s.fieldTransforms,l,o),h=o.data;return h.setAll(k$(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(n,e,t,r):(a=t,dw(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function Rle(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=A$(r.transform,i||null);null!=s&&(null===t&&(t=pi.empty()),t.set(r.field,s))}return t||null}function N$(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&Ff(r,i,(s,o)=>function Ale(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof Ju&&i instanceof Ju||r instanceof ed&&i instanceof ed?Ff(r.elements,i.elements,ma):r instanceof Gf&&i instanceof Gf?ma(r.Ie,i.Ie):r instanceof qf&&i instanceof qf);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class Wf extends hw{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class dl extends hw{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function k$(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function O$(n,e,t){const r=new Map;Ne(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,xle(o,a,t[i]))}return r}function F$(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,Cle(s,o,e))}return r}class Kf extends hw{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jS extends hw{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class HS{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Sle(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=$_(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=$_(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=I$();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=P$(o,a);null!==l&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Fe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),pt())}isEqual(e){return this.batchId===e.batchId&&Ff(this.mutations,e.mutations,(t,r)=>N$(t,r))&&Ff(this.baseMutations,e.baseMutations,(t,r)=>N$(t,r))}}class $S{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ne(e.mutations.length===r.length);let i=wle;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new $S(e,t,r,i)}}class zS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ple{constructor(e,t){this.count=e,this.unchangedNames=t}}var Sr,Ft;function L$(n){switch(n){default:return Ae();case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0}}function V$(n){if(void 0===n)return vr("GRPC error has no .code"),q.UNKNOWN;switch(n){case Sr.OK:return q.OK;case Sr.CANCELLED:return q.CANCELLED;case Sr.UNKNOWN:return q.UNKNOWN;case Sr.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case Sr.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case Sr.INTERNAL:return q.INTERNAL;case Sr.UNAVAILABLE:return q.UNAVAILABLE;case Sr.UNAUTHENTICATED:return q.UNAUTHENTICATED;case Sr.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case Sr.NOT_FOUND:return q.NOT_FOUND;case Sr.ALREADY_EXISTS:return q.ALREADY_EXISTS;case Sr.PERMISSION_DENIED:return q.PERMISSION_DENIED;case Sr.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case Sr.ABORTED:return q.ABORTED;case Sr.OUT_OF_RANGE:return q.OUT_OF_RANGE;case Sr.UNIMPLEMENTED:return q.UNIMPLEMENTED;case Sr.DATA_LOSS:return q.DATA_LOSS;default:return Ae()}}(Ft=Sr||(Sr={}))[Ft.OK=0]="OK",Ft[Ft.CANCELLED=1]="CANCELLED",Ft[Ft.UNKNOWN=2]="UNKNOWN",Ft[Ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ft[Ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ft[Ft.NOT_FOUND=5]="NOT_FOUND",Ft[Ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ft[Ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ft[Ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ft[Ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ft[Ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ft[Ft.ABORTED=10]="ABORTED",Ft[Ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ft[Ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ft[Ft.INTERNAL=13]="INTERNAL",Ft[Ft.UNAVAILABLE=14]="UNAVAILABLE",Ft[Ft.DATA_LOSS=15]="DATA_LOSS";function U$(){return new TextEncoder}const Nle=new Nf([4294967295,4294967295],0);function B$(n){const e=U$().encode(n),t=new xae;return t.update(e),new Uint8Array(t.digest())}function j$(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Nf([t,r],0),new Nf([i,s],0)]}class qS{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new z_(`Invalid padding: ${t}`);if(r<0)throw new z_(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new z_(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new z_(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=Nf.fromNumber(this.Te)}de(e,t,r){let i=e.add(t.multiply(Nf.fromNumber(r)));return 1===i.compare(Nle)&&(i=new Nf([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=B$(e),[r,i]=j$(t);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new qS(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Te)return;const t=B$(e),[r,i]=j$(t);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class z_ extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class q_{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,G_.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new q_(Fe.min(),i,new wn(it),vs(),pt())}}class G_{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new G_(r,t,pt(),pt(),pt())}}class pw{constructor(e,t,r,i){this.Ve=e,this.removedTargetIds=t,this.key=r,this.me=i}}class H${constructor(e,t){this.targetId=e,this.fe=t}}class $${constructor(e,t,r=Vr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class z${constructor(){this.ge=0,this.pe=G$(),this.ye=Vr.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=pt(),t=pt(),r=pt();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ae()}}),new G_(this.ye,this.we,e,t,r)}Fe(){this.Se=!1,this.pe=G$()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Ne(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class kle{constructor(e){this.Le=e,this.ke=new Map,this.qe=vs(),this.Qe=q$(),this.Ke=new wn(it)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(t);break;case 3:this.je(t)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.Ce(e.resumeToken));break;default:Ae()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((r,i)=>{this.je(i)&&t(i)})}Je(e){const t=e.targetId,r=e.fe.count,i=this.Ye(t);if(i){const s=i.target;if(aw(s))if(0===r){const o=new ye(s.path);this.We(t,o,Nn.newNoDocument(o,Fe.min()))}else Ne(1===r);else{const o=this.Ze(t);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;0!==l&&(this.He(t),this.Ke=this.Ke.insert(t,2===l?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=ll(r).toUint8Array()}catch(l){if(l instanceof QH)return _s("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new qS(o,i,s)}catch(l){return _s(l instanceof z_?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return 0===a.Te?null:a}et(e,t,r){return t.fe.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(t,s,null),i++)}),i}it(e){const t=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&aw(a.target)){const l=new ye(a.target.path);null!==this.qe.get(l)||this.st(o,l)||this.We(o,l,Nn.newNoDocument(l,e))}s.De&&(t.set(o,s.ve()),s.Fe())}});let r=pt();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const i=new q_(e,t,this.Ke,this.qe,r);return this.qe=vs(),this.Qe=q$(),this.Ke=new wn(it),i}Ue(e,t){if(!this.je(e))return;const r=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,r),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,t)?i.Me(t,1):i.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),r&&(this.qe=this.qe.insert(t,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new z$,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new an(it),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||ae("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new z$),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function q$(){return new wn(ye.comparator)}function G$(){return new wn(ye.comparator)}const Ole={asc:"ASCENDING",desc:"DESCENDING"},Fle={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Lle={and:"AND",or:"OR"};class Vle{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function GS(n,e){return n.useProto3Json||R_(e)?e:{value:e}}function Zf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function W$(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Ule(n,e){return Zf(n,e.toTimestamp())}function br(n){return Ne(!!n),Fe.fromTimestamp(function(t){const r=pc(t);return new Vn(r.seconds,r.nanos)}(n))}function WS(n,e){return KS(n,e).canonicalString()}function KS(n,e){const t=(i=n,new Rt(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function K$(n){const e=Rt.fromString(n);return Ne(iz(e)),e}function W_(n,e){return WS(n.databaseId,e.path)}function _a(n,e){const t=K$(e);if(t.get(1)!==n.databaseId.projectId)throw new oe(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new oe(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ye(Y$(t))}function Z$(n,e){return WS(n.databaseId,e)}function Q$(n){const e=K$(n);return 4===e.length?Rt.emptyPath():Y$(e)}function ZS(n){return new Rt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Y$(n){return Ne(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function X$(n,e,t){return{name:W_(n,e),fields:t.value.mapValue.fields}}function J$(n,e,t){const r=_a(n,e.name),i=br(e.updateTime),s=e.createTime?br(e.createTime):Fe.min(),o=new pi({mapValue:{fields:e.fields}}),a=Nn.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function K_(n,e){let t;if(e instanceof Wf)t={update:X$(n,e.key,e.value)};else if(e instanceof Kf)t={delete:W_(n,e.key)};else if(e instanceof dl)t={update:X$(n,e.key,e.data),updateMask:Wle(e.fieldMask)};else{if(!(e instanceof jS))return Ae();t={verify:W_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof qf)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ju)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ed)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Gf)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw Ae()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:Ule(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Ae()),t;var s}function QS(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Un.updateTime(br(s.updateTime)):void 0!==s.exists?Un.exists(s.exists):Un.none():Un.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;"setToServerValue"in a?(Ne("REQUEST_TIME"===a.setToServerValue),l=new qf):"appendMissingElements"in a?l=new Ju(a.appendMissingElements.values||[]):"removeAllFromArray"in a?l=new ed(a.removeAllFromArray.values||[]):"increment"in a?l=new Gf(o,a.increment):Ae();const c=Pn.fromServerFormat(a.fieldPath);return new H_(c,l)}(n,i)):[];var s;if(e.update){const i=_a(n,e.update.name),s=new pi({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new ys((e.updateMask.fieldPaths||[]).map(h=>Pn.fromServerFormat(h)));return new dl(i,s,o,t,r)}return new Wf(i,s,t,r)}if(e.delete){const i=_a(n,e.delete);return new Kf(i,t)}if(e.verify){const i=_a(n,e.verify);return new jS(i,t)}return Ae()}function ez(n,e){return{documents:[Z$(n,e.path)]}}function YS(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Z$(n,i);const s=function(c){if(0!==c.length)return rz(on.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(0!==c.length)return c.map(h=>{return{field:bc((g=h).field),direction:zle(g.dir)};var g})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=GS(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:t,parent:i};var c}function tz(n){let e=Q$(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ne(1===r);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(p){const g=nz(p);return g instanceof on&&OS(g)?g.getFilters():[g]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(g=>{return new F_(Qf((v=g).field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction));var v}));let a=null;t.limit&&(a=function(p){let g;return g="object"==typeof p?p.value:p,R_(g)?null:g}(t.limit));let l=null;var p;t.startAt&&(l=new vc((p=t.startAt).values||[],!!p.before));let c=null;return t.endAt&&(c=function(p){return new vc(p.values||[],!p.before)}(t.endAt)),m$(e,i,o,s,a,"F",l,c)}function nz(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Qf(t.unaryFilter.field);return Mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Qf(t.unaryFilter.field);return Mt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Qf(t.unaryFilter.field);return Mt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Qf(t.unaryFilter.field);return Mt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ae()}}(n):void 0!==n.fieldFilter?Mt.create(Qf((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ae()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return on.create(t.compositeFilter.filters.map(r=>nz(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ae()}}(t.compositeFilter.op))}(n):Ae();var t}function zle(n){return Ole[n]}function qle(n){return Fle[n]}function Gle(n){return Lle[n]}function bc(n){return{fieldPath:n.canonicalString()}}function Qf(n){return Pn.fromServerFormat(n.fieldPath)}function rz(n){return n instanceof Mt?function(t){if("=="===t.op){if(JH(t.value))return{unaryFilter:{field:bc(t.field),op:"IS_NAN"}};if(XH(t.value))return{unaryFilter:{field:bc(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(JH(t.value))return{unaryFilter:{field:bc(t.field),op:"IS_NOT_NAN"}};if(XH(t.value))return{unaryFilter:{field:bc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bc(t.field),op:qle(t.op),value:t.value}}}(n):n instanceof on?function(t){const r=t.getFilters().map(i=>rz(i));return 1===r.length?r[0]:{compositeFilter:{op:Gle(t.op),filters:r}}}(n):Ae()}function Wle(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function iz(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class hl{constructor(e,t,r,i,s=Fe.min(),o=Fe.min(),a=Vr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new hl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new hl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class sz{constructor(e){this.ct=e}}function oz(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:mw(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:W_(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Zf(s,o.version.toTimestamp()),createTime:Zf(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:td(e.version)};else{if(!e.isUnknownDocument())return Ae();r.unknownDocument={path:t.path.toArray(),version:td(e.version)}}var s,o;return r}function mw(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function td(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function nd(n){const e=new Vn(n.seconds,n.nanoseconds);return Fe.fromTimestamp(e)}function rd(n,e){const t=(e.baseMutations||[]).map(s=>QS(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>QS(n.ct,s)),i=Vn.fromMillis(e.localWriteTimeMs);return new HS(e.batchId,i,t,r)}function Z_(n){const e=nd(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?nd(n.lastLimboFreeSnapshotVersion):Fe.min();let r;return r=void 0!==n.query.documents?(Ne(1===(s=n.query).documents.length),Yi(Hf(Q$(s.documents[0])))):function(s){return Yi(tz(s))}(n.query),new hl(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Vr.fromBase64String(n.resumeToken));var s}function az(n,e){const t=td(e.snapshotVersion),r=td(e.lastLimboFreeSnapshotVersion);let i;i=aw(e.target)?ez(n.ct,e.target):YS(n.ct,e.target).ut;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Xu(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function XS(n){const e=tz({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?cw(e,e.limit,"L"):e}function JS(n,e){return new zS(e.largestBatchId,QS(n.ct,e.overlayMutation))}function lz(n,e){const t=e.path.lastSegment();return[n,Ri(e.path.popLast()),t]}function cz(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:td(r.readTime),documentKey:Ri(r.documentKey.path),largestBatchId:r.largestBatchId}}class Zle{getBundleMetadata(e,t){return uz(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:nd(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return uz(e).put({bundleId:(i=t).id,createTime:td(br(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return dz(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:XS(s.bundledQuery),readTime:nd(s.readTime)};var s})}saveNamedQuery(e,t){return dz(e).put({name:(i=t).name,readTime:td(br(i.readTime)),bundledQuery:i.bundledQuery});var i}}function uz(n){return Kr(n,"bundles")}function dz(n){return Kr(n,"namedQueries")}class gw{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new gw(e,t.uid||"")}getOverlay(e,t){return Q_(e).get(lz(this.userId,t)).next(r=>r?JS(this.serializer,r):null)}getOverlays(e,t){const r=ga();return V.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new zS(t,o);i.push(this.ht(e,a))}),V.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(Ri(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Q_(e).H("collectionPathOverlayIndex",a))}),V.waitFor(s)}getOverlaysForCollection(e,t,r){const i=ga(),s=Ri(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Q_(e).W("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=JS(this.serializer,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=ga();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Q_(e).Y({index:"collectionGroupOverlayIndex",range:a},(l,c,h)=>{const p=JS(this.serializer,c);s.size()<i||p.largestBatchId===o?(s.set(p.getKey(),p),o=p.largestBatchId):h.done()}).next(()=>s)}ht(e,t){return Q_(e).put(function(i,s,o){const[a,l,c]=lz(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:K_(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function Q_(n){return Kr(n,"documentOverlays")}class id{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(cr(e.integerValue));else if("doubleValue"in e){const r=cr(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),M_(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Et(t,20),"string"==typeof r?t.At(r):(t.At(`${r.seconds||""}`),t.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(ll(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?e$(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Ae()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const r=e.fields||{};this.Et(t,55);for(const i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){const r=e.values||[];this.Et(t,50);for(const i of r)this.It(i,t)}gt(e,t){this.Et(t,37),ye.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function Qle(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function hz(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=Qle(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}id.bt=new id;class Yle{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ct(r.value),r=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Mt(r.value),r=t.next();this.xt()}Ot(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=t.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=t.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Bt(e){const t=this.Lt(e),r=hz(t);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}qt(e){const t=this.Lt(e),r=hz(t);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Xle{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class Jle{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Y_{constructor(){this.Gt=new Yle,this.zt=new Xle(this.Gt),this.jt=new Jle(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class sd{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new sd(this.indexId,this.documentKey,this.arrayValue,r)}}function Ec(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=fz(n.arrayValue,e.arrayValue),0!==t?t:(t=fz(n.directionalValue,e.directionalValue),0!==t?t:ye.comparator(n.documentKey,e.documentKey)))}function fz(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class pz{constructor(e){this.Yt=new an((t,r)=>Pn.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const r=t;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(Ne(e.collectionGroup===this.collectionId),this.en)return!1;const t=AS(e);if(void 0!==t&&!this.nn(t))return!1;const r=Ku(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.rn(a,l)||!this.sn(this.Zt[o++],l))return!1}++s}for(;s<r.length;++s)if(o>=this.Zt.length||!this.sn(this.Zt[o++],r[s]))return!1;return!0}on(){if(this.en)return null;let e=new an(Pn.comparator);const t=[];for(const r of this.Xt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new Zu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Zu(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Zu(r.field,"asc"===r.dir?0:1)));return new Lf(Lf.UNKNOWN_ID,this.collectionId,t,Vf.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function mz(n){var e,t;if(Ne(n instanceof Mt||n instanceof on),n instanceof Mt){if(n instanceof h$){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>Mt.create(n.field,"==",s)))||[];return on.create(i,"or")}return n}const r=n.filters.map(i=>mz(i));return on.create(r,n.op)}function ece(n){if(0===n.getFilters().length)return[];const e=nR(mz(n));return Ne(gz(e)),eR(e)||tR(e)?[e]:e.getFilters()}function eR(n){return n instanceof Mt}function tR(n){return n instanceof on&&OS(n)}function gz(n){return eR(n)||tR(n)||function(t){if(t instanceof on&&kS(t)){for(const r of t.getFilters())if(!eR(r)&&!tR(r))return!1;return!0}return!1}(n)}function nR(n){if(Ne(n instanceof Mt||n instanceof on),n instanceof Mt)return n;if(1===n.filters.length)return nR(n.filters[0]);const e=n.filters.map(r=>nR(r));let t=on.create(e,n.op);return t=_w(t),gz(t)?t:(Ne(t instanceof on),Ne(jf(t)),Ne(t.filters.length>1),t.filters.reduce((r,i)=>rR(r,i)))}function rR(n,e){let t;return Ne(n instanceof Mt||n instanceof on),Ne(e instanceof Mt||e instanceof on),t=n instanceof Mt?e instanceof Mt?on.create([n,e],"and"):_z(n,e):e instanceof Mt?_z(e,n):function(i,s){if(Ne(i.filters.length>0&&s.filters.length>0),jf(i)&&jf(s))return c$(i,s.getFilters());const o=kS(i)?i:s,a=kS(i)?s:i,l=o.filters.map(c=>rR(c,a));return on.create(l,"or")}(n,e),_w(t)}function _z(n,e){if(jf(e))return c$(e,n.getFilters());{const t=e.filters.map(r=>rR(n,r));return on.create(t,"or")}}function _w(n){if(Ne(n instanceof Mt||n instanceof on),n instanceof Mt)return n;const e=n.getFilters();if(1===e.length)return _w(e[0]);if(a$(n))return n;const t=e.map(i=>_w(i)),r=[];return t.forEach(i=>{i instanceof Mt?r.push(i):i instanceof on&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:on.create(r,n.op)}class tce{constructor(){this._n=new iR}addToCollectionParentIndex(e,t){return this._n.add(t),V.resolve()}getCollectionParents(e,t){return V.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return V.resolve()}deleteFieldIndex(e,t){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,t){return V.resolve()}getDocumentsMatchingTarget(e,t){return V.resolve(null)}getIndexType(e,t){return V.resolve(0)}getFieldIndexes(e,t){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,t){return V.resolve(Fs.min())}getMinOffsetFromCollectionGroup(e,t){return V.resolve(Fs.min())}updateCollectionGroup(e,t,r){return V.resolve()}updateIndexEntries(e,t){return V.resolve()}}class iR{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new an(Rt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new an(Rt.comparator)).toArray()}}const yw=new Uint8Array(0);class nce{constructor(e,t){this.databaseId=t,this.an=new iR,this.un=new ul(r=>Xu(r),(r,i)=>L_(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});const s={collectionId:r,parent:Ri(i)};return yz(e).put(s)}return V.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[kH(t),""],!1,!0);return yz(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(pa(o.parent))}return r})}addFieldIndex(e,t){const r=X_(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=Xf(e);return s.next(a=>{o.put(cz(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=X_(e),i=Xf(e),s=Yf(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=X_(e),r=Yf(e),i=Xf(e);return t.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,t){return V.forEach(this.cn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new pz(r).on();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=Yf(e);let i=!0;const s=new Map;return V.forEach(this.cn(t),o=>this.ln(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=pt();const a=[];return V.forEach(s,(l,c)=>{var k;ae("IndexedDbIndexManager",`Using index ${k=l,`id=${k.indexId}|cg=${k.collectionGroup}|f=${k.fields.map(G=>`${G.fieldPath}:${G.kind}`).join(",")}`} to execute ${Xu(t)}`);const h=function(k,G){const ce=AS(G);if(void 0===ce)return null;for(const De of lw(k,ce.fieldPath))switch(De.op){case"array-contains-any":return De.value.arrayValue.values||[];case"array-contains":return[De.value]}return null}(c,l),p=function(k,G){const ce=new Map;for(const De of Ku(G))for(const ze of lw(k,De.fieldPath))switch(ze.op){case"==":case"in":ce.set(De.fieldPath.canonicalString(),ze.value);break;case"not-in":case"!=":return ce.set(De.fieldPath.canonicalString(),ze.value),Array.from(ce.values())}return null}(c,l),g=function(k,G){const ce=[];let De=!0;for(const ze of Ku(G)){const Pt=0===ze.kind?f$(k,ze.fieldPath,k.startAt):p$(k,ze.fieldPath,k.startAt);ce.push(Pt.value),De&&(De=Pt.inclusive)}return new vc(ce,De)}(c,l),_=function(k,G){const ce=[];let De=!0;for(const ze of Ku(G)){const Pt=0===ze.kind?p$(k,ze.fieldPath,k.endAt):f$(k,ze.fieldPath,k.endAt);ce.push(Pt.value),De&&(De=Pt.inclusive)}return new vc(ce,De)}(c,l),v=this.hn(l,c,g),E=this.hn(l,c,_),T=this.Pn(l,c,p),P=this.In(l.indexId,h,v,g.inclusive,E,_.inclusive,T);return V.forEach(P,D=>r.j(D,t.limit).next(k=>{k.forEach(G=>{const ce=ye.fromSegments(G.documentKey);o.has(ce)||(o=o.add(ce),a.push(ce))})}))}).next(()=>a)}return V.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:ece(on.create(e.filters,"and")).map(r=>LS(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}In(e,t,r,i,s,o,a){const l=(null!=t?t.length:1)*Math.max(r.length,s.length),c=l/(null!=t?t.length:1),h=[];for(let p=0;p<l;++p){const g=t?this.Tn(t[p/c]):yw,_=this.En(e,g,r[p%c],i),v=this.dn(e,g,s[p%c],o),E=a.map(T=>this.En(e,g,T,!0));h.push(...this.createRange(_,v,E))}return h}En(e,t,r,i){const s=new sd(e,ye.empty(),t,r);return i?s:s.Jt()}dn(e,t,r,i){const s=new sd(e,ye.empty(),t,r);return i?s.Jt():s}ln(e,t){const r=new pz(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.cn(t);return V.forEach(i,s=>this.ln(e,s).next(o=>{o?0!==r&&o.fields.length<function(l){let c=new an(Pn.comparator),h=!1;for(const p of l.filters)for(const g of p.getFlattenedFilters())g.field.isKeyField()||("array-contains"===g.op||"array-contains-any"===g.op?h=!0:c=c.add(g.field));for(const p of l.orderBy)p.field.isKeyField()||(c=c.add(p.field));return c.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}An(e,t){const r=new Y_;for(const i of Ku(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Ht(i.kind);id.bt.Pt(s,o)}return r.Wt()}Tn(e){const t=new Y_;return id.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const r=new Y_;return id.bt.Pt(Yu(this.databaseId,t),r.Ht(function(s){const o=Ku(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,t,r){if(null===r)return[];let i=[];i.push(new Y_);let s=0;for(const o of Ku(e)){const a=r[s++];for(const l of i)if(this.Vn(t,o.fieldPath)&&k_(a))i=this.mn(i,o,a);else{const c=l.Ht(o.kind);id.bt.Pt(a,c)}}return this.fn(i)}hn(e,t,r){return this.Pn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Wt();return t}mn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Y_;l.seed(a.Wt()),id.bt.Pt(o,l.Ht(t.kind)),s.push(l)}return s}Vn(e,t){return!!e.filters.find(r=>r instanceof Mt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=X_(e),i=Xf(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(s=>{const o=[];return V.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(h,p){const g=p?new Vf(p.sequenceNumber,new Fs(nd(p.readTime),new ye(pa(p.documentKey)),p.largestBatchId)):Vf.empty(),_=h.fields.map(([v,E])=>new Zu(Pn.fromServerFormat(v),E));return new Lf(h.indexId,h.collectionGroup,_,g)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:it(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=X_(e),s=Xf(e);return this.gn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>V.forEach(a,l=>s.put(cz(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return V.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?V.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),V.forEach(a,l=>this.pn(e,i,l).next(c=>{const h=this.yn(s,l);return c.isEqual(h)?V.resolve():this.wn(e,s,l,c,h)}))))})}Sn(e,t,r,i){return Yf(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,t.key),documentKey:t.key.path.toArray()})}bn(e,t,r,i){return Yf(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,t.key),t.key.path.toArray()])}pn(e,t,r){const i=Yf(e);let s=new an(Ec);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,t)])},(o,a)=>{s=s.add(new sd(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,t){let r=new an(Ec);const i=this.An(t,e);if(null==i)return r;const s=AS(t);if(null!=s){const o=e.data.field(s.fieldPath);if(k_(o))for(const a of o.arrayValue.values||[])r=r.add(new sd(t.indexId,e.key,this.Tn(a),i))}else r=r.add(new sd(t.indexId,e.key,yw,i));return r}wn(e,t,r,i,s){ae("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(l,c,h,p,g){const _=l.getIterator(),v=c.getIterator();let E=Uf(_),T=Uf(v);for(;E||T;){let P=!1,D=!1;if(E&&T){const k=h(E,T);k<0?D=!0:k>0&&(P=!0)}else null!=E?D=!0:P=!0;P?(p(T),T=Uf(v)):D?(g(E),E=Uf(_)):(E=Uf(_),T=Uf(v))}}(i,s,Ec,a=>{o.push(this.Sn(e,t,r,a))},a=>{o.push(this.bn(e,t,r,a))}),V.waitFor(o)}gn(e){let t=1;return Xf(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Ec(o,a)).filter((o,a,l)=>!a||0!==Ec(o,l[a-1]));const i=[];i.push(e);for(const o of r){const a=Ec(o,e),l=Ec(o,t);if(0===a)i[0]=e.Jt();else if(a>0&&l<0)i.push(o),i.push(o.Jt());else if(l>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,yw,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,yw,[]]))}return s}Dn(e,t){return Ec(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(vz)}getMinOffset(e,t){return V.mapArray(this.cn(t),r=>this.ln(e,r).next(i=>i||Ae())).next(vz)}}function yz(n){return Kr(n,"collectionParents")}function Yf(n){return Kr(n,"indexEntries")}function X_(n){return Kr(n,"indexConfiguration")}function Xf(n){return Kr(n,"indexState")}function vz(n){Ne(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;DS(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Fs(e.readTime,e.documentKey,t)}const bz={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Mi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Mi(e,Mi.DEFAULT_COLLECTION_PERCENTILE,Mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Ez(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const l=r.Y({range:o},(h,p,g)=>(a++,g.delete()));s.push(l.next(()=>{Ne(1===a)}));const c=[];for(const h of t.mutations){const p=$H(e,h.key.path,t.batchId);s.push(i.delete(p)),c.push(h.key)}return V.waitFor(s).next(()=>c)}function vw(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ae();e=n.noDocument}return JSON.stringify(e).length}Mi.DEFAULT_COLLECTION_PERCENTILE=10,Mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mi.DEFAULT=new Mi(41943040,Mi.DEFAULT_COLLECTION_PERCENTILE,Mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mi.DISABLED=new Mi(-1,0,0);class bw{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,t,r,i){Ne(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new bw(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return wc(e).Y({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Jf(e),o=wc(e);return o.add({}).next(a=>{Ne("number"==typeof a);const l=new HS(a,t,r,i),c=function(_,v,E){const T=E.baseMutations.map(D=>K_(_.ct,D)),P=E.mutations.map(D=>K_(_.ct,D));return{userId:v,batchId:E.batchId,localWriteTimeMs:E.localWriteTime.toMillis(),baseMutations:T,mutations:P}}(this.serializer,this.userId,l),h=[];let p=new an((g,_)=>it(g.canonicalString(),_.canonicalString()));for(const g of i){const _=$H(this.userId,g.key.path,a);p=p.add(g.key.path.popLast()),h.push(o.put(c)),h.push(s.put(_,zae))}return p.forEach(g=>{h.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Cn[a]=l.keys()}),V.waitFor(h).next(()=>l)})}lookupMutationBatch(e,t){return wc(e).get(t).next(r=>r?(Ne(r.userId===this.userId),rd(this.serializer,r)):null)}vn(e,t){return this.Cn[t]?V.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Cn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return wc(e).Y({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(Ne(a.batchId>=r),s=rd(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return wc(e).Y({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return wc(e).W("userMutationsIndex",t).next(r=>r.map(i=>rd(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=ew(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Jf(e).Y({range:i},(o,a,l)=>{const[c,h,p]=o,g=pa(h);if(c===this.userId&&t.path.isEqual(g))return wc(e).get(p).next(_=>{if(!_)throw Ae();Ne(_.userId===this.userId),s.push(rd(this.serializer,_))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new an(it);const i=[];return t.forEach(s=>{const o=ew(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Jf(e).Y({range:a},(c,h,p)=>{const[g,_,v]=c,E=pa(_);g===this.userId&&s.path.isEqual(E)?r=r.add(v):p.done()});i.push(l)}),V.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=ew(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new an(it);return Jf(e).Y({range:o},(l,c,h)=>{const[p,g,_]=l,v=pa(g);p===this.userId&&r.isPrefixOf(v)?v.length===i&&(a=a.add(_)):h.done()}).next(()=>this.Fn(e,a))}Fn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(wc(e).get(s).next(o=>{if(null===o)throw Ae();Ne(o.userId===this.userId),r.push(rd(this.serializer,o))}))}),V.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Ez(e.ae,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),V.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return V.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Jf(e).Y({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=pa(s[1]);i.push(l)}else a.done()}).next(()=>{Ne(0===i.length)})})}containsKey(e,t){return wz(e,this.userId,t)}xn(e){return Iz(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function wz(n,e,t){const r=ew(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Jf(n).Y({range:s,J:!0},(a,l,c)=>{const[h,p,g]=a;h===e&&p===i&&(o=!0),c.done()}).next(()=>o)}function wc(n){return Kr(n,"mutations")}function Jf(n){return Kr(n,"documentMutations")}function Iz(n){return Kr(n,"mutationQueues")}class od{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new od(0)}static Bn(){return new od(-1)}}class rce{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Ln(e).next(t=>{const r=new od(t.highestTargetId);return t.highestTargetId=r.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ln(e).next(t=>Fe.fromTimestamp(new Vn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ln(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Ln(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.kn(e,i)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Ln(e).next(r=>(r.targetCount+=1,this.Qn(t,r),this.kn(e,r))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ep(e).delete(t.targetId)).next(()=>this.Ln(e)).next(r=>(Ne(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return ep(e).Y((o,a)=>{const l=Z_(a);l.sequenceNumber<=t&&null===r.get(l.targetId)&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>V.waitFor(s)).next(()=>i)}forEachTarget(e,t){return ep(e).Y((r,i)=>{const s=Z_(i);t(s)})}Ln(e){return Tz(e).get("targetGlobalKey").next(t=>(Ne(null!==t),t))}kn(e,t){return Tz(e).put("targetGlobalKey",t)}qn(e,t){return ep(e).put(az(this.serializer,t))}Qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ln(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Xu(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return ep(e).Y({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const c=Z_(a);L_(t,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Ic(e);return t.forEach(o=>{const a=Ri(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),V.waitFor(i)}removeMatchingKeys(e,t,r){const i=Ic(e);return V.forEach(t,s=>{const o=Ri(s.path);return V.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Ic(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ic(e);let s=pt();return i.Y({range:r,J:!0},(o,a,l)=>{const c=pa(o[1]),h=new ye(c);s=s.add(h)}).next(()=>s)}containsKey(e,t){const r=Ri(t.path),i=IDBKeyRange.bound([r],[kH(r)],!1,!0);let s=0;return Ic(e).Y({index:"documentTargetsIndex",J:!0,range:i},([o,a],l,c)=>{0!==o&&(s++,c.done())}).next(()=>s>0)}_t(e,t){return ep(e).get(t).next(r=>r?Z_(r):null)}}function ep(n){return Kr(n,"targets")}function Tz(n){return Kr(n,"targetGlobal")}function Ic(n){return Kr(n,"targetDocuments")}function Cz([n,e],[t,r]){const i=it(n,t);return 0===i?it(e,r):i}class ice{constructor(e){this.Kn=e,this.buffer=new an(Cz),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Cz(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class xz{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var t=this;ae("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,z.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){hc(r)?ae("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield dc(r)}yield t.zn(3e5)}))}}class sce{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return V.resolve(Ls._e);const r=new ice(t);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(bz)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bz):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let r,i,s,o,a,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(s=p,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(c=Date.now(),Of()<=Zi.in.DEBUG&&ae("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-h}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(l-a)+`ms\n\tRemoved ${p} documents in `+(c-l)+`ms\nTotal Duration: ${c-h}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}}class oce{constructor(e,t){this.db=e,this.garbageCollector=function Az(n,e){return new sce(n,e)}(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Zn(e){let t=0;return this.Jn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(r,i)=>t(i))}addReference(e,t,r){return Ew(e,r)}removeReference(e,t,r){return Ew(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Ew(e,t)}er(e,t){return function(i,s){let o=!1;return Iz(i).Z(a=>wz(i,a,s).next(l=>(l&&(o=!0),V.resolve(!l)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Xn(e,(o,a)=>{if(a<=t){const l=this.er(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Fe.min()),Ic(e).delete([0,Ri(o.path)])))});i.push(l)}}).next(()=>V.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Ew(e,t)}Xn(e,t){const r=Ic(e);let i,s=Ls._e;return r.Y({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{0===o?(s!==Ls._e&&t(new ye(pa(i)),s),s=c,i=l):s=Ls._e}).next(()=>{s!==Ls._e&&t(new ye(pa(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ew(n,e){return Ic(n).put((i=n.currentSequenceNumber,{targetId:0,path:Ri(e.path),sequenceNumber:i}));var i}class Dz{constructor(){this.changes=new ul(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?V.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ace{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ad(e).put(r)}removeEntry(e,t,r){return ad(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],mw(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.tr(e,r)))}getEntry(e,t){let r=Nn.newInvalidDocument(t);return ad(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(J_(t))},(i,s)=>{r=this.nr(t,s)}).next(()=>r)}rr(e,t){let r={size:0,document:Nn.newInvalidDocument(t)};return ad(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(J_(t))},(i,s)=>{r={document:this.nr(t,s),size:vw(s)}}).next(()=>r)}getEntries(e,t){let r=vs();return this.ir(e,t,(i,s)=>{const o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,t){let r=vs(),i=new wn(ye.comparator);return this.ir(e,t,(s,o)=>{const a=this.nr(s,o);r=r.insert(s,a),i=i.insert(s,vw(o))}).next(()=>({documents:r,_r:i}))}ir(e,t,r){if(t.isEmpty())return V.resolve();let i=new an(Pz);t.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(J_(i.first()),J_(i.last())),o=i.getIterator();let a=o.getNext();return ad(e).Y({index:"documentKeyIndex",range:s},(l,c,h)=>{const p=ye.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&Pz(a,p)<0;)r(a,null),a=o.getNext();a&&a.isEqual(p)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?h.U(J_(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),mw(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ad(e).W(IDBKeyRange.bound(a,l,!0)).next(c=>{s?.incrementDocumentReadCount(c.length);let h=vs();for(const p of c){const g=this.nr(ye.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);g.isFoundDocument()&&(U_(t,g)||i.has(g.key))&&(h=h.insert(g.key,g))}return h})}getAllFromCollectionGroup(e,t,r,i){let s=vs();const o=Mz(t,r),a=Mz(t,Fs.max());return ad(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,h)=>{const p=this.nr(ye.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(p.key,p),s.size===i&&h.done()}).next(()=>s)}newChangeBuffer(e){return new lce(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Rz(e).get("remoteDocumentGlobalKey").next(t=>(Ne(!!t),t))}tr(e,t){return Rz(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const r=function Kle(n,e){let t;if(e.document)t=J$(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ye.fromSegments(e.noDocument.path),i=nd(e.noDocument.readTime);t=Nn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ae();{const r=ye.fromSegments(e.unknownDocument.path),i=nd(e.unknownDocument.version);t=Nn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new Vn(i[0],i[1]);return Fe.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Fe.min()))return r}return Nn.newInvalidDocument(e)}}function Sz(n){return new ace(n)}class lce extends Dz{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new ul(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new an((s,o)=>it(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ur.get(s);if(t.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=oz(this.ar.serializer,o);i=i.add(s.path.popLast());const c=vw(l);r+=c-a.size,t.push(this.ar.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=oz(this.ar.serializer,o.convertToNoDocument(Fe.min()));t.push(this.ar.addEntry(e,s,l))}}),i.forEach(s=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.ar.updateMetadata(e,r)),V.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(r=>(this.ur.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function Rz(n){return Kr(n,"remoteDocumentGlobal")}function ad(n){return Kr(n,"remoteDocumentsV14")}function J_(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Mz(n,e){const t=e.documentKey.path.toArray();return[n,mw(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Pz(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=it(t[s],r[s]),i)return i;return i=it(t.length,r.length),i||(i=it(t[t.length-2],r[r.length-2]),i||it(t[t.length-1],r[r.length-1]))}class cce{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Nz{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&$_(r.mutation,i,ys.empty(),Vn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,pt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=pt()){const i=ga();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=B_();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=ga();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,pt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=vs();const o=j_(),a=j_();return t.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(void 0===h||h.mutation instanceof dl)?s=s.insert(c.key,c):void 0!==h?(o.set(c.key,h.mutation.getFieldMask()),$_(h.mutation,c,h.mutation.getFieldMask(),Vn.now())):o.set(c.key,ys.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),t.forEach((c,h)=>{var p;return a.set(c,new cce(h,null!==(p=o.get(c))&&void 0!==p?p:null))}),a))}recalculateAndSaveOverlays(e,t){const r=j_();let i=new wn((o,a)=>o-a),s=pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(null===c)return;let h=r.get(l)||ys.empty();h=a.applyToLocalView(c,h),r.set(l,h);const p=(i.get(a.batchId)||pt()).add(l);i=i.insert(a.batchId,p)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,p=I$();h.forEach(g=>{if(!s.has(g)){const _=P$(t.get(g),r.get(g));null!==_&&p.set(g,_),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,p))}return V.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return ye.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):VS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):V.resolve(ga());let a=-1,l=s;return o.next(c=>V.forEach(c,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?V.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{l=l.insert(h,g)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,pt())).next(h=>({batchId:a,changes:w$(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next(r=>{let i=B_();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=B_();return this.indexManager.getCollectionParents(e,s).next(a=>V.forEach(a,l=>{const c=(p=t,g=l.child(s),new cl(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt));var p,g;return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();null===o.get(h)&&(o=o.insert(h,Nn.newInvalidDocument(h)))});let a=B_();return o.forEach((l,c)=>{const h=s.get(l);void 0!==h&&$_(h.mutation,c,ys.empty(),Vn.now()),U_(t,c)&&(a=a.insert(l,c))}),a})}}class uce{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return V.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,{id:(i=t).id,version:i.version,createTime:br(i.createTime)}),V.resolve();var i}getNamedQuery(e,t){return V.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,{name:(i=t).name,query:XS(i.bundledQuery),readTime:br(i.readTime)}),V.resolve();var i}}class dce{constructor(){this.overlays=new wn(ye.comparator),this.hr=new Map}getOverlay(e,t){return V.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ga();return V.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),V.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.hr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),V.resolve()}getOverlaysForCollection(e,t,r){const i=ga(),s=t.length+1,o=new ye(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return V.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new wn((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let h=s.get(c.largestBatchId);null===h&&(h=ga(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=ga(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return V.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new zS(t,r));let s=this.hr.get(t);void 0===s&&(s=pt(),this.hr.set(t,s)),this.hr.set(t,s.add(r.key))}}class sR{constructor(){this.Pr=new an(Zr.Ir),this.Tr=new an(Zr.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const r=new Zr(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new Zr(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){const t=new ye(new Rt([])),r=new Zr(t,e),i=new Zr(t,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new ye(new Rt([])),r=new Zr(t,e),i=new Zr(t,e+1);let s=pt();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Zr(e,0),r=this.Pr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Zr{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return ye.comparator(e.key,t.key)||it(e.pr,t.pr)}static Er(e,t){return it(e.pr,t.pr)||ye.comparator(e.key,t.key)}}class hce{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new an(Zr.Ir)}checkEmpty(e){return V.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.yr;this.yr++;const o=new HS(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Zr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(o)}lookupMutationBatch(e,t){return V.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.br(t+1),s=i<0?0:i;return V.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Zr(t,0),i=new Zr(t,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),V.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new an(it);return t.forEach(i=>{const s=new Zr(i,0),o=new Zr(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),V.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;ye.isDocumentKey(s)||(s=s.child(""));const o=new Zr(new ye(s),0);let a=new an(it);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},o),V.resolve(this.Dr(a))}Dr(e){const t=[];return e.forEach(r=>{const i=this.Sr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ne(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return V.forEach(t.mutations,i=>{const s=new Zr(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){const r=new Zr(t,0),i=this.wr.firstAfterOrEqual(r);return V.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return V.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class fce{constructor(e){this.vr=e,this.docs=new wn(ye.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return V.resolve(r?r.document.mutableCopy():Nn.newInvalidDocument(t))}getEntries(e,t){let r=vs();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Nn.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=vs();const o=t.path,a=new ye(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||DS(FH(h),r)<=0||(i.has(h.key)||U_(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return V.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ae()}Fr(e,t){return V.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new pce(this)}getSize(e){return V.resolve(this.size)}}class pce extends Dz{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),V.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class mce{constructor(e){this.persistence=e,this.Mr=new ul(t=>Xu(t),L_),this.lastRemoteSnapshotVersion=Fe.min(),this.highestTargetId=0,this.Or=0,this.Nr=new sR,this.targetCount=0,this.Br=od.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),V.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new od(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,V.resolve()}updateTargetData(e,t){return this.qn(t),V.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),V.waitFor(s).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,t){const r=this.Mr.get(t)||null;return V.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),V.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),V.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),V.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Nr.gr(t);return V.resolve(r)}containsKey(e,t){return V.resolve(this.Nr.containsKey(t))}}class oR{constructor(e,t){this.Lr={},this.overlays={},this.kr=new Ls(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new mce(this),this.indexManager=new tce,this.remoteDocumentCache=new fce(r=>this.referenceDelegate.Kr(r)),this.serializer=new sz(t),this.$r=new uce(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new dce,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Lr[e.toKey()];return r||(r=new hce(t,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){ae("MemoryPersistence","Starting transaction:",e);const i=new gce(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,t){return V.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,t)))}}class gce extends VH{constructor(e){super(),this.currentSequenceNumber=e}}class ww{constructor(e){this.persistence=e,this.zr=new sR,this.jr=null}static Hr(e){return new ww(e)}get Jr(){if(this.jr)return this.jr;throw Ae()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),V.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),V.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Jr,r=>{const i=ye.fromPath(r);return this.Yr(e,i).next(s=>{s||t.removeEntry(i,Fe.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return V.or([()=>V.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class _ce{constructor(e){this.serializer=e}N(e,t,r,i){const s=new J0("createOrUpgrade",t);var l;r<1&&i>=1&&(e.createObjectStore("owner"),(l=e).createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",HH,{unique:!0}),l.createObjectStore("documentMutations"),kz(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=V.resolve();return r<3&&i>=3&&(0!==r&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),kz(e)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Fe.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",h)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(l,c){return c.store("mutations").W().next(h=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",HH,{unique:!0});const p=c.store("mutations"),g=h.map(_=>p.put(_));return V.waitFor(g)})}(e,s))),o=o.next(()=>{!function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(l){const c=l.createObjectStore("documentOverlays",{keyPath:nle});c.createIndex("collectionPathOverlayIndex",rle,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",ile,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:qae});c.createIndex("documentKeyIndex",Gae),c.createIndex("collectionGroupIndex",Wae)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:Xae}).createIndex("sequenceNumberIndex",Jae,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:ele}).createIndex("documentKeyIndex",tle,{unique:!1})}(e))),o}ei(e){let t=0;return e.store("remoteDocuments").Y((r,i)=>{t+=vw(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>V.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>V.forEach(a,l=>{Ne(l.userId===s.userId);const c=rd(this.serializer,l);return Ez(e,s.userId,c).next(()=>{})}))}))}ti(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Y((o,a)=>{const l=new Rt(o),c=[0,Ri(l)];s.push(t.get(c).next(h=>h?V.resolve():t.put({targetId:0,path:Ri(l),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>V.waitFor(s))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:Yae});const r=t.store("collectionParents"),i=new iR,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Ri(l)})}};return t.store("remoteDocuments").Y({J:!0},(o,a)=>{const l=new Rt(o);return s(l.popLast())}).next(()=>t.store("documentMutations").Y({J:!0},([o,a,l],c)=>{const h=pa(a);return s(h.popLast())}))}ri(e){const t=e.store("targets");return t.Y((r,i)=>{const s=Z_(i),o=az(this.serializer,s);return t.put(o)})}ii(e,t){const r=t.store("remoteDocuments"),i=[];return r.Y((s,o)=>{const a=t.store("remoteDocumentsV14"),l=(p=o,p.document?new ye(Rt.fromString(p.document.name).popFirst(5)):p.noDocument?ye.fromSegments(p.noDocument.path):p.unknownDocument?ye.fromSegments(p.unknownDocument.path):Ae()).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var p;i.push(a.put(c))}).next(()=>V.waitFor(i))}si(e,t){const r=t.store("mutations"),i=Sz(this.serializer),s=new oR(ww.Hr,this.serializer.ct);return r.W().next(o=>{const a=new Map;return o.forEach(l=>{var c;let h=null!==(c=a.get(l.userId))&&void 0!==c?c:pt();rd(this.serializer,l).keys().forEach(p=>h=h.add(p)),a.set(l.userId,h)}),V.forEach(a,(l,c)=>{const h=new Wr(c),p=gw.lt(this.serializer,h),g=s.getIndexManager(h),_=bw.lt(h,this.serializer,g,s.referenceDelegate);return new Nz(i,_,p,g).recalculateAndSaveOverlaysForDocumentKeys(new MS(t,Ls._e),l).next()})})}}function kz(n){n.createObjectStore("targetDocuments",{keyPath:Zae}).createIndex("documentTargetsIndex",Qae,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Kae,{unique:!0}),n.createObjectStore("targetGlobal")}const aR="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class lR{constructor(e,t,r,i,s,o,a,l,c,h,p=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.oi=s,this.window=o,this.document=a,this._i=c,this.ai=h,this.ui=p,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=g=>Promise.resolve(),!lR.D())throw new oe(q.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new oce(this,i),this.Ti=t+"main",this.serializer=new sz(l),this.Ei=new uo(this.Ti,this.ui,new _ce(this.serializer)),this.Qr=new rce(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Sz(this.serializer),this.$r=new Zle,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===h&&vr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new oe(q.FAILED_PRECONDITION,aR);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Ls(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var t=this;return this.Ii=function(){var r=(0,z.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var t=(0,z.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,z.Z)(function*(){t.started&&(yield t.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Tw(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(hc(e))return ae("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ae("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return ey(e).get("owner").next(t=>V.resolve(this.Si(t)))}bi(e){return Tw(e).delete(this.clientId)}Di(){var e=this;return(0,z.Z)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Kr(r,"clientMetadata");return i.W().next(s=>{const o=e.vi(s,18e5),a=s.filter(l=>-1===o.indexOf(l));return V.forEach(a,l=>i.delete(l.clientId)).next(()=>a)})}).catch(()=>[]);if(e.di)for(const r of t)e.di.removeItem(e.Fi(r.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?V.resolve(!0):ey(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new oe(q.FAILED_PRECONDITION,aR);return!1}}return!(!this.networkEnabled||!this.inForeground)||Tw(e).W().next(r=>void 0===this.vi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&ae("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,z.Z)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new MS(t,Ls._e);return e.yi(r).next(()=>e.bi(r))}),e.Ei.close(),e.Bi()})()}vi(e,t){return e.filter(r=>this.Ci(r.updateTimeMs,t)&&!this.Mi(r.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",e=>Tw(e).W().next(t=>this.vi(t,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return bw.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new nce(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return gw.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,r){ae("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(l=this.ui)?ole:14===l?GH:13===l?qH:12===l?sle:11===l?zH:void Ae();var l;let o;return this.Ei.runTransaction(e,i,s,a=>(o=new MS(a,this.kr?this.kr.next():Ls._e),"readwrite-primary"===t?this.gi(o).next(l=>!!l||this.pi(o)).next(l=>{if(!l)throw vr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new oe(q.FAILED_PRECONDITION,LH);return r(o)}).next(l=>this.wi(o).next(()=>l)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return ey(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new oe(q.FAILED_PRECONDITION,aR)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ey(e).put("owner",t)}static D(){return uo.D()}yi(e){const t=ey(e);return t.get("owner").next(r=>this.Si(r)?(ae("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):V.resolve())}Ci(e,t){const r=Date.now();return!(e<r-t||e>r&&(vr(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,w.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const r=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return ae("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return vr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){vr("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ey(n){return Kr(n,"owner")}function Tw(n){return Kr(n,"clientMetadata")}function cR(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class uR{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=pt(),i=pt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new uR(e,t.fromCache,r,i)}}class yce{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Oz{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,w.G6)()?8:uo.v((0,w.z$)())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ji(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new yce;return this.Ji(e,t,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,t,o,a.size)})}).next(()=>s.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(Of()<=Zi.in.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",zf(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),V.resolve()):(Of()<=Zi.in.DEBUG&&ae("QueryEngine","Query:",zf(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Of()<=Zi.in.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",zf(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yi(t))):V.resolve())}ji(e,t){if(g$(t))return V.resolve(null);let r=Yi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=cw(t,null,"F"),r=Yi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=pt(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(t,a);return this.Xi(t,c,o,l.readTime)?this.ji(e,cw(t,null,"F")):this.es(e,c,t,l)}))})))}Hi(e,t,r,i){return g$(t)||i.isEqual(Fe.min())?V.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(t,s);return this.Xi(t,o,r,i)?V.resolve(null):(Of()<=Zi.in.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),zf(t)),this.es(e,o,t,OH(i,-1)).next(a=>a))})}Zi(e,t){let r=new an(b$(e));return t.forEach((i,s)=>{U_(e,s)&&(r=r.add(s))}),r}Xi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,t,r){return Of()<=Zi.in.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",zf(t)),this.zi.getDocumentsMatchingQuery(e,t,Fs.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class vce{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new wn(it),this.rs=new ul(s=>Xu(s),L_),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Nz(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function Fz(n,e,t,r){return new vce(n,e,t,r)}function Lz(n,e){return dR.apply(this,arguments)}function dR(){return dR=(0,z.Z)(function*(n,e){const t=me(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=pt();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}),dR.apply(this,arguments)}function Vz(n){const e=me(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function Uz(n,e,t){let r=pt(),i=pt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=vs();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Fe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||0===l.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ae("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:i}})}function wce(n,e){const t=me(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function tp(n,e){const t=me(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(s=>s?(i=s,V.resolve(i)):t.Qr.allocateTargetId(r).next(o=>(i=new hl(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ns.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}function np(n,e,t){return hR.apply(this,arguments)}function hR(){return hR=(0,z.Z)(function*(n,e,t){const r=me(n),i=r.ns.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!hc(o))throw o;ae("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}),hR.apply(this,arguments)}function Cw(n,e,t){const r=me(n);let i=Fe.min(),s=pt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const p=me(l),g=p.rs.get(h);return void 0!==g?V.resolve(p.ns.get(g)):p.Qr.getTargetData(c,h)}(r,o,Yi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,t?i:Fe.min(),t?s:pt())).next(a=>(Hz(r,v$(e),a),{documents:a,hs:s})))}function Bz(n,e){const t=me(n),r=me(t.Qr),i=t.ns.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r._t(s,e).next(o=>o?o.target:null))}function jz(n,e){const t=me(n),r=t.ss.get(e)||Fe.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.os.getAllFromCollectionGroup(i,e,OH(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Hz(t,e,i),i))}function Hz(n,e,t){let r=n.ss.get(e)||Fe.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ss.set(e,r)}function fR(){return fR=(0,z.Z)(function*(n,e,t,r){const i=me(n);let s=pt(),o=vs();for(const c of t){const h=e.Ps(c.metadata.name);c.document&&(s=s.add(h));const p=e.Is(c);p.setReadTime(e.Ts(c.metadata.readTime)),o=o.insert(h,p)}const a=i.os.newChangeBuffer({trackRemovals:!0}),l=yield tp(i,(h=r,Yi(Hf(Rt.fromString(`__bundle__/docs/${h}`)))));var h;return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>Uz(c,a,o).next(h=>(a.apply(c),h)).next(h=>i.Qr.removeMatchingKeysForTargetId(c,l.targetId).next(()=>i.Qr.addMatchingKeys(c,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,h.cs,h.ls)).next(()=>h.cs)))}),fR.apply(this,arguments)}function Tce(n,e){return pR.apply(this,arguments)}function pR(){return pR=(0,z.Z)(function*(n,e,t=pt()){const r=yield tp(n,Yi(XS(e.bundledQuery))),i=me(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=br(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(s,e);const a=r.withResumeToken(Vr.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(s,a).next(()=>i.Qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Qr.addMatchingKeys(s,t,r.targetId)).next(()=>i.$r.saveNamedQuery(s,e))})}),pR.apply(this,arguments)}function $z(n,e){return`firestore_clients_${n}_${e}`}function zz(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function mR(n,e){return`firestore_targets_${n}_${e}`}class xw{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Es(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new oe(i.error.code,i.error.message))),o?new xw(e,t,i.state,s):(vr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ty{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Es(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new oe(r.error.code,r.error.message))),s?new ty(e,r.state,i):(vr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Aw{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=BS();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=BH(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Aw(e,s):(vr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class gR{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new gR(t.clientId,t.onlineState):(vr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class _R{constructor(){this.activeTargetIds=BS()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yR{constructor(e,t,r,i,s){this.window=e,this.oi=t,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new wn(it),this.started=!1,this.ys=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=$z(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new _R),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,z.Z)(function*(){const t=yield e.syncEngine.Li();for(const i of t){if(i===e.Vs)continue;const s=e.getItem($z(e.persistenceKey,i));if(s){const o=Aw.Es(i,s);o&&(e.ps=e.ps.insert(o.clientId,o))}}e.Ms();const r=e.storage.getItem(e.vs);if(r){const i=e.xs(r);i&&e.Os(i)}for(const i of e.ys)e.gs(i);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,t,r){this.Bs(e,t,r),this.Ls(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(mR(this.persistenceKey,e));if(r){const i=ty.Es(e,r);i&&(t=i.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(mR(this.persistenceKey,e))}updateQueryState(e,t,r){this.qs(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ls(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ae("SharedClientState","READ",e,t),t}setItem(e,t){ae("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ae("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ae("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ws)return void vr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,z.Z)(function*(){if(t.started){if(null!==r.key)if(t.bs.test(r.key)){if(null==r.newValue){const i=t.$s(r.key);return t.Us(i,null)}{const i=t.Ws(r.key,r.newValue);if(i)return t.Us(i.clientId,i)}}else if(t.Ds.test(r.key)){if(null!==r.newValue){const i=t.Gs(r.key,r.newValue);if(i)return t.zs(i)}}else if(t.Cs.test(r.key)){if(null!==r.newValue){const i=t.js(r.key,r.newValue);if(i)return t.Hs(i)}}else if(r.key===t.vs){if(null!==r.newValue){const i=t.xs(r.newValue);if(i)return t.Os(i)}}else if(r.key===t.Ss){const i=function(o){let a=Ls._e;if(null!=o)try{const l=JSON.parse(o);Ne("number"==typeof l),a=l}catch(l){vr("SharedClientState","Failed to read sequence number from WebStorage",l)}return a}(r.newValue);i!==Ls._e&&t.sequenceNumberHandler(i)}else if(r.key===t.Fs){const i=t.Js(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Ys(s)))}}else t.ys.push(r)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,t,r){const i=new xw(this.currentUser,e,t,r),s=zz(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Ls(e){const t=zz(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,t,r){const i=mR(this.persistenceKey,e),s=new ty(e,t,r);this.setItem(i,s.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const r=this.$s(e);return Aw.Es(r,t)}Gs(e,t){const r=this.Ds.exec(e),i=Number(r[1]);return xw.Es(new Wr(void 0!==r[2]?r[2]:null),i,t)}js(e,t){const r=this.Cs.exec(e),i=Number(r[1]);return ty.Es(i,t)}xs(e){return gR.Es(e)}Js(e){return JSON.parse(e)}zs(e){var t=this;return(0,z.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Zs(e.batchId,e.state,e.error);ae("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const r=t?this.ps.insert(e,t):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=BS();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class qz{constructor(){this.no=new _R,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new _R,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Cce{io(e){}shutdown(){}}class Gz{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){ae("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){ae("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Dw=null;function vR(){return null===Dw?Dw=268435456+Math.round(2147483648*Math.random()):Dw++,"0x"+Dw.toString(16)}const xce={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ace{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const Pi="WebChannelConnection";class Dce extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+t.host,this.po=`projects/${i}/databases/${s}`,this.yo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(t,r,i,s,o){const a=vR(),l=this.bo(t,r.toUriEncodedString());ae("RestConnection",`Sending RPC '${t}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,s,o),this.Co(t,l,c,i).then(h=>(ae("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw _s("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}vo(t,r,i,s,o,a){return this.So(t,r,i,s,o)}Do(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+kf,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}bo(t,r){return`${this.fo}/v1/${r}:${xce[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,r,i){const s=vR();return new Promise((o,a)=>{const l=new Cae;l.setWithCredentials(!0),l.listenOnce(Iae.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case CS.NO_ERROR:const h=l.getResponseJson();ae(Pi,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case CS.TIMEOUT:ae(Pi,`RPC '${e}' ${s} timed out`),a(new oe(q.DEADLINE_EXCEEDED,"Request time out"));break;case CS.HTTP_ERROR:const p=l.getStatus();if(ae(Pi,`RPC '${e}' ${s} failed with status:`,p,"response text:",l.getResponseText()),p>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);const _=g?.error;if(_&&_.status&&_.message){const v=function(T){const P=T.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(P)>=0?P:q.UNKNOWN}(_.status);a(new oe(v,_.message))}else a(new oe(q.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new oe(q.UNAVAILABLE,"Connection failed."));break;default:Ae()}}finally{ae(Pi,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);ae(Pi,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",c,r,15)})}Fo(e,t,r){const i=vR(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Eae(),a=wae(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const h=s.join("");ae(Pi,`Creating RPC '${e}' stream ${i}: ${h}`,l);const p=o.createWebChannel(h,l);let g=!1,_=!1;const v=new Ace({lo:T=>{_?ae(Pi,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(g||(ae(Pi,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),ae(Pi,`RPC '${e}' stream ${i} sending:`,T),p.send(T))},ho:()=>p.close()}),E=(T,P,D)=>{T.listen(P,k=>{try{D(k)}catch(G){setTimeout(()=>{throw G},0)}})};return E(p,X0.EventType.OPEN,()=>{_||ae(Pi,`RPC '${e}' stream ${i} transport opened.`)}),E(p,X0.EventType.CLOSE,()=>{_||(_=!0,ae(Pi,`RPC '${e}' stream ${i} transport closed`),v.Vo())}),E(p,X0.EventType.ERROR,T=>{_||(_=!0,_s(Pi,`RPC '${e}' stream ${i} transport errored:`,T),v.Vo(new oe(q.UNAVAILABLE,"The operation could not be completed")))}),E(p,X0.EventType.MESSAGE,T=>{var P;if(!_){const D=T.data[0];Ne(!!D);const G=D.error||(null===(P=D[0])||void 0===P?void 0:P.error);if(G){ae(Pi,`RPC '${e}' stream ${i} received error:`,G);const ce=G.status;let De=function(Ur){const ws=Sr[Ur];if(void 0!==ws)return V$(ws)}(ce),ze=G.message;void 0===De&&(De=q.INTERNAL,ze="Unknown error status: "+ce+" with message "+G.message),_=!0,v.Vo(new oe(De,ze)),p.close()}else ae(Pi,`RPC '${e}' stream ${i} received:`,D),v.mo(D)}}),E(a,Tae.STAT_EVENT,T=>{T.stat===SH.PROXY?ae(Pi,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===SH.NOPROXY&&ae(Pi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.Ro()},0),v}}function Wz(){return typeof window<"u"?window:null}function Sw(){return typeof document<"u"?document:null}function ny(n){return new Vle(n,!0)}class bR{constructor(e,t,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=t,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,t-r);i>0&&ae("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class Kz{constructor(e,t,r,i,s,o,a,l){this.oi=e,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new bR(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}stop(){var e=this;return(0,z.Z)(function*(){e.Ho()&&(yield e.close(0))})()}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){var e=this;return(0,z.Z)(function*(){if(e.Jo())return e.close(0)})()}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,t){var r=this;return(0,z.Z)(function*(){r.n_(),r.r_(),r.jo.cancel(),r.Wo++,4!==e?r.jo.reset():t&&t.code===q.RESOURCE_EXHAUSTED?(vr(t.toString()),vr("Using maximum backoff delay to prevent overloading the backend."),r.jo.ko()):t&&t.code===q.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.i_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.To(t)})()}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===t&&this.o_(r,i)},r=>{e(()=>{const i=new oe(q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,t){const r=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){var e=this;this.state=5,this.jo.qo((0,z.Z)(function*(){e.state=0,e.start()}))}__(e){return ae("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget(()=>this.Wo===e?t():(ae("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Sce extends Kz{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function jle(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(c=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:Ae(),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(Ne(void 0===h||"string"==typeof h),Vr.fromBase64String(h||"")):(Ne(void 0===h||h instanceof Uint8Array),Vr.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=void 0===c.code?q.UNKNOWN:V$(c.code);return new oe(h,c.message||"")}(o);t=new $$(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=_a(n,r.document.name),s=br(r.document.updateTime),o=r.document.createTime?br(r.document.createTime):Fe.min(),a=new pi({mapValue:{fields:r.document.fields}}),l=Nn.newFoundDocument(i,s,o,a);t=new pw(r.targetIds||[],r.removedTargetIds||[],l.key,l)}else if("documentDelete"in e){const r=e.documentDelete,i=_a(n,r.document),s=r.readTime?br(r.readTime):Fe.min(),o=Nn.newNoDocument(i,s);t=new pw([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=_a(n,r.document);t=new pw([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Ae();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new Ple(i,s);t=new H$(r.targetId,o)}}var c;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return Fe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Fe.min():o.readTime?br(o.readTime):Fe.min()}(e);return this.listener.u_(t,r)}c_(e){const t={};t.database=ZS(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=aw(l)?{documents:ez(s,l)}:{query:YS(s,l).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=W$(s,o.resumeToken);const c=GS(s,o.expectedCount);null!==c&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Fe.min())>0){a.readTime=Zf(s,o.snapshotVersion.toTimestamp());const c=GS(s,o.expectedCount);null!==c&&(a.expectedCount=c)}return a}(this.serializer,e);const r=function $le(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.t_(t)}l_(e){const t={};t.database=ZS(this.serializer),t.removeTarget=e,this.t_(t)}}class Rce extends Kz{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(Ne(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function Hle(n,e){return n&&n.length>0?(Ne(void 0!==e),n.map(t=>function(i,s){let o=br(i.updateTime?i.updateTime:s);return o.isEqual(Fe.min())&&(o=br(s)),new Dle(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=br(e.commitTime);return this.listener.T_(r,t)}return Ne(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=ZS(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>K_(this.serializer,r))};this.t_(t)}}class Mce extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new oe(q.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,KS(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new oe(q.UNKNOWN,s.toString())})}vo(e,t,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,KS(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new oe(q.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class Nce{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(vr(t),this.g_=!1):ae("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class kce{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(a=>{r.enqueueAndForget((0,z.Z)(function*(){var l;Tc(o)&&(ae("RemoteStore","Restarting streams for network reachability change."),yield(l=(0,z.Z)(function*(h){const p=me(h);p.v_.add(4),yield rp(p),p.x_.set("Unknown"),p.v_.delete(4),yield ry(p)}),function c(h){return l.apply(this,arguments)})(o))}))}),this.x_=new Nce(r,i)}}function ry(n){return wR.apply(this,arguments)}function wR(){return wR=(0,z.Z)(function*(n){if(Tc(n))for(const e of n.F_)yield e(!0)}),wR.apply(this,arguments)}function rp(n){return IR.apply(this,arguments)}function IR(){return IR=(0,z.Z)(function*(n){for(const e of n.F_)yield e(!1)}),IR.apply(this,arguments)}function Rw(n,e){const t=me(n);t.C_.has(e.targetId)||(t.C_.set(e.targetId,e),xR(t)?CR(t):sp(t).Jo()&&TR(t,e))}function iy(n,e){const t=me(n),r=sp(t);t.C_.delete(e),r.Jo()&&Zz(t,e),0===t.C_.size&&(r.Jo()?r.Xo():Tc(t)&&t.x_.set("Unknown"))}function TR(n,e){if(n.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Fe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}sp(n).c_(e)}function Zz(n,e){n.O_.Oe(e),sp(n).l_(e)}function CR(n){n.O_=new kle({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>n.C_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),sp(n).start(),n.x_.p_()}function xR(n){return Tc(n)&&!sp(n).Ho()&&n.C_.size>0}function Tc(n){return 0===me(n).v_.size}function Qz(n){n.O_=void 0}function Oce(n){return AR.apply(this,arguments)}function AR(){return AR=(0,z.Z)(function*(n){n.C_.forEach((e,t)=>{TR(n,e)})}),AR.apply(this,arguments)}function Fce(n,e){return DR.apply(this,arguments)}function DR(){return DR=(0,z.Z)(function*(n,e){Qz(n),xR(n)?(n.x_.S_(e),CR(n)):n.x_.set("Unknown")}),DR.apply(this,arguments)}function Lce(n,e,t){return SR.apply(this,arguments)}function SR(){return SR=(0,z.Z)(function*(n,e,t){if(n.x_.set("Online"),e instanceof $$&&2===e.state&&e.cause)try{yield(r=(0,z.Z)(function*(s,o){const a=o.cause;for(const l of o.targetIds)s.C_.has(l)&&(yield s.remoteSyncer.rejectListen(l,a),s.C_.delete(l),s.O_.removeTarget(l))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){ae("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Mw(n,r)}else if(e instanceof pw?n.O_.$e(e):e instanceof H$?n.O_.Je(e):n.O_.Ge(e),!t.isEqual(Fe.min()))try{const r=yield Vz(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.O_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.C_.get(c);h&&s.C_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.C_.get(l);if(!h)return;s.C_.set(l,h.withResumeToken(Vr.EMPTY_BYTE_STRING,h.snapshotVersion)),Zz(s,l);const p=new hl(h.target,l,c,h.sequenceNumber);TR(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){ae("RemoteStore","Failed to raise snapshot:",r),yield Mw(n,r)}var r}),SR.apply(this,arguments)}function Mw(n,e,t){return RR.apply(this,arguments)}function RR(){return RR=(0,z.Z)(function*(n,e,t){if(!hc(e))throw e;n.v_.add(1),yield rp(n),n.x_.set("Offline"),t||(t=()=>Vz(n.localStore)),n.asyncQueue.enqueueRetryable((0,z.Z)(function*(){ae("RemoteStore","Retrying IndexedDB access"),yield t(),n.v_.delete(1),yield ry(n)}))}),RR.apply(this,arguments)}function Yz(n,e){return e().catch(t=>Mw(n,t,e))}function ip(n){return MR.apply(this,arguments)}function MR(){return MR=(0,z.Z)(function*(n){const e=me(n),t=Cc(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;Vce(e);)try{const i=yield wce(e.localStore,r);if(null===i){0===e.D_.length&&t.Xo();break}r=i.batchId,Uce(e,i)}catch(i){yield Mw(e,i)}Xz(e)&&Jz(e)}),MR.apply(this,arguments)}function Vce(n){return Tc(n)&&n.D_.length<10}function Uce(n,e){n.D_.push(e);const t=Cc(n);t.Jo()&&t.P_&&t.I_(e.mutations)}function Xz(n){return Tc(n)&&!Cc(n).Ho()&&n.D_.length>0}function Jz(n){Cc(n).start()}function Bce(n){return PR.apply(this,arguments)}function PR(){return PR=(0,z.Z)(function*(n){Cc(n).d_()}),PR.apply(this,arguments)}function jce(n){return NR.apply(this,arguments)}function NR(){return NR=(0,z.Z)(function*(n){const e=Cc(n);for(const t of n.D_)e.I_(t.mutations)}),NR.apply(this,arguments)}function Hce(n,e,t){return kR.apply(this,arguments)}function kR(){return kR=(0,z.Z)(function*(n,e,t){const r=n.D_.shift(),i=$S.from(r,e,t);yield Yz(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ip(n)}),kR.apply(this,arguments)}function $ce(n,e){return OR.apply(this,arguments)}function OR(){return OR=(0,z.Z)(function*(n,e){var t;e&&Cc(n).P_&&(yield(t=(0,z.Z)(function*(i,s){if(L$(a=s.code)&&a!==q.ABORTED){const o=i.D_.shift();Cc(i).Zo(),yield Yz(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield ip(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),Xz(n)&&Jz(n)}),OR.apply(this,arguments)}function e4(n,e){return FR.apply(this,arguments)}function FR(){return FR=(0,z.Z)(function*(n,e){const t=me(n);t.asyncQueue.verifyOperationInProgress(),ae("RemoteStore","RemoteStore received new credentials");const r=Tc(t);t.v_.add(3),yield rp(t),r&&t.x_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.v_.delete(3),yield ry(t)}),FR.apply(this,arguments)}function LR(n,e){return VR.apply(this,arguments)}function VR(){return VR=(0,z.Z)(function*(n,e){const t=me(n);e?(t.v_.delete(2),yield ry(t)):e||(t.v_.add(2),yield rp(t),t.x_.set("Unknown"))}),VR.apply(this,arguments)}function sp(n){return n.N_||(n.N_=function(t,r,i){const s=me(t);return s.R_(),new Sce(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:Oce.bind(null,n),To:Fce.bind(null,n),u_:Lce.bind(null,n)}),n.F_.push(function(){var e=(0,z.Z)(function*(t){t?(n.N_.Zo(),xR(n)?CR(n):n.x_.set("Unknown")):(yield n.N_.stop(),Qz(n))});return function(t){return e.apply(this,arguments)}}())),n.N_}function Cc(n){return n.B_||(n.B_=function(t,r,i){const s=me(t);return s.R_(),new Rce(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:Bce.bind(null,n),To:$ce.bind(null,n),E_:jce.bind(null,n),T_:Hce.bind(null,n)}),n.F_.push(function(){var e=(0,z.Z)(function*(t){t?(n.B_.Zo(),yield ip(n)):(yield n.B_.stop(),n.D_.length>0&&(ae("RemoteStore",`Stopping write stream with ${n.D_.length} pending writes`),n.D_=[]))});return function(t){return e.apply(this,arguments)}}())),n.B_}class UR{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new UR(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new oe(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function op(n,e){if(vr("AsyncQueue",`${e}: ${n}`),hc(n))return new oe(q.UNAVAILABLE,`${e}: ${n}`);throw n}class ap{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ye.comparator(t.key,r.key):(t,r)=>ye.comparator(t.key,r.key),this.keyedMap=B_(),this.sortedSet=new wn(this.comparator)}static emptySet(e){return new ap(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ap)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new ap;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class t4{constructor(){this.L_=new wn(ye.comparator)}track(e){const t=e.doc.key,r=this.L_.get(t);r?0!==e.type&&3===r.type?this.L_=this.L_.insert(t,e):3===e.type&&1!==r.type?this.L_=this.L_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.L_=this.L_.remove(t):1===e.type&&2===r.type?this.L_=this.L_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):Ae():this.L_=this.L_.insert(t,e)}k_(){const e=[];return this.L_.inorderTraversal((t,r)=>{e.push(r)}),e}}class lp{constructor(e,t,r,i,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new lp(e,t,ap.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&V_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class zce{constructor(){this.q_=void 0,this.Q_=[]}}class qce{constructor(){this.queries=new ul(e=>y$(e),V_),this.onlineState="Unknown",this.K_=new Set}}function BR(n,e){return jR.apply(this,arguments)}function jR(){return jR=(0,z.Z)(function*(n,e){const t=me(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new zce),i)try{s.q_=yield t.onListen(r)}catch(o){const a=op(o,`Initialization of query '${zf(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.Q_.push(e),e.U_(t.onlineState),s.q_&&e.W_(s.q_)&&zR(t)}),jR.apply(this,arguments)}function HR(n,e){return $R.apply(this,arguments)}function $R(){return $R=(0,z.Z)(function*(n,e){const t=me(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),i=0===s.Q_.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),$R.apply(this,arguments)}function Gce(n,e){const t=me(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.Q_)a.W_(i)&&(r=!0);o.q_=i}}r&&zR(t)}function Wce(n,e,t){const r=me(n),i=r.queries.get(e);if(i)for(const s of i.Q_)s.onError(t);r.queries.delete(e)}function zR(n){n.K_.forEach(e=>{e.next()})}class qR{constructor(e,t,r){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new lp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){return!e.fromCache||(!this.options.Z_||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}H_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Y_(e){e=lp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class Kce{constructor(e,t){this.X_=e,this.byteLength=t}ea(){return"metadata"in this.X_}}class n4{constructor(e){this.serializer=e}Ps(e){return _a(this.serializer,e)}Is(e){return e.metadata.exists?J$(this.serializer,e.document,!1):Nn.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return br(e)}}class Zce{constructor(e,t,r){this.ta=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=r4(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++t;const r=Rt.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ra(e){const t=new Map,r=new n4(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Ps(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||pt()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,z.Z)(function*(){const t=yield function Ice(n,e,t,r){return fR.apply(this,arguments)}(e.localStore,new n4(e.serializer),e.documents,e.ta.id),r=e.ra(e.documents);for(const i of e.queries)yield Tce(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,ia:e.collectionGroups,sa:t}})()}}function r4(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class i4{constructor(e){this.key=e}}class s4{constructor(e){this.key=e}}class o4{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=pt(),this.mutatedKeys=pt(),this.ua=b$(e),this.ca=new ap(this.ua)}get la(){return this.oa}ha(e,t){const r=t?t.Pa:new t4,i=t?t.ca:this.ca;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{const g=i.get(h),_=U_(this.query,p)?p:null,v=!!g&&this.mutatedKeys.has(g.key),E=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let T=!1;g&&_?g.data.isEqual(_.data)?v!==E&&(r.track({type:3,doc:_}),T=!0):this.Ia(g,_)||(r.track({type:2,doc:_}),T=!0,(l&&this.ua(_,l)>0||c&&this.ua(_,c)<0)&&(a=!0)):!g&&_?(r.track({type:0,doc:_}),T=!0):g&&!_&&(r.track({type:1,doc:g}),T=!0,(l||c)&&(a=!0)),T&&(_?(o=o.add(_),s=E?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const h="F"===this.query.limitType?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{ca:o,Pa:r,Xi:a,mutatedKeys:s}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const o=e.Pa.k_();o.sort((h,p)=>function(_,v){const E=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae()}};return E(_)-E(v)}(h.type,p.type)||this.ua(h.doc,p.doc)),this.Ta(r),i=null!=i&&i;const a=t&&!i?this.Ea():[],l=0===this.aa.size&&this.current&&!i?1:0,c=l!==this._a;return this._a=l,0!==o.length||c?{snapshot:new lp(this.query,e.ca,s,o,e.mutatedKeys,0===l,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new t4,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(t=>this.oa=this.oa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.oa=this.oa.delete(t)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=pt(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const t=[];return e.forEach(r=>{this.aa.has(r)||t.push(new s4(r))}),this.aa.forEach(r=>{e.has(r)||t.push(new i4(r))}),t}Ra(e){this.oa=e.hs,this.aa=pt();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return lp.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class Qce{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Yce{constructor(e){this.key=e,this.ma=!1}}class Xce{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new ul(a=>y$(a),V_),this.pa=new Map,this.ya=new Set,this.wa=new wn(ye.comparator),this.Sa=new Map,this.ba=new sR,this.Da={},this.Ca=new Map,this.va=od.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}function Jce(n,e){return GR.apply(this,arguments)}function GR(){return GR=(0,z.Z)(function*(n,e){const t=mM(n);let r,i;const s=t.ga.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{const o=yield tp(t.localStore,Yi(e)),a=t.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield WR(t,e,r,"current"===a,o.resumeToken),t.isPrimaryClient&&Rw(t.remoteStore,o)}return i}),GR.apply(this,arguments)}function WR(n,e,t,r,i){return KR.apply(this,arguments)}function KR(){return KR=(0,z.Z)(function*(n,e,t,r,i){n.Ma=(p,g,_)=>{return(v=(0,z.Z)(function*(T,P,D,k){let G=P.view.ha(D);G.Xi&&(G=yield Cw(T.localStore,P.query,!1).then(({documents:Pt})=>P.view.ha(Pt,G)));const ce=k&&k.targetChanges.get(P.targetId),De=k&&null!=k.targetMismatches.get(P.targetId),ze=P.view.applyChanges(G,T.isPrimaryClient,ce,De);return iM(T,P.targetId,ze.da),ze.snapshot}),function E(T,P,D,k){return v.apply(this,arguments)})(n,p,g,_);var v};const s=yield Cw(n.localStore,e,!0),o=new o4(e,s.hs),a=o.ha(s.documents),l=G_.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),c=o.applyChanges(a,n.isPrimaryClient,l);iM(n,t,c.da);const h=new Qce(e,t,o);return n.ga.set(e,h),n.pa.has(t)?n.pa.get(t).push(e):n.pa.set(t,[e]),c.snapshot}),KR.apply(this,arguments)}function eue(n,e){return ZR.apply(this,arguments)}function ZR(){return ZR=(0,z.Z)(function*(n,e){const t=me(n),r=t.ga.get(e),i=t.pa.get(r.targetId);if(i.length>1)return t.pa.set(r.targetId,i.filter(s=>!V_(s,e))),void t.ga.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield np(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),iy(t.remoteStore,r.targetId),cp(t,r.targetId)}).catch(dc))):(cp(t,r.targetId),yield np(t.localStore,r.targetId,!0))}),ZR.apply(this,arguments)}function QR(){return QR=(0,z.Z)(function*(n,e,t){const r=gM(n);try{const i=yield function(o,a){const l=me(o),c=Vn.now(),h=a.reduce((_,v)=>_.add(v.key),pt());let p,g;return l.persistence.runTransaction("Locally write mutations","readwrite",_=>{let v=vs(),E=pt();return l.os.getEntries(_,h).next(T=>{v=T,v.forEach((P,D)=>{D.isValidDocument()||(E=E.add(P))})}).next(()=>l.localDocuments.getOverlayedDocuments(_,v)).next(T=>{p=T;const P=[];for(const D of a){const k=Rle(D,p.get(D.key).overlayedDocument);null!=k&&P.push(new dl(D.key,k,r$(k.value.mapValue),Un.exists(!0)))}return l.mutationQueue.addMutationBatch(_,c,P,a)}).next(T=>{g=T;const P=T.applyToLocalDocumentSet(p,E);return l.documentOverlayCache.saveOverlays(_,T.batchId,P)})}).then(()=>({batchId:g.batchId,changes:w$(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Da[o.currentUser.toKey()];c||(c=new wn(it)),c=c.insert(a,l),o.Da[o.currentUser.toKey()]=c}(r,i.batchId,t),yield fl(r,i.changes),yield ip(r.remoteStore)}catch(i){const s=op(i,"Failed to persist write");t.reject(s)}}),QR.apply(this,arguments)}function a4(n,e){return YR.apply(this,arguments)}function YR(){return YR=(0,z.Z)(function*(n,e){const t=me(n);try{const r=yield function Ece(n,e){const t=me(n),r=e.snapshotVersion;let i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;const a=[];e.targetChanges.forEach((h,p)=>{const g=i.get(p);if(!g)return;a.push(t.Qr.removeMatchingKeys(s,h.removedDocuments,p).next(()=>t.Qr.addMatchingKeys(s,h.addedDocuments,p)));let _=g.withSequenceNumber(s.currentSequenceNumber);var E,T,P;null!==e.targetMismatches.get(p)?_=_.withResumeToken(Vr.EMPTY_BYTE_STRING,Fe.min()).withLastLimboFreeSnapshotVersion(Fe.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),i=i.insert(p,_),T=_,P=h,(0===(E=g).resumeToken.approximateByteSize()||T.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8||P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0)&&a.push(t.Qr.updateTargetData(s,_))});let l=vs(),c=pt();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(Uz(s,o,e.documentUpdates).next(h=>{l=h.cs,c=h.ls})),!r.isEqual(Fe.min())){const h=t.Qr.getLastRemoteSnapshotVersion(s).next(p=>t.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return V.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.ns=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Sa.get(s);o&&(Ne(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.ma=!0:i.modifiedDocuments.size>0?Ne(o.ma):i.removedDocuments.size>0&&(Ne(o.ma),o.ma=!1))}),yield fl(t,r,e)}catch(r){yield dc(r)}}),YR.apply(this,arguments)}function l4(n,e,t){const r=me(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ga.forEach((s,o)=>{const a=o.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=me(o);l.onlineState=a;let c=!1;l.queries.forEach((h,p)=>{for(const g of p.Q_)g.U_(a)&&(c=!0)}),c&&zR(l)}(r.eventManager,e),i.length&&r.fa.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function nue(n,e,t){return XR.apply(this,arguments)}function XR(){return XR=(0,z.Z)(function*(n,e,t){const r=me(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Sa.get(e),s=i&&i.key;if(s){let o=new wn(ye.comparator);o=o.insert(s,Nn.newNoDocument(s,Fe.min()));const a=pt().add(s),l=new q_(Fe.min(),new Map,new wn(it),o,a);yield a4(r,l),r.wa=r.wa.remove(s),r.Sa.delete(e),sM(r)}else yield np(r.localStore,e,!1).then(()=>cp(r,e,t)).catch(dc)}),XR.apply(this,arguments)}function rue(n,e){return JR.apply(this,arguments)}function JR(){return JR=(0,z.Z)(function*(n,e){const t=me(n),r=e.batch.batchId;try{const i=yield function bce(n,e){const t=me(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const p=c.batch,g=p.keys();let _=V.resolve();return g.forEach(v=>{_=_.next(()=>h.getEntry(l,v)).next(E=>{const T=c.docVersions.get(v);Ne(null!==T),E.version.compareTo(T)<0&&(p.applyToRemoteDocument(E,c),E.isValidDocument()&&(E.setReadTime(c.commitVersion),h.addEntry(E)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=pt();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);rM(t,r,null),nM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield fl(t,i)}catch(i){yield dc(i)}}),JR.apply(this,arguments)}function iue(n,e,t){return eM.apply(this,arguments)}function eM(){return eM=(0,z.Z)(function*(n,e,t){const r=me(n);try{const i=yield function(o,a){const l=me(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(p=>(Ne(null!==p),h=p.keys(),l.mutationQueue.removeMutationBatch(c,p))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);rM(r,e,t),nM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield fl(r,i)}catch(i){yield dc(i)}}),eM.apply(this,arguments)}function tM(){return tM=(0,z.Z)(function*(n,e){const t=me(n);Tc(t.remoteStore)||ae("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=me(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ca.get(r)||[];i.push(e),t.Ca.set(r,i)}catch(r){const i=op(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),tM.apply(this,arguments)}function nM(n,e){(n.Ca.get(e)||[]).forEach(t=>{t.resolve()}),n.Ca.delete(e)}function rM(n,e,t){const r=me(n);let i=r.Da[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Da[r.currentUser.toKey()]=i}}function cp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.pa.get(e))n.ga.delete(r),t&&n.fa.xa(r,t);n.pa.delete(e),n.isPrimaryClient&&n.ba.Vr(e).forEach(r=>{n.ba.containsKey(r)||c4(n,r)})}function c4(n,e){n.ya.delete(e.path.canonicalString());const t=n.wa.get(e);null!==t&&(iy(n.remoteStore,t),n.wa=n.wa.remove(e),n.Sa.delete(t),sM(n))}function iM(n,e,t){for(const r of t)r instanceof i4?(n.ba.addReference(r.key,e),oue(n,r)):r instanceof s4?(ae("SyncEngine","Document no longer in limbo: "+r.key),n.ba.removeReference(r.key,e),n.ba.containsKey(r.key)||c4(n,r.key)):Ae()}function oue(n,e){const t=e.key,r=t.path.canonicalString();n.wa.get(t)||n.ya.has(r)||(ae("SyncEngine","New document in limbo: "+t),n.ya.add(r),sM(n))}function sM(n){for(;n.ya.size>0&&n.wa.size<n.maxConcurrentLimboResolutions;){const e=n.ya.values().next().value;n.ya.delete(e);const t=new ye(Rt.fromString(e)),r=n.va.next();n.Sa.set(r,new Yce(t)),n.wa=n.wa.insert(t,r),Rw(n.remoteStore,new hl(Yi(Hf(t.path)),r,"TargetPurposeLimboResolution",Ls._e))}}function fl(n,e,t){return oM.apply(this,arguments)}function oM(){return oM=(0,z.Z)(function*(n,e,t){const r=me(n),i=[],s=[],o=[];var a;r.ga.isEmpty()||(r.ga.forEach((a,l)=>{o.push(r.Ma(l,e,t).then(c=>{if((c||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c?.fromCache?"not-current":"current"),c){i.push(c);const h=uR.Ki(l.targetId,c);s.push(h)}}))}),yield Promise.all(o),r.fa.u_(i),yield(a=(0,z.Z)(function*(c,h){const p=me(c);try{yield p.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>V.forEach(h,_=>V.forEach(_.qi,v=>p.persistence.referenceDelegate.addReference(g,_.targetId,v)).next(()=>V.forEach(_.Qi,v=>p.persistence.referenceDelegate.removeReference(g,_.targetId,v)))))}catch(g){if(!hc(g))throw g;ae("LocalStore","Failed to update sequence numbers: "+g)}for(const g of h){const _=g.targetId;if(!g.fromCache){const v=p.ns.get(_),T=v.withLastLimboFreeSnapshotVersion(v.snapshotVersion);p.ns=p.ns.insert(_,T)}}}),function l(c,h){return a.apply(this,arguments)})(r.localStore,s))}),oM.apply(this,arguments)}function aue(n,e){return aM.apply(this,arguments)}function aM(){return aM=(0,z.Z)(function*(n,e){const t=me(n);if(!t.currentUser.isEqual(e)){ae("SyncEngine","User change. New user:",e.toKey());const r=yield Lz(t.localStore,e);t.currentUser=e,(s=t).Ca.forEach(a=>{a.forEach(l=>{l.reject(new oe(q.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Ca.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield fl(t,r.us)}var s}),aM.apply(this,arguments)}function lue(n,e){const t=me(n),r=t.Sa.get(e);if(r&&r.ma)return pt().add(r.key);{let i=pt();const s=t.pa.get(e);if(!s)return i;for(const o of s){const a=t.ga.get(o);i=i.unionWith(a.view.la)}return i}}function cue(n,e){return lM.apply(this,arguments)}function lM(){return lM=(0,z.Z)(function*(n,e){const t=me(n),r=yield Cw(t.localStore,e.query,!0),i=e.view.Ra(r);return t.isPrimaryClient&&iM(t,e.targetId,i.da),i}),lM.apply(this,arguments)}function uue(n,e){return cM.apply(this,arguments)}function cM(){return cM=(0,z.Z)(function*(n,e){const t=me(n);return jz(t.localStore,e).then(r=>fl(t,r))}),cM.apply(this,arguments)}function due(n,e,t,r){return uM.apply(this,arguments)}function uM(){return uM=(0,z.Z)(function*(n,e,t,r){const i=me(n),s=yield function(a,l){const c=me(a),h=me(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.vn(p,l).next(g=>g?c.localDocuments.getDocuments(p,g):V.resolve(null)))}(i.localStore,e);var l;null!==s?("pending"===t?yield ip(i.remoteStore):"acknowledged"===t||"rejected"===t?(rM(i,e,r||null),nM(i,e),l=e,me(me(i.localStore).mutationQueue).Mn(l)):Ae(),yield fl(i,s)):ae("SyncEngine","Cannot apply mutation batch with id: "+e)}),uM.apply(this,arguments)}function dM(){return dM=(0,z.Z)(function*(n,e){const t=me(n);if(mM(t),gM(t),!0===e&&!0!==t.Fa){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield u4(t,r.toArray());t.Fa=!0,yield LR(t.remoteStore,!0);for(const s of i)Rw(t.remoteStore,s)}else if(!1===e&&!1!==t.Fa){const r=[];let i=Promise.resolve();t.pa.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(cp(t,o),np(t.localStore,o,!0))),iy(t.remoteStore,o)}),yield i,yield u4(t,r),function(o){const a=me(o);a.Sa.forEach((l,c)=>{iy(a.remoteStore,c)}),a.ba.mr(),a.Sa=new Map,a.wa=new wn(ye.comparator)}(t),t.Fa=!1,yield LR(t.remoteStore,!1)}}),dM.apply(this,arguments)}function u4(n,e,t){return hM.apply(this,arguments)}function hM(){return hM=(0,z.Z)(function*(n,e,t){const r=me(n),i=[],s=[];for(const o of e){let a;const l=r.pa.get(o);if(l&&0!==l.length){a=yield tp(r.localStore,Yi(l[0]));for(const c of l){const h=r.ga.get(c),p=yield cue(r,h);p.snapshot&&s.push(p.snapshot)}}else{const c=yield Bz(r.localStore,o);a=yield tp(r.localStore,c),yield WR(r,d4(c),o,!1,a.resumeToken)}i.push(a)}return r.fa.u_(s),i}),hM.apply(this,arguments)}function d4(n){return m$(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function fue(n){return t=me(n).localStore,me(me(t).persistence).Li();var t}function pue(n,e,t,r){return fM.apply(this,arguments)}function fM(){return fM=(0,z.Z)(function*(n,e,t,r){const i=me(n);if(i.Fa)return void ae("SyncEngine","Ignoring unexpected query state notification.");const s=i.pa.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield jz(i.localStore,v$(s[0])),a=q_.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Vr.EMPTY_BYTE_STRING);yield fl(i,o,a);break}case"rejected":yield np(i.localStore,e,!0),cp(i,e,r);break;default:Ae()}}),fM.apply(this,arguments)}function mue(n,e,t){return pM.apply(this,arguments)}function pM(){return pM=(0,z.Z)(function*(n,e,t){const r=mM(n);if(r.Fa){for(const i of e){if(r.pa.has(i)){ae("SyncEngine","Adding an already active target "+i);continue}const s=yield Bz(r.localStore,i),o=yield tp(r.localStore,s);yield WR(r,d4(s),o.targetId,!1,o.resumeToken),Rw(r.remoteStore,o)}for(const i of t)r.pa.has(i)&&(yield np(r.localStore,i,!1).then(()=>{iy(r.remoteStore,i),cp(r,i)}).catch(dc))}}),pM.apply(this,arguments)}function mM(n){const e=me(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=a4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lue.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nue.bind(null,e),e.fa.u_=Gce.bind(null,e.eventManager),e.fa.xa=Wce.bind(null,e.eventManager),e}function gM(n){const e=me(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rue.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iue.bind(null,e),e}class sy{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,z.Z)(function*(){t.serializer=ny(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Fz(this.persistence,new Oz,e.initialUser,this.serializer)}createPersistence(e){return new oR(ww.Hr,this.serializer)}createSharedClientState(e){return new qz}terminate(){var e=this;return(0,z.Z)(function*(){var t,r;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class _M extends sy{constructor(e,t,r){super(),this.Na=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,z.Z)(function*(){yield t().call(r,e),yield r.Na.initialize(r,e),yield gM(r.Na.syncEngine),yield ip(r.Na.remoteStore),yield r.persistence.fi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Fz(this.persistence,new Oz,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new xz(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new Hae(t,this.persistence);return new jae(e.asyncQueue,r)}createPersistence(e){const t=cR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Mi.withCacheSize(this.cacheSizeBytes):Mi.DEFAULT;return new lR(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Wz(),Sw(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new qz}}class h4 extends _M{constructor(e,t){super(e,t,!1),this.Na=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,z.Z)(function*(){yield t().call(r,e);const i=r.Na.syncEngine;r.sharedClientState instanceof yR&&(r.sharedClientState.syncEngine={Zs:due.bind(null,i),Xs:pue.bind(null,i),eo:mue.bind(null,i),Li:fue.bind(null,i),Ys:uue.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.fi(function(){var s=(0,z.Z)(function*(o){yield function hue(n,e){return dM.apply(this,arguments)}(r.Na.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=Wz();if(!yR.D(t))throw new oe(q.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=cR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new yR(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class up{initialize(e,t){var r=this;return(0,z.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>l4(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=aue.bind(null,r.syncEngine),yield LR(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new qce}createDatastore(e){const t=ny(e.databaseInfo.databaseId),r=new Dce(e.databaseInfo);return new Mce(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=t=>l4(this.syncEngine,t,0),a=Gz.D()?new Gz:new Cce,new kce(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,t){return function(i,s,o,a,l,c,h){const p=new Xce(i,s,o,a,l,c);return h&&(p.Fa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return(0,z.Z)(function*(){var t,r;yield(r=(0,z.Z)(function*(s){const o=me(s);ae("RemoteStore","RemoteStore shutting down."),o.v_.add(5),yield rp(o),o.M_.shutdown(),o.x_.set("Unknown")}),function i(s){return r.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate()})()}}function f4(n,e=10240){let t=0;return{read:()=>(0,z.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,z.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Pw{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):vr("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class yue{constructor(e,t){this.ka=e,this.serializer=t,this.metadata=new Lr,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then(r=>{r&&r.ea()?this.metadata.resolve(r.X_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.X_)}`))},r=>this.metadata.reject(r))}close(){return this.ka.cancel()}getMetadata(){var e=this;return(0,z.Z)(function*(){return e.metadata.promise})()}Oa(){var e=this;return(0,z.Z)(function*(){return yield e.getMetadata(),e.Qa()})()}Qa(){var e=this;return(0,z.Z)(function*(){const t=yield e.Ka();if(null===t)return null;const r=e.qa.decode(t),i=Number(r);isNaN(i)&&e.$a(`length string (${r}) is not valid number`);const s=yield e.Ua(i);return new Kce(JSON.parse(s),t.length+i)})()}Wa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ka(){var e=this;return(0,z.Z)(function*(){for(;e.Wa()<0&&!(yield e.Ga()););if(0===e.buffer.length)return null;const t=e.Wa();t<0&&e.$a("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Ua(e){var t=this;return(0,z.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ga())&&t.$a("Reached the end of bundle when more is expected.");const r=t.qa.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}$a(e){throw this.ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ga(){var e=this;return(0,z.Z)(function*(){const t=yield e.ka.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class vue{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,z.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new oe(q.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,z.Z)(function*(o,a){const l=me(o),c={documents:a.map(_=>W_(l.serializer,_))},h=yield l.vo("BatchGetDocuments",l.serializer.databaseId,Rt.emptyPath(),c,a.length),p=new Map;h.forEach(_=>{const v=function Ble(n,e){return"found"in e?function(r,i){Ne(!!i.found);const s=_a(r,i.found.name),o=br(i.found.updateTime),a=i.found.createTime?br(i.found.createTime):Fe.min(),l=new pi({mapValue:{fields:i.found.fields}});return Nn.newFoundDocument(s,o,a,l)}(n,e):"missing"in e?function(r,i){Ne(!!i.missing),Ne(!!i.readTime);const s=_a(r,i.missing),o=br(i.readTime);return Nn.newNoDocument(s,o)}(n,e):Ae()}(l.serializer,_);p.set(v.key.toString(),v)});const g=[];return a.forEach(_=>{const v=p.get(_.toString());Ne(!!v),g.push(v)}),g}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Kf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,z.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=ye.fromPath(i);e.mutations.push(new jS(s,e.precondition(s)))}),yield(r=(0,z.Z)(function*(s,o){const a=me(s),l={writes:o.map(c=>K_(a.serializer,c))};yield a.So("Commit",a.serializer.databaseId,Rt.emptyPath(),l)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ae();t=Fe.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new oe(q.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Fe.min())?Un.exists(!1):Un.updateTime(t):Un.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Fe.min()))throw new oe(q.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Un.updateTime(t)}return Un.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class bue{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.za=r.maxAttempts,this.jo=new bR(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){var e=this;this.jo.qo((0,z.Z)(function*(){const t=new vue(e.datastore),r=e.Ja(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Ya(s)}))}).catch(i=>{e.Ya(i)})}))}Ja(e){try{const t=this.updateFunction(e);return!R_(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ha(),Promise.resolve()))):this.deferred.reject(e)}Za(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!L$(t)}return!1}}class Eue{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Wr.UNAUTHENTICATED,this.clientId=NH.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,z.Z)(function*(a){ae("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(ae("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new oe(q.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,z.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=op(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Nw(n,e){return yM.apply(this,arguments)}function yM(){return yM=(0,z.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ae("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,z.Z)(function*(s){r.isEqual(s)||(yield Lz(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),yM.apply(this,arguments)}function vM(n,e){return bM.apply(this,arguments)}function bM(){return bM=(0,z.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield EM(n);ae("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>e4(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>e4(e.remoteStore,i)),n._onlineComponents=e}),bM.apply(this,arguments)}function p4(n){return"FirebaseError"===n.name?n.code===q.FAILED_PRECONDITION||n.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function EM(n){return wM.apply(this,arguments)}function wM(){return wM=(0,z.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ae("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Nw(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!p4(t))throw t;_s("Error using user provided cache. Falling back to memory cache: "+t),yield Nw(n,new sy)}}else ae("FirestoreClient","Using default OfflineComponentProvider"),yield Nw(n,new sy);return n._offlineComponents}),wM.apply(this,arguments)}function kw(n){return IM.apply(this,arguments)}function IM(){return IM=(0,z.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ae("FirestoreClient","Using user provided OnlineComponentProvider"),yield vM(n,n._uninitializedComponentsProvider._online)):(ae("FirestoreClient","Using default OnlineComponentProvider"),yield vM(n,new up))),n._onlineComponents}),IM.apply(this,arguments)}function m4(n){return EM(n).then(e=>e.persistence)}function dp(n){return EM(n).then(e=>e.localStore)}function g4(n){return kw(n).then(e=>e.remoteStore)}function TM(n){return kw(n).then(e=>e.syncEngine)}function hp(n){return CM.apply(this,arguments)}function CM(){return CM=(0,z.Z)(function*(n){const e=yield kw(n),t=e.eventManager;return t.onListen=Jce.bind(null,e.syncEngine),t.onUnlisten=eue.bind(null,e.syncEngine),t}),CM.apply(this,arguments)}function y4(n,e,t={}){const r=new Lr;return n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return function(s,o,a,l,c){const h=new Pw({next:g=>{o.enqueueAndForget(()=>HR(s,p));const _=g.docs.has(a);!_&&g.fromCache?c.reject(new oe(q.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&g.fromCache&&l&&"server"===l.source?c.reject(new oe(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new qR(Hf(a.path),h,{includeMetadataChanges:!0,Z_:!0});return BR(s,p)}(yield hp(n),n.asyncQueue,e,t,r)})),r.promise}function v4(n,e,t={}){const r=new Lr;return n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return function(s,o,a,l,c){const h=new Pw({next:g=>{o.enqueueAndForget(()=>HR(s,p)),g.fromCache&&"server"===l.source?c.reject(new oe(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new qR(a,h,{includeMetadataChanges:!0,Z_:!0});return BR(s,p)}(yield hp(n),n.asyncQueue,e,t,r)})),r.promise}function b4(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const E4=new Map;function xM(n,e,t){if(!t)throw new oe(q.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function w4(n,e,t,r){if(!0===e&&!0===r)throw new oe(q.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function I4(n){if(!ye.isDocumentKey(n))throw new oe(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function T4(n){if(ye.isDocumentKey(n))throw new oe(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Ow(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Ae()}function At(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new oe(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ow(n);throw new oe(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function C4(n,e){if(e<=0)throw new oe(q.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class x4{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new oe(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new oe(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}w4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=b4(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new oe(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new oe(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new oe(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class oy{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new x4({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new oe(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new oe(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new x4(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new Sae;switch(r.type){case"firstParty":return new Nae(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new oe(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=E4.get(t);r&&(ae("ComponentProvider","Removing Datastore"),E4.delete(t),r.terminate())}(this),Promise.resolve()}}class mi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new mi(this.firestore,e,this._query)}}class kn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ya(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kn(this.firestore,e,this._key)}}class ya extends mi{constructor(e,t,r){super(e,t,Hf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kn(this.firestore,null,new ye(e))}withConverter(e){return new ya(this.firestore,e,this._path)}}function D4(n,e,...t){if(n=(0,w.m9)(n),xM("collection","path",e),n instanceof oy){const r=Rt.fromString(e,...t);return T4(r),new ya(n,null,r)}{if(!(n instanceof kn||n instanceof ya))throw new oe(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Rt.fromString(e,...t));return T4(r),new ya(n.firestore,null,r)}}function Fw(n,e,...t){if(n=(0,w.m9)(n),1===arguments.length&&(e=NH.newId()),xM("doc","path",e),n instanceof oy){const r=Rt.fromString(e,...t);return I4(r),new kn(n,null,new ye(r))}{if(!(n instanceof kn||n instanceof ya))throw new oe(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Rt.fromString(e,...t));return I4(r),new kn(n.firestore,n instanceof ya?n.converter:null,new ye(r))}}function S4(n,e){return n=(0,w.m9)(n),e=(0,w.m9)(e),(n instanceof kn||n instanceof ya)&&(e instanceof kn||e instanceof ya)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function AM(n,e){return n=(0,w.m9)(n),e=(0,w.m9)(e),n instanceof mi&&e instanceof mi&&n.firestore===e.firestore&&V_(n._query,e._query)&&n.converter===e.converter}class Nue{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new bR(this,"async_queue_retry"),this._u=()=>{const t=Sw();t&&ae("AsyncQueue","Visibility state changed to "+t.visibilityState),this.jo.Ko()};const e=Sw();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=Sw();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const t=new Lr;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){var e=this;return(0,z.Z)(function*(){if(0!==e.eu.length){try{yield e.eu[0](),e.eu.shift(),e.jo.reset()}catch(t){if(!hc(t))throw t;ae("AsyncQueue","Operation failed with retryable error: "+t)}e.eu.length>0&&e.jo.qo(()=>e.cu())}})()}uu(e){const t=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{throw this.ru=r,this.iu=!1,vr("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.iu=!1,r))));return this.Xa=t,t}enqueueAfterDelay(e,t,r){this.au(),this.ou.indexOf(e)>-1&&(t=0);const i=UR.createAndSchedule(this,e,t,r,s=>this.lu(s));return this.nu.push(i),i}au(){this.ru&&Ae()}verifyOperationInProgress(){}hu(){var e=this;return(0,z.Z)(function*(){let t;do{t=e.Xa,yield t}while(t!==e.Xa)})()}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.nu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}function DM(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class kue{constructor(){this._progressObserver={},this._taskCompletionResolver=new Lr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class In extends oy{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Nue,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||R4(this),this._firestoreClient.terminate()}}function ur(n){return n._firestoreClient||R4(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function R4(n){var e,t,r;const i=n._freezeSettings(),s=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new cle(n._databaseId,l,n._persistenceKey,(h=i).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,b4(h.experimentalLongPollingOptions),h.useFetchStreams));var l,h;n._firestoreClient=new Eue(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function M4(n,e,t){const r=new Lr;return n.asyncQueue.enqueue((0,z.Z)(function*(){try{yield Nw(n,t),yield vM(n,e),r.resolve()}catch(i){const s=i;if(!p4(s))throw s;_s("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function P4(n){if(n._initialized||n._terminated)throw new oe(q.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class va{constructor(e){this._byteString=e}static fromBase64String(e){try{return new va(Vr.fromBase64String(e))}catch(t){throw new oe(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new va(Vr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class pl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new oe(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ld{constructor(e){this._methodName=e}}class Lw{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new oe(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new oe(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return it(this._lat,e._lat)||it(this._long,e._long)}}const que=/^__.*__$/;class Gue{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new dl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wf(e,this.data,t,this.fieldTransforms)}}class N4{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new dl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function k4(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae()}}class Vw{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Eu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new Vw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Au({path:r,Vu:!1});return i.mu(e),i}fu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Au({path:r,Vu:!1});return i.Eu(),i}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return jw(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(k4(this.du)&&que.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class Wue{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ny(e)}Su(e,t,r,i=!1){return new Vw({du:e,methodName:t,wu:r,path:Pn.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cd(n){const e=n._freezeSettings(),t=ny(n._databaseId);return new Wue(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Uw(n,e,t,r,i,s={}){const o=n.Su(s.merge||s.mergeFields?2:0,e,t,i);OM("Data must be an object, but it was:",o,r);const a=L4(r,o);let l,c;if(s.merge)l=new ys(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const p of s.mergeFields){const g=cy(e,p,t);if(!o.contains(g))throw new oe(q.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);U4(h,g)||h.push(g)}l=new ys(h),c=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,c=o.fieldTransforms;return new Gue(new pi(a),l,c)}class ly extends ld{_toFieldTransform(e){if(2!==e.du)throw e.pu(1===e.du?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ly}}function O4(n,e,t){return new Vw({du:3,wu:e.settings.wu,methodName:n._methodName,Vu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class SM extends ld{_toFieldTransform(e){return new H_(e.path,new qf)}isEqual(e){return e instanceof SM}}class RM extends ld{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=O4(this,e,!0),r=this.bu.map(s=>ud(s,t)),i=new Ju(r);return new H_(e.path,i)}isEqual(e){return e instanceof RM&&(0,w.vZ)(this.bu,e.bu)}}class MM extends ld{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=O4(this,e,!0),r=this.bu.map(s=>ud(s,t)),i=new ed(r);return new H_(e.path,i)}isEqual(e){return e instanceof MM&&(0,w.vZ)(this.bu,e.bu)}}class PM extends ld{constructor(e,t){super(e),this.Du=t}_toFieldTransform(e){const t=new Gf(e.serializer,x$(e.serializer,this.Du));return new H_(e.path,t)}isEqual(e){return e instanceof PM&&this.Du===e.Du}}function NM(n,e,t,r){const i=n.Su(1,e,t);OM("Data must be an object, but it was:",i,r);const s=[],o=pi.empty();fc(r,(l,c)=>{const h=Bw(e,l,t);c=(0,w.m9)(c);const p=i.fu(h);if(c instanceof ly)s.push(h);else{const g=ud(c,p);null!=g&&(s.push(h),o.set(h,g))}});const a=new ys(s);return new N4(o,a,i.fieldTransforms)}function kM(n,e,t,r,i,s){const o=n.Su(1,e,t),a=[cy(e,r,t)],l=[i];if(s.length%2!=0)throw new oe(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)a.push(cy(e,s[g])),l.push(s[g+1]);const c=[],h=pi.empty();for(let g=a.length-1;g>=0;--g)if(!U4(c,a[g])){const _=a[g];let v=l[g];v=(0,w.m9)(v);const E=o.fu(_);if(v instanceof ly)c.push(_);else{const T=ud(v,E);null!=T&&(c.push(_),h.set(_,T))}}const p=new ys(c);return new N4(h,p,o.fieldTransforms)}function F4(n,e,t,r=!1){return ud(t,n.Su(r?4:3,e))}function ud(n,e){if(V4(n=(0,w.m9)(n)))return OM("Unsupported field value:",e,n),L4(n,e);if(n instanceof ld)return function(r,i){if(!k4(i.du))throw i.pu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.pu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Vu&&4!==e.du)throw e.pu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=ud(a,i.gu(o));null==l&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,w.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return x$(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=Vn.fromDate(r);return{timestampValue:Zf(i.serializer,s)}}if(r instanceof Vn){const s=new Vn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Zf(i.serializer,s)}}if(r instanceof Lw)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof va)return{bytesValue:W$(i.serializer,r._byteString)};if(r instanceof kn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.pu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:WS(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.pu(`Unsupported field value: ${Ow(r)}`)}(n,e)}function L4(n,e){const t={};return KH(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fc(n,(r,i)=>{const s=ud(i,e.Ru(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function V4(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Vn||n instanceof Lw||n instanceof va||n instanceof kn||n instanceof ld)}function OM(n,e,t){if(!V4(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=Ow(t);throw e.pu("an object"===r?n+" a custom object":n+" "+r)}var i}function cy(n,e,t){if((e=(0,w.m9)(e))instanceof pl)return e._internalPath;if("string"==typeof e)return Bw(n,e);throw jw("Field path arguments must be of type string or ",n,!1,void 0,t)}const Kue=new RegExp("[~\\*/\\[\\]]");function Bw(n,e,t){if(e.search(Kue)>=0)throw jw(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new pl(...e.split("."))._internalPath}catch{throw jw(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function jw(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new oe(q.INVALID_ARGUMENT,a+n+l)}function U4(n,e){return n.some(t=>t.isEqual(e))}class uy{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new kn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Zue(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Hw("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Zue extends uy{data(){return super.data()}}function Hw(n,e){return"string"==typeof e?Bw(n,e):e instanceof pl?e._internalPath:e._delegate._internalPath}function B4(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new oe(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class FM{}class dy extends FM{}function xc(n,e,...t){let r=[];e instanceof FM&&r.push(e),r=r.concat(t),function(s){const o=s.filter(l=>l instanceof fp).length,a=s.filter(l=>l instanceof hy).length;if(o>1||o>0&&a>0)throw new oe(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class hy extends dy{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new hy(e,t,r)}_apply(e){const t=this._parse(e);return z4(e._query,t),new mi(e.firestore,e.converter,US(e._query,t))}_parse(e){const t=cd(e.firestore);return function(s,o,a,l,c,h,p){let g;if(c.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new oe(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){$4(p,h);const _=[];for(const v of p)_.push(H4(l,s,v));g={arrayValue:{values:_}}}else g=H4(l,s,p)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||$4(p,h),g=F4(a,"where",p,"in"===h||"not-in"===h);return Mt.create(c,h,g)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class fp extends FM{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new fp(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:on.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)z4(o,l),o=US(o,l)}(e._query,t),new mi(e.firestore,e.converter,US(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class LM extends dy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new LM(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new oe(q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new oe(q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new F_(s,o)}(e._query,this._field,this._direction);return new mi(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new cl(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class $w extends dy{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new $w(e,t,r)}_apply(e){return new mi(e.firestore,e.converter,cw(e._query,this._limit,this._limitType))}}class zw extends dy{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new zw(e,t,r)}_apply(e){const t=j4(e,this.type,this._docOrFields,this._inclusive);return new mi(e.firestore,e.converter,(s=t,new cl((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class qw extends dy{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new qw(e,t,r)}_apply(e){const t=j4(e,this.type,this._docOrFields,this._inclusive);return new mi(e.firestore,e.converter,(s=t,new cl((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function j4(n,e,t,r){if(t[0]=(0,w.m9)(t[0]),t[0]instanceof uy)return function(s,o,a,l,c){if(!l)throw new oe(q.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const p of $f(s))if(p.field.isKeyField())h.push(Yu(o,l.key));else{const g=l.data.field(p.field);if(nw(g))throw new oe(q.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===g){const _=p.field.canonicalString();throw new oe(q.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}h.push(g)}return new vc(h,c)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=cd(n.firestore);return function(o,a,l,c,h,p){const g=o.explicitOrderBy;if(h.length>g.length)throw new oe(q.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const _=[];for(let v=0;v<h.length;v++){const E=h[v];if(g[v].field.isKeyField()){if("string"!=typeof E)throw new oe(q.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof E}`);if(!VS(o)&&-1!==E.indexOf("/"))throw new oe(q.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${E}' contains a slash.`);const T=o.path.child(Rt.fromString(E));if(!ye.isDocumentKey(T))throw new oe(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${T}' is not because it contains an odd number of segments.`);const P=new ye(T);_.push(Yu(a,P))}else{const T=F4(l,c,E);_.push(T)}}return new vc(_,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function H4(n,e,t){if("string"==typeof(t=(0,w.m9)(t))){if(""===t)throw new oe(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!VS(e)&&-1!==t.indexOf("/"))throw new oe(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Rt.fromString(t));if(!ye.isDocumentKey(r))throw new oe(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Yu(n,new ye(r))}if(t instanceof kn)return Yu(n,t._key);throw new oe(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ow(t)}.`)}function $4(n,e){if(!Array.isArray(n)||0===n.length)throw new oe(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function z4(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new oe(q.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class VM{convertValue(e,t="none"){switch(_c(e)){case 0:return null;case 1:return e.booleanValue;case 2:return cr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ll(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ae()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return fc(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new Lw(cr(e.latitude),cr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=rw(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(P_(e));default:return null}}convertTimestamp(e){const t=pc(e);return new Vn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Rt.fromString(e);Ne(iz(r));const i=new mc(r.get(1),r.get(3)),s=new ye(r.popFirst(5));return i.isEqual(t)||vr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function Gw(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class ide extends VM{constructor(e){super(),this.firestore=e}convertBytes(e){return new va(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kn(this.firestore,null,t)}}class dd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ml extends uy{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new fy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Hw("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class fy extends ml{data(e={}){return super.data(e)}}class Ac{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new dd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new fy(this._firestore,this._userDataWriter,r.key,r,new dd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new oe(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new fy(i._firestore,i._userDataWriter,a.doc.key,a.doc,new dd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const l=new fy(i._firestore,i._userDataWriter,a.doc.key,a.doc,new dd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return 0!==a.type&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:ode(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function ode(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae()}}function G4(n,e){return n instanceof ml&&e instanceof ml?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ac&&e instanceof Ac&&n._firestore===e._firestore&&AM(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Dc extends VM{constructor(e){super(),this.firestore=e}convertBytes(e){return new va(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kn(this.firestore,null,t)}}function W4(n,e,t){n=At(n,kn);const r=At(n.firestore,In),i=Gw(n.converter,e,t);return pp(r,[Uw(cd(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Un.none())])}function K4(n,e,t,...r){n=At(n,kn);const i=At(n.firestore,In),s=cd(i);let o;return o="string"==typeof(e=(0,w.m9)(e))||e instanceof pl?kM(s,"updateDoc",n._key,e,t,r):NM(s,"updateDoc",n._key,e),pp(i,[o.toMutation(n._key,Un.exists(!0))])}function Z4(n,...e){var t,r,i;n=(0,w.m9)(n);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||DM(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(DM(e[o])){const p=e[o];e[o]=null===(t=p.next)||void 0===t?void 0:t.bind(p),e[o+1]=null===(r=p.error)||void 0===r?void 0:r.bind(p),e[o+2]=null===(i=p.complete)||void 0===i?void 0:i.bind(p)}let l,c,h;if(n instanceof kn)c=At(n.firestore,In),h=Hf(n._key.path),l={next:p=>{e[o]&&e[o](UM(c,n,p))},error:e[o+1],complete:e[o+2]};else{const p=At(n,mi);c=At(p.firestore,In),h=p._query;const g=new Dc(c);l={next:_=>{e[o]&&e[o](new Ac(c,g,p,_))},error:e[o+1],complete:e[o+2]},B4(n._query)}return function(g,_,v,E){const T=new Pw(E),P=new qR(_,T,v);return g.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return BR(yield hp(g),P)})),()=>{T.La(),g.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return HR(yield hp(g),P)}))}}(ur(c),h,a,l)}function pp(n,e){return function(r,i){const s=new Lr;return r.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return function tue(n,e,t){return QR.apply(this,arguments)}(yield TM(r),i,s)})),s.promise}(ur(n),e)}function UM(n,e,t){const r=t.docs.get(e._key),i=new Dc(n);return new ml(n,i,e._key,r,new dd(t.hasPendingWrites,t.fromCache),e.converter)}const Tde={maxAttempts:5};class Q4{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=cd(e)}set(e,t,r){this._verifyNotCommitted();const i=Sc(e,this._firestore),s=Gw(i.converter,t,r),o=Uw(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,Un.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Sc(e,this._firestore);let o;return o="string"==typeof(t=(0,w.m9)(t))||t instanceof pl?kM(this._dataReader,"WriteBatch.update",s._key,t,r,i):NM(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Un.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Sc(e,this._firestore);return this._mutations=this._mutations.concat(new Kf(t._key,Un.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new oe(q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Sc(n,e){if((n=(0,w.m9)(n)).firestore!==e)throw new oe(q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Cde extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=cd(t)}get(t){const r=Sc(t,this._firestore),i=new ide(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return Ae();const o=s[0];if(o.isFoundDocument())return new uy(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new uy(this._firestore,i,r._key,null,r.converter);throw Ae()})}set(t,r,i){const s=Sc(t,this._firestore),o=Gw(s.converter,r,i),a=Uw(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=Sc(t,this._firestore);let a;return a="string"==typeof(r=(0,w.m9)(r))||r instanceof pl?kM(this._dataReader,"Transaction.update",o._key,r,i,s):NM(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=Sc(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Sc(e,this._firestore),r=new Dc(this._firestore);return super.get(e).then(i=>new ml(this._firestore,r,t._key,i._document,new dd(!1,!1),t.converter))}}function jM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new oe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function eq(){if(typeof Uint8Array>"u")throw new oe("unimplemented","Uint8Arrays are not available in this environment.")}function tq(){if(!function ale(){return typeof atob<"u"}())throw new oe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){kf=_r.SDK_VERSION,(0,_r._registerComponent)(new lo.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new In(new Mae(r.getProvider("auth-internal")),new kae(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new oe(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mc(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,_r.registerVersion)(RH,"4.4.2",e),(0,_r.registerVersion)(RH,"4.4.2","esm2017")}();class py{constructor(e){this._delegate=e}static fromBase64String(e){return tq(),new py(va.fromBase64String(e))}static fromUint8Array(e){return eq(),new py(va.fromUint8Array(e))}toBase64(){return tq(),this._delegate.toBase64()}toUint8Array(){return eq(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function HM(n){return function Ode(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Fde{enableIndexedDbPersistence(e,t){return function Fue(n,e){P4(n=At(n,In));const t=ur(n);if(t._uninitializedComponentsProvider)throw new oe(q.FAILED_PRECONDITION,"SDK cache is already specified.");_s("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new up;return M4(t,i,new _M(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Lue(n){P4(n=At(n,In));const e=ur(n);if(e._uninitializedComponentsProvider)throw new oe(q.FAILED_PRECONDITION,"SDK cache is already specified.");_s("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new up;return M4(e,r,new h4(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Vue(n){if(n._initialized&&!n._terminated)throw new oe(q.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Lr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,z.Z)(function*(){try{yield(t=(0,z.Z)(function*(i){if(!uo.D())return Promise.resolve();const s=i+"main";yield uo.delete(s)}),function r(i){return t.apply(this,arguments)})(cR(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class nq{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof mc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&_s("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function A4(n,e,t,r={}){var i;const s=(n=At(n,oy))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&_s("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if("string"==typeof r.mockUserToken)a=r.mockUserToken,l=Wr.MOCK_USER;else{a=(0,w.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new oe(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Wr(c)}n._authCredentials=new Rae(new MH(a,l))}}(this._delegate,e,t,r)}enableNetwork(){return function Bue(n){return function wue(n){return n.asyncQueue.enqueue((0,z.Z)(function*(){const e=yield m4(n),t=yield g4(n);return e.setNetworkEnabled(!0),function(i){const s=me(i);return s.v_.delete(0),ry(s)}(t)}))}(ur(n=At(n,In)))}(this._delegate)}disableNetwork(){return function jue(n){return function Iue(n){return n.asyncQueue.enqueue((0,z.Z)(function*(){const e=yield m4(n),t=yield g4(n);return e.setNetworkEnabled(!1),(r=(0,z.Z)(function*(s){const o=me(s);o.v_.add(0),yield rp(o),o.x_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(ur(n=At(n,In)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,w4("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Uue(n){return function(t){const r=new Lr;return t.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return function sue(n,e){return tM.apply(this,arguments)}(yield TM(t),r)})),r.promise}(ur(n=At(n,In)))}(this._delegate)}onSnapshotsInSync(e){return function mde(n,e){return function xue(n,e){const t=new Pw(e);return n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return i=yield hp(n),s=t,me(i).K_.add(s),void s.next();var i,s})),()=>{t.La(),n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return i=yield hp(n),s=t,void me(i).K_.delete(s);var i,s}))}}(ur(n=At(n,In)),DM(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new oe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new mp(this,D4(this._delegate,e))}catch(t){throw Xi(t,"collection()","Firestore.collection()")}}doc(e){try{return new ho(this,Fw(this._delegate,e))}catch(t){throw Xi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ji(this,function Pue(n,e){if(n=At(n,oy),xM("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new oe(q.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new mi(n,null,(r=e,new cl(Rt.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw Xi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function xde(n,e,t){n=At(n,In);const r=Object.assign(Object.assign({},Tde),t);return function(s){if(s.maxAttempts<1)throw new oe(q.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new Lr;return s.asyncQueue.enqueueAndForget((0,z.Z)(function*(){const c=yield function _4(n){return kw(n).then(e=>e.datastore)}(s);new bue(s.asyncQueue,c,a,o,l).ja()})),l.promise}(ur(n),i=>e(new Cde(n,i)),r)}(this._delegate,t=>e(new rq(this,t)))}batch(){return ur(this._delegate),new iq(new Q4(this._delegate,e=>pp(this._delegate,e)))}loadBundle(e){return function Hue(n,e){const t=ur(n=At(n,In)),r=new kue;return function Aue(n,e,t,r){const i=function(o,a){let l;return l="string"==typeof o?U$().encode(o):o,h=function(h,p){if(h instanceof Uint8Array)return f4(h,p);if(h instanceof ArrayBuffer)return f4(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),new yue(h,a);var h}(t,ny(e));n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){!function gue(n,e,t){const r=me(n);var i;(i=(0,z.Z)(function*(o,a,l){try{const c=yield a.getMetadata();if(yield function(v,E){const T=me(v),P=br(E.createTime);return T.persistence.runTransaction("hasNewerBundle","readonly",D=>T.$r.getBundleMetadata(D,E.id)).then(D=>!!D&&D.createTime.compareTo(P)>=0)}(o.localStore,c))return yield a.close(),l._completeWith({taskState:"Success",documentsLoaded:(v=c).totalDocuments,bytesLoaded:v.totalBytes,totalDocuments:v.totalDocuments,totalBytes:v.totalBytes}),Promise.resolve(new Set);l._updateProgress(r4(c));const h=new Zce(c,o.localStore,a.serializer);let p=yield a.Oa();for(;p;){const _=yield h.na(p);_&&l._updateProgress(_),p=yield a.Oa()}const g=yield h.complete();return yield fl(o,g.sa,void 0),yield function(v,E){const T=me(v);return T.persistence.runTransaction("Save bundle","readwrite",P=>T.$r.saveBundleMetadata(P,E))}(o.localStore,c),l._completeWith(g.progress),Promise.resolve(g.ia)}catch(c){return _s("SyncEngine",`Loading bundle failed with ${c}`),l._failWith(c),Promise.resolve(new Set)}var v}),function s(o,a,l){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield TM(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function $ue(n,e){return function Due(n,e){return n.asyncQueue.enqueue((0,z.Z)(function*(){return function(r,i){const s=me(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,i))}(yield dp(n),e)}))}(ur(n=At(n,In)),e).then(t=>t?new mi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ji(this,t):null)}}class Kw extends VM{constructor(e){super(),this.firestore=e}convertBytes(e){return new py(new va(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ho.forKey(t,this.firestore,null)}}class rq{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Kw(e)}get(e){const t=fd(e);return this._delegate.get(t).then(r=>new my(this._firestore,new ml(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=fd(e);return r?(jM("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=fd(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=fd(e);return this._delegate.delete(t),this}}class iq{constructor(e){this._delegate=e}set(e,t,r){const i=fd(e);return r?(jM("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=fd(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=fd(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class hd{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new fy(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new gy(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=hd.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new hd(e,new Kw(e),t),i.set(t,s)),s}}hd.INSTANCES=new WeakMap;class ho{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Kw(e)}static forPath(e,t,r){if(e.length%2!=0)throw new oe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ho(t,new kn(t._delegate,r,new ye(e)))}static forKey(e,t,r){return new ho(t,new kn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new mp(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new mp(this.firestore,D4(this._delegate,e))}catch(t){throw Xi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,w.m9)(e))instanceof kn&&S4(this._delegate,e)}set(e,t){t=jM("DocumentReference.set",t);try{return t?W4(this._delegate,e,t):W4(this._delegate,e)}catch(r){throw Xi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?K4(this._delegate,e):K4(this._delegate,e,t,...r)}catch(i){throw Xi(i,"updateDoc()","DocumentReference.update()")}}delete(){return function fde(n){return pp(At(n.firestore,In),[new Kf(n._key,Un.none())])}(this._delegate)}onSnapshot(...e){const t=sq(e),r=oq(e,i=>new my(this.firestore,new ml(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Z4(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function lde(n){n=At(n,kn);const e=At(n.firestore,In),t=ur(e),r=new Dc(e);return function Tue(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return(r=(0,z.Z)(function*(s,o,a){try{const l=yield function(h,p){const g=me(h);return g.persistence.runTransaction("read document","readonly",_=>g.localDocuments.getDocument(_,p))}(s,o);l.isFoundDocument()?a.resolve(l):l.isNoDocument()?a.resolve(null):a.reject(new oe(q.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const c=op(l,`Failed to get document '${o} from cache`);a.reject(c)}}),function i(s,o,a){return r.apply(this,arguments)})(yield dp(n),e,t);var r})),t.promise}(t,n._key).then(i=>new ml(e,r,n._key,i,new dd(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function cde(n){n=At(n,kn);const e=At(n.firestore,In);return y4(ur(e),n._key,{source:"server"}).then(t=>UM(e,n,t))}(this._delegate):function ade(n){n=At(n,kn);const e=At(n.firestore,In);return y4(ur(e),n._key).then(t=>UM(e,n,t))}(this._delegate),t.then(r=>new my(this.firestore,new ml(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ho(this.firestore,this._delegate.withConverter(e?hd.getInstance(this.firestore,e):null))}}function Xi(n,e,t){return n.message=n.message.replace(e,t),n}function sq(n){for(const e of n)if("object"==typeof e&&!HM(e))return e;return{}}function oq(n,e){var t,r;let i;return i=HM(n[0])?n[0]:HM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class my{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ho(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return G4(this._delegate,e._delegate)}}class gy extends my{data(e){const t=this._delegate.data(e);return this._delegate._converter||function Dae(n,e){n||Ae()}(void 0!==t),t}}class Ji{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Kw(e)}where(e,t,r){try{return new Ji(this.firestore,xc(this._delegate,function Que(n,e,t){const r=e,i=Hw("where",n);return hy._create(i,r,t)}(e,t,r)))}catch(i){throw Xi(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ji(this.firestore,xc(this._delegate,function Yue(n,e="asc"){const t=e,r=Hw("orderBy",n);return LM._create(r,t)}(e,t)))}catch(r){throw Xi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ji(this.firestore,xc(this._delegate,function Xue(n){return C4("limit",n),$w._create("limit",n,"F")}(e)))}catch(t){throw Xi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ji(this.firestore,xc(this._delegate,function Jue(n){return C4("limitToLast",n),$w._create("limitToLast",n,"L")}(e)))}catch(t){throw Xi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ji(this.firestore,xc(this._delegate,function ede(...n){return zw._create("startAt",n,!0)}(...e)))}catch(t){throw Xi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ji(this.firestore,xc(this._delegate,function tde(...n){return zw._create("startAfter",n,!1)}(...e)))}catch(t){throw Xi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ji(this.firestore,xc(this._delegate,function nde(...n){return qw._create("endBefore",n,!1)}(...e)))}catch(t){throw Xi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ji(this.firestore,xc(this._delegate,function rde(...n){return qw._create("endAt",n,!0)}(...e)))}catch(t){throw Xi(t,"endAt()","Query.endAt()")}}isEqual(e){return AM(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function dde(n){n=At(n,mi);const e=At(n.firestore,In),t=ur(e),r=new Dc(e);return function Cue(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return(r=(0,z.Z)(function*(s,o,a){try{const l=yield Cw(s,o,!0),c=new o4(o,l.hs),h=c.ha(l.documents),p=c.applyChanges(h,!1);a.resolve(p.snapshot)}catch(l){const c=op(l,`Failed to execute query '${o} against cache`);a.reject(c)}}),function i(s,o,a){return r.apply(this,arguments)})(yield dp(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Ac(e,r,n,i))}(this._delegate):"server"===e?.source?function hde(n){n=At(n,mi);const e=At(n.firestore,In),t=ur(e),r=new Dc(e);return v4(t,n._query,{source:"server"}).then(i=>new Ac(e,r,n,i))}(this._delegate):function ude(n){n=At(n,mi);const e=At(n.firestore,In),t=ur(e),r=new Dc(e);return B4(n._query),v4(t,n._query).then(i=>new Ac(e,r,n,i))}(this._delegate),t.then(r=>new $M(this.firestore,new Ac(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=sq(e),r=oq(e,i=>new $M(this.firestore,new Ac(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Z4(this._delegate,t,r)}withConverter(e){return new Ji(this.firestore,this._delegate.withConverter(e?hd.getInstance(this.firestore,e):null))}}class Vde{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new gy(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class $M{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ji(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new gy(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Vde(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new gy(this._firestore,r))})}isEqual(e){return G4(this._delegate,e._delegate)}}class mp extends Ji{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ho(this.firestore,e):null}doc(e){try{return new ho(this.firestore,void 0===e?Fw(this._delegate):Fw(this._delegate,e))}catch(t){throw Xi(t,"doc()","CollectionReference.doc()")}}add(e){return function pde(n,e){const t=At(n.firestore,In),r=Fw(n),i=Gw(n.converter,e);return pp(t,[Uw(cd(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Un.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ho(this.firestore,t))}isEqual(e){return S4(this._delegate,e._delegate)}withConverter(e){return new mp(this.firestore,this._delegate.withConverter(e?hd.getInstance(this.firestore,e):null))}}function fd(n){return At(n,kn)}class zM{constructor(...e){this._delegate=new pl(...e)}static documentId(){return new zM(Pn.keyField().canonicalString())}isEqual(e){return(e=(0,w.m9)(e))instanceof pl&&this._delegate._internalPath.isEqual(e._internalPath)}}class pd{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Dde(){return new SM("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new pd(e)}static delete(){const e=function Ade(){return new ly("deleteField")}();return e._methodName="FieldValue.delete",new pd(e)}static arrayUnion(...e){const t=function Sde(...n){return new RM("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new pd(t)}static arrayRemove(...e){const t=function Rde(...n){return new MM("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new pd(t)}static increment(e){const t=function Mde(n){return new PM("increment",n)}(e);return t._methodName="FieldValue.increment",new pd(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Ude={Firestore:nq,GeoPoint:Lw,Timestamp:Vn,Blob:py,Transaction:rq,WriteBatch:iq,DocumentReference:ho,DocumentSnapshot:my,Query:Ji,QueryDocumentSnapshot:gy,QuerySnapshot:$M,CollectionReference:mp,FieldPath:zM,FieldValue:pd,setLogLevel:function Lde(n){!function Aae(n){uc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function aq(n,e){return function Hde(n,e=u0){return new at(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function qM(n,e){return aq(n,e).pipe(he(t=>({payload:t,type:"query"})))}!function jde(n){(function Bde(n,e){n.INTERNAL.registerComponent(new lo.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Ude)))})(n,(e,t)=>new nq(e,t,new Fde)),n.registerVersion("@firebase/firestore-compat","0.3.25")}(ms.Z);class lq{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=pq(r,t);return new dq(i,s,this.afs)}snapshotChanges(){return function $de(n,e){return aq(n,e).pipe(Ng(void 0),LD(),he(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(yr)}valueChanges(e={}){return this.snapshotChanges().pipe(he(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return M(this.ref.get(e)).pipe(yr)}}function Zw(n,e){return qM(n,e).pipe(Ng(void 0),LD(),he(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,l)=>{const c=s.find(p=>p.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),o}))}function cq(n,e,t){return Zw(n,t).pipe(cf((r,i)=>function zde(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function qde(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return GM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return GM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return GM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),mn(),he(r=>r.map(i=>({type:i.type,payload:i}))))}function GM(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function uq(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class dq{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Zw(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(he(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Ng(void 0),LD(),ui(([r,i])=>i.length>0||!r),he(([,r])=>r),yr)}auditTrail(e){return this.stateChanges(e).pipe(cf((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=uq(e);return cq(this.query,t,this.afs.schedulers.outsideAngular).pipe(yr)}valueChanges(e={}){return qM(this.query,this.afs.schedulers.outsideAngular).pipe(he(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),yr)}get(e){return M(this.query.get(e)).pipe(yr)}add(e){return this.ref.add(e)}doc(e){return new lq(this.ref.doc(e),this.afs)}}class Gde{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Zw(this.query,this.afs.schedulers.outsideAngular).pipe(he(t=>t.filter(r=>e.indexOf(r.type)>-1)),ui(t=>t.length>0),yr):Zw(this.query,this.afs.schedulers.outsideAngular).pipe(yr)}auditTrail(e){return this.stateChanges(e).pipe(cf((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=uq(e);return cq(this.query,t,this.afs.schedulers.outsideAngular).pipe(yr)}valueChanges(e={}){return qM(this.query,this.afs.schedulers.outsideAngular).pipe(he(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),yr)}get(e){return M(this.query.get(e)).pipe(yr)}}const hq=new te("angularfire2.enableFirestorePersistence"),fq=new te("angularfire2.firestore.persistenceSettings"),Wde=new te("angularfire2.firestore.settings"),Kde=new te("angularfire2.firestore.use-emulator");function pq(n,e=(t=>t)){return{query:e(n),ref:n}}let WM=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,l,c,h,p,g,_,v,E,T,P,D){this.schedulers=l;const k=Qg(t,a,r),G=h;p&&FD(k,a,g,v,E,T,_,P),[this.firestore,this.persistenceEnabled$]=Yg(`${k.name}.firestore`,"AngularFirestore",k.name,()=>{const ce=a.runOutsideAngular(()=>k.firestore());if(s&&ce.settings(s),G&&ce.useEmulator(...G),i&&!FE(o)){const De=()=>{try{return M(ce.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(ze){return typeof console<"u"&&console.warn(ze),Q(!1)}};return[ce,a.runOutsideAngular(De)]}return[ce,Q(!1)]},[s,G,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=pq(i,r),a=this.schedulers.ngZone.run(()=>s);return new dq(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new Gde(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new lq(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(B(wf),B(If,8),B(hq,8),B(Wde,8),B(Ps),B(Xe),B(h0),B(fq,8),B(Kde,8),B(x0,8),B(RD,8),B(MD,8),B(PD,8),B(ND,8),B(kD,8),B(OD,8),B(d0,8))};static \u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Zde=(()=>{class n{constructor(){ms.Z.registerVersion("angularfire",Fu.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:hq,useValue:!0},{provide:fq,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=jt({type:n});static \u0275inj=Ot({providers:[WM]})}return n})(),Qde=(()=>{class n{constructor(t){this.firestore=t}agregarUsuario(t,r){return this.firestore.collection(t).add(r)}static#e=this.\u0275fac=function(r){return new(r||n)(B(WM))};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),mq=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(H(qa),H(Zn))};static#t=this.\u0275dir=Te({type:n})}return n})(),md=(()=>{class n extends mq{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=pr(n)))(i||n)}}();static#t=this.\u0275dir=Te({type:n,features:[Vt]})}return n})();const ba=new te("NgValueAccessor"),Xde={provide:ba,useExisting:$t(()=>Qw),multi:!0},ehe=new te("CompositionEventMode");let Qw=(()=>{class n extends mq{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Jde(){const n=ec()?ec().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(H(qa),H(Zn),H(ehe,8))};static#t=this.\u0275dir=Te({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Ar("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[bn([Xde]),Vt]})}return n})();function Rc(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function _q(n){return null!=n&&"number"==typeof n.length}const Ni=new te("NgValidators"),Mc=new te("NgAsyncValidators"),the=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class nhe{static min(e){return function yq(n){return e=>{if(Rc(e.value)||Rc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function vq(n){return e=>{if(Rc(e.value)||Rc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function bq(n){return Rc(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function Eq(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function wq(n){return Rc(n.value)||the.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Iq(n){return e=>Rc(e.value)||!_q(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function Tq(n){return e=>_q(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Cq(n){if(!n)return Yw;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Rc(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return Mq(e)}static composeAsync(e){return Pq(e)}}function Yw(n){return null}function xq(n){return null!=n}function Aq(n){return mg(n)?M(n):n}function Dq(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Sq(n,e){return e.map(t=>t(n))}function Rq(n){return n.map(e=>function rhe(n){return!n.validate}(e)?e:t=>e.validate(t))}function Mq(n){if(!n)return null;const e=n.filter(xq);return 0==e.length?null:function(t){return Dq(Sq(t,e))}}function KM(n){return null!=n?Mq(Rq(n)):null}function Pq(n){if(!n)return null;const e=n.filter(xq);return 0==e.length?null:function(t){return zB(Sq(t,e).map(Aq)).pipe(he(Dq))}}function ZM(n){return null!=n?Pq(Rq(n)):null}function Nq(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function kq(n){return n._rawValidators}function Oq(n){return n._rawAsyncValidators}function QM(n){return n?Array.isArray(n)?n:[n]:[]}function Xw(n,e){return Array.isArray(n)?n.includes(e):n===e}function Fq(n,e){const t=QM(e);return QM(n).forEach(i=>{Xw(t,i)||t.push(i)}),t}function Lq(n,e){return QM(e).filter(t=>!Xw(n,t))}class Vq{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=KM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ZM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class es extends Vq{get formDirective(){return null}get path(){return null}}class gl extends Vq{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Uq{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Bq=(()=>{class n extends Uq{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(H(gl,2))};static#t=this.\u0275dir=Te({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&ci("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Vt]})}return n})();const _y="VALID",eI="INVALID",gp="PENDING",yy="DISABLED";function JM(n){return(tI(n)?n.validators:n)||null}function eP(n,e){return(tI(e)?e.asyncValidators:n)||null}function tI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class zq{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===_y}get invalid(){return this.status===eI}get pending(){return this.status==gp}get disabled(){return this.status===yy}get enabled(){return this.status!==yy}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Fq(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Fq(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Lq(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Lq(e,this._rawAsyncValidators))}hasValidator(e){return Xw(this._rawValidators,e)}hasAsyncValidator(e){return Xw(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=gp,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=yy,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=_y,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===_y||this.status===gp)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?yy:_y}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=gp,this._hasOwnPendingAsyncValidator=!0;const t=Aq(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Qn,this.statusChanges=new Qn}_calculateStatus(){return this._allControlsDisabled()?yy:this.errors?eI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(gp)?gp:this._anyControlsHaveStatus(eI)?eI:_y}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){tI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function lhe(n){return Array.isArray(n)?KM(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function che(n){return Array.isArray(n)?ZM(n):n||null}(this._rawAsyncValidators)}}class tP extends zq{constructor(e,t,r){super(JM(t),eP(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function $q(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new S(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function Hq(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new S(1e3,"");if(!r[t])throw new S(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const _p=new te("CallSetDisabledState",{providedIn:"root",factory:()=>nI}),nI="always";function vy(n,e,t=nI){nP(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function hhe(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&qq(n,e)})}(n,e),function phe(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function fhe(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&qq(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function dhe(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function iI(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),oI(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function sI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function nP(n,e){const t=kq(n);null!==e.validator?n.setValidators(Nq(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Oq(n);null!==e.asyncValidator?n.setAsyncValidators(Nq(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();sI(e._rawValidators,i),sI(e._rawAsyncValidators,i)}function oI(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=kq(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=Oq(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return sI(e._rawValidators,r),sI(e._rawAsyncValidators,r),t}function qq(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Gq(n,e){nP(n,e)}function Wq(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}const vhe={provide:es,useExisting:$t(()=>aI)},by=(()=>Promise.resolve())();let aI=(()=>{class n extends es{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Qn,this.form=new tP({},KM(t),ZM(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){by.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),vy(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){by.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){by.then(()=>{const r=this._findContainer(t.path),i=new tP({});Gq(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){by.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){by.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Wq(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||n)(H(Ni,10),H(Mc,10),H(_p,8))};static#t=this.\u0275dir=Te({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&Ar("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[bn([vhe]),Vt]})}return n})();function Kq(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Zq(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Qq=class extends zq{constructor(e=null,t,r){super(JM(t),eP(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),tI(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Zq(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Kq(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Kq(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Zq(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},whe={provide:gl,useExisting:$t(()=>oP)},Jq=(()=>Promise.resolve())();let oP=(()=>{class n extends gl{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new Qq,this._registered=!1,this.name="",this.update=new Qn,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function sP(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Qw?t=s:function _he(n){return Object.getPrototypeOf(n.constructor)===md}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function iP(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){vy(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Jq.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&rf(r);Jq.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function rI(n,e){return[...e.path,n]}(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(H(es,9),H(Ni,10),H(Mc,10),H(ba,10),H(Ag,8),H(_p,8))};static#t=this.\u0275dir=Te({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[bn([whe]),Vt,$i]})}return n})(),t3=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=jt({type:n});static#n=this.\u0275inj=Ot({})}return n})();const She={provide:es,useExisting:$t(()=>lI)};let lI=(()=>{class n extends es{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Qn,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(oI(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return vy(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){iI(t.control||null,t,!1),function yhe(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,Wq(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(iI(r||null,t),(n=>n instanceof Qq)(i)&&(vy(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);Gq(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function mhe(n,e){return oI(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){nP(this.form,this),this._oldForm&&oI(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(r){return new(r||n)(H(Ni,10),H(Mc,10),H(_p,8))};static#t=this.\u0275dir=Te({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&Ar("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[bn([She]),Vt,$i]})}return n})(),Whe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=jt({type:n});static#n=this.\u0275inj=Ot({imports:[t3]})}return n})(),Zhe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:_p,useValue:t.callSetDisabledState??nI}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=jt({type:n});static#n=this.\u0275inj=Ot({imports:[Whe]})}return n})();const Qhe=["*"],tfe=new te("MAT_CARD_CONFIG");let b3=(()=>{class n{constructor(t){this.appearance=t?.appearance||"raised"}static#e=this.\u0275fac=function(r){return new(r||n)(H(tfe,8))};static#t=this.\u0275cmp=Hr({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(r,i){2&r&&ci("mat-mdc-card-outlined","outlined"===i.appearance)("mdc-card--outlined","outlined"===i.appearance)},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:Qhe,decls:1,vars:0,template:function(r,i){1&r&&(Zl(),or(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{color:rgba(0, 0, 0, 0.6);flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mdc-card__action--icon:not(:disabled){color:rgba(0, 0, 0, 0.6)}.mat-mdc-card{border-radius:var(--mdc-elevated-card-container-shape);background-color:var(--mdc-elevated-card-container-color);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color);box-shadow:var(--mdc-elevated-card-container-elevation);--mdc-elevated-card-container-shape:4px;--mdc-outlined-card-container-shape:4px;--mdc-outlined-card-outline-width:1px}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape)}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width);border-style:solid;border-color:var(--mdc-outlined-card-outline-color);border-radius:var(--mdc-outlined-card-container-shape);background-color:var(--mdc-outlined-card-container-color);box-shadow:var(--mdc-outlined-card-container-elevation)}.mat-mdc-card-outlined .mdc-card::after{border-radius:var(--mdc-outlined-card-container-shape)}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font);line-height:var(--mat-card-title-text-line-height);font-size:var(--mat-card-title-text-size);letter-spacing:var(--mat-card-title-text-tracking);font-weight:var(--mat-card-title-text-weight)}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color);font-family:var(--mat-card-subtitle-text-font);line-height:var(--mat-card-subtitle-text-line-height);font-size:var(--mat-card-subtitle-text-size);letter-spacing:var(--mat-card-subtitle-text-tracking);font-weight:var(--mat-card-subtitle-text-weight)}.mat-mdc-card{position:relative}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0})}return n})(),nfe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=jt({type:n});static#n=this.\u0275inj=Ot({imports:[ao,OE,ao]})}return n})();const E3=e_({passive:!0});let rfe=(()=>{class n{constructor(t,r){this._platform=t,this._ngZone=r,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Dn;const r=Uu(t),i=this._monitoredElements.get(r);if(i)return i.subject;const s=new j,o="cdk-text-field-autofilled",a=l=>{"cdk-text-field-autofill-start"!==l.animationName||r.classList.contains(o)?"cdk-text-field-autofill-end"===l.animationName&&r.classList.contains(o)&&(r.classList.remove(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!1}))):(r.classList.add(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",a,E3),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:s,unlisten:()=>{r.removeEventListener("animationstart",a,E3)}}),s}stopMonitoring(t){const r=Uu(t),i=this._monitoredElements.get(r);i&&(i.unlisten(),i.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((t,r)=>this.stopMonitoring(r))}static#e=this.\u0275fac=function(r){return new(r||n)(B(ua),B(Xe))};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ife=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=jt({type:n});static#n=this.\u0275inj=Ot({})}return n})();class sfe{constructor(e){this._box=e,this._destroyed=new j,this._resizeSubject=new j,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(t=>this._resizeSubject.next(t)))}observe(e){return this._elementObservables.has(e)||this._elementObservables.set(e,new at(t=>{const r=this._resizeSubject.subscribe(t);return this._resizeObserver?.observe(e,{box:this._box}),()=>{this._resizeObserver?.unobserve(e),r.unsubscribe(),this._elementObservables.delete(e)}}).pipe(ui(t=>t.some(r=>r.target===e)),f0({bufferSize:1,refCount:!0}),Nu(this._destroyed))),this._elementObservables.get(e)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}}let ofe=(()=>{class n{constructor(){this._observers=new Map,this._ngZone=de(Xe)}ngOnDestroy(){for(const[,t]of this._observers)t.destroy();this._observers.clear()}observe(t,r){const i=r?.box||"content-box";return this._observers.has(i)||this._observers.set(i,new sfe(i)),this._observers.get(i).observe(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class w3{}class afe{}const _l="*";function lfe(n,e){return{type:7,name:n,definitions:e,options:{}}}function cfe(n,e=null){return{type:4,styles:e,timings:n}}function I3(n,e=null){return{type:2,steps:n,options:e}}function cI(n){return{type:6,styles:n,offset:null}}function ufe(n,e,t){return{type:0,name:n,styles:e,options:t}}function dfe(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}class Ey{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class T3{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}let hfe=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ffe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=jt({type:n});static#n=this.\u0275inj=Ot({providers:[hfe]})}return n})();const pfe=["notch"],mfe=["matFormFieldNotchedOutline",""],gfe=["*"],_fe=["textField"],yfe=["iconPrefixContainer"],vfe=["textPrefixContainer"];function bfe(n,e){1&n&&li(0,"span",19)}function Efe(n,e){if(1&n&&(ct(0,"label",17),or(1,1),Or(2,bfe,1,0,"span",18),tt()),2&n){const t=Ka(2);cn("floating",t._shouldLabelFloat())("monitorResize",t._hasOutline())("id",t._labelId),qi("for",t._control.id),sr(2),cn("ngIf",!t.hideRequiredMarker&&t._control.required)}}function wfe(n,e){1&n&&Or(0,Efe,3,5,"label",16),2&n&&cn("ngIf",Ka()._hasFloatingLabel())}function Ife(n,e){1&n&&li(0,"div",20)}function Tfe(n,e){}function Cfe(n,e){1&n&&Or(0,Tfe,0,0,"ng-template",22),2&n&&(Ka(2),cn("ngTemplateOutlet",bx(1)))}function xfe(n,e){if(1&n&&(ct(0,"div",21),Or(1,Cfe,1,1,"ng-template",9),tt()),2&n){const t=Ka();cn("matFormFieldNotchedOutlineOpen",t._shouldLabelFloat()),sr(1),cn("ngIf",!t._forceDisplayInfixLabel())}}function Afe(n,e){1&n&&(ct(0,"div",23,24),or(2,2),tt())}function Dfe(n,e){1&n&&(ct(0,"div",25,26),or(2,3),tt())}function Sfe(n,e){}function Rfe(n,e){1&n&&Or(0,Sfe,0,0,"ng-template",22),2&n&&(Ka(),cn("ngTemplateOutlet",bx(1)))}function Mfe(n,e){1&n&&(ct(0,"div",27),or(1,4),tt())}function Pfe(n,e){1&n&&(ct(0,"div",28),or(1,5),tt())}function Nfe(n,e){1&n&&li(0,"div",29)}function kfe(n,e){1&n&&(ct(0,"div",30),or(1,6),tt()),2&n&&cn("@transitionMessages",Ka()._subscriptAnimationState)}function Ofe(n,e){if(1&n&&(ct(0,"mat-hint",34),Yn(1),tt()),2&n){const t=Ka(2);cn("id",t._hintLabelId),sr(1),_g(t.hintLabel)}}function Ffe(n,e){if(1&n&&(ct(0,"div",31),Or(1,Ofe,2,2,"mat-hint",32),or(2,7),li(3,"div",33),or(4,8),tt()),2&n){const t=Ka();cn("@transitionMessages",t._subscriptAnimationState),sr(1),cn("ngIf",t.hintLabel)}}const Lfe=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Vfe=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let fP=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Te({type:n,selectors:[["mat-label"]]})}return n})();const Ufe=new te("MatError");let Bfe=0,C3=(()=>{class n{constructor(){this.align="start",this.id="mat-mdc-hint-"+Bfe++}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Te({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(r,i){2&r&&(aE("id",i.id),qi("align",null),ci("mat-mdc-form-field-hint-end","end"===i.align))},inputs:{align:"align",id:"id"}})}return n})();const jfe=new te("MatPrefix"),Hfe=new te("MatSuffix"),x3=new te("FloatingLabelParent");let A3=(()=>{class n{get floating(){return this._floating}set floating(t){this._floating=t,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(t){this._monitorResize=t,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(t){this._elementRef=t,this._floating=!1,this._monitorResize=!1,this._resizeObserver=de(ofe),this._ngZone=de(Xe),this._parent=de(x3),this._resizeSubscription=new mt}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return function $fe(n){if(null!==n.offsetParent)return n.scrollWidth;const t=n.cloneNode(!0);t.style.setProperty("position","absolute"),t.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(t);const r=t.scrollWidth;return t.remove(),r}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static#e=this.\u0275fac=function(r){return new(r||n)(H(Zn))};static#t=this.\u0275dir=Te({type:n,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(r,i){2&r&&ci("mdc-floating-label--float-above",i.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}})}return n})();const D3="mdc-line-ripple--active",uI="mdc-line-ripple--deactivating";let S3=(()=>{class n{constructor(t,r){this._elementRef=t,this._handleTransitionEnd=i=>{const s=this._elementRef.nativeElement.classList,o=s.contains(uI);"opacity"===i.propertyName&&o&&s.remove(D3,uI)},r.runOutsideAngular(()=>{t.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const t=this._elementRef.nativeElement.classList;t.remove(uI),t.add(D3)}deactivate(){this._elementRef.nativeElement.classList.add(uI)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static#e=this.\u0275fac=function(r){return new(r||n)(H(Zn),H(Xe))};static#t=this.\u0275dir=Te({type:n,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]})}return n})(),R3=(()=>{class n{constructor(t,r){this._elementRef=t,this._ngZone=r,this.open=!1}ngAfterViewInit(){const t=this._elementRef.nativeElement.querySelector(".mdc-floating-label");t?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(t.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>t.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(t){this._notch.nativeElement.style.width=this.open&&t?`calc(${t}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:""}static#e=this.\u0275fac=function(r){return new(r||n)(H(Zn),H(Xe))};static#t=this.\u0275cmp=Hr({type:n,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(r,i){if(1&r&&Yl(pfe,5),2&r){let s;xi(s=Ai())&&(i._notch=s.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(r,i){2&r&&ci("mdc-notched-outline--notched",i.open)},inputs:{open:["matFormFieldNotchedOutlineOpen","open"]},attrs:mfe,ngContentSelectors:gfe,decls:5,vars:0,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],["notch",""],[1,"mdc-notched-outline__trailing"]],template:function(r,i){1&r&&(Zl(),li(0,"div",0),ct(1,"div",1,2),or(3),tt(),li(4,"div",3))},encapsulation:2,changeDetection:0})}return n})();const zfe={transitionMessages:lfe("transitionMessages",[ufe("enter",cI({opacity:1,transform:"translateY(0%)"})),dfe("void => enter",[cI({opacity:0,transform:"translateY(-5px)"}),cfe("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let M3=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Te({type:n})}return n})();const P3=new te("MatFormField"),qfe=new te("MAT_FORM_FIELD_DEFAULT_OPTIONS");let N3=0,Kfe=(()=>{class n{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=il(t)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(t){const r=this._appearance;this._appearance=t||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==r&&(this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(t){this._subscriptSizing=t||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(t){this._explicitFormFieldControl=t}constructor(t,r,i,s,o,a,l,c){this._elementRef=t,this._changeDetectorRef=r,this._ngZone=i,this._dir=s,this._platform=o,this._defaults=a,this._animationMode=l,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+N3++,this._hintLabelId="mat-mdc-hint-"+N3++,this._subscriptAnimationState="",this._destroyed=new j,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,a&&(a.appearance&&(this.appearance=a.appearance),this._hideRequiredMarker=!!a?.hideRequiredMarker,a.color&&(this.color=a.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${t.controlType}`),t.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(Nu(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(t=>!t._isText),this._hasTextPrefix=!!this._prefixChildren.find(t=>t._isText),this._hasIconSuffix=!!this._suffixChildren.find(t=>!t._isText),this._hasTextSuffix=!!this._suffixChildren.find(t=>t._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),J(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Nu(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(Nu(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(t){const r=this._control?this._control.ngControl:null;return r&&r[t]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){this._hasOutline()&&this._floatingLabel&&this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth()):this._notchedOutline?._setNotchWidth(0)}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,i=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;r?t.push(r.id):this._hintLabel&&t.push(this._hintLabelId),i&&t.push(i.id)}else this._errorChildren&&t.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(t)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const t=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(t.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const r=this._iconPrefixContainer?.nativeElement,i=this._textPrefixContainer?.nativeElement,s=r?.getBoundingClientRect().width??0,o=i?.getBoundingClientRect().width??0;t.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${s+o}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const t=this._elementRef.nativeElement;if(t.getRootNode){const r=t.getRootNode();return r&&r!==t}return document.documentElement.contains(t)}static#e=this.\u0275fac=function(r){return new(r||n)(H(Zn),H(Ag),H(Xe),H(Mie),H(ua),H(qfe,8),H(Oh,8),H(nn))};static#t=this.\u0275cmp=Hr({type:n,selectors:[["mat-form-field"]],contentQueries:function(r,i,s){if(1&r&&(Qa(s,fP,5),Qa(s,fP,7),Qa(s,M3,5),Qa(s,jfe,5),Qa(s,Hfe,5),Qa(s,Ufe,5),Qa(s,C3,5)),2&r){let o;xi(o=Ai())&&(i._labelChildNonStatic=o.first),xi(o=Ai())&&(i._labelChildStatic=o.first),xi(o=Ai())&&(i._formFieldControl=o.first),xi(o=Ai())&&(i._prefixChildren=o),xi(o=Ai())&&(i._suffixChildren=o),xi(o=Ai())&&(i._errorChildren=o),xi(o=Ai())&&(i._hintChildren=o)}},viewQuery:function(r,i){if(1&r&&(Yl(_fe,5),Yl(yfe,5),Yl(vfe,5),Yl(A3,5),Yl(R3,5),Yl(S3,5)),2&r){let s;xi(s=Ai())&&(i._textField=s.first),xi(s=Ai())&&(i._iconPrefixContainer=s.first),xi(s=Ai())&&(i._textPrefixContainer=s.first),xi(s=Ai())&&(i._floatingLabel=s.first),xi(s=Ai())&&(i._notchedOutline=s.first),xi(s=Ai())&&(i._lineRipple=s.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(r,i){2&r&&ci("mat-mdc-form-field-label-always-float",i._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",i._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",i._hasIconSuffix)("mat-form-field-invalid",i._control.errorState)("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===i._animationMode)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-hide-placeholder",i._hasFloatingLabel()&&!i._shouldLabelFloat())("mat-focused",i._control.focused)("mat-primary","accent"!==i.color&&"warn"!==i.color)("mat-accent","accent"===i.color)("mat-warn","warn"===i.color)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[bn([{provide:P3,useExisting:n},{provide:x3,useExisting:n}])],ngContentSelectors:Vfe,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(r,i){1&r&&(Zl(Lfe),Or(0,wfe,1,1,"ng-template",null,0,rV),ct(2,"div",1,2),Ar("click",function(o){return i._control.onContainerClick(o)}),Or(4,Ife,1,0,"div",3),ct(5,"div",4),Or(6,xfe,2,2,"div",5),Or(7,Afe,3,0,"div",6),Or(8,Dfe,3,0,"div",7),ct(9,"div",8),Or(10,Rfe,1,1,"ng-template",9),or(11),tt(),Or(12,Mfe,2,0,"div",10),Or(13,Pfe,2,0,"div",11),tt(),Or(14,Nfe,1,0,"div",12),tt(),ct(15,"div",13),Or(16,kfe,2,1,"div",14),Or(17,Ffe,5,2,"div",15),tt()),2&r&&(sr(2),ci("mdc-text-field--filled",!i._hasOutline())("mdc-text-field--outlined",i._hasOutline())("mdc-text-field--no-label",!i._hasFloatingLabel())("mdc-text-field--disabled",i._control.disabled)("mdc-text-field--invalid",i._control.errorState),sr(2),cn("ngIf",!i._hasOutline()&&!i._control.disabled),sr(2),cn("ngIf",i._hasOutline()),sr(1),cn("ngIf",i._hasIconPrefix),sr(1),cn("ngIf",i._hasTextPrefix),sr(2),cn("ngIf",!i._hasOutline()||i._forceDisplayInfixLabel()),sr(2),cn("ngIf",i._hasTextSuffix),sr(1),cn("ngIf",i._hasIconSuffix),sr(1),cn("ngIf",!i._hasOutline()),sr(1),ci("mat-mdc-form-field-subscript-dynamic-size","dynamic"===i.subscriptSizing),cn("ngSwitch",i._getDisplayedMessages()),sr(1),cn("ngSwitchCase","error"),sr(1),cn("ngSwitchCase","hint"))},dependencies:[v2,I2,kE,E2,C3,A3,R3,S3],styles:['.mdc-text-field{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;pointer-events:none}.mdc-notched-outline__trailing{flex-grow:1}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{border-top:1px solid;border-bottom:1px solid}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{max-width:calc(100% - 12px * 2)}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-text-field--filled{--mdc-filled-text-field-active-indicator-height:1px;--mdc-filled-text-field-focus-active-indicator-height:2px;--mdc-filled-text-field-container-shape:4px;border-top-left-radius:var(--mdc-filled-text-field-container-shape);border-top-right-radius:var(--mdc-filled-text-field-container-shape);border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-caret-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-focus-label-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-focus-label-text-color)}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font);font-size:var(--mdc-filled-text-field-label-text-size);font-weight:var(--mdc-filled-text-field-label-text-weight);letter-spacing:var(--mdc-filled-text-field-label-text-tracking)}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color)}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color)}.mdc-text-field--filled .mdc-line-ripple::before{border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--outlined{--mdc-outlined-text-field-outline-width:1px;--mdc-outlined-text-field-focus-outline-width:2px;--mdc-outlined-text-field-container-shape:4px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-caret-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-focus-label-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-focus-label-text-color)}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font);font-size:var(--mdc-outlined-text-field-label-text-size);font-weight:var(--mdc-outlined-text-field-label-text-weight);letter-spacing:var(--mdc-outlined-text-field-label-text-tracking)}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-outlined-text-field-container-shape))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-outlined-text-field-container-shape))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-hover-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-focus-outline-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-hover-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-focus-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font);line-height:var(--mat-form-field-container-text-line-height);font-size:var(--mat-form-field-container-text-size);letter-spacing:var(--mat-form-field-container-text-tracking);font-weight:var(--mat-form-field-container-text-weight)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size) * var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[zfe.transitionMessages]},changeDetection:0})}return n})(),F3=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=jt({type:n});static#n=this.\u0275inj=Ot({imports:[ao,OE,ffe,ao]})}return n})();const Zfe=new te("MAT_INPUT_VALUE_ACCESSOR"),Qfe=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let Yfe=0;const Xfe=Fie(class{constructor(n,e,t,r){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=r,this.stateChanges=new j}});let Jfe=(()=>{class n extends Xfe{get disabled(){return this._disabled}set disabled(t){this._disabled=il(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(nhe.required)??!1}set required(t){this._required=il(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&yB().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=il(t)}constructor(t,r,i,s,o,a,l,c,h,p){super(a,s,o,i),this._elementRef=t,this._platform=r,this._autofillMonitor=c,this._formField=p,this._uid="mat-input-"+Yfe++,this.focused=!1,this.stateChanges=new j,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(v=>yB().has(v)),this._iOSKeyupListener=v=>{const E=v.target;!E.value&&0===E.selectionStart&&0===E.selectionEnd&&(E.setSelectionRange(1,1),E.setSelectionRange(0,0))};const g=this._elementRef.nativeElement,_=g.nodeName.toLowerCase();this._inputValueAccessor=l||g,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&h.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===_,this._isTextarea="textarea"===_,this._isInFormField=!!p,this._isNativeSelect&&(this.controlType=g.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_dirtyCheckPlaceholder(){const t=this._getPlaceholder();if(t!==this._previousPlaceholder){const r=this._elementRef.nativeElement;this._previousPlaceholder=t,t?r.setAttribute("placeholder",t):r.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){Qfe.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,r=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}static#e=this.\u0275fac=function(r){return new(r||n)(H(Zn),H(ua),H(gl,10),H(aI,8),H(lI,8),H(Vie),H(Zfe,10),H(rfe),H(Xe),H(P3,8))};static#t=this.\u0275dir=Te({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(r,i){1&r&&Ar("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&r&&(aE("id",i.id)("disabled",i.disabled)("required",i.required),qi("name",i.name||null)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required)("id",i.id),ci("mat-input-server",i._isServer)("mat-mdc-form-field-textarea-control",i._isInFormField&&i._isTextarea)("mat-mdc-form-field-input-control",i._isInFormField)("mdc-text-field__input",i._isInFormField)("mat-mdc-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[bn([{provide:M3,useExisting:n}]),Vt,$i]})}return n})(),epe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=jt({type:n});static#n=this.\u0275inj=Ot({imports:[ao,F3,F3,ife,ao]})}return n})();const tpe=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:(()=>{class n{constructor(t,r,i,s,o){this.firestoreDataService=t,this.router=r,this.gaService=i,this.perf=s,this.firestore=o,this.usuario={usuario:"",password:""};const c=function Xse(n=(0,_r.getApp)()){return n=(0,w.m9)(n),(0,_r._getProvider)(n,uj).getImmediate()}((0,_r.initializeApp)({apiKey:"AIzaSyCJUmfuu19-AkOZA_4mvaWmllg096x_Yzg",authDomain:"appdemo-ec320.firebaseapp.com",databaseURL:"https://appdemo-ec320-default-rtdb.firebaseio.com",projectId:"appdemo-ec320",storageBucket:"appdemo-ec320.appspot.com",messagingSenderId:"294823504350",appId:"1:294823504350:web:c9087505ddb56824b0154f",measurementId:"G-N8XC0CF3WP"}));c.settings.minimumFetchIntervalMillis=36e5,function yoe(n){return DD.apply(this,arguments)}(c).then(()=>{console.warn("entro aqui");const h=function s_(n,e){const t=(0,w.m9)(n);t._isInitializationComplete||t._logger.debug(`A value was requested for key "${e}" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.`);const r=t._storageCache.getActiveConfig();return r&&void 0!==r[e]?new CD("remote",r[e]):t.defaultConfig&&void 0!==t.defaultConfig[e]?new CD("default",String(t.defaultConfig[e])):(t._logger.debug(`Returning static value for key "${e}". Define a default or remote value if this is unintentional.`),new CD("static"))}(c,"prueba1");console.log(h.asString())}).catch(h=>{console.error("Error al recuperar la configuraci\xf3n remota",h)})}ngOnInit(){this.gaService.pageView("/login","P\xe1gina de Inicio"),this.someFunction()}agregarUsuario(){this.gaService.event("button_click","user_interaction","clicked_button"),""!==this.usuario.usuario.trim()&&""!==this.usuario.password.trim()&&(this.firestoreDataService.agregarUsuario("usuarios",this.usuario).then(()=>{console.log("Usuario agregado con \xe9xito"),this.usuario={usuario:"",password:""}}).catch(t=>{console.error("Error al agregar usuario: ",t)}),this.router.navigate(["/menu"]))}someFunction(){var t=this;return(0,z.Z)(function*(){const r=yield t.perf.trace("inicio");r.start(),yield t.agregarUsuario(),r.stop()})()}static#e=this.\u0275fac=function(r){return new(r||n)(H(Qde),H(zr),H(vf),H(sc),H(WM))};static#t=this.\u0275cmp=Hr({type:n,selectors:[["app-login"]],decls:14,vars:2,consts:[[1,"centrado"],[1,"contenido-con-margen"],[1,"example-full-width"],["matInput","","placeholder","","value","",3,"ngModel","ngModelChange"],["type","password","matInput","","placeholder","","value","",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary",2,"padding","10px",3,"click"]],template:function(r,i){1&r&&(ct(0,"div",0)(1,"h1"),Yn(2,"Registrar"),tt(),ct(3,"mat-card",1)(4,"mat-form-field",2)(5,"mat-label"),Yn(6,"Usuario"),tt(),ct(7,"input",3),Ar("ngModelChange",function(o){return i.usuario.usuario=o}),tt()(),ct(8,"mat-form-field",2)(9,"mat-label"),Yn(10,"Contrase\xf1a"),tt(),ct(11,"input",4),Ar("ngModelChange",function(o){return i.usuario.password=o}),tt()(),ct(12,"button",5),Ar("click",function(){return i.agregarUsuario()}),Yn(13,"Registrar"),tt()()()),2&r&&(sr(7),cn("ngModel",i.usuario.usuario),sr(4),cn("ngModel",i.usuario.password))},dependencies:[Qw,Bq,oP,b3,Jfe,Kfe,fP,T0],styles:[".centrado[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;margin:10px}h1[_ngcontent-%COMP%]{margin-bottom:20px}.contenido-con-margen[_ngcontent-%COMP%]{width:25%;margin:10px;padding:30px}"]})}return n})()},{path:"menu",component:Nse},{path:"ahorro",component:$se},{path:"transferencia",component:qse},{path:"movimiento",component:zse}];let npe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=jt({type:n});static#n=this.\u0275inj=Ot({imports:[nB.forRoot(tpe),nB]})}return n})(),rpe=(()=>{class n{constructor(){this.title="webfirebase"}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Hr({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(r,i){1&r&&li(0,"router-outlet")},dependencies:[eD]})}return n})();function L3(n){return new S(3e3,!1)}function Pc(n){switch(n.length){case 0:return new Ey;case 1:return n[0];default:return new T3(n)}}function V3(n,e,t=new Map,r=new Map){const i=[],s=[];let o=-1,a=null;if(e.forEach(l=>{const c=l.get("offset"),h=c==o,p=h&&a||new Map;l.forEach((g,_)=>{let v=_,E=g;if("offset"!==_)switch(v=n.normalizePropertyName(v,i),E){case"!":E=t.get(_);break;case _l:E=r.get(_);break;default:E=n.normalizeStyleValue(_,v,E,i)}p.set(v,E)}),h||s.push(p),a=p,o=c}),i.length)throw function xpe(n){return new S(3502,!1)}();return s}function pP(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&mP(t,"start",n)));break;case"done":n.onDone(()=>r(t&&mP(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&mP(t,"destroy",n)))}}function mP(n,e,t){const s=gP(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function gP(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function Vs(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function U3(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const Vpe=(()=>typeof document>"u"?null:document.documentElement)();function _P(n){const e=n.parentNode||n.host||null;return e===Vpe?null:e}let _d=null,B3=!1;function j3(n,e){for(;e;){if(e===n)return!0;e=_P(e)}return!1}function H3(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]}let $3=(()=>{class n{validateStyleProperty(t){return function Bpe(n){_d||(_d=function jpe(){return typeof document<"u"?document.body:null}()||{},B3=!!_d.style&&"WebkitAppearance"in _d.style);let e=!0;return _d.style&&!function Upe(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in _d.style,!e&&B3&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in _d.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return j3(t,r)}getParentElement(t){return _P(t)}query(t,r,i){return H3(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],l){return new Ey(i,s)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac})}return n})(),yP=(()=>{class n{static#e=this.NOOP=new $3}return n})();const Hpe=1e3,vP="ng-enter",dI="ng-leave",hI="ng-trigger",fI=".ng-trigger",q3="ng-animating",bP=".ng-animating";function yl(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:EP(parseFloat(e[1]),e[2])}function EP(n,e){return"s"===e?n*Hpe:n}function pI(n,e,t){return n.hasOwnProperty("duration")?n:function zpe(n,e,t){let i,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(L3()),{duration:0,delay:0,easing:""};i=EP(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=EP(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else i=n;if(!t){let a=!1,l=e.length;i<0&&(e.push(function ipe(){return new S(3100,!1)}()),a=!0),s<0&&(e.push(function spe(){return new S(3101,!1)}()),a=!0),a&&e.splice(l,0,L3())}return{duration:i,delay:s,easing:o}}(n,e,t)}function wy(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function G3(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Nc(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function Ea(n,e,t){e.forEach((r,i)=>{const s=IP(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function yd(n,e){e.forEach((t,r)=>{const i=IP(r);n.style[i]=""})}function Iy(n){return Array.isArray(n)?1==n.length?n[0]:I3(n):n}const wP=new RegExp("{{\\s*(.+?)\\s*}}","g");function K3(n){let e=[];if("string"==typeof n){let t;for(;t=wP.exec(n);)e.push(t[1]);wP.lastIndex=0}return e}function Ty(n,e,t){const r=n.toString(),i=r.replace(wP,(s,o)=>{let a=e[o];return null==a&&(t.push(function ape(n){return new S(3003,!1)}()),a=""),a.toString()});return i==r?n:i}function mI(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Wpe=/-+([a-z0-9])/g;function IP(n){return n.replace(Wpe,(...e)=>e[1].toUpperCase())}function Us(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function lpe(n){return new S(3004,!1)}()}}function Z3(n,e){return window.getComputedStyle(n)[e]}const gI="*";function Qpe(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function Ype(n,e,t){if(":"==n[0]){const l=function Xpe(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function wpe(n){return new S(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function Epe(n){return new S(3015,!1)}()),e;const i=r[1],s=r[2],o=r[3];e.push(Q3(i,o));"<"==s[0]&&!(i==gI&&o==gI)&&e.push(Q3(o,i))}(r,t,e)):t.push(n),t}const _I=new Set(["true","1"]),yI=new Set(["false","0"]);function Q3(n,e){const t=_I.has(n)||yI.has(n),r=_I.has(e)||yI.has(e);return(i,s)=>{let o=n==gI||n==i,a=e==gI||e==s;return!o&&t&&"boolean"==typeof i&&(o=i?_I.has(n):yI.has(n)),!a&&r&&"boolean"==typeof s&&(a=s?_I.has(e):yI.has(e)),o&&a}}const Jpe=new RegExp("s*:selfs*,?","g");function TP(n,e,t,r){return new eme(n).build(e,t,r)}class eme{constructor(e){this._driver=e}build(e,t,r){const i=new rme(t);return this._resetContextStyleTimingState(i),Us(this,Iy(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function upe(){return new S(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(h=>{l.name=h,s.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);r+=l.queryCount,i+=l.depCount,o.push(l)}else t.errors.push(function dpe(){return new S(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{K3(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&(mI(s.values()),t.errors.push(function hpe(n,e){return new S(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Us(this,Iy(e.animation),t);return{type:1,matchers:Qpe(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:vd(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Us(this,r,t)),options:vd(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(o=>{t.currentTime=r;const a=Us(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:3,steps:s,options:vd(e.options)}}visitAnimate(e,t){const r=function sme(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return CP(pI(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=CP(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=pI(t,e);return CP(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:cI({});if(5==s.type)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};r.easing&&(c.easing=r.easing),o=cI(c)}t.currentTime+=r.duration+r.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,i=l}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)"string"==typeof a?a===_l?r.push(a):t.errors.push(new S(3002,!1)):r.push(G3(a));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=t.collectedStyles.get(t.currentQuerySelector),h=c.get(l);let p=!0;h&&(s!=i&&s>=h.startTime&&i<=h.endTime&&(t.errors.push(function ppe(n,e,t,r,i){return new S(3010,!1)}()),p=!1),s=h.startTime),p&&c.set(l,{startTime:s,endTime:i}),t.options&&function Gpe(n,e,t){const r=e.params||{},i=K3(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function ope(n){return new S(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function mpe(){return new S(3011,!1)}()),r;let s=0;const o=[];let a=!1,l=!1,c=0;const h=e.steps.map(P=>{const D=this._makeStyleAst(P,t);let k=null!=D.offset?D.offset:function ime(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(D.styles),G=0;return null!=k&&(s++,G=D.offset=k),l=l||G<0||G>1,a=a||G<c,c=G,o.push(G),D});l&&t.errors.push(function gpe(){return new S(3012,!1)}()),a&&t.errors.push(function _pe(){return new S(3200,!1)}());const p=e.steps.length;let g=0;s>0&&s<p?t.errors.push(function ype(){return new S(3202,!1)}()):0==s&&(g=1/(p-1));const _=p-1,v=t.currentTime,E=t.currentAnimateTimings,T=E.duration;return h.forEach((P,D)=>{const k=g>0?D==_?1:g*D:o[D],G=k*T;t.currentTime=v+E.delay+G,E.duration=G,this._validateStyleAst(P,t),P.offset=k,r.styles.push(P)}),r}visitReference(e,t){return{type:8,animation:Us(this,Iy(e.animation),t),options:vd(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:vd(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:vd(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function tme(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Jpe,"")),n=n.replace(/@\*/g,fI).replace(/@\w+/g,t=>fI+"-"+t.slice(1)).replace(/:animating/g,bP),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,Vs(t.collectedStyles,t.currentQuerySelector,new Map);const a=Us(this,Iy(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:vd(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function vpe(){return new S(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:pI(e.timings,t.errors,!0);return{type:12,animation:Us(this,Iy(e.animation),t),timings:r,options:null}}}class rme{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function vd(n){return n?(n=wy(n)).params&&(n.params=function nme(n){return n?wy(n):null}(n.params)):n={},n}function CP(n,e,t){return{duration:n,delay:e,easing:t}}function xP(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class vI{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const lme=new RegExp(":enter","g"),ume=new RegExp(":leave","g");function AP(n,e,t,r,i,s=new Map,o=new Map,a,l,c=[]){return(new dme).buildKeyframes(n,e,t,r,i,s,o,a,l,c)}class dme{buildKeyframes(e,t,r,i,s,o,a,l,c,h=[]){c=c||new vI;const p=new DP(e,t,c,i,s,h,[]);p.options=l;const g=l.delay?yl(l.delay):0;p.currentTimeline.delayNextStep(g),p.currentTimeline.setStyles([o],null,p.errors,l),Us(this,r,p);const _=p.timelines.filter(v=>v.containsAnimation());if(_.length&&a.size){let v;for(let E=_.length-1;E>=0;E--){const T=_[E];if(T.element===t){v=T;break}}v&&!v.allowOnlyTimelineStyles()&&v.setStyles([a],null,p.errors,l)}return _.length?_.map(v=>v.buildKeyframes()):[xP(t,[],[],[],0,g,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const o="number"==typeof s?s:yl(Ty(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const o=null!=r.duration?yl(r.duration):null,a=null!=r.delay?yl(r.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Us(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=bI);const o=yl(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Us(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?yl(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),Us(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return pI(t.params?Ty(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?yl(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=bI);let o=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,h)=>{t.currentQueryIndex=h;const p=t.createSubContext(e.options,c);s&&p.delayNextStep(s),c===t.element&&(l=p.currentTimeline),Us(this,e.animation,p),p.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,p.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime}const h=t.currentTimeline;l&&h.delayNextStep(l);const p=h.currentTime;Us(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-p+(i.startTime-r.currentTimeline.startTime)}}const bI={};class DP{constructor(e,t,r,i,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=bI,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new EI(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=yl(r.duration)),null!=r.delay&&(i.delay=yl(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Ty(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new DP(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=bI,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new hme(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(lme,"."+this._enterClassName)).replace(ume,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=r);0!==r&&(c=r<0?c.slice(c.length+r,c.length):c.slice(0,r)),a.push(...c)}return!s&&0==a.length&&o.push(function bpe(n){return new S(3014,!1)}()),a}}class EI{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new EI(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||_l),this._currentKeyframe.set(t,_l);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},o=function fme(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,_l)}else Nc(i,t)}),t}(e,this._globalTimelineStyles);for(let[a,l]of o){const c=Ty(l,s,r);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??_l),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,l)=>{const c=Nc(a,new Map,this._backFill);c.forEach((h,p)=>{"!"===h?e.add(p):h===_l&&t.add(p)}),r||c.set("offset",l/this.duration),i.push(c)});const s=e.size?mI(e.values()):[],o=t.size?mI(t.values()):[];if(r){const a=i[0],l=new Map(a);a.set("offset",0),l.set("offset",1),i=[a,l]}return xP(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class hme extends EI{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=r+t,a=t/o,l=Nc(e[0]);l.set("offset",0),s.push(l);const c=Nc(e[0]);c.set("offset",J3(a)),s.push(c);const h=e.length-1;for(let p=1;p<=h;p++){let g=Nc(e[p]);const _=g.get("offset");g.set("offset",J3((t+_*r)/o)),s.push(g)}r=o,t=0,i="",e=s}return xP(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function J3(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class SP{}const pme=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class mme extends SP{normalizePropertyName(e,t){return IP(e)}normalizeStyleValue(e,t,r,i){let s="";const o=r.toString().trim();if(pme.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function cpe(n,e){return new S(3005,!1)}())}return o+s}}function eG(n,e,t,r,i,s,o,a,l,c,h,p,g){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:h,totalTime:p,errors:g}}const RP={};class tG{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function gme(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,l,c,h){const p=[],g=this.ast.options&&this.ast.options.params||RP,v=this.buildStyles(r,a&&a.params||RP,p),E=l&&l.params||RP,T=this.buildStyles(i,E,p),P=new Set,D=new Map,k=new Map,G="void"===i,ce={params:_me(E,g),delay:this.ast.options?.delay},De=h?[]:AP(e,t,this.ast.animation,s,o,v,T,ce,c,p);let ze=0;if(De.forEach(Ur=>{ze=Math.max(Ur.duration+Ur.delay,ze)}),p.length)return eG(t,this._triggerName,r,i,G,v,T,[],[],D,k,ze,p);De.forEach(Ur=>{const ws=Ur.element,fT=Vs(D,ws,new Set);Ur.preStyleProps.forEach(Pd=>fT.add(Pd));const sv=Vs(k,ws,new Set);Ur.postStyleProps.forEach(Pd=>sv.add(Pd)),ws!==t&&P.add(ws)});const Pt=mI(P.values());return eG(t,this._triggerName,r,i,G,v,T,De,Pt,D,k,ze)}}function _me(n,e){const t=wy(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class yme{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=wy(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(i[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=Ty(o,i,t));const l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),r.set(a,o)})}),r}}class bme{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new yme(i.style,i.options&&i.options.params||{},r))}),nG(this.states,"true","1"),nG(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new tG(e,i,this.states))}),this.fallbackTransition=function Eme(n,e,t){return new tG(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function nG(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const wme=new vI;class Ime{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=TP(this._driver,t,r,[]);if(r.length)throw function Ape(n){return new S(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=V3(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=AP(this._driver,t,s,vP,dI,new Map,new Map,r,wme,i),o.forEach(h=>{const p=Vs(a,h.element,new Map);h.postStyleProps.forEach(g=>p.set(g,null))})):(i.push(function Dpe(){return new S(3300,!1)}()),o=[]),i.length)throw function Spe(n){return new S(3504,!1)}();a.forEach((h,p)=>{h.forEach((g,_)=>{h.set(_,this._driver.computeStyle(p,_,_l))})});const c=Pc(o.map(h=>{const p=a.get(h.element);return this._buildPlayer(h,new Map,p)}));return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function Rpe(n){return new S(3301,!1)}();return t}listen(e,t,r,i){const s=gP(t,"","","");return pP(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const rG="ng-animate-queued",MP="ng-animate-disabled",Dme=[],iG={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Sme={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Fo="__ng_removed";class PP{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function Nme(n){return n??null}(r?e.value:e),r){const s=wy(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Cy="void",NP=new PP(Cy);class Rme{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,fo(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function Mpe(n,e){return new S(3302,!1)}();if(null==r||0==r.length)throw function Ppe(n){return new S(3303,!1)}();if(!function kme(n){return"start"==n||"done"==n}(r))throw function Npe(n,e){return new S(3400,!1)}();const s=Vs(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);const a=Vs(this._engine.statesByElement,e,new Map);return a.has(t)||(fo(e,hI),fo(e,hI+"-"+t),a.set(t,NP)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function kpe(n){return new S(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),o=new kP(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(fo(e,hI),fo(e,hI+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const c=new PP(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=NP),c.value!==Cy&&l.value===c.value){if(!function Lme(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(l.params,c.params)){const E=[],T=s.matchStyles(l.value,l.params,E),P=s.matchStyles(c.value,c.params,E);E.length?this._engine.reportError(E):this._engine.afterFlush(()=>{yd(e,T),Ea(e,P)})}return}const g=Vs(this._engine.playersByElement,e,[]);g.forEach(E=>{E.namespaceId==this.id&&E.triggerName==t&&E.queued&&E.destroy()});let _=s.matchTransition(l.value,c.value,e,c.params),v=!1;if(!_){if(!i)return;_=s.fallbackTransition,v=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:_,fromState:l,toState:c,player:o,isFallbackTransition:v}),v||(fo(e,rG),o.onStart(()=>{yp(e,rG)})),o.onDone(()=>{let E=this.players.indexOf(o);E>=0&&this.players.splice(E,1);const T=this._engine.playersByElement.get(e);if(T){let P=T.indexOf(o);P>=0&&T.splice(P,1)}}),this.players.push(o),g.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,fI,!0);r.forEach(i=>{if(i[Fo])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const h=this.trigger(e,c,Cy,i);h&&a.push(h)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&Pc(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const l=this._triggers.get(o).fallbackTransition,c=r.get(o)||NP,h=new PP(Cy),p=new kP(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:h,player:p,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Fo];(!s||s===iG)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){fo(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const l=gP(s,r.triggerName,r.fromState.value,r.toState.value);l._data=e,pP(r.player,a.phase,l,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class Mme{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new Rme(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const l=i.get(a);if(l){const c=r.indexOf(l);r.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(wI(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!wI(t))return;const s=t[Fo];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),fo(e,MP)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),yp(e,MP))}removeNode(e,t,r){if(wI(t)){const i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[Fo]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return wI(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,fI,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,bP,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Pc(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Fo];if(t&&t.setForRemoval){if(e[Fo]=iG,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(MP)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)fo(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Pc(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function Ope(n){return new S(3402,!1)}()}_flushAnimations(e,t){const r=new vI,i=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,h=new Set;this.disabledNodes.forEach(Me=>{h.add(Me);const $e=this.driver.query(Me,".ng-animate-queued",!0);for(let Qe=0;Qe<$e.length;Qe++)h.add($e[Qe])});const p=this.bodyNode,g=Array.from(this.statesByElement.keys()),_=aG(g,this.collectedEnterElements),v=new Map;let E=0;_.forEach((Me,$e)=>{const Qe=vP+E++;v.set($e,Qe),Me.forEach(Ut=>fo(Ut,Qe))});const T=[],P=new Set,D=new Set;for(let Me=0;Me<this.collectedLeaveElements.length;Me++){const $e=this.collectedLeaveElements[Me],Qe=$e[Fo];Qe&&Qe.setForRemoval&&(T.push($e),P.add($e),Qe.hasAnimation?this.driver.query($e,".ng-star-inserted",!0).forEach(Ut=>P.add(Ut)):D.add($e))}const k=new Map,G=aG(g,Array.from(P));G.forEach((Me,$e)=>{const Qe=dI+E++;k.set($e,Qe),Me.forEach(Ut=>fo(Ut,Qe))}),e.push(()=>{_.forEach((Me,$e)=>{const Qe=v.get($e);Me.forEach(Ut=>yp(Ut,Qe))}),G.forEach((Me,$e)=>{const Qe=k.get($e);Me.forEach(Ut=>yp(Ut,Qe))}),T.forEach(Me=>{this.processLeaveNode(Me)})});const ce=[],De=[];for(let Me=this._namespaceList.length-1;Me>=0;Me--)this._namespaceList[Me].drainQueuedTransitions(t).forEach(Qe=>{const Ut=Qe.player,Xr=Qe.element;if(ce.push(Ut),this.collectedEnterElements.length){const Fi=Xr[Fo];if(Fi&&Fi.setForMove){if(Fi.previousTriggersValues&&Fi.previousTriggersValues.has(Qe.triggerName)){const Nd=Fi.previousTriggersValues.get(Qe.triggerName),_o=this.statesByElement.get(Qe.element);if(_o&&_o.has(Qe.triggerName)){const pT=_o.get(Qe.triggerName);pT.value=Nd,_o.set(Qe.triggerName,pT)}}return void Ut.destroy()}}const Sa=!p||!this.driver.containsElement(p,Xr),$s=k.get(Xr),qc=v.get(Xr),er=this._buildInstruction(Qe,r,qc,$s,Sa);if(er.errors&&er.errors.length)return void De.push(er);if(Sa)return Ut.onStart(()=>yd(Xr,er.fromStyles)),Ut.onDestroy(()=>Ea(Xr,er.toStyles)),void i.push(Ut);if(Qe.isFallbackTransition)return Ut.onStart(()=>yd(Xr,er.fromStyles)),Ut.onDestroy(()=>Ea(Xr,er.toStyles)),void i.push(Ut);const b6=[];er.timelines.forEach(Fi=>{Fi.stretchStartingKeyframe=!0,this.disabledNodes.has(Fi.element)||b6.push(Fi)}),er.timelines=b6,r.append(Xr,er.timelines),o.push({instruction:er,player:Ut,element:Xr}),er.queriedElements.forEach(Fi=>Vs(a,Fi,[]).push(Ut)),er.preStyleProps.forEach((Fi,Nd)=>{if(Fi.size){let _o=l.get(Nd);_o||l.set(Nd,_o=new Set),Fi.forEach((pT,sk)=>_o.add(sk))}}),er.postStyleProps.forEach((Fi,Nd)=>{let _o=c.get(Nd);_o||c.set(Nd,_o=new Set),Fi.forEach((pT,sk)=>_o.add(sk))})});if(De.length){const Me=[];De.forEach($e=>{Me.push(function Fpe(n,e){return new S(3505,!1)}())}),ce.forEach($e=>$e.destroy()),this.reportError(Me)}const ze=new Map,Pt=new Map;o.forEach(Me=>{const $e=Me.element;r.has($e)&&(Pt.set($e,$e),this._beforeAnimationBuild(Me.player.namespaceId,Me.instruction,ze))}),i.forEach(Me=>{const $e=Me.element;this._getPreviousPlayers($e,!1,Me.namespaceId,Me.triggerName,null).forEach(Ut=>{Vs(ze,$e,[]).push(Ut),Ut.destroy()})});const Ur=T.filter(Me=>cG(Me,l,c)),ws=new Map;oG(ws,this.driver,D,c,_l).forEach(Me=>{cG(Me,l,c)&&Ur.push(Me)});const sv=new Map;_.forEach((Me,$e)=>{oG(sv,this.driver,new Set(Me),l,"!")}),Ur.forEach(Me=>{const $e=ws.get(Me),Qe=sv.get(Me);ws.set(Me,new Map([...$e?.entries()??[],...Qe?.entries()??[]]))});const Pd=[],y6=[],v6={};o.forEach(Me=>{const{element:$e,player:Qe,instruction:Ut}=Me;if(r.has($e)){if(h.has($e))return Qe.onDestroy(()=>Ea($e,Ut.toStyles)),Qe.disabled=!0,Qe.overrideTotalTime(Ut.totalTime),void i.push(Qe);let Xr=v6;if(Pt.size>1){let $s=$e;const qc=[];for(;$s=$s.parentNode;){const er=Pt.get($s);if(er){Xr=er;break}qc.push($s)}qc.forEach(er=>Pt.set(er,Xr))}const Sa=this._buildAnimation(Qe.namespaceId,Ut,ze,s,sv,ws);if(Qe.setRealPlayer(Sa),Xr===v6)Pd.push(Qe);else{const $s=this.playersByElement.get(Xr);$s&&$s.length&&(Qe.parentPlayer=Pc($s)),i.push(Qe)}}else yd($e,Ut.fromStyles),Qe.onDestroy(()=>Ea($e,Ut.toStyles)),y6.push(Qe),h.has($e)&&i.push(Qe)}),y6.forEach(Me=>{const $e=s.get(Me.element);if($e&&$e.length){const Qe=Pc($e);Me.setRealPlayer(Qe)}}),i.forEach(Me=>{Me.parentPlayer?Me.syncPlayerEvents(Me.parentPlayer):Me.destroy()});for(let Me=0;Me<T.length;Me++){const $e=T[Me],Qe=$e[Fo];if(yp($e,dI),Qe&&Qe.hasAnimation)continue;let Ut=[];if(a.size){let Sa=a.get($e);Sa&&Sa.length&&Ut.push(...Sa);let $s=this.driver.query($e,bP,!0);for(let qc=0;qc<$s.length;qc++){let er=a.get($s[qc]);er&&er.length&&Ut.push(...er)}}const Xr=Ut.filter(Sa=>!Sa.destroyed);Xr.length?Ome(this,$e,Xr):this.processLeaveNode($e)}return T.length=0,Pd.forEach(Me=>{this.players.push(Me),Me.onDone(()=>{Me.destroy();const $e=this.players.indexOf(Me);this.players.splice($e,1)}),Me.play()}),Pd}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==Cy;a.forEach(c=>{c.queued||!l&&c.triggerName!=i||o.push(c)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,h=c!==s,p=Vs(r,c,[]);this._getPreviousPlayers(c,h,o,a,t.toState).forEach(_=>{const v=_.getRealPlayer();v.beforeDestroy&&v.beforeDestroy(),_.destroy(),p.push(_)})}yd(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){const a=t.triggerName,l=t.element,c=[],h=new Set,p=new Set,g=t.timelines.map(v=>{const E=v.element;h.add(E);const T=E[Fo];if(T&&T.removedBeforeQueried)return new Ey(v.duration,v.delay);const P=E!==l,D=function Fme(n){const e=[];return lG(n,e),e}((r.get(E)||Dme).map(ze=>ze.getRealPlayer())).filter(ze=>!!ze.element&&ze.element===E),k=s.get(E),G=o.get(E),ce=V3(this._normalizer,v.keyframes,k,G),De=this._buildPlayer(v,ce,D);if(v.subTimeline&&i&&p.add(E),P){const ze=new kP(e,a,E);ze.setRealPlayer(De),c.push(ze)}return De});c.forEach(v=>{Vs(this.playersByQueriedElement,v.element,[]).push(v),v.onDone(()=>function Pme(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,v.element,v))}),h.forEach(v=>fo(v,q3));const _=Pc(g);return _.onDestroy(()=>{h.forEach(v=>yp(v,q3)),Ea(l,t.toStyles)}),p.forEach(v=>{Vs(i,v,[]).push(_)}),_}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Ey(e.duration,e.delay)}}class kP{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Ey,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>pP(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Vs(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function wI(n){return n&&1===n.nodeType}function sG(n,e){const t=n.style.display;return n.style.display=e??"none",t}function oG(n,e,t,r,i){const s=[];t.forEach(l=>s.push(sG(l)));const o=[];r.forEach((l,c)=>{const h=new Map;l.forEach(p=>{const g=e.computeStyle(c,p,i);h.set(p,g),(!g||0==g.length)&&(c[Fo]=Sme,o.push(c))}),n.set(c,h)});let a=0;return t.forEach(l=>sG(l,s[a++])),o}function aG(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:i.has(c)?1:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}function fo(n,e){n.classList?.add(e)}function yp(n,e){n.classList?.remove(e)}function Ome(n,e,t){Pc(t).onDone(()=>n.processLeaveNode(e))}function lG(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof T3?lG(r.players,e):e.push(r)}}function cG(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class II{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new Mme(e,t,r),this._timelineEngine=new Ime(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const o=e+"-"+i;let a=this._triggerCache[o];if(!a){const l=[],h=TP(this._driver,s,l,[]);if(l.length)throw function Cpe(n,e){return new S(3404,!1)}();a=function vme(n,e,t){return new bme(n,e,t)}(i,h,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,o]=U3(r);this._timelineEngine.command(s,t,o,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[o,a]=U3(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let Ume=(()=>{class n{static#e=this.initialStylesByElement=new WeakMap;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Ea(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ea(this._element,this._initialStyles),this._endStyles&&(Ea(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(yd(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(yd(this._element,this._endStyles),this._endStyles=null),Ea(this._element,this._initialStyles),this._state=3)}}return n})();function OP(n){let e=null;return n.forEach((t,r)=>{(function Bme(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class uG{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:Z3(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class jme{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return j3(e,t)}getParentElement(e){return _P(e)}query(e,t,r){return H3(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,o=[]){const l={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(l.easing=s);const c=new Map,h=o.filter(_=>_ instanceof uG);(function Kpe(n,e){return 0===n||0===e})(r,i)&&h.forEach(_=>{_.currentSnapshot.forEach((v,E)=>c.set(E,v))});let p=function qpe(n){return n.length?n[0]instanceof Map?n:n.map(e=>G3(e)):[]}(t).map(_=>Nc(_));p=function Zpe(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,Z3(n,a)))}}return e}(e,p,c);const g=function Vme(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=OP(e[0]),e.length>1&&(r=OP(e[e.length-1]))):e instanceof Map&&(t=OP(e)),t||r?new Ume(n,t,r):null}(e,p);return new uG(e,p,l,g)}}let Hme=(()=>{class n extends w3{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:ir.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?I3(t):t;return dG(this._renderer,null,r,"register",[i]),new $me(r,this._renderer)}static#e=this.\u0275fac=function(r){return new(r||n)(B(sg),B(nn))};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac})}return n})();class $me extends afe{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new zme(this._id,e,t||{},this._renderer)}}class zme{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return dG(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function dG(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const hG="@.disabled";let qme=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,r.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let h=this._rendererCache.get(s);return h||(h=new fG("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,h)),h}const o=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=h=>{Array.isArray(h)?h.forEach(l):this.engine.registerTrigger(o,a,t,h.name,h)};return r.data.animation.forEach(l),new Gme(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(r){return new(r||n)(B(sg),B(II),B(Xe))};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac})}return n})();class fG{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==hG?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Gme extends fG{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==hG?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function Wme(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function Kme(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}let Zme=(()=>{class n extends II{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(r){return new(r||n)(B(nn),B(yP),B(SP),B(Jl))};static#t=this.\u0275prov=pe({token:n,factory:n.\u0275fac})}return n})();const pG=[{provide:w3,useClass:Hme},{provide:SP,useFactory:function Qme(){return new mme}},{provide:II,useClass:Zme},{provide:sg,useFactory:function Yme(n,e,t){return new qme(n,e,t)},deps:[OA,II,Xe]}],FP=[{provide:yP,useFactory:()=>new jme},{provide:Oh,useValue:"BrowserAnimations"},...pG],mG=[{provide:yP,useClass:$3},{provide:Oh,useValue:"NoopAnimations"},...pG];let Xme=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?mG:FP}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=jt({type:n});static#n=this.\u0275inj=Ot({providers:FP,imports:[$2]})}return n})();const Jme_firebase={apiKey:"AIzaSyCJUmfuu19-AkOZA_4mvaWmllg096x_Yzg",authDomain:"appdemo-ec320.firebaseapp.com",databaseURL:"https://appdemo-ec320-default-rtdb.firebaseio.com",projectId:"appdemo-ec320",storageBucket:"appdemo-ec320.appspot.com",messagingSenderId:"294823504350",appId:"1:294823504350:web:c9087505ddb56824b0154f",measurementId:"G-N8XC0CF3WP"},gG="firebasestorage.googleapis.com",_G="storageBucket";class Xn extends w.ZR{constructor(e,t,r=0){super(LP(e),`Firebase Storage: ${t} (${LP(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Xn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return LP(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Bn=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Bn||{});function LP(n){return"storage/"+n}function VP(){return new Xn(Bn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function yG(){return new Xn(Bn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function vG(){return new Xn(Bn.CANCELED,"User canceled the upload/download.")}function bG(){return new Xn(Bn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function vp(n){return new Xn(Bn.INVALID_ARGUMENT,n)}function EG(){return new Xn(Bn.APP_DELETED,"The Firebase app was deleted.")}function wG(n){return new Xn(Bn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function xy(n,e){return new Xn(Bn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Ay(n){throw new Xn(Bn.INTERNAL_ERROR,"Internal error: "+n)}class ki{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ki.makeFromUrl(e,t)}catch{return new ki(e,"")}if(""===r.path)return r;throw function cge(n){return new Xn(Bn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+i+"(/(.*))?$","i");function c(G){G.path_=decodeURIComponent(G.path)}const p=t.replace(/[.]/g,"\\."),k=[{regex:a,indices:{bucket:1,path:3},postModify:function s(G){"/"===G.path.charAt(G.path.length-1)&&(G.path_=G.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${p}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:c},{regex:new RegExp(`^https?://${t===gG?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:c}];for(let G=0;G<k.length;G++){const ce=k[G],De=ce.regex.exec(e);if(De){let Pt=De[ce.indices.path];Pt||(Pt=""),r=new ki(De[ce.indices.bucket],Pt),ce.postModify(r);break}}if(null==r)throw function lge(n){return new Xn(Bn.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class pge{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function CI(n){return"string"==typeof n||n instanceof String}function IG(n){return UP()&&n instanceof Blob}function UP(){return typeof Blob<"u"}function BP(n,e,t,r){if(r<e)throw vp(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw vp(`Invalid value for '${n}'. Expected ${t} or less.`)}function vl(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function TG(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var bp=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(bp||{});function CG(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}class bge{constructor(e,t,r,i,s,o,a,l,c,h,p,g=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=p,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,v)=>{this.resolve_=_,this.reject_=v,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());!function _ge(n){return void 0!==n}(l)?s():s(l)}catch(l){o(l)}else if(null!==a){const l=VP();l.serverResponse=a.getErrorText(),o(this.errorCallback_?this.errorCallback_(a,l):l)}else o(i.canceled?this.appDelete_?EG():vG():yG())};this.canceled_?t(0,new xI(!1,null,!0)):this.backoffId_=function mge(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function h(...T){c||(c=!0,e.apply(null,T))}function p(T){i=setTimeout(()=>{i=null,n(_,l())},T)}function g(){s&&clearTimeout(s)}function _(T,...P){if(c)return void g();if(T)return g(),void h.call(null,T,...P);if(l()||o)return g(),void h.call(null,T,...P);let k;r<64&&(r*=2),1===a?(a=2,k=0):k=1e3*(r+Math.random()),p(k)}let v=!1;function E(T){v||(v=!0,g(),!c&&(null!==i?(T||(a=2),clearTimeout(i),p(0)):T||(a=1)))}return p(0),s=setTimeout(()=>{o=!0,E(!0)},t),E}((r,i)=>{if(i)return void r(!1,new xI(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===bp.NO_ERROR,l=s.getStatus();if(!a||CG(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===bp.ABORT;return void r(!1,new xI(!1,null,h))}const c=-1!==this.successCodes_.indexOf(l);r(!0,new xI(c,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function gge(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class xI{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Age(...n){const e=function xge(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(UP())return new Blob(n);throw new Xn(Bn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Bs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class jP{constructor(e,t){this.data=e,this.contentType=t||null}}function HP(n,e){switch(n){case Bs.RAW:return new jP(xG(e));case Bs.BASE64:case Bs.BASE64URL:return new jP(AG(n,e));case Bs.DATA_URL:return new jP(function Mge(n){const e=new DG(n);return e.base64?AG(Bs.BASE64,e.rest):function Rge(n){let e;try{e=decodeURIComponent(n)}catch{throw xy(Bs.DATA_URL,"Malformed data URL.")}return xG(e)}(e.rest)}(e),function Pge(n){return new DG(n).contentType}(e))}throw VP()}function xG(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function AG(n,e){switch(n){case Bs.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw xy(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Bs.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw xy(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Sge(n){if(typeof atob>"u")throw function fge(n){return new Xn(Bn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:xy(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class DG{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw xy(Bs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function Nge(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class wa{constructor(e,t){let r=0,i="";IG(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(IG(this.data_)){const i=function Dge(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new wa(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new wa(r,!0)}}static getBlob(...e){if(UP()){const t=e.map(r=>r instanceof wa?r.data_:r);return new wa(Age.apply(null,t))}{const t=e.map(o=>CI(o)?HP(Bs.RAW,o).data:o.data_);let r=0;t.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new wa(i,!0)}}uploadData(){return this.data_}}function $P(n){let e;try{e=JSON.parse(n)}catch{return null}return function vge(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function SG(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Fge(n,e){return e}class ts{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Fge}}let AI=null;function Dy(){if(AI)return AI;const n=[];n.push(new ts("bucket")),n.push(new ts("generation")),n.push(new ts("metageneration")),n.push(new ts("name","fullPath",!0));const t=new ts("name");t.xform=function e(s,o){return function Lge(n){return!CI(n)||n.length<2?n:SG(n)}(o)},n.push(t);const i=new ts("size");return i.xform=function r(s,o){return void 0!==o?Number(o):o},n.push(i),n.push(new ts("timeCreated")),n.push(new ts("updated")),n.push(new ts("md5Hash",null,!0)),n.push(new ts("cacheControl",null,!0)),n.push(new ts("contentDisposition",null,!0)),n.push(new ts("contentEncoding",null,!0)),n.push(new ts("contentLanguage",null,!0)),n.push(new ts("contentType",null,!0)),n.push(new ts("metadata","customMetadata",!0)),AI=n,AI}function RG(n,e,t){const r=$P(e);return null===r?null:function Uge(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const o=t[s];r[o.local]=o.xform(r,e[o.server])}return function Vge(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new ki(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function zP(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const MG="prefixes",PG="items";class Ia{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ta(n){if(!n)throw VP()}function DI(n,e){return function t(r,i){const s=RG(n,i,e);return Ta(null!==s),s}}function Ep(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function oge(){return new Xn(Bn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function sge(){return new Xn(Bn.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function ige(n){return new Xn(Bn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function age(n){return new Xn(Bn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function Sy(n){const e=Ep(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function rge(n){return new Xn(Bn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function NG(n,e,t){const i=vl(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new Ia(i,"GET",DI(n,t),o);return a.errorHandler=Sy(e),a}function qge(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const a=vl(e.bucketOnlyServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new Ia(a,"GET",function $ge(n,e){return function t(r,i){const s=function Hge(n,e,t){const r=$P(t);return null===r?null:function jge(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[MG])for(const i of t[MG]){const s=i.replace(/\/$/,""),o=n._makeStorageReference(new ki(e,s));r.prefixes.push(o)}if(t[PG])for(const i of t[PG]){const s=n._makeStorageReference(new ki(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return Ta(null!==s),s}}(n,e.bucket),c);return h.urlParams=s,h.errorHandler=Ep(e),h}function OG(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function Zge(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class SI{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function qP(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Ta(!1)}return Ta(!!t&&-1!==(e||["active"]).indexOf(t)),t}const Jge={STATE_CHANGED:"state_changed"},ns={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function GP(n){switch(n){case"running":case"pausing":case"canceling":return ns.RUNNING;case"paused":return ns.PAUSED;case"success":return ns.SUCCESS;case"canceled":return ns.CANCELED;default:return ns.ERROR}}class e_e{constructor(e,t,r){if(function yge(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function wp(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let VG=null;class t_e{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=bp.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=bp.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=bp.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Ay("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ay("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ay("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ay("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ay("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class n_e extends t_e{initXhr(){this.xhr_.responseType="text"}}function Lo(){return VG?VG():new n_e}class UG{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Dy(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Bn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(CG(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=yG()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Bn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function Qge(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o=OG(e,r,i),a={name:o.fullPath},l=vl(s,n.host,n._protocol),h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},p=zP(o,t),v=new Ia(l,"POST",function _(E){let T;qP(E);try{T=E.getResponseHeader("X-Goog-Upload-URL")}catch{Ta(!1)}return Ta(CI(T)),T},n.maxUploadRetryTime);return v.urlParams=a,v.headers=h,v.body=p,v.errorHandler=Ep(e),v}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Lo,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function Yge(n,e,t,r){const l=new Ia(t,"POST",function s(c){const h=qP(c,["active","final"]);let p=null;try{p=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ta(!1)}p||Ta(!1);const g=Number(p);return Ta(!isNaN(g)),new SI(g,r.size(),"final"===h)},n.maxUploadRetryTime);return l.headers={"X-Goog-Upload-Command":"query"},l.errorHandler=Ep(e),l}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Lo,t,r);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new SI(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=function Xge(n,e,t,r,i,s,o,a){const l=new SI(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw function dge(){return new Xn(Bn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const c=l.total-l.current;let h=c;i>0&&(h=Math.min(h,i));const p=l.current;let _="";_=0===h?"finalize":c===h?"upload, finalize":"upload";const v={"X-Goog-Upload-Command":_,"X-Goog-Upload-Offset":`${l.current}`},E=r.slice(p,p+h);if(null===E)throw bG();const k=new Ia(t,"POST",function T(G,ce){const De=qP(G,["active","final"]),ze=l.current+h,Pt=r.size();let Ur;return Ur="final"===De?DI(e,s)(G,ce):null,new SI(ze,Pt,"final"===De,Ur)},e.maxUploadRetryTime);return k.headers=v,k.body=E.uploadData(),k.progressCallback=a||null,k.errorHandler=Ep(n),k}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(l){return this._error=l,void this._transition("error")}const a=this._ref.storage._makeRequest(o,Lo,i,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=NG(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Lo,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function FG(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},l=function a(){let k="";for(let G=0;G<2;G++)k+=Math.random().toString().slice(2);return k}();o["Content-Type"]="multipart/related; boundary="+l;const c=OG(e,r,i),h=zP(c,t),_=wa.getBlob("--"+l+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+h+"\r\n--"+l+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",r,"\r\n--"+l+"--");if(null===_)throw bG();const v={name:c.fullPath},E=vl(s,n.host,n._protocol),P=n.maxUploadRetryTime,D=new Ia(E,"POST",DI(n,t),P);return D.urlParams=v,D.headers=o,D.body=_.uploadData(),D.errorHandler=Ep(e),D}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Lo,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=vG(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=GP(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new e_e(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(GP(this._state)){case ns.SUCCESS:wp(this._resolve.bind(null,this.snapshot))();break;case ns.CANCELED:case ns.ERROR:wp(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(GP(this._state)){case ns.RUNNING:case ns.PAUSED:e.next&&wp(e.next.bind(e,this.snapshot))();break;case ns.SUCCESS:e.complete&&wp(e.complete.bind(e))();break;default:e.error&&wp(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class bd{constructor(e,t){this._service=e,this._location=t instanceof ki?t:ki.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new bd(e,t)}get root(){const e=new ki(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return SG(this._location.path)}get storage(){return this._service}get parent(){const e=function kge(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ki(this._location.bucket,e);return new bd(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw wG(e)}}function jG(n,e,t){return WP.apply(this,arguments)}function WP(){return WP=(0,z.Z)(function*(n,e,t){const i=yield HG(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield jG(n,e,i.nextPageToken))}),WP.apply(this,arguments)}function HG(n,e){null!=e&&"number"==typeof e.maxResults&&BP("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=qge(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Lo)}function p_e(n){n._throwIfRoot("getDownloadURL");const e=function Gge(n,e,t){const i=vl(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new Ia(i,"GET",function zge(n,e){return function t(r,i){const s=RG(n,i,e);return Ta(null!==s),function Bge(n,e,t,r){const i=$P(e);if(null===i||!CI(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const p=n.fullPath;return vl("/b/"+o(n.bucket)+"/o/"+o(p),t,r)+TG({alt:"media",token:c})})[0]}(s,i,n.host,n._protocol)}}(n,t),o);return a.errorHandler=Sy(e),a}(n.storage,n._location,Dy());return n.storage.makeRequestWithTokens(e,Lo).then(t=>{if(null===t)throw function hge(){return new Xn(Bn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function $G(n,e){const t=function Oge(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ki(n._location.bucket,t);return new bd(n.storage,r)}function zG(n,e){if(n instanceof KP){const t=n;if(null==t._bucket)throw function uge(){return new Xn(Bn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+_G+"' property when initializing the app?")}();const r=new bd(t,t._bucket);return null!=e?zG(r,e):r}return void 0!==e?$G(n,e):n}function y_e(n,e){if(e&&function g_e(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof KP)return function __e(n,e){return new bd(n,e)}(n,e);throw vp("To use ref(service, url), the first argument must be a Storage instance.")}return zG(n,e)}function qG(n,e){const t=e?.[_G];return null==t?null:ki.makeFromBucketSpec(t,n)}class KP{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=gG,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ki.makeFromBucketSpec(i,this._host):qG(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ki.makeFromBucketSpec(this._url,e):qG(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){BP("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){BP("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,z.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,z.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new bd(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new pge(EG());{const o=function Cge(n,e,t,r,i,s,o=!0){const a=TG(n.urlParams),l=n.url+a,c=Object.assign({},n.headers);return function Ige(n,e){e&&(n["X-Firebase-GMPID"]=e)}(c,e),function Ege(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(c,t),function wge(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(c,s),function Tge(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(c,r),new bge(l,n.method,c,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){var r=this;return(0,z.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const GG="@firebase/storage";function ZG(n,e){return y_e(n=(0,w.m9)(n),e)}function D_e(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new KP(t,r,i,e,_r.SDK_VERSION)}!function S_e(){(0,_r._registerComponent)(new lo.wA("storage",D_e,"PUBLIC").setMultipleInstances(!0)),(0,_r.registerVersion)(GG,"0.12.1",""),(0,_r.registerVersion)(GG,"0.12.1","esm2017")}();class RI{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class YG{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new RI(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new RI(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?o=>t(new RI(o,this,this._ref)):{next:t.next?o=>t.next(new RI(o,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class XG{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new bl(e,this._service))}get items(){return this._delegate.items.map(e=>new bl(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class bl{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function A_e(n,e){return $G(n,e)}(this._delegate,e);return new bl(t,this.storage)}get root(){return new bl(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new bl(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new YG(function b_e(n,e,t){return function c_e(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new UG(n,new wa(e),t)}(n=(0,w.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Bs.RAW,r){this._throwIfRoot("putString");const i=HP(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new YG(new UG(this._delegate,new wa(i.data,!0),s),this)}listAll(){return function T_e(n){return function d_e(n){const e={prefixes:[],items:[]};return jG(n,e).then(()=>e)}(n=(0,w.m9)(n))}(this._delegate).then(e=>new XG(e,this.storage))}list(e){return function I_e(n,e){return HG(n=(0,w.m9)(n),e)}(this._delegate,e||void 0).then(t=>new XG(t,this.storage))}getMetadata(){return function E_e(n){return function h_e(n){n._throwIfRoot("getMetadata");const e=NG(n.storage,n._location,Dy());return n.storage.makeRequestWithTokens(e,Lo)}(n=(0,w.m9)(n))}(this._delegate)}updateMetadata(e){return function w_e(n,e){return function f_e(n,e){n._throwIfRoot("updateMetadata");const t=function Wge(n,e,t,r){const s=vl(e.fullServerUrl(),n.host,n._protocol),a=zP(t,r),c=n.maxOperationRetryTime,h=new Ia(s,"PATCH",DI(n,r),c);return h.headers={"Content-Type":"application/json; charset=utf-8"},h.body=a,h.errorHandler=Sy(e),h}(n.storage,n._location,e,Dy());return n.storage.makeRequestWithTokens(t,Lo)}(n=(0,w.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function C_e(n){return p_e(n=(0,w.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function x_e(n){return function m_e(n){n._throwIfRoot("deleteObject");const e=function Kge(n,e){const r=vl(e.fullServerUrl(),n.host,n._protocol),a=new Ia(r,"DELETE",function o(l,c){},n.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=Sy(e),a}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Lo)}(n=(0,w.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw wG(e)}}class JG{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(e5(e))throw vp("ref() expected a child path but got a URL, use refFromURL instead.");return new bl(ZG(this._delegate,e),this)}refFromURL(e){if(!e5(e))throw vp("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ki.makeFromUrl(e,this._delegate.host)}catch{throw vp("refFromUrl() expected a valid full URL but got an invalid one.")}return new bl(ZG(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function QG(n,e,t,r={}){!function v_e(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,w.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function e5(n){return/^[A-Za-z]+:\/\//.test(n)}function N_e(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new JG(t,r)}function t5(n){const e=function O_e(n){return new at(e=>{const t=o=>e.next(o);t(n.snapshot);const s=n.on("state_changed",t);return n.then(o=>{t(o),e.complete()},o=>{t(n.snapshot),(o=>{e.error(o)})(o)}),function(){s()}}).pipe(bB(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(he(t=>t.bytesTransferred/t.totalBytes*100))}}function MI(n){return{getDownloadURL:()=>Q(void 0).pipe(hB,xt(()=>n.getDownloadURL()),yr),getMetadata:()=>Q(void 0).pipe(hB,xt(()=>n.getMetadata()),yr),delete:()=>M(n.delete()),child:e=>MI(n.child(e)),updateMetadata:e=>M(n.updateMetadata(e)),put:(e,t)=>t5(n.put(e,t)),putString:(e,t,r)=>t5(n.putString(e,t,r)),list:e=>M(n.list(e)),listAll:()=>M(n.listAll())}}!function k_e(n){const e={TaskState:ns,TaskEvent:Jge,StringFormat:Bs,Storage:JG,Reference:bl};n.INTERNAL.registerComponent(new lo.wA("storage-compat",N_e,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.4")}(ms.Z);const F_e=new te("angularfire2.storageBucket"),L_e=new te("angularfire2.storage.maxUploadRetryTime"),V_e=new te("angularfire2.storage.maxOperationRetryTime"),U_e=new te("angularfire2.storage.use-emulator");let B_e=(()=>{class n{storage;constructor(t,r,i,s,o,a,l,c,h,p){const g=Qg(t,o,r);this.storage=Yg(`${g.name}.storage.${i}`,"AngularFireStorage",g.name,()=>{const _=o.runOutsideAngular(()=>g.storage(i||void 0)),v=h;return v&&_.useEmulator(...v),l&&_.setMaxUploadRetryTime(l),c&&_.setMaxOperationRetryTime(c),_},[l,c])}ref(t){return MI(this.storage.ref(t))}refFromURL(t){return MI(this.storage.refFromURL(t))}upload(t,r,i){return MI(this.storage.ref(t)).put(r,i)}static \u0275fac=function(r){return new(r||n)(B(wf),B(If,8),B(F_e,8),B(Ps),B(Xe),B(h0),B(L_e,8),B(V_e,8),B(U_e,8),B(d0,8))};static \u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),j_e=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=jt({type:n});static \u0275inj=Ot({})}return n})(),H_e=(()=>{class n{constructor(){ms.Z.registerVersion("angularfire",Fu.full,"gcs-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=jt({type:n});static \u0275inj=Ot({providers:[B_e],imports:[j_e]})}return n})();const n5="@firebase/database";let ZP="";function QP(n){ZP=n}class q_e{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,w.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,w.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class G_e{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,w.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const i5=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new q_e(e)}}catch{}return new G_e},Ed=i5("localStorage"),YP=i5("sessionStorage"),Ip=new Zi.Yd("@firebase/database"),s5=function(){let n=1;return function(){return n++}}(),o5=function(n){const e=(0,w.dS)(n),t=new w.gQ;t.update(e);const r=t.digest();return w.US.encodeByteArray(r)},Ry=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Ry.apply(null,r):e+="object"==typeof r?(0,w.Wl)(r):r,e+=" "}return e};let wd=null,a5=!0;const l5=function(n,e){(0,w.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Ip.logLevel=Zi.in.VERBOSE,wd=Ip.log.bind(Ip),e&&YP.set("logging_enabled",!0)):"function"==typeof n?wd=n:(wd=null,YP.remove("logging_enabled"))},Qr=function(...n){if(!0===a5&&(a5=!1,null===wd&&!0===YP.get("logging_enabled")&&l5(!0)),wd){const e=Ry.apply(null,n);wd(e)}},My=function(n){return function(...e){Qr(n,...e)}},XP=function(...n){const e="FIREBASE INTERNAL ERROR: "+Ry(...n);Ip.error(e)},Ca=function(...n){const e=`FIREBASE FATAL ERROR: ${Ry(...n)}`;throw Ip.error(e),new Error(e)},Oi=function(...n){const e="FIREBASE WARNING: "+Ry(...n);Ip.warn(e)},PI=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},kc="[MIN_NAME]",El="[MAX_NAME]",Id=function(n,e){if(n===e)return 0;if(n===kc||e===El)return-1;if(e===kc||n===El)return 1;{const t=d5(n),r=d5(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},Z_e=function(n,e){return n===e?0:n<e?-1:1},Py=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,w.Wl)(e))},JP=function(n){if("object"!=typeof n||null===n)return(0,w.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,w.Wl)(e[r]),t+=":",t+=JP(n[e[r]]);return t+="}",t},c5=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Yr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const u5=function(n){(0,w.hu)(!PI(n),"Invalid JSON number");const r=1023;let i,s,o,a,l;0===n?(s=0,o=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(n/Math.pow(2,-1074))));const c=[];for(l=52;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=11;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const h=c.join("");let p="";for(l=0;l<64;l+=8){let g=parseInt(h.substr(l,8),2).toString(16);1===g.length&&(g="0"+g),p+=g}return p.toLowerCase()},J_e=new RegExp("^-?(0*)\\d{1,10}$"),d5=function(n){if(J_e.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Tp=function(n){try{n()}catch(e){setTimeout(()=>{throw Oi("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Ny=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class rye{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Oi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class iye{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Qr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Oi(e)}}let ky=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const g5=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,v5="websocket",b5="long_polling";class tN{constructor(e,t,r,i,s=!1,o="",a=!1,l=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ed.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ed.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function E5(n,e,t){let r;if((0,w.hu)("string"==typeof e,"typeof type must == string"),(0,w.hu)("object"==typeof t,"typeof params must == object"),e===v5)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==b5)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function sye(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Yr(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class oye{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,w.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,w.p$)(this.counters_)}}const nN={},rN={};function iN(n){const e=n.toString();return nN[e]||(nN[e]=new oye),nN[e]}class lye{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Tp(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Oc{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=My(e),this.stats_=iN(t),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),E5(t,b5,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new lye(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,w.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new sN((...s)=>{const[o,a,l,c,h]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=l;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&g5.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Oc.forceAllow_=!0}static forceDisallow(){Oc.forceDisallow_=!0}static isAvailable(){return!((0,w.Yr)()||!Oc.forceAllow_&&(Oc.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,w.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,w.h$)(t),i=c5(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,w.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,w.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class sN{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,w.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=s5(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=sN.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Qr("frame writing exception"),a.stack&&Qr(a.stack),Qr(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Qr("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,w.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Qr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let kI=null;typeof MozWebSocket<"u"?kI=MozWebSocket:typeof WebSocket<"u"&&(kI=WebSocket);let Cp=(()=>{class n{constructor(t,r,i,s,o,a,l){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=My(this.connId),this.stats_=iN(r),this.connURL=n.connectionURL_(r,a,l,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){const a={v:"5"};return!(0,w.Yr)()&&typeof location<"u"&&location.hostname&&g5.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),s&&(a.ac=s),o&&(a.p=o),E5(t,v5,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ed.set("previous_websocket_failure",!0);try{let i;if((0,w.Yr)()){i={headers:{"User-Agent":`Firebase/5/${ZP}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const o=process.env,a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new kI(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==kI&&!n.forceDisallow_}static previouslyFailed(){return Ed.isInMemoryStorage||!0===Ed.get("previous_websocket_failure")}markConnectionHealthy(){Ed.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,w.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,w.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,w.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=c5(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),D5=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Oc,Cp]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Cp&&Cp.isAvailable();let i=r&&!Cp.previouslyFailed();if(t.webSocketOnly&&(r||Oi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Cp];else{const s=this.transports_=[];for(const o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class O5{constructor(e,t,r,i,s,o,a,l,c,h){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=My("c:"+this.id+":"),this.transportManager_=new D5(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ny(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Py("t",e),r=Py("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Py("t",e),r=Py("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Py("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?XP("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):XP("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Oi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Ny(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ny(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ed.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class F5{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class L5{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,w.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,w.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class OI extends L5{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,w.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new OI}getInitialEvent(e){return(0,w.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Xt{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Ht(){return new Xt("")}function vt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Fc(n){return n.pieces_.length-n.pieceNum_}function dn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Xt(n.pieces_,e)}function aN(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Oy(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function B5(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Xt(e,0)}function jn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Xt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Xt(t,0)}function bt(n){return n.pieceNum_>=n.pieces_.length}function rs(n,e){const t=vt(n),r=vt(e);if(null===t)return e;if(t===r)return rs(dn(n),dn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Rye(n,e){const t=Oy(n,0),r=Oy(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=Id(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function lN(n,e){if(Fc(n)!==Fc(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function po(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Fc(n)>Fc(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class Mye{constructor(e,t){this.errorPrefix_=t,this.parts_=Oy(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,w.ug)(this.parts_[r]);j5(this)}}function j5(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Td(n))}function Td(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class cN extends L5{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new cN}getInitialEvent(e){return(0,w.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Fy=1e3;let LI,Cd=(()=>{class n extends F5{constructor(t,r,i,s,o,a,l,c){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=n.nextPersistentConnectionId_++,this.log_=My("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Fy,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!(0,w.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");cN.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&OI.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_((0,w.Wl)(o)),(0,w.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new w.BH,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const l=a.d;"ok"===a.s?r.resolve(l):r.reject(l)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),(0,w.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,w.hu)(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,l=>{const c=l.d,h=l.s;n.warnOnListenWarnings_(c,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",l),"ok"!==h&&this.removeListen_(i,s),t.onComplete&&t.onComplete(h,c))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,w.r3)(t,"w")){const i=(0,w.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Oi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,w.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,w.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,a=s.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,w.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const o={p:t};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();const a={p:r,d:i};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,w.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):XP("Unrecognized action received from server: "+(0,w.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,w.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Fy,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Fy,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Fy),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,z.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let l=!1,c=null;const h=function(){c?c.close():(l=!0,s())};t.realtime_={close:h,sendRequest:function(_){(0,w.hu)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(_)}};const g=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[_,v]=yield Promise.all([t.authTokenProvider_.getToken(g),t.appCheckTokenProvider_.getToken(g)]);l?Qr("getToken() completed but was canceled"):(Qr("getToken() completed. Creating connection."),t.authToken_=_&&_.accessToken,t.appCheckToken_=v&&v.token,c=new O5(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,E=>{Oi(E+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(_){t.log_("Failed to get token: "+_),l||(t.repoInfo_.nodeAdmin&&Oi(_),h())}}})()}interrupt(t){Qr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Qr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,w.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Fy,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(o=>JP(o)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new Xt(t).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Qr("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Qr("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,w.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+ZP.replace(/\./g,"-")]=1,(0,w.uI)()?t["framework.cordova"]=1:(0,w.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=OI.getInstance().currentlyOnline();return(0,w.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Tt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Tt(e,t)}}class FI{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Tt(kc,e),i=new Tt(kc,t);return 0!==this.compare(r,i)}minPost(){return Tt.MIN}}class z5 extends FI{static get __EMPTY_NODE(){return LI}static set __EMPTY_NODE(e){LI=e}compare(e,t){return Id(e.name,t.name)}isDefinedOn(e){throw(0,w.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Tt.MIN}maxPost(){return new Tt(El,LI)}makePost(e,t){return(0,w.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Tt(e,LI)}toString(){return".key"}}const xa=new z5;class VI{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let dN,Vo=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??bs.EMPTY_NODE,this.right=o??bs.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const o=i(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return bs.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return bs.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class bs{constructor(e,t=bs.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new bs(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Vo.BLACK,null,null))}remove(e){return new bs(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Vo.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new VI(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new VI(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new VI(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new VI(this.root_,null,this.comparator_,!0,e)}}function Uye(n,e){return Id(n.name,e.name)}function uN(n,e){return Id(n,e)}bs.EMPTY_NODE=new class Vye{copy(e,t,r,i,s){return this}insert(e,t,r){return new Vo(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const q5=function(n){return"number"==typeof n?"number:"+u5(n):"string:"+n},G5=function(n){if(n.isLeafNode()){const e=n.val();(0,w.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,w.r3)(e,".sv"),"Priority must be a string or number.")}else(0,w.hu)(n===dN||n.isEmpty(),"priority of unexpected type.");(0,w.hu)(n===dN||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let W5,K5,Z5,xp=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,w.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),G5(this.priorityNode_)}static set __childrenNodeConstructor(t){W5=t}static get __childrenNodeConstructor(){return W5}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return bt(t)?this:".priority"===vt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=vt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,w.hu)(".priority"!==i||1===Fc(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(dn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+q5(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?u5(this.value_):this.value_,this.lazyHash_=o5(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,w.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return(0,w.hu)(s>=0,"Unknown leaf type: "+r),(0,w.hu)(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Tn=new class $ye extends FI{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?Id(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Tt.MIN}maxPost(){return new Tt(El,new xp("[PRIORITY-POST]",Z5))}makePost(e,t){const r=K5(e);return new Tt(t,new xp("[PRIORITY-POST]",r))}toString(){return".priority"}},zye=Math.log(2);class qye{constructor(e){this.count=parseInt(Math.log(e+1)/zye,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const UI=function(n,e,t,r){n.sort(e);const i=function(l,c){const h=c-l;let p,g;if(0===h)return null;if(1===h)return p=n[l],g=t?t(p):p,new Vo(g,p.node,Vo.BLACK,null,null);{const _=parseInt(h/2,10)+l,v=i(l,_),E=i(_+1,c);return p=n[_],g=t?t(p):p,new Vo(g,p.node,Vo.BLACK,v,E)}},a=function(l){let c=null,h=null,p=n.length;const g=function(v,E){const T=p-v,P=p;p-=v;const D=i(T+1,P),k=n[T],G=t?t(k):k;_(new Vo(G,k.node,E,null,D))},_=function(v){c?(c.left=v,c=v):(h=v,c=v)};for(let v=0;v<l.count;++v){const E=l.nextBitIsOne(),T=Math.pow(2,l.count-(v+1));E?g(T,Vo.BLACK):(g(T,Vo.BLACK),g(T,Vo.RED))}return h}(new qye(n.length));return new bs(r||e,a)};let hN;const Ap={};class wl{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,w.hu)(Ap&&Tn,"ChildrenNode.ts has not been loaded"),hN=hN||new wl({".priority":Ap},{".priority":Tn}),hN}get(e){const t=(0,w.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof bs?t:null}hasIndex(e){return(0,w.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,w.hu)(e!==xa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(Tt.Wrap);let a,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();a=i?UI(r,e.getCompare()):Ap;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const h=Object.assign({},this.indexes_);return h[l]=a,new wl(h,c)}addToIndexes(e,t){const r=(0,w.UI)(this.indexes_,(i,s)=>{const o=(0,w.DV)(this.indexSet_,s);if((0,w.hu)(o,"Missing index implementation for "+s),i===Ap){if(o.isDefinedOn(e.node)){const a=[],l=t.getIterator(Tt.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),UI(a,o.getCompare())}return Ap}{const a=t.get(e.name);let l=i;return a&&(l=l.remove(new Tt(e.name,a))),l.insert(e,e.node)}});return new wl(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,w.UI)(this.indexes_,i=>{if(i===Ap)return i;{const s=t.get(e.name);return s?i.remove(new Tt(e.name,s)):i}});return new wl(r,this.indexSet_)}}let Ly,dt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&G5(this.priorityNode_),this.children_.isEmpty()&&(0,w.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ly||(Ly=new n(new bs(uN),null,wl.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ly}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Ly:r}}getChild(t){const r=vt(t);return null===r?this:this.getImmediateChild(r).getChild(dn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,w.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Tt(t,r);let s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?Ly:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){const i=vt(t);if(null===i)return r;{(0,w.hu)(".priority"!==vt(t)||1===Fc(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(dn(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(Tn,(a,l)=>{r[a]=l.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){const a=[];for(const l in r)a[l]=r[l];return a}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+q5(this.getPriority().val())+":"),this.forEachChild(Tn,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":o5(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new Tt(t,r));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Tt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Tt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,Tt.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,Tt.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Vy?-1:0}withIndex(t){if(t===xa||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===xa||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Tn),s=r.getIterator(Tn);let o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(t){return t===xa?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Vy=new class Gye extends dt{constructor(){super(new bs(uN),dt.EMPTY_NODE,wl.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return dt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Tt,{MIN:{value:new Tt(kc,dt.EMPTY_NODE)},MAX:{value:new Tt(El,Vy)}}),z5.__EMPTY_NODE=dt.EMPTY_NODE,xp.__childrenNodeConstructor=dt,function Bye(n){dN=n}(Vy),function Hye(n){Z5=n}(Vy);const Wye=!0;function Jn(n,e=null){if(null===n)return dt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,w.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new xp(n,Jn(e));if(n instanceof Array||!Wye){let t=dt.EMPTY_NODE;return Yr(n,(r,i)=>{if((0,w.r3)(n,r)&&"."!==r.substring(0,1)){const s=Jn(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Jn(e))}{const t=[];let r=!1;if(Yr(n,(o,a)=>{if("."!==o.substring(0,1)){const l=Jn(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),t.push(new Tt(o,l)))}}),0===t.length)return dt.EMPTY_NODE;const s=UI(t,Uye,o=>o.name,uN);if(r){const o=UI(t,Tn.getCompare());return new dt(s,Jn(e),new wl({".priority":o},{".priority":Tn}))}return new dt(s,Jn(e),wl.Default)}}!function jye(n){K5=n}(Jn);class fN extends FI{constructor(e){super(),this.indexPath_=e,(0,w.hu)(!bt(e)&&".priority"!==vt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?Id(e.name,t.name):s}makePost(e,t){const r=Jn(e),i=dt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Tt(t,i)}maxPost(){const e=dt.EMPTY_NODE.updateChild(this.indexPath_,Vy);return new Tt(El,e)}toString(){return Oy(this.indexPath_,0).join("/")}}const pN=new class Kye extends FI{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Id(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Tt.MIN}maxPost(){return Tt.MAX}makePost(e,t){const r=Jn(e);return new Tt(t,r)}toString(){return".value"}};function Q5(n){return{type:"value",snapshotNode:n}}function Dp(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Uy(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function By(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class mN{constructor(e){this.index_=e}updateChild(e,t,r,i,s,o){(0,w.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(null!=o&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange(Uy(t,a)):(0,w.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Dp(t,r)):o.trackChildChange(By(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Tn,(i,s)=>{t.hasChild(i)||r.trackChildChange(Uy(i,s))}),t.isLeafNode()||t.forEachChild(Tn,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(By(i,s,o))}else r.trackChildChange(Dp(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?dt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class jy{constructor(e){this.indexedFilter_=new mN(e.getIndex()),this.index_=e.getIndex(),this.startPost_=jy.getStartPost_(e),this.endPost_=jy.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,o){return this.matches(new Tt(t,r))||(r=dt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,o)}updateFullNode(e,t,r){t.isLeafNode()&&(t=dt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(dt.EMPTY_NODE);const s=this;return t.forEachChild(Tn,(o,a)=>{s.matches(new Tt(o,a))||(i=i.updateImmediateChild(o,dt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Qye{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new jy(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,o){return this.rangedFilter_.matches(new Tt(t,r))||(r=dt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,o):this.fullLimitUpdateChild_(e,t,r,s,o)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=dt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=dt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;i=i.updateImmediateChild(a.name,a.node),o++}}}else{let s;i=t.withIndex(this.index_),i=i.updatePriority(dt.EMPTY_NODE),s=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,dt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let o;if(this.reverse_){const p=this.index_.getCompare();o=(g,_)=>p(_,g)}else o=this.index_.getCompare();const a=e;(0,w.hu)(a.numChildren()===this.limit_,"");const l=new Tt(t,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(l);if(a.hasChild(t)){const p=a.getImmediateChild(t);let g=i.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=g&&(g.name===t||a.hasChild(g.name));)g=i.getChildAfterChild(this.index_,g,this.reverse_);const _=null==g?1:o(g,l);if(h&&!r.isEmpty()&&_>=0)return s?.trackChildChange(By(t,r,p)),a.updateImmediateChild(t,r);{s?.trackChildChange(Uy(t,p));const E=a.updateImmediateChild(t,dt.EMPTY_NODE);return null!=g&&this.rangedFilter_.matches(g)?(s?.trackChildChange(Dp(g.name,g.node)),E.updateImmediateChild(g.name,g.node)):E}}return r.isEmpty()?e:h&&o(c,l)>=0?(null!=s&&(s.trackChildChange(Uy(c.name,c.node)),s.trackChildChange(Dp(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(c.name,dt.EMPTY_NODE)):e}}class BI{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Tn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,w.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,w.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:kc}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,w.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,w.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:El}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,w.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Tn}copy(){const e=new BI;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function gN(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function _N(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function jI(n,e){const t=n.copy();return t.index_=e,t}function Y5(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Tn?t="$priority":n.index_===pN?t="$value":n.index_===xa?t="$key":((0,w.hu)(n.index_ instanceof fN,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,w.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,w.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,w.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,w.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,w.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function X5(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Tn&&(e.i=n.index_.toString()),e}class HI extends F5{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=My("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,w.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=HI.getListenId_(e,r),a={};this.listens_[o]=a;const l=Y5(e._queryParams);this.restRequest_(s+".json",l,(c,h)=>{let p=h;if(404===c&&(p=null,c=null),null===c&&this.onDataUpdate_(s,p,!1,r),(0,w.DV)(this.listens_,o)===a){let g;g=c?401===c?"permission_denied":"rest_error:"+c:"ok",i(g,null)}})}unlisten(e,t){const r=HI.getListenId_(e,t);delete this.listens_[r]}get(e){const t=Y5(e._queryParams),r=e._path.toString(),i=new w.BH;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,w.xO)(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=(0,w.cI)(a.responseText)}catch{Oi("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else 401!==a.status&&404!==a.status&&Oi("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}class nve{constructor(){this.rootNode_=dt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function $I(){return{value:null,children:new Map}}function Sp(n,e,t){if(bt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=vt(e);n.children.has(r)||n.children.set(r,$I()),Sp(n.children.get(r),e=dn(e),t)}}function yN(n,e){if(bt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Tn,(r,i)=>{Sp(n,new Xt(r),i)}),yN(n,e)}}if(n.children.size>0){const t=vt(e);return e=dn(e),n.children.has(t)&&yN(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function vN(n,e,t){null!==n.value?t(e,n.value):function rve(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{vN(i,new Xt(e.toString()+"/"+r),t)})}class ive{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Yr(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class ave{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new ive(e);const r=1e4+2e4*Math.random();Ny(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Yr(e,(i,s)=>{s>0&&(0,w.r3)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),Ny(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Aa=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Aa||{});function wN(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class zI{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Aa.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(bt(this.path)){if(null!=this.affectedTree.value)return(0,w.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Xt(e));return new zI(Ht(),t,this.revert)}}return(0,w.hu)(vt(this.path)===e,"operationForChild called for unrelated child."),new zI(dn(this.path),this.affectedTree,this.revert)}}class Hy{constructor(e,t){this.source=e,this.path=t,this.type=Aa.LISTEN_COMPLETE}operationForChild(e){return bt(this.path)?new Hy(this.source,Ht()):new Hy(this.source,dn(this.path))}}class xd{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Aa.OVERWRITE}operationForChild(e){return bt(this.path)?new xd(this.source,Ht(),this.snap.getImmediateChild(e)):new xd(this.source,dn(this.path),this.snap)}}class Rp{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Aa.MERGE}operationForChild(e){if(bt(this.path)){const t=this.children.subtree(new Xt(e));return t.isEmpty()?null:t.value?new xd(this.source,Ht(),t.value):new Rp(this.source,Ht(),t)}return(0,w.hu)(vt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Rp(this.source,dn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Lc{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(bt(e))return this.isFullyInitialized()&&!this.filtered_;const t=vt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class lve{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function $y(n,e,t,r,i,s){const o=r.filter(a=>a.type===t);o.sort((a,l)=>function dve(n,e,t){if(null==e.childName||null==t.childName)throw(0,w.g5)("Should only compare child_ events.");const r=new Tt(e.childName,e.snapshotNode),i=new Tt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,a,l)),o.forEach(a=>{const l=function uve(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function qI(n,e){return{eventCache:n,serverCache:e}}function zy(n,e,t,r){return qI(new Lc(e,t,r),n.serverCache)}function eW(n,e,t,r){return qI(n.eventCache,new Lc(e,t,r))}function GI(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Ad(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let IN;class Cn{constructor(e,t=(()=>(IN||(IN=new bs(Z_e)),IN))()){this.value=e,this.children=t}static fromObject(e){let t=new Cn(null);return Yr(e,(r,i)=>{t=t.set(new Xt(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Ht(),value:this.value};if(bt(e))return null;{const r=vt(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(dn(e),t);return null!=s?{path:jn(new Xt(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(bt(e))return this;{const t=vt(e),r=this.children.get(t);return null!==r?r.subtree(dn(e)):new Cn(null)}}set(e,t){if(bt(e))return new Cn(t,this.children);{const r=vt(e),s=(this.children.get(r)||new Cn(null)).set(dn(e),t),o=this.children.insert(r,s);return new Cn(this.value,o)}}remove(e){if(bt(e))return this.children.isEmpty()?new Cn(null):new Cn(null,this.children);{const t=vt(e),r=this.children.get(t);if(r){const i=r.remove(dn(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new Cn(null):new Cn(this.value,s)}return this}}get(e){if(bt(e))return this.value;{const t=vt(e),r=this.children.get(t);return r?r.get(dn(e)):null}}setTree(e,t){if(bt(e))return t;{const r=vt(e),s=(this.children.get(r)||new Cn(null)).setTree(dn(e),t);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new Cn(this.value,o)}}fold(e){return this.fold_(Ht(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(jn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Ht(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(bt(e))return null;{const s=vt(e),o=this.children.get(s);return o?o.findOnPath_(dn(e),jn(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Ht(),t)}foreachOnPath_(e,t,r){if(bt(e))return this;{this.value&&r(t,this.value);const i=vt(e),s=this.children.get(i);return s?s.foreachOnPath_(dn(e),jn(t,i),r):new Cn(null)}}foreach(e){this.foreach_(Ht(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(jn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Uo{constructor(e){this.writeTree_=e}static empty(){return new Uo(new Cn(null))}}function qy(n,e,t){if(bt(e))return new Uo(new Cn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=rs(i,e);return s=s.updateChild(o,t),new Uo(n.writeTree_.set(i,s))}{const i=new Cn(t),s=n.writeTree_.setTree(e,i);return new Uo(s)}}}function TN(n,e,t){let r=n;return Yr(t,(i,s)=>{r=qy(r,jn(e,i),s)}),r}function tW(n,e){if(bt(e))return Uo.empty();{const t=n.writeTree_.setTree(e,new Cn(null));return new Uo(t)}}function CN(n,e){return null!=Dd(n,e)}function Dd(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(rs(t.path,e)):null}function nW(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Tn,(r,i)=>{e.push(new Tt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Tt(r,i.value))}),e}function Vc(n,e){if(bt(e))return n;{const t=Dd(n,e);return new Uo(null!=t?new Cn(t):n.writeTree_.subtree(e))}}function xN(n){return n.writeTree_.isEmpty()}function Mp(n,e){return rW(Ht(),n.writeTree_,e)}function rW(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,w.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=rW(jn(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(jn(n,".priority"),r)),t}}function WI(n,e){return lW(e,n)}function _ve(n,e){if(n.snap)return po(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&po(jn(n.path,t),e))return!0;return!1}function vve(n){return n.visible}function iW(n,e,t){let r=Uo.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const o=s.path;let a;if(s.snap)po(t,o)?(a=rs(t,o),r=qy(r,a,s.snap)):po(o,t)&&(a=rs(o,t),r=qy(r,Ht(),s.snap.getChild(a)));else{if(!s.children)throw(0,w.g5)("WriteRecord should have .snap or .children");if(po(t,o))a=rs(t,o),r=TN(r,a,s.children);else if(po(o,t))if(a=rs(o,t),bt(a))r=TN(r,Ht(),s.children);else{const l=(0,w.DV)(s.children,vt(a));if(l){const c=l.getChild(dn(a));r=qy(r,Ht(),c)}}}}}return r}function sW(n,e,t,r,i){if(r||i){const s=Vc(n.visibleWrites,e);return!i&&xN(s)?t:i||null!=t||CN(s,Ht())?Mp(iW(n.allWrites,function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(po(c.path,e)||po(e,c.path))},e),t||dt.EMPTY_NODE):null}{const s=Dd(n.visibleWrites,e);if(null!=s)return s;{const o=Vc(n.visibleWrites,e);return xN(o)?t:null!=t||CN(o,Ht())?Mp(o,t||dt.EMPTY_NODE):null}}}function KI(n,e,t,r){return sW(n.writeTree,n.treePath,e,t,r)}function AN(n,e){return function bve(n,e,t){let r=dt.EMPTY_NODE;const i=Dd(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Tn,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){const s=Vc(n.visibleWrites,e);return t.forEachChild(Tn,(o,a)=>{const l=Mp(Vc(s,new Xt(o)),a);r=r.updateImmediateChild(o,l)}),nW(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return nW(Vc(n.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(n.writeTree,n.treePath,e)}function oW(n,e,t,r){return function Eve(n,e,t,r,i){(0,w.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=jn(e,t);if(CN(n.visibleWrites,s))return null;{const o=Vc(n.visibleWrites,s);return xN(o)?i.getChild(t):Mp(o,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function ZI(n,e){return function Ive(n,e){return Dd(n.visibleWrites,e)}(n.writeTree,jn(n.treePath,e))}function DN(n,e,t){return function wve(n,e,t,r){const i=jn(e,t),s=Dd(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?Mp(Vc(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function aW(n,e){return lW(jn(n.treePath,e),n.writeTree)}function lW(n,e){return{treePath:n,writeTree:e}}class Ave{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,w.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,w.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,By(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,Uy(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,Dp(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,w.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,By(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const cW=new class Dve{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class SN{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Lc(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return DN(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ad(this.viewCache_),s=function xve(n,e,t,r,i,s){return function Tve(n,e,t,r,i,s,o){let a;const l=Vc(n.visibleWrites,e),c=Dd(l,Ht());if(null!=c)a=c;else{if(null==t)return[];a=Mp(l,t)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const h=[],p=o.getCompare(),g=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let _=g.getNext();for(;_&&h.length<i;)0!==p(_,r)&&h.push(_),_=g.getNext();return h}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function uW(n,e,t,r,i,s){const o=e.eventCache;if(null!=ZI(r,t))return e;{let a,l;if(bt(t))if((0,w.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Ad(e),p=AN(r,c instanceof dt?c:dt.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),p,s)}else{const c=KI(r,Ad(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=vt(t);if(".priority"===c){(0,w.hu)(1===Fc(t),"Can't have a priority with additional path components");const h=o.getNode();l=e.serverCache.getNode();const p=oW(r,t,h,l);a=null!=p?n.filter.updatePriority(h,p):o.getNode()}else{const h=dn(t);let p;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const g=oW(r,t,o.getNode(),l);p=null!=g?o.getNode().getImmediateChild(c).updateChild(h,g):o.getNode().getImmediateChild(c)}else p=DN(r,c,e.serverCache);a=null!=p?n.filter.updateChild(o.getNode(),c,p,h,i,s):o.getNode()}}return zy(e,a,o.isFullyInitialized()||bt(t),n.filter.filtersNodes())}}function QI(n,e,t,r,i,s,o,a){const l=e.serverCache;let c;const h=o?n.filter:n.filter.getIndexedFilter();if(bt(t))c=h.updateFullNode(l.getNode(),r,null);else if(h.filtersNodes()&&!l.isFiltered()){const _=l.getNode().updateChild(t,r);c=h.updateFullNode(l.getNode(),_,null)}else{const _=vt(t);if(!l.isCompleteForPath(t)&&Fc(t)>1)return e;const v=dn(t),T=l.getNode().getImmediateChild(_).updateChild(v,r);c=".priority"===_?h.updatePriority(l.getNode(),T):h.updateChild(l.getNode(),_,T,v,cW,null)}const p=eW(e,c,l.isFullyInitialized()||bt(t),h.filtersNodes());return uW(n,p,t,i,new SN(i,p,s),a)}function RN(n,e,t,r,i,s,o){const a=e.eventCache;let l,c;const h=new SN(i,e,s);if(bt(t))c=n.filter.updateFullNode(e.eventCache.getNode(),r,o),l=zy(e,c,!0,n.filter.filtersNodes());else{const p=vt(t);if(".priority"===p)c=n.filter.updatePriority(e.eventCache.getNode(),r),l=zy(e,c,a.isFullyInitialized(),a.isFiltered());else{const g=dn(t),_=a.getNode().getImmediateChild(p);let v;if(bt(g))v=r;else{const E=h.getCompleteChild(p);v=null!=E?".priority"===aN(g)&&E.getChild(B5(g)).isEmpty()?E:E.updateChild(g,r):dt.EMPTY_NODE}l=_.equals(v)?e:zy(e,n.filter.updateChild(a.getNode(),p,v,g,h,o),a.isFullyInitialized(),n.filter.filtersNodes())}}return l}function dW(n,e){return n.eventCache.isCompleteForChild(e)}function hW(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function MN(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,l=e;c=bt(t)?r:new Cn(null).setTree(t,r);const h=e.serverCache.getNode();return c.children.inorderTraversal((p,g)=>{if(h.hasChild(p)){const v=hW(0,e.serverCache.getNode().getImmediateChild(p),g);l=QI(n,l,new Xt(p),v,i,s,o,a)}}),c.children.inorderTraversal((p,g)=>{const _=!e.serverCache.isCompleteForChild(p)&&null===g.value;if(!h.hasChild(p)&&!_){const E=hW(0,e.serverCache.getNode().getImmediateChild(p),g);l=QI(n,l,new Xt(p),E,i,s,o,a)}}),l}class Lve{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new mN(r.getIndex()),s=function Yye(n){return n.loadsAllData()?new mN(n.getIndex()):n.hasLimit()?new Qye(n):new jy(n)}(r);this.processor_=function Sve(n){return{filter:n}}(s);const o=t.serverCache,a=t.eventCache,l=i.updateFullNode(dt.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(dt.EMPTY_NODE,a.getNode(),null),h=new Lc(l,o.isFullyInitialized(),i.filtersNodes()),p=new Lc(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=qI(p,h),this.eventGenerator_=new lve(this.query_)}get query(){return this.query_}}function Bve(n,e){const t=Ad(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!bt(e)&&!t.getImmediateChild(vt(e)).isEmpty())?t.getChild(e):null}function fW(n){return 0===n.eventRegistrations_.length}function pW(n,e,t){const r=[];if(t){(0,w.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(t,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const o=n.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(o)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function mW(n,e,t,r){e.type===Aa.MERGE&&null!==e.source.queryId&&((0,w.hu)(Ad(n.viewCache_),"We should always have a full cache before handling merges"),(0,w.hu)(GI(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function Mve(n,e,t,r,i){const s=new Ave;let o,a;if(t.type===Aa.OVERWRITE){const c=t;c.source.fromUser?o=RN(n,e,c.path,c.snap,r,i,s):((0,w.hu)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!bt(c.path),o=QI(n,e,c.path,c.snap,r,i,a,s))}else if(t.type===Aa.MERGE){const c=t;c.source.fromUser?o=function Nve(n,e,t,r,i,s,o){let a=e;return r.foreach((l,c)=>{const h=jn(t,l);dW(e,vt(h))&&(a=RN(n,a,h,c,i,s,o))}),r.foreach((l,c)=>{const h=jn(t,l);dW(e,vt(h))||(a=RN(n,a,h,c,i,s,o))}),a}(n,e,c.path,c.children,r,i,s):((0,w.hu)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=MN(n,e,c.path,c.children,r,i,a,s))}else if(t.type===Aa.ACK_USER_WRITE){const c=t;o=c.revert?function Fve(n,e,t,r,i,s){let o;if(null!=ZI(r,t))return e;{const a=new SN(r,e,i),l=e.eventCache.getNode();let c;if(bt(t)||".priority"===vt(t)){let h;if(e.serverCache.isFullyInitialized())h=KI(r,Ad(e));else{const p=e.serverCache.getNode();(0,w.hu)(p instanceof dt,"serverChildren would be complete if leaf node"),h=AN(r,p)}c=n.filter.updateFullNode(l,h,s)}else{const h=vt(t);let p=DN(r,h,e.serverCache);null==p&&e.serverCache.isCompleteForChild(h)&&(p=l.getImmediateChild(h)),c=null!=p?n.filter.updateChild(l,h,p,dn(t),a,s):e.eventCache.getNode().hasChild(h)?n.filter.updateChild(l,h,dt.EMPTY_NODE,dn(t),a,s):l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=KI(r,Ad(e)),o.isLeafNode()&&(c=n.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=ZI(r,Ht()),zy(e,c,o,n.filter.filtersNodes())}}(n,e,c.path,r,i,s):function kve(n,e,t,r,i,s,o){if(null!=ZI(i,t))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=r.value){if(bt(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return QI(n,e,t,l.getNode().getChild(t),i,s,a,o);if(bt(t)){let c=new Cn(null);return l.getNode().forEachChild(xa,(h,p)=>{c=c.set(new Xt(h),p)}),MN(n,e,t,c,i,s,a,o)}return e}{let c=new Cn(null);return r.foreach((h,p)=>{const g=jn(t,h);l.isCompleteForPath(g)&&(c=c.set(h,l.getNode().getChild(g)))}),MN(n,e,t,c,i,s,a,o)}}(n,e,c.path,c.affectedTree,r,i,s)}else{if(t.type!==Aa.LISTEN_COMPLETE)throw(0,w.g5)("Unknown operation type: "+t.type);o=function Ove(n,e,t,r,i){const s=e.serverCache;return uW(n,eW(e,s.getNode(),s.isFullyInitialized()||bt(t),s.isFiltered()),t,r,cW,i)}(n,e,t.path,r,s)}const l=s.getChanges();return function Pve(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=GI(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(Q5(GI(e)))}}(e,o,l),{viewCache:o,changes:l}}(n.processor_,i,e,t,r);return function Rve(n,e){(0,w.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,w.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,w.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,gW(n,s.changes,s.viewCache.eventCache.getNode(),null)}function gW(n,e,t,r){return function cve(n,e,t,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function Zye(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(o.childName,o.snapshotNode))}),$y(n,i,"child_removed",e,r,t),$y(n,i,"child_added",e,r,t),$y(n,i,"child_moved",s,r,t),$y(n,i,"child_changed",e,r,t),$y(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let YI,JI;class _W{constructor(){this.views=new Map}}function PN(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,w.hu)(null!=s,"SyncTree gave us an op for an invalid query."),mW(s,e,t,r)}{let s=[];for(const o of n.views.values())s=s.concat(mW(o,e,t,r));return s}}function yW(n,e,t,r,i){const o=n.views.get(e._queryIdentifier);if(!o){let a=KI(t,i?r:null),l=!1;a?l=!0:r instanceof dt?(a=AN(t,r),l=!1):(a=dt.EMPTY_NODE,l=!1);const c=qI(new Lc(a,l,!1),new Lc(r,i,!1));return new Lve(e,c)}return o}function vW(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Uc(n,e){let t=null;for(const r of n.views.values())t=t||Bve(r,e);return t}function bW(n,e){return e._queryParams.loadsAllData()?XI(n):n.views.get(e._queryIdentifier)}function EW(n,e){return null!=bW(n,e)}function Bc(n){return null!=XI(n)}function XI(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Qve=1;class wW{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Cn(null),this.pendingWriteTree_=function Cve(){return{visibleWrites:Uo.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function NN(n,e,t,r,i){return function fve(n,e,t,r,i){(0,w.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=qy(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Pp(n,new xd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function jc(n,e,t=!1){const r=function mve(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function gve(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);(0,w.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&_ve(a,r.path)?i=!1:po(r.path,a.path)&&(s=!0)),o--}return!!i&&(s?(function yve(n){n.visibleWrites=iW(n.allWrites,vve,Ht()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=tW(n.visibleWrites,r.path):Yr(r.children,l=>{n.visibleWrites=tW(n.visibleWrites,jn(r.path,l))}),!0))}(n.pendingWriteTree_,e)){let s=new Cn(null);return null!=r.snap?s=s.set(Ht(),!0):Yr(r.children,o=>{s=s.set(new Xt(o),!0)}),Pp(n,new zI(r.path,s,t))}return[]}function Gy(n,e,t){return Pp(n,new xd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function eT(n,e,t,r,i=!1){const s=e._path,o=n.syncPointTree_.get(s);let a=[];if(o&&("default"===e._queryIdentifier||EW(o,e))){const l=function Wve(n,e,t,r){const i=e._queryIdentifier,s=[];let o=[];const a=Bc(n);if("default"===i)for(const[l,c]of n.views.entries())o=o.concat(pW(c,t,r)),fW(c)&&(n.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=n.views.get(i);l&&(o=o.concat(pW(l,t,r)),fW(l)&&(n.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!Bc(n)&&s.push(new(function zve(){return(0,w.hu)(YI,"Reference.ts has not been loaded"),YI}())(e._repo,e._path)),{removed:s,events:o}}(o,e,t,r);(function qve(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const h=-1!==c.findIndex(g=>g._queryParams.loadsAllData()),p=n.syncPointTree_.findOnPath(s,(g,_)=>Bc(_));if(h&&!p){const g=n.syncPointTree_.subtree(s);if(!g.isEmpty()){const _=function rbe(n){return n.fold((e,t,r)=>{if(t&&Bc(t))return[XI(t)];{let i=[];return t&&(i=vW(t)),Yr(r,(s,o)=>{i=i.concat(o)}),i}})}(g);for(let v=0;v<_.length;++v){const E=_[v],T=E.query,P=xW(n,E);n.listenProvider_.startListening(Ky(T),Wy(n,T),P.hashFn,P.onComplete)}}}!p&&c.length>0&&!r&&(h?n.listenProvider_.stopListening(Ky(e),null):c.forEach(g=>{const _=n.queryToTagMap.get(nT(g));n.listenProvider_.stopListening(Ky(g),_)}))}!function ibe(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=nT(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,c)}return a}function IW(n,e,t,r){const i=ON(n,r);if(null!=i){const s=FN(i),o=s.path,a=s.queryId,l=rs(o,e);return LN(n,o,new xd(wN(a),l,t))}return[]}function kN(n,e,t,r=!1){const i=e._path;let s=null,o=!1;n.syncPointTree_.foreachOnPath(i,(g,_)=>{const v=rs(g,i);s=s||Uc(_,v),o=o||Bc(_)});let l,a=n.syncPointTree_.get(i);a?(o=o||Bc(a),s=s||Uc(a,Ht())):(a=new _W,n.syncPointTree_=n.syncPointTree_.set(i,a)),null!=s?l=!0:(l=!1,s=dt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((_,v)=>{const E=Uc(v,Ht());E&&(s=s.updateImmediateChild(_,E))}));const c=EW(a,e);if(!c&&!e._queryParams.loadsAllData()){const g=nT(e);(0,w.hu)(!n.queryToTagMap.has(g),"View does not exist, but we have a tag");const _=function sbe(){return Qve++}();n.queryToTagMap.set(g,_),n.tagToQueryMap.set(_,g)}let p=function Gve(n,e,t,r,i,s){const o=yW(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),function jve(n,e){n.eventRegistrations_.push(e)}(o,t),function Hve(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Tn,(s,o)=>{r.push(Dp(s,o))}),t.isFullyInitialized()&&r.push(Q5(t.getNode())),gW(n,r,t.getNode(),e)}(o,t)}(a,e,t,WI(n.pendingWriteTree_,i),s,l);if(!c&&!o&&!r){const g=bW(a,e);p=p.concat(function obe(n,e,t){const r=e._path,i=Wy(n,e),s=xW(n,t),o=n.listenProvider_.startListening(Ky(e),i,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(r);if(i)(0,w.hu)(!Bc(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,h,p)=>{if(!bt(c)&&h&&Bc(h))return[XI(h).query];{let g=[];return h&&(g=g.concat(vW(h).map(_=>_.query))),Yr(p,(_,v)=>{g=g.concat(v)}),g}});for(let c=0;c<l.length;++c){const h=l[c];n.listenProvider_.stopListening(Ky(h),Wy(n,h))}}return o}(n,e,g))}return p}function tT(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const c=Uc(a,rs(o,e));if(c)return c});return sW(i,e,s,t,!0)}function Pp(n,e){return TW(e,n.syncPointTree_,null,WI(n.pendingWriteTree_,Ht()))}function TW(n,e,t,r){if(bt(n.path))return CW(n,e,t,r);{const i=e.get(Ht());null==t&&null!=i&&(t=Uc(i,Ht()));let s=[];const o=vt(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){const c=t?t.getImmediateChild(o):null,h=aW(r,o);s=s.concat(TW(a,l,c,h))}return i&&(s=s.concat(PN(i,n,r,t))),s}}function CW(n,e,t,r){const i=e.get(Ht());null==t&&null!=i&&(t=Uc(i,Ht()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=t?t.getImmediateChild(o):null,c=aW(r,o),h=n.operationForChild(o);h&&(s=s.concat(CW(h,a,l,c)))}),i&&(s=s.concat(PN(i,n,r,t))),s}function xW(n,e){const t=e.query,r=Wy(n,t);return{hashFn:()=>(function Vve(n){return n.viewCache_.serverCache.getNode()}(e)||dt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function ebe(n,e,t){const r=ON(n,t);if(r){const i=FN(r),s=i.path,o=i.queryId,a=rs(s,e);return LN(n,s,new Hy(wN(o),a))}return[]}(n,t._path,r):function Jve(n,e){return Pp(n,new Hy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function X_e(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return eT(n,t,null,s)}}}}function Wy(n,e){const t=nT(e);return n.queryToTagMap.get(t)}function nT(n){return n._path.toString()+"$"+n._queryIdentifier}function ON(n,e){return n.tagToQueryMap.get(e)}function FN(n){const e=n.indexOf("$");return(0,w.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Xt(n.substr(0,e))}}function LN(n,e,t){const r=n.syncPointTree_.get(e);return(0,w.hu)(r,"Missing sync point for query tag that we're tracking"),PN(r,t,WI(n.pendingWriteTree_,e),null)}function Ky(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Zve(){return(0,w.hu)(JI,"Reference.ts has not been loaded"),JI}())(n._repo,n._path):n}class VN{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new VN(t)}node(){return this.node_}}class UN{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=jn(this.path_,e);return new UN(this.syncTree_,t)}node(){return tT(this.syncTree_,this.path_)}}const abe=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},AW=function(n,e,t){return n&&"object"==typeof n?((0,w.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?lbe(n[".sv"],e,t):"object"==typeof n[".sv"]?cbe(n[".sv"],e):void(0,w.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},lbe=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,w.hu)(!1,"Unexpected server value: "+n)},cbe=function(n,e,t){n.hasOwnProperty("increment")||(0,w.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,w.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,w.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},DW=function(n,e,t,r){return jN(e,new UN(t,n),r)},BN=function(n,e,t){return jN(n,new VN(e),t)};function jN(n,e,t){const r=n.getPriority().val(),i=AW(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=AW(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new xp(a,Jn(i)):n}{const o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new xp(i))),o.forEachChild(Tn,(a,l)=>{const c=jN(l,e.getImmediateChild(a),t);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}class HN{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function rT(n,e){let t=e instanceof Xt?e:new Xt(e),r=n,i=vt(t);for(;null!==i;){const s=(0,w.DV)(r.node.children,i)||{children:{},childCount:0};r=new HN(i,r,s),t=dn(t),i=vt(t)}return r}function Sd(n){return n.node.value}function $N(n,e){n.node.value=e,zN(n)}function SW(n){return n.node.childCount>0}function iT(n,e){Yr(n.node.children,(t,r)=>{e(new HN(t,n,r))})}function RW(n,e,t,r){t&&!r&&e(n),iT(n,i=>{RW(i,e,!0,r)}),t&&r&&e(n)}function Zy(n){return new Xt(null===n.parent?n.name:Zy(n.parent)+"/"+n.name)}function zN(n){null!==n.parent&&function hbe(n,e,t){const r=function ube(n){return void 0===Sd(n)&&!SW(n)}(t),i=(0,w.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,zN(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,zN(n))}(n.parent,n.name,n)}const fbe=/[\[\].#$\/\u0000-\u001F\u007F]/,pbe=/[\[\].#$\u0000-\u001F\u007F]/,qN=10485760,sT=function(n){return"string"==typeof n&&0!==n.length&&!fbe.test(n)},MW=function(n){return"string"==typeof n&&0!==n.length&&!pbe.test(n)},Qy=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!PI(n)||n&&"object"==typeof n&&(0,w.r3)(n,".sv")},Da=function(n,e,t,r){r&&void 0===e||Yy((0,w.gK)(n,"value"),e,t)},Yy=function(n,e,t){const r=t instanceof Xt?new Mye(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Td(r));if("function"==typeof e)throw new Error(n+"contains a function "+Td(r)+" with contents = "+e.toString());if(PI(e))throw new Error(n+"contains "+e.toString()+" "+Td(r));if("string"==typeof e&&e.length>qN/3&&(0,w.ug)(e)>qN)throw new Error(n+"contains a string greater than "+qN+" utf8 bytes "+Td(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(Yr(e,(o,a)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!sT(o)))throw new Error(n+" contains an invalid key ("+o+") "+Td(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Pye(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,w.ug)(e),j5(n)})(r,o),Yy(n,a,r),function Nye(n){const e=n.parts_.pop();n.byteLength_-=(0,w.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+Td(r)+" in addition to actual children.")}},PW=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,w.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];Yr(e,(o,a)=>{const l=new Xt(o);if(Yy(i,a,jn(t,l)),".priority"===aN(l)&&!Qy(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=Oy(r);for(let o=0;o<s.length;o++)if((".priority"!==s[o]||o!==s.length-1)&&!sT(s[o]))throw new Error(n+"contains an invalid key ("+s[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(Rye);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&po(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},GN=function(n,e,t){if(!t||void 0!==e){if(PI(e))throw new Error((0,w.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Qy(e))throw new Error((0,w.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Xy=function(n,e,t,r){if(!(r&&void 0===t||sT(t)))throw new Error((0,w.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Jy=function(n,e,t,r){if(!(r&&void 0===t||MW(t)))throw new Error((0,w.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},_be=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Jy(n,e,t,r)},mo=function(n,e){if(".info"===vt(e))throw new Error(n+" failed = Can't modify data under /.info/")},NW=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!sT(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),MW(n)}(t))throw new Error((0,w.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class ybe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function oT(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!lN(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function kW(n,e,t){oT(n,t),OW(n,r=>lN(r,e))}function js(n,e,t){oT(n,t),OW(n,r=>po(r,e)||po(e,r))}function OW(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(vbe(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function vbe(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();wd&&Qr("event: "+t.toString()),Tp(r)}}}const FW="repo_interrupt",bbe=25;class Ebe{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ybe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=$I(),this.transactionQueueTree_=new HN,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function LW(n){const t=n.infoData_.getNode(new Xt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function ev(n){return abe({timestamp:LW(n)})}function VW(n,e,t,r,i){n.dataUpdateCount++;const s=new Xt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){const l=(0,w.UI)(t,c=>Jn(c));o=function tbe(n,e,t,r){const i=ON(n,r);if(i){const s=FN(i),o=s.path,a=s.queryId,l=rs(o,e),c=Cn.fromObject(t);return LN(n,o,new Rp(wN(a),l,c))}return[]}(n.serverSyncTree_,s,l,i)}else{const l=Jn(t);o=IW(n.serverSyncTree_,s,l,i)}else if(r){const l=(0,w.UI)(t,c=>Jn(c));o=function Xve(n,e,t){const r=Cn.fromObject(t);return Pp(n,new Rp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,l)}else{const l=Jn(t);o=Gy(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=kp(n,s)),js(n.eventQueue_,a,o)}function UW(n,e){WN(n,"connected",e),!1===e&&function xbe(n){Np(n,"onDisconnectEvents");const e=ev(n),t=$I();vN(n.onDisconnect_,Ht(),(i,s)=>{const o=DW(i,s,n.serverSyncTree_,e);Sp(t,i,o)});let r=[];vN(t,Ht(),(i,s)=>{r=r.concat(Gy(n.serverSyncTree_,i,s));const o=YN(n,i);kp(n,o)}),n.onDisconnect_=$I(),js(n.eventQueue_,Ht(),r)}(n)}function WN(n,e,t){const r=new Xt("/.info/"+e),i=Jn(t);n.infoData_.updateSnapshot(r,i);const s=Gy(n.infoSyncTree_,r,i);js(n.eventQueue_,r,s)}function aT(n){return n.nextWriteId_++}function KN(n,e,t,r,i){Np(n,"set",{path:e.toString(),value:t,priority:r});const s=ev(n),o=Jn(t,r),a=tT(n.serverSyncTree_,e),l=BN(o,a,s),c=aT(n),h=NN(n.serverSyncTree_,e,l,c,!0);oT(n.eventQueue_,h),n.server_.put(e.toString(),o.val(!0),(g,_)=>{const v="ok"===g;v||Oi("set at "+e+" failed: "+g);const E=jc(n.serverSyncTree_,c,!v);js(n.eventQueue_,e,E),Hc(0,i,g,_)});const p=YN(n,e);kp(n,p),js(n.eventQueue_,p,[])}function Abe(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&yN(n.onDisconnect_,e),Hc(0,t,r,i)})}function BW(n,e,t,r){const i=Jn(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{"ok"===s&&Sp(n.onDisconnect_,e,i),Hc(0,r,s,o)})}function ZN(n,e,t){let r;r=".info"===vt(e._path)?eT(n.infoSyncTree_,e,t):eT(n.serverSyncTree_,e,t),kW(n.eventQueue_,e._path,r)}function jW(n){n.persistentConnection_&&n.persistentConnection_.interrupt(FW)}function Np(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Qr(t,...e)}function Hc(n,e,t,r){e&&Tp(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function QN(n,e,t){return tT(n.serverSyncTree_,e,t)||dt.EMPTY_NODE}function lT(n,e=n.transactionQueueTree_){if(e||cT(n,e),Sd(e)){const t=$W(n,e);(0,w.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function Nbe(n,e,t){const r=t.map(c=>c.currentWriteId),i=QN(n,e,r);let s=i;const o=i.hash();for(let c=0;c<t.length;c++){const h=t[c];(0,w.hu)(0===h.status,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const p=rs(e,h.path);s=s.updateChild(p,h.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;n.server_.put(l.toString(),a,c=>{Np(n,"transaction put response",{path:l.toString(),status:c});let h=[];if("ok"===c){const p=[];for(let g=0;g<t.length;g++)t[g].status=2,h=h.concat(jc(n.serverSyncTree_,t[g].currentWriteId)),t[g].onComplete&&p.push(()=>t[g].onComplete(null,!0,t[g].currentOutputSnapshotResolved)),t[g].unwatcher();cT(n,rT(n.transactionQueueTree_,e)),lT(n,n.transactionQueueTree_),js(n.eventQueue_,e,h);for(let g=0;g<p.length;g++)Tp(p[g])}else{if("datastale"===c)for(let p=0;p<t.length;p++)t[p].status=3===t[p].status?4:0;else{Oi("transaction at "+l.toString()+" failed: "+c);for(let p=0;p<t.length;p++)t[p].status=4,t[p].abortReason=c}kp(n,e)}},o)}(n,Zy(e),t)}else SW(e)&&iT(e,t=>{lT(n,t)})}function kp(n,e){const t=HW(n,e),r=Zy(t);return function kbe(n,e,t){if(0===e.length)return;const r=[];let i=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=rs(t,l.path);let p,h=!1;if((0,w.hu)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)h=!0,p=l.abortReason,i=i.concat(jc(n.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=bbe)h=!0,p="maxretry",i=i.concat(jc(n.serverSyncTree_,l.currentWriteId,!0));else{const g=QN(n,l.path,o);l.currentInputSnapshot=g;const _=e[a].update(g.val());if(void 0!==_){Yy("transaction failed: Data returned ",_,l.path);let v=Jn(_);"object"==typeof _&&null!=_&&(0,w.r3)(_,".priority")||(v=v.updatePriority(g.getPriority()));const T=l.currentWriteId,P=ev(n),D=BN(v,g,P);l.currentOutputSnapshotRaw=v,l.currentOutputSnapshotResolved=D,l.currentWriteId=aT(n),o.splice(o.indexOf(T),1),i=i.concat(NN(n.serverSyncTree_,l.path,D,l.currentWriteId,l.applyLocally)),i=i.concat(jc(n.serverSyncTree_,T,!0))}else h=!0,p="nodata",i=i.concat(jc(n.serverSyncTree_,l.currentWriteId,!0))}js(n.eventQueue_,t,i),i=[],h&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===p?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(p),!1,null)))}cT(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)Tp(r[a]);lT(n,n.transactionQueueTree_)}(n,$W(n,t),r),r}function HW(n,e){let t,r=n.transactionQueueTree_;for(t=vt(e);null!==t&&void 0===Sd(r);)r=rT(r,t),t=vt(e=dn(e));return r}function $W(n,e){const t=[];return zW(n,e,t),t.sort((r,i)=>r.order-i.order),t}function zW(n,e,t){const r=Sd(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);iT(e,i=>{zW(n,i,t)})}function cT(n,e){const t=Sd(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,$N(e,t.length>0?t:void 0)}iT(e,r=>{cT(n,r)})}function YN(n,e){const t=Zy(HW(n,e)),r=rT(n.transactionQueueTree_,e);return function dbe(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{XN(n,i)}),XN(n,r),RW(r,i=>{XN(n,i)}),t}function XN(n,e){const t=Sd(e);if(t){const r=[];let i=[],s=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?((0,w.hu)(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):((0,w.hu)(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(jc(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?$N(e,void 0):t.length=s+1,js(n.eventQueue_,Zy(e),i);for(let o=0;o<r.length;o++)Tp(r[o])}}const JN=function(n,e){const t=Lbe(n),r=t.namespace;return"firebase.com"===t.domain&&Ca(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Ca("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Oi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new tN(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Xt(t.pathString)}},Lbe=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",l=443;if("string"==typeof n){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let h=n.indexOf("/");-1===h&&(h=n.length);let p=n.indexOf("?");-1===p&&(p=n.length),e=n.substring(0,Math.min(h,p)),h<p&&(i=function Obe(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(h,p)));const g=function Fbe(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Oi(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,p)));c=e.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(e.substring(c+1),10)):c=e.length;const _=e.slice(0,c);if("localhost"===_.toLowerCase())t="localhost";else if(_.split(".").length<=2)t=_;else{const v=e.indexOf(".");r=e.substring(0,v).toLowerCase(),t=e.substring(v+1),s=r}"ns"in g&&(s=g.ns)}return{host:e,port:l,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},qW="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Vbe=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=qW.charAt(t%64),t=Math.floor(t/64);(0,w.hu)(0===t,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)o+=qW.charAt(e[i]);return(0,w.hu)(20===o.length,"nextPushId: Length should be 20."),o}}();class GW{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,w.Wl)(this.snapshot.exportVal())}}class WW{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class ek{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,w.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class KW{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new w.BH;return Abe(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){mo("OnDisconnect.remove",this._path);const e=new w.BH;return BW(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){mo("OnDisconnect.set",this._path),Da("OnDisconnect.set",e,this._path,!1);const t=new w.BH;return BW(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){mo("OnDisconnect.setWithPriority",this._path),Da("OnDisconnect.setWithPriority",e,this._path,!1),GN("OnDisconnect.setWithPriority",t,!1);const r=new w.BH;return function Dbe(n,e,t,r,i){const s=Jn(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{"ok"===o&&Sp(n.onDisconnect_,e,s),Hc(0,i,o,a)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){mo("OnDisconnect.update",this._path),PW("OnDisconnect.update",e,this._path,!1);const t=new w.BH;return function Sbe(n,e,t,r){if((0,w.xb)(t))return Qr("onDisconnect().update() called with empty data.  Don't do anything."),void Hc(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{"ok"===i&&Yr(t,(o,a)=>{const l=Jn(a);Sp(n.onDisconnect_,jn(e,o),l)}),Hc(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Es{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return bt(this._path)?null:aN(this._path)}get ref(){return new go(this._repo,this._path)}get _queryIdentifier(){const e=X5(this._queryParams),t=JP(e);return"{}"===t?"default":t}get _queryObject(){return X5(this._queryParams)}isEqual(e){if(!((e=(0,w.m9)(e))instanceof Es))return!1;const t=this._repo===e._repo,r=lN(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Sye(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function uT(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function $c(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===xa){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==kc)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==El)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Tn){if(null!=e&&!Qy(e)||null!=t&&!Qy(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,w.hu)(n.getIndex()instanceof fN||n.getIndex()===pN,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function dT(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class go extends Es{constructor(e,t){super(e,t,new BI,!1)}get parent(){const e=B5(this._path);return null===e?null:new go(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Rd{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Xt(e),r=Md(this.ref,e);return new Rd(this._node.getChild(t),r,Tn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Rd(i,Md(this.ref,r),Tn)))}hasChild(e){const t=new Xt(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ZW(n,e){return(n=(0,w.m9)(n))._checkNotDeleted("ref"),void 0!==e?Md(n._root,e):n._root}function QW(n,e){(n=(0,w.m9)(n))._checkNotDeleted("refFromURL");const t=JN(e,n._repo.repoInfo_.nodeAdmin);NW("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Ca("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),ZW(n,t.path.toString())}function Md(n,e){return null===vt((n=(0,w.m9)(n))._path)?_be("child","path",e,!1):Jy("child","path",e,!1),new go(n._repo,jn(n._path,e))}function tk(n,e){n=(0,w.m9)(n),mo("set",n._path),Da("set",e,n._path,!1);const t=new w.BH;return KN(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function $be(n,e){PW("update",e,n._path,!1);const t=new w.BH;return function Cbe(n,e,t,r){Np(n,"update",{path:e.toString(),value:t});let i=!0;const s=ev(n),o={};if(Yr(t,(a,l)=>{i=!1,o[a]=DW(jn(e,a),Jn(l),n.serverSyncTree_,s)}),i)Qr("update() called with empty data.  Don't do anything."),Hc(0,r,"ok",void 0);else{const a=aT(n),l=function Yve(n,e,t,r){!function pve(n,e,t,r){(0,w.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=TN(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Cn.fromObject(t);return Pp(n,new Rp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,o,a);oT(n.eventQueue_,l),n.server_.merge(e.toString(),t,(c,h)=>{const p="ok"===c;p||Oi("update at "+e+" failed: "+c);const g=jc(n.serverSyncTree_,a,!p),_=g.length>0?kp(n,e):e;js(n.eventQueue_,_,g),Hc(0,r,c,h)}),Yr(t,c=>{const h=YN(n,jn(e,c));kp(n,h)}),js(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function zbe(n){n=(0,w.m9)(n);const e=new ek(()=>{}),t=new tv(e);return function Tbe(n,e,t){const r=function nbe(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(c,h)=>{const p=rs(c,t);r=r||Uc(h,p)});let i=n.syncPointTree_.get(t);i?r=r||Uc(i,Ht()):(i=new _W,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,o=s?new Lc(r,!0,!1):null;return function Uve(n){return GI(n.viewCache_)}(yW(i,e,WI(n.pendingWriteTree_,e._path),s?o.getNode():dt.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const s=Jn(i).withIndex(e._queryParams.getIndex());let o;if(kN(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())o=Gy(n.serverSyncTree_,e._path,s);else{const a=Wy(n.serverSyncTree_,e);o=IW(n.serverSyncTree_,e._path,s,a)}return js(n.eventQueue_,e._path,o),eT(n.serverSyncTree_,e,t,null,!0),s},i=>(Np(n,"get for query "+(0,w.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Rd(r,new go(n._repo,n._path),n._queryParams.getIndex()))}class tv{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new GW("value",this,new Rd(e.snapshotNode,new go(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new WW(this,e,t):null}matches(e){return e instanceof tv&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class hT{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new WW(this,e,t):null}createEvent(e,t){(0,w.hu)(null!=e.childName,"Child events should have a childName.");const r=Md(new go(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new GW(e.type,this,new Rd(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof hT&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function nv(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const l=t,c=(h,p)=>{ZN(n._repo,n,a),l(h,p)};c.userCallback=t.userCallback,c.context=t.context,t=c}const o=new ek(t,s||void 0),a="value"===e?new tv(o):new hT(e,o);return function Rbe(n,e,t){let r;r=".info"===vt(e._path)?kN(n.infoSyncTree_,e,t):kN(n.serverSyncTree_,e,t),kW(n.eventQueue_,e._path,r)}(n._repo,n,a),()=>ZN(n._repo,n,a)}function nk(n,e,t,r){return nv(n,"value",e,t,r)}function YW(n,e,t,r){return nv(n,"child_added",e,t,r)}function XW(n,e,t,r){return nv(n,"child_changed",e,t,r)}function JW(n,e,t,r){return nv(n,"child_moved",e,t,r)}function e6(n,e,t,r){return nv(n,"child_removed",e,t,r)}function t6(n,e,t){let r=null;const i=t?new ek(t):null;"value"===e?r=new tv(i):e&&(r=new hT(e,i)),ZN(n._repo,n,r)}class Bo{}class n6 extends Bo{constructor(e,t){super(),this._value=e,this._key=t,this.type="endAt"}_apply(e){Da("endAt",this._value,e._path,!0);const t=_N(e._queryParams,this._value,this._key);if(dT(t),$c(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Es(e._repo,e._path,t,e._orderByCalled)}}class Gbe extends Bo{constructor(e,t){super(),this._value=e,this._key=t,this.type="endBefore"}_apply(e){Da("endBefore",this._value,e._path,!1);const t=function tve(n,e,t){let r;return r=_N(n,e,n.index_===xa||t?t:kc),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(dT(t),$c(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Es(e._repo,e._path,t,e._orderByCalled)}}class r6 extends Bo{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAt"}_apply(e){Da("startAt",this._value,e._path,!0);const t=gN(e._queryParams,this._value,this._key);if(dT(t),$c(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Es(e._repo,e._path,t,e._orderByCalled)}}class Zbe extends Bo{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAfter"}_apply(e){Da("startAfter",this._value,e._path,!1);const t=function eve(n,e,t){let r;return r=gN(n,e,n.index_===xa||t?t:El),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(dT(t),$c(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Es(e._repo,e._path,t,e._orderByCalled)}}class Ybe extends Bo{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Es(e._repo,e._path,function Xye(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class Jbe extends Bo{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Es(e._repo,e._path,function Jye(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class tEe extends Bo{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){uT(e,"orderByChild");const t=new Xt(this._path);if(bt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new fN(t),i=jI(e._queryParams,r);return $c(i),new Es(e._repo,e._path,i,!0)}}class rEe extends Bo{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){uT(e,"orderByKey");const t=jI(e._queryParams,xa);return $c(t),new Es(e._repo,e._path,t,!0)}}class sEe extends Bo{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){uT(e,"orderByPriority");const t=jI(e._queryParams,Tn);return $c(t),new Es(e._repo,e._path,t,!0)}}class aEe extends Bo{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){uT(e,"orderByValue");const t=jI(e._queryParams,pN);return $c(t),new Es(e._repo,e._path,t,!0)}}class cEe extends Bo{constructor(e,t){super(),this._value=e,this._key=t,this.type="equalTo"}_apply(e){if(Da("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new n6(this._value,this._key)._apply(new r6(this._value,this._key)._apply(e))}}function jo(n,...e){let t=(0,w.m9)(n);for(const r of e)t=r._apply(t);return t}(function $ve(n){(0,w.hu)(!YI,"__referenceConstructor has already been defined"),YI=n})(go),function Kve(n){(0,w.hu)(!JI,"__referenceConstructor has already been defined"),JI=n}(go);const rk={};function ik(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||Ca("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Qr("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l,c,o=JN(s,i),a=o.repoInfo;typeof process<"u"&&process.env&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=JN(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const h=i&&l?new ky(ky.OWNER):new iye(n.name,n.options,e);NW("Invalid Firebase Database URL",o),bt(o.path)||Ca("Database URL must point to the root of a Firebase Database (not including a child path).");const p=function pEe(n,e,t,r){let i=rk[e.name];i||(i={},rk[e.name]=i);let s=i[n.toURLString()];return s&&Ca("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Ebe(n,false,t,r),i[n.toURLString()]=s,s}(a,n,h,new rye(n.name,t));return new gEe(p,n)}class gEe{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function wbe(n,e,t){if(n.stats_=iN(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new HI(n.repoInfo_,(r,i,s,o)=>{VW(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>UW(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,w.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Cd(n.repoInfo_,e,(r,i,s,o)=>{VW(n,r,i,s,o)},r=>{UW(n,r)},r=>{!function Ibe(n,e){Yr(e,(t,r)=>{WN(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function aye(n,e){const t=n.toString();return rN[t]||(rN[t]=e()),rN[t]}(n.repoInfo_,()=>new ave(n.stats_,n.server_)),n.infoData_=new nve,n.infoSyncTree_=new wW({startListening:(r,i,s,o)=>{let a=[];const l=n.infoData_.getNode(r._path);return l.isEmpty()||(a=Gy(n.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),WN(n,"connected",!1),n.serverSyncTree_=new wW({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);js(n.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new go(this._repo,Ht())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function fEe(n,e){const t=rk[e];(!t||t[n.key]!==n)&&Ca(`Database ${e}(${n.repoInfo_}) has already been deleted.`),jW(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ca("Cannot call "+e+" on a deleted database.")}}function s6(){D5.IS_TRANSPORT_INITIALIZED&&Oi("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function _Ee(){s6(),Oc.forceDisallow()}function yEe(){s6(),Cp.forceDisallow(),Oc.forceAllow()}function EEe(n,e){l5(n,e)}const IEe={".sv":"timestamp"};class xEe{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Cd.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Cd.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function wEe(n){QP(_r.SDK_VERSION),(0,_r._registerComponent)(new lo.wA("database",(e,{instanceIdentifier:t})=>ik(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,_r.registerVersion)(n5,"1.0.3",n),(0,_r.registerVersion)(n5,"1.0.3","esm2017")}();const REe=new Zi.Yd("@firebase/database-compat"),a6=function(n){REe.warn("FIREBASE WARNING: "+n)};class NEe{constructor(e){this._delegate=e}cancel(e){(0,w.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,w.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,w.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,w.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,w.Dv)("OnDisconnect.set",1,2,arguments.length),(0,w.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,w.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,w.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if((0,w.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,a6("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,w.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class kEe{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,w.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class zc{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,w.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,w.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,w.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,w.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,w.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Jy("DataSnapshot.child","path",e,!1),new zc(this._database,this._delegate.child(e))}hasChild(e){return(0,w.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Jy("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,w.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,w.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,w.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new zc(this._database,t)))}hasChildren(){return(0,w.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,w.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,w.Dv)("DataSnapshot.ref",0,0,arguments.length),new Hs(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class gi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;(0,w.Dv)("Query.on",2,4,arguments.length),(0,w.Wj)("Query.on","callback",t,!1);const o=gi.getCancelAndContextArgs_("Query.on",r,i),a=(c,h)=>{t.call(o.context,new zc(this.database,c),h)};a.userCallback=t,a.context=o.context;const l=null===(s=o.cancel)||void 0===s?void 0:s.bind(o.context);switch(e){case"value":return nk(this._delegate,a,l),t;case"child_added":return YW(this._delegate,a,l),t;case"child_removed":return e6(this._delegate,a,l),t;case"child_changed":return XW(this._delegate,a,l),t;case"child_moved":return JW(this._delegate,a,l),t;default:throw new Error((0,w.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,w.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,w.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,w.Wj)("Query.off","callback",t,!0),(0,w.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,t6(this._delegate,e,i)}else t6(this._delegate,e)}get(){return zbe(this._delegate).then(e=>new zc(this.database,e))}once(e,t,r,i){(0,w.Dv)("Query.once",1,4,arguments.length),(0,w.Wj)("Query.once","callback",t,!0);const s=gi.getCancelAndContextArgs_("Query.once",r,i),o=new w.BH,a=(c,h)=>{const p=new zc(this.database,c);t&&t.call(s.context,p,h),o.resolve(p)};a.userCallback=t,a.context=s.context;const l=c=>{s.cancel&&s.cancel.call(s.context,c),o.reject(c)};switch(e){case"value":nk(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":YW(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":e6(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":XW(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":JW(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error((0,w.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return(0,w.Dv)("Query.limitToFirst",1,1,arguments.length),new gi(this.database,jo(this._delegate,function Xbe(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Ybe(n)}(e)))}limitToLast(e){return(0,w.Dv)("Query.limitToLast",1,1,arguments.length),new gi(this.database,jo(this._delegate,function eEe(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Jbe(n)}(e)))}orderByChild(e){return(0,w.Dv)("Query.orderByChild",1,1,arguments.length),new gi(this.database,jo(this._delegate,function nEe(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Jy("orderByChild","path",n,!1),new tEe(n)}(e)))}orderByKey(){return(0,w.Dv)("Query.orderByKey",0,0,arguments.length),new gi(this.database,jo(this._delegate,function iEe(){return new rEe}()))}orderByPriority(){return(0,w.Dv)("Query.orderByPriority",0,0,arguments.length),new gi(this.database,jo(this._delegate,function oEe(){return new sEe}()))}orderByValue(){return(0,w.Dv)("Query.orderByValue",0,0,arguments.length),new gi(this.database,jo(this._delegate,function lEe(){return new aEe}()))}startAt(e=null,t){return(0,w.Dv)("Query.startAt",0,2,arguments.length),new gi(this.database,jo(this._delegate,function Kbe(n=null,e){return Xy("startAt","key",e,!0),new r6(n,e)}(e,t)))}startAfter(e=null,t){return(0,w.Dv)("Query.startAfter",0,2,arguments.length),new gi(this.database,jo(this._delegate,function Qbe(n,e){return Xy("startAfter","key",e,!0),new Zbe(n,e)}(e,t)))}endAt(e=null,t){return(0,w.Dv)("Query.endAt",0,2,arguments.length),new gi(this.database,jo(this._delegate,function qbe(n,e){return Xy("endAt","key",e,!0),new n6(n,e)}(e,t)))}endBefore(e=null,t){return(0,w.Dv)("Query.endBefore",0,2,arguments.length),new gi(this.database,jo(this._delegate,function Wbe(n,e){return Xy("endBefore","key",e,!0),new Gbe(n,e)}(e,t)))}equalTo(e,t){return(0,w.Dv)("Query.equalTo",1,2,arguments.length),new gi(this.database,jo(this._delegate,function uEe(n,e){return Xy("equalTo","key",e,!0),new cEe(n,e)}(e,t)))}toString(){return(0,w.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,w.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,w.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof gi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,w.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,w.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,w.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Hs(this.database,new go(this._delegate._repo,this._delegate._path))}}class Hs extends gi{constructor(e,t){super(e,new Es(t._repo,t._path,new BI,!1)),this.database=e,this._delegate=t}getKey(){return(0,w.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,w.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Hs(this.database,Md(this._delegate,e))}getParent(){(0,w.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Hs(this.database,e):null}getRoot(){return(0,w.Dv)("Reference.root",0,0,arguments.length),new Hs(this.database,this._delegate.root)}set(e,t){(0,w.Dv)("Reference.set",1,2,arguments.length),(0,w.Wj)("Reference.set","onComplete",t,!0);const r=tk(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,w.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,a6("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}mo("Reference.update",this._delegate._path),(0,w.Wj)("Reference.update","onComplete",t,!0);const r=$be(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,w.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,w.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function Hbe(n,e,t){if(mo("setWithPriority",n._path),Da("setWithPriority",e,n._path,!1),GN("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new w.BH;return KN(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){(0,w.Dv)("Reference.remove",0,1,arguments.length),(0,w.Wj)("Reference.remove","onComplete",e,!0);const t=function Bbe(n){return mo("remove",n._path),tk(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,w.Dv)("Reference.transaction",1,3,arguments.length),(0,w.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,w.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,w.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function AEe(n,e,t){var r;if(n=(0,w.m9)(n),mo("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,s=new w.BH,a=nk(n,()=>{});return function Pbe(n,e,t,r,i,s){Np(n,"transaction on "+e);const o={path:e,update:t,onComplete:r,status:null,order:s5(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=QN(n,e,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(void 0===l)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Yy("transaction failed: Data returned ",l,o.path),o.status=0;const c=rT(n.transactionQueueTree_,e),h=Sd(c)||[];let p;h.push(o),$N(c,h),"object"==typeof l&&null!==l&&(0,w.r3)(l,".priority")?(p=(0,w.DV)(l,".priority"),(0,w.hu)(Qy(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(tT(n.serverSyncTree_,e)||dt.EMPTY_NODE).getPriority().val();const g=ev(n),_=Jn(l,p),v=BN(_,a,g);o.currentOutputSnapshotRaw=_,o.currentOutputSnapshotResolved=v,o.currentWriteId=aT(n);const E=NN(n.serverSyncTree_,e,v,o.currentWriteId,o.applyLocally);js(n.eventQueue_,e,E),lT(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(l,c,h)=>{let p=null;l?s.reject(l):(p=new Rd(h,new go(n._repo,n._path),Tn),s.resolve(new xEe(c,p)))},a,i),s.promise}(this._delegate,e,{applyLocally:r}).then(s=>new kEe(s.committed,new zc(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){(0,w.Dv)("Reference.setPriority",1,2,arguments.length),(0,w.Wj)("Reference.setPriority","onComplete",t,!0);const r=function jbe(n,e){n=(0,w.m9)(n),mo("setPriority",n._path),GN("setPriority",e,!1);const t=new w.BH;return KN(n._repo,jn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,w.Dv)("Reference.push",0,2,arguments.length),(0,w.Wj)("Reference.push","onComplete",t,!0);const r=function Ube(n,e){n=(0,w.m9)(n),mo("push",n._path),Da("push",e,n._path,!0);const t=LW(n._repo),r=Vbe(t),i=Md(n,r),s=Md(n,r);let o;return o=null!=e?tk(s,e).then(()=>s):Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}(this._delegate,e),i=r.then(o=>new Hs(this.database,o));t&&i.then(()=>t(null),o=>t(o));const s=new Hs(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return mo("Reference.onDisconnect",this._delegate._path),new NEe(new KW(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class rv{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:_Ee,forceLongPolling:yEe}}useEmulator(e,t,r={}){!function o6(n,e,t,r={}){(n=(0,w.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Ca("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ca('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new ky(ky.OWNER);else if(r.mockUserToken){const o="string"==typeof r.mockUserToken?r.mockUserToken:(0,w.Sg)(r.mockUserToken,n.app.options.projectId);s=new ky(o)}!function hEe(n,e,t,r){n.repoInfo_=new tN(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(this._delegate,e,t,r)}ref(e){if((0,w.Dv)("database.ref",0,1,arguments.length),e instanceof Hs){const t=QW(this._delegate,e.toString());return new Hs(this,t)}{const t=ZW(this._delegate,e);return new Hs(this,t)}}refFromURL(e){(0,w.Dv)("database.refFromURL",1,1,arguments.length);const r=QW(this._delegate,e);return new Hs(this,r)}goOffline(){return(0,w.Dv)("database.goOffline",0,0,arguments.length),function vEe(n){(n=(0,w.m9)(n))._checkNotDeleted("goOffline"),jW(n._repo)}(this._delegate)}goOnline(){return(0,w.Dv)("database.goOnline",0,0,arguments.length),function bEe(n){(n=(0,w.m9)(n))._checkNotDeleted("goOnline"),function Mbe(n){n.persistentConnection_&&n.persistentConnection_.resume(FW)}(n._repo)}(this._delegate)}}rv.ServerValue={TIMESTAMP:function TEe(){return IEe}(),increment:n=>function CEe(n){return{".sv":{increment:n}}}(n)};var FEe=Object.freeze({__proto__:null,initStandalone:function OEe({app:n,url:e,version:t,customAuthImpl:r,customAppCheckImpl:i,namespace:s,nodeAdmin:o=!1}){QP(t);const a=new lo.H0("database-standalone"),l=new lo.zt("auth-internal",a);let c;return l.setComponent(new lo.wA("auth-internal",()=>r,"PRIVATE")),i&&(c=new lo.zt("app-check-internal",a),c.setComponent(new lo.wA("app-check-internal",()=>i,"PRIVATE"))),{instance:new rv(ik(n,l,c,e,o),n),namespace:s}}});const LEe=rv.ServerValue;function iv(n,e,t="on",r=u0){return new at(i=>{let s=null;return s=n[t](e,(o,a)=>{r.schedule(()=>{i.next({snapshot:o,prevKey:a})}),"once"===t&&r.schedule(()=>i.complete())},o=>{r.schedule(()=>i.error(o))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe(he(i=>{const{snapshot:s,prevKey:o}=i;let a=null;return s.exists()&&(a=s.key),{type:e,payload:s,prevKey:o,key:a}}),Ze())}function l6(n){return null==n}function c6(n){return"function"==typeof n.set}function u6(n,e){return c6(e)?e:n.ref(e)}function d6(n,e){if(function UEe(n){return"string"==typeof n}(n))return e.stringCase();if(c6(n))return e.firebaseCase();if(function BEe(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function h6(n){return(l6(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function f6(n,e,t){return J(...(e=h6(e)).map(i=>iv(n,i,"on",t)))}function p6(n,e){return function(r,i){return d6(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function zEe(n){return function(t){return t?d6(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function m6(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function WEe(n,e){const{payload:t,prevKey:r,key:i}=e,s=m6(n,i),o=function GEe(n,e){if(l6(e))return 0;{const t=m6(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload?.exists()){let a=null;e.payload.forEach(l=>{const c={payload:l,type:"value",prevKey:a,key:l.key};return a=l.key,n=[...n,c],!1})}return n;case"child_added":if(s>-1)(n[s-1]?.key||null)!==r&&(n=n.filter(l=>l.payload.key!==t.key)).splice(o,0,e);else{if(null==r)return[e,...n];(n=n.slice()).splice(o,0,e)}return n;case"child_removed":return n.filter(a=>a.payload.key!==t.key);case"child_changed":return n.map(a=>a.payload.key===i?e:a);case"child_moved":if(s>-1){const a=n.splice(s,1)[0];return(n=n.slice()).splice(o,0,a),n}return n;default:return n}}function g6(n,e,t){return function qEe(n,e,t){return iv(n,"value","once",t).pipe(xt(r=>{const i=[Q(r)];return e.forEach(s=>i.push(iv(n,s,"on",t))),J(...i).pipe(cf(WEe,[]))}),mn())}(n,e=h6(e),t)}function _6(n,e){return function(){return iv(n,"value","on",e)}}!function VEe(n){n.INTERNAL.registerComponent(new lo.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new rv(i,r)},"PUBLIC").setServiceProps({Reference:Hs,Query:gi,Database:rv,DataSnapshot:zc,enableLogging:EEe,INTERNAL:FEe,ServerValue:LEe}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","1.0.3")}(ms.Z);const QEe=new te("angularfire2.realtimeDatabaseURL"),YEe=new te("angularfire2.database.use-emulator");let XEe=(()=>{class n{schedulers;database;constructor(t,r,i,s,o,a,l,c,h,p,g,_,v,E,T){this.schedulers=a;const P=l,D=Qg(t,o,r);c&&FD(D,o,h,g,_,v,p,E),this.database=Yg(`${D.name}.database.${i}`,"AngularFireDatabase",D.name,()=>{const k=o.runOutsideAngular(()=>D.database(i||void 0));return P&&k.useEmulator(...P),k},[P])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>u6(this.database,t));let s=i;return r&&(s=r(i)),function KEe(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:p6(r,"update"),set:p6(r,"set"),push:i=>r.push(i),remove:zEe(r),snapshotChanges:i=>g6(n,i,t).pipe(yr),stateChanges:i=>f6(n,i,t).pipe(yr),auditTrail:i=>function jEe(n,e,t){return function $Ee(n,e,t){return function HEe(n,e){return iv(n,"value","on",e).pipe(he(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function $_e(...n){const e=Eo(n);return K((t,r)=>{const i=n.length,s=new Array(i);let o=n.map(()=>!1),a=!1;for(let l=0;l<i;l++)pn(n[l]).subscribe(fe(r,c=>{s[l]=c,!a&&!o[l]&&(o[l]=!0,(a=o.every(wt))&&(o=null))},we));t.subscribe(fe(r,l=>{if(a){const c=[l,...s];r.next(e?e(...c):c)}}))})}(e),he(([i,s])=>{const o=i.lastKeyToLoad,a=s.map(l=>l.key);return{actions:s,lastKeyToLoad:o,loadedKeys:a}}),function z_e(n){return K((e,t)=>{let r=!1,i=0;e.subscribe(fe(t,s=>(r||(r=!n(s,i++)))&&t.next(s)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),he(i=>i.actions))}(n,f6(n,e).pipe(cf((i,s)=>[...i,s],[])),t)}(n,i,t).pipe(yr),valueChanges:(i,s)=>g6(n,i,t).pipe(he(a=>a.map(l=>s&&s.idField?{...l.payload.val(),[s.idField]:l.key}:l.payload.val())),yr)}}(s,this)}object(t){return function ZEe(n,e){return{query:n,snapshotChanges:()=>_6(n,e.schedulers.outsideAngular)().pipe(yr),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>_6(n,e.schedulers.outsideAngular)().pipe(yr,he(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>u6(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(r){return new(r||n)(B(wf),B(If,8),B(QEe,8),B(Ps),B(Xe),B(h0),B(YEe,8),B(x0,8),B(RD,8),B(MD,8),B(PD,8),B(ND,8),B(kD,8),B(OD,8),B(d0,8))};static \u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),JEe=(()=>{class n{constructor(){ms.Z.registerVersion("angularfire",Fu.full,"rtdb-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=jt({type:n});static \u0275inj=Ot({providers:[XEe]})}return n})(),e0e=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=jt({type:n,bootstrap:[rpe]});static#n=this.\u0275inj=Ot({imports:[$2,Zhe,npe,Xme,nfe,epe,Hse,Mse,$re.initializeApp(Jme_firebase),boe,H_e,Zde,JEe,lB.forRoot("TU_MEASUREMENT_ID"),Cre,Xre]})}return n})();kee().bootstrapModule(e0e).catch(n=>console.error(n))},106:(Is,tr,Oe)=>{Oe.d(tr,{Z:()=>Hn});var I=Oe(58),ke=Oe(537),W=Oe(303),Ue=Oe(879);class mt{constructor(qe,Be){this._delegate=qe,this.firebase=Be,(0,W._addComponent)(qe,new ke.wA("app-compat",()=>this,"PUBLIC")),this.container=qe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(qe){this._delegate.automaticDataCollectionEnabled=qe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(qe=>{this._delegate.checkDestroyed(),qe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,W.deleteApp)(this._delegate)))}_getService(qe,Be=W._DEFAULT_ENTRY_NAME){var hn;this._delegate.checkDestroyed();const xn=this._delegate.container.getProvider(qe);return!xn.isInitialized()&&"EXPLICIT"===(null===(hn=xn.getComponent())||void 0===hn?void 0:hn.instantiationMode)&&xn.initialize(),xn.getImmediate({identifier:Be})}_removeServiceInstance(qe,Be=W._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(qe).clearInstance(Be)}_addComponent(qe){(0,W._addComponent)(this._delegate,qe)}_addOrOverwriteComponent(qe){(0,W._addOrOverwriteComponent)(this._delegate,qe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Wt=new I.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),X=function nt(){const st=function Jt(st){const qe={},Be={__esModule:!0,initializeApp:function On(Ke,ue={}){const L=W.initializeApp(Ke,ue);if((0,I.r3)(qe,L.name))return qe[L.name];const Pe=new st(L,Be);return qe[L.name]=Pe,Pe},app:xn,registerVersion:W.registerVersion,setLogLevel:W.setLogLevel,onLog:W.onLog,apps:null,SDK_VERSION:W.SDK_VERSION,INTERNAL:{registerComponent:function Lt(Ke){const ue=Ke.name,L=ue.replace("-compat","");if(W._registerComponent(Ke)&&"PUBLIC"===Ke.type){const Pe=(Ye=xn())=>{if("function"!=typeof Ye[L])throw Wt.create("invalid-app-argument",{appName:ue});return Ye[L]()};void 0!==Ke.serviceProps&&(0,I.ZB)(Pe,Ke.serviceProps),Be[L]=Pe,st.prototype[L]=function(...Ye){return this._getService.bind(this,ue).apply(this,Ke.multipleInstances?Ye:[])}}return"PUBLIC"===Ke.type?Be[L]:null},removeApp:function hn(Ke){delete qe[Ke]},useAsService:function An(Ke,ue){return"serverAuth"===ue?null:ue},modularAPIs:W}};function xn(Ke){if(!(0,I.r3)(qe,Ke=Ke||W._DEFAULT_ENTRY_NAME))throw Wt.create("no-app",{appName:Ke});return qe[Ke]}return Be.default=Be,Object.defineProperty(Be,"apps",{get:function Dt(){return Object.keys(qe).map(Ke=>qe[Ke])}}),xn.App=st,Be}(mt);return st.INTERNAL=Object.assign(Object.assign({},st.INTERNAL),{createFirebaseNamespace:nt,extendNamespace:function qe(Be){(0,I.ZB)(st,Be)},createSubscribe:I.ne,ErrorFactory:I.LL,deepExtend:I.ZB}),st}(),le=new Ue.Yd("@firebase/app-compat");if((0,I.jU)()&&void 0!==self.firebase){le.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const st=self.firebase.SDK_VERSION;st&&st.indexOf("LITE")>=0&&le.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Hn=X;!function Et(st){(0,W.registerVersion)("@firebase/app-compat","0.2.27",st)}()},303:(Is,tr,Oe)=>{Oe.r(tr),Oe.d(tr,{FirebaseError:()=>Ue.ZR,SDK_VERSION:()=>$n,_DEFAULT_ENTRY_NAME:()=>U,_addComponent:()=>ie,_addOrOverwriteComponent:()=>K,_apps:()=>j,_clearComponents:()=>Se,_components:()=>Y,_getProvider:()=>rt,_registerComponent:()=>fe,_removeServiceInstance:()=>he,deleteApp:()=>Rr,getApp:()=>nr,getApps:()=>hr,initializeApp:()=>fn,onLog:()=>pn,registerVersion:()=>Er,setLogLevel:()=>zs});var I=Oe(861),ke=Oe(537),W=Oe(879),Ue=Oe(58),mt=Oe(878);class Gt{constructor(re){this.container=re}getPlatformInfoString(){return this.container.getProviders().map(ve=>{if(function Wt(ge){const re=ge.getComponent();return"VERSION"===re?.type}(ve)){const je=ve.getImmediate();return`${je.library}/${je.version}`}return null}).filter(ve=>ve).join(" ")}}const Jt="@firebase/app",X=new W.Yd("@firebase/app"),U="[DEFAULT]",$={[Jt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},j=new Map,Y=new Map;function ie(ge,re){try{ge.container.addComponent(re)}catch(ve){X.debug(`Component ${re.name} failed to register with FirebaseApp ${ge.name}`,ve)}}function K(ge,re){ge.container.addOrOverwriteComponent(re)}function fe(ge){const re=ge.name;if(Y.has(re))return X.debug(`There were multiple attempts to register component ${re}.`),!1;Y.set(re,ge);for(const ve of j.values())ie(ve,ge);return!0}function rt(ge,re){const ve=ge.container.getProvider("heartbeat").getImmediate({optional:!0});return ve&&ve.triggerHeartbeat(),ge.container.getProvider(re)}function he(ge,re,ve=U){rt(ge,re).clearInstance(ve)}function Se(){Y.clear()}const Nt=new Ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class kt{constructor(re,ve,je){this._isDeleted=!1,this._options=Object.assign({},re),this._config=Object.assign({},ve),this._name=ve.name,this._automaticDataCollectionEnabled=ve.automaticDataCollectionEnabled,this._container=je,this.container.addComponent(new ke.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(re){this.checkDestroyed(),this._automaticDataCollectionEnabled=re}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(re){this._isDeleted=re}checkDestroyed(){if(this.isDeleted)throw Nt.create("app-deleted",{appName:this._name})}}const $n="10.8.0";function fn(ge,re={}){let ve=ge;"object"!=typeof re&&(re={name:re});const je=Object.assign({name:U,automaticDataCollectionEnabled:!1},re),Bt=je.name;if("string"!=typeof Bt||!Bt)throw Nt.create("bad-app-name",{appName:String(Bt)});if(ve||(ve=(0,Ue.aH)()),!ve)throw Nt.create("no-options");const Zt=j.get(Bt);if(Zt){if((0,Ue.vZ)(ve,Zt.options)&&(0,Ue.vZ)(je,Zt.config))return Zt;throw Nt.create("duplicate-app",{appName:Bt})}const zn=new ke.H0(Bt);for(const C of Y.values())zn.addComponent(C);const R=new kt(ve,je,zn);return j.set(Bt,R),R}function nr(ge=U){const re=j.get(ge);if(!re&&ge===U&&(0,Ue.aH)())return fn();if(!re)throw Nt.create("no-app",{appName:ge});return re}function hr(){return Array.from(j.values())}function Rr(ge){return is.apply(this,arguments)}function is(){return(is=(0,I.Z)(function*(ge){const re=ge.name;j.has(re)&&(j.delete(re),yield Promise.all(ge.container.getProviders().map(ve=>ve.delete())),ge.isDeleted=!0)})).apply(this,arguments)}function Er(ge,re,ve){var je;let Bt=null!==(je=$[ge])&&void 0!==je?je:ge;ve&&(Bt+=`-${ve}`);const Zt=Bt.match(/\s|\//),zn=re.match(/\s|\//);if(Zt||zn){const R=[`Unable to register library "${Bt}" with version "${re}":`];return Zt&&R.push(`library name "${Bt}" contains illegal characters (whitespace or "/")`),Zt&&zn&&R.push("and"),zn&&R.push(`version name "${re}" contains illegal characters (whitespace or "/")`),void X.warn(R.join(" "))}fe(new ke.wA(`${Bt}-version`,()=>({library:Bt,version:re}),"VERSION"))}function pn(ge,re){if(null!==ge&&"function"!=typeof ge)throw Nt.create("invalid-log-argument");(0,W.Am)(ge,re)}function zs(ge){(0,W.Ub)(ge)}const yo="firebase-heartbeat-database",vo=1,Ts="firebase-heartbeat-store";let ss=null;function qs(){return ss||(ss=(0,mt.X3)(yo,vo,{upgrade:(ge,re)=>{if(0===re)try{ge.createObjectStore(Ts)}catch(ve){console.warn(ve)}}}).catch(ge=>{throw Nt.create("idb-open",{originalErrorMessage:ge.message})})),ss}function Ln(){return(Ln=(0,I.Z)(function*(ge){try{const ve=(yield qs()).transaction(Ts),je=yield ve.objectStore(Ts).get(Jr(ge));return yield ve.done,je}catch(re){if(re instanceof Ue.ZR)X.warn(re.message);else{const ve=Nt.create("idb-get",{originalErrorMessage:re?.message});X.warn(ve.message)}}})).apply(this,arguments)}function Ho(ge,re){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,I.Z)(function*(ge,re){try{const je=(yield qs()).transaction(Ts,"readwrite");yield je.objectStore(Ts).put(re,Jr(ge)),yield je.done}catch(ve){if(ve instanceof Ue.ZR)X.warn(ve.message);else{const je=Nt.create("idb-set",{originalErrorMessage:ve?.message});X.warn(je.message)}}})).apply(this,arguments)}function Jr(ge){return`${ge.name}!${ge.options.appId}`}class Ra{constructor(re){this.container=re,this._heartbeatsCache=null;const ve=this.container.getProvider("app").getImmediate();this._storage=new Eo(ve),this._heartbeatsCachePromise=this._storage.read().then(je=>(this._heartbeatsCache=je,je))}triggerHeartbeat(){var re=this;return(0,I.Z)(function*(){var ve,je;const Zt=re.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),zn=wr();if((null!=(null===(ve=re._heartbeatsCache)||void 0===ve?void 0:ve.heartbeats)||(re._heartbeatsCache=yield re._heartbeatsCachePromise,null!=(null===(je=re._heartbeatsCache)||void 0===je?void 0:je.heartbeats)))&&re._heartbeatsCache.lastSentHeartbeatDate!==zn&&!re._heartbeatsCache.heartbeats.some(R=>R.date===zn))return re._heartbeatsCache.heartbeats.push({date:zn,agent:Zt}),re._heartbeatsCache.heartbeats=re._heartbeatsCache.heartbeats.filter(R=>{const C=new Date(R.date).valueOf();return Date.now()-C<=2592e6}),re._storage.overwrite(re._heartbeatsCache)})()}getHeartbeatsHeader(){var re=this;return(0,I.Z)(function*(){var ve;if(null===re._heartbeatsCache&&(yield re._heartbeatsCachePromise),null==(null===(ve=re._heartbeatsCache)||void 0===ve?void 0:ve.heartbeats)||0===re._heartbeatsCache.heartbeats.length)return"";const je=wr(),{heartbeatsToSend:Bt,unsentEntries:Zt}=function Li(ge,re=1024){const ve=[];let je=ge.slice();for(const Bt of ge){const Zt=ve.find(zn=>zn.agent===Bt.agent);if(Zt){if(Zt.dates.push(Bt.date),Vi(ve)>re){Zt.dates.pop();break}}else if(ve.push({agent:Bt.agent,dates:[Bt.date]}),Vi(ve)>re){ve.pop();break}je=je.slice(1)}return{heartbeatsToSend:ve,unsentEntries:je}}(re._heartbeatsCache.heartbeats),zn=(0,Ue.L)(JSON.stringify({version:2,heartbeats:Bt}));return re._heartbeatsCache.lastSentHeartbeatDate=je,Zt.length>0?(re._heartbeatsCache.heartbeats=Zt,yield re._storage.overwrite(re._heartbeatsCache)):(re._heartbeatsCache.heartbeats=[],re._storage.overwrite(re._heartbeatsCache)),zn})()}}function wr(){return(new Date).toISOString().substring(0,10)}class Eo{constructor(re){this.app=re,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,I.Z)(function*(){return!!(0,Ue.hl)()&&(0,Ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var re=this;return(0,I.Z)(function*(){if(yield re._canUseIndexedDBPromise){const je=yield function bo(ge){return Ln.apply(this,arguments)}(re.app);return je?.heartbeats?je:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(re){var ve=this;return(0,I.Z)(function*(){var je;if(yield ve._canUseIndexedDBPromise){const Zt=yield ve.read();return Ho(ve.app,{lastSentHeartbeatDate:null!==(je=re.lastSentHeartbeatDate)&&void 0!==je?je:Zt.lastSentHeartbeatDate,heartbeats:re.heartbeats})}})()}add(re){var ve=this;return(0,I.Z)(function*(){var je;if(yield ve._canUseIndexedDBPromise){const Zt=yield ve.read();return Ho(ve.app,{lastSentHeartbeatDate:null!==(je=re.lastSentHeartbeatDate)&&void 0!==je?je:Zt.lastSentHeartbeatDate,heartbeats:[...Zt.heartbeats,...re.heartbeats]})}})()}}function Vi(ge){return(0,Ue.L)(JSON.stringify({version:2,heartbeats:ge})).length}!function wo(ge){fe(new ke.wA("platform-logger",re=>new Gt(re),"PRIVATE")),fe(new ke.wA("heartbeat",re=>new Ra(re),"PRIVATE")),Er(Jt,"0.9.27",ge),Er(Jt,"0.9.27","esm2017"),Er("fire-js","")}("")},537:(Is,tr,Oe)=>{Oe.d(tr,{H0:()=>Jt,wA:()=>W,zt:()=>mt});var I=Oe(861),ke=Oe(58);class W{constructor(X,le,we){this.name=X,this.instanceFactory=le,this.type=we,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(X){return this.instantiationMode=X,this}setMultipleInstances(X){return this.multipleInstances=X,this}setServiceProps(X){return this.serviceProps=X,this}setInstanceCreatedCallback(X){return this.onInstanceCreated=X,this}}const Ue="[DEFAULT]";class mt{constructor(X,le){this.name=X,this.container=le,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(X){const le=this.normalizeInstanceIdentifier(X);if(!this.instancesDeferred.has(le)){const we=new ke.BH;if(this.instancesDeferred.set(le,we),this.isInitialized(le)||this.shouldAutoInitialize())try{const ht=this.getOrInitializeService({instanceIdentifier:le});ht&&we.resolve(ht)}catch{}}return this.instancesDeferred.get(le).promise}getImmediate(X){var le;const we=this.normalizeInstanceIdentifier(X?.identifier),ht=null!==(le=X?.optional)&&void 0!==le&&le;if(!this.isInitialized(we)&&!this.shouldAutoInitialize()){if(ht)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:we})}catch(Et){if(ht)return null;throw Et}}getComponent(){return this.component}setComponent(X){if(X.name!==this.name)throw Error(`Mismatching Component ${X.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=X,this.shouldAutoInitialize()){if(function Wt(nt){return"EAGER"===nt.instantiationMode}(X))try{this.getOrInitializeService({instanceIdentifier:Ue})}catch{}for(const[le,we]of this.instancesDeferred.entries()){const ht=this.normalizeInstanceIdentifier(le);try{const Et=this.getOrInitializeService({instanceIdentifier:ht});we.resolve(Et)}catch{}}}}clearInstance(X=Ue){this.instancesDeferred.delete(X),this.instancesOptions.delete(X),this.instances.delete(X)}delete(){var X=this;return(0,I.Z)(function*(){const le=Array.from(X.instances.values());yield Promise.all([...le.filter(we=>"INTERNAL"in we).map(we=>we.INTERNAL.delete()),...le.filter(we=>"_delete"in we).map(we=>we._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(X=Ue){return this.instances.has(X)}getOptions(X=Ue){return this.instancesOptions.get(X)||{}}initialize(X={}){const{options:le={}}=X,we=this.normalizeInstanceIdentifier(X.instanceIdentifier);if(this.isInitialized(we))throw Error(`${this.name}(${we}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ht=this.getOrInitializeService({instanceIdentifier:we,options:le});for(const[Et,Hn]of this.instancesDeferred.entries())we===this.normalizeInstanceIdentifier(Et)&&Hn.resolve(ht);return ht}onInit(X,le){var we;const ht=this.normalizeInstanceIdentifier(le),Et=null!==(we=this.onInitCallbacks.get(ht))&&void 0!==we?we:new Set;Et.add(X),this.onInitCallbacks.set(ht,Et);const Hn=this.instances.get(ht);return Hn&&X(Hn,ht),()=>{Et.delete(X)}}invokeOnInitCallbacks(X,le){const we=this.onInitCallbacks.get(le);if(we)for(const ht of we)try{ht(X,le)}catch{}}getOrInitializeService({instanceIdentifier:X,options:le={}}){let we=this.instances.get(X);if(!we&&this.component&&(we=this.component.instanceFactory(this.container,{instanceIdentifier:(nt=X,nt===Ue?void 0:nt),options:le}),this.instances.set(X,we),this.instancesOptions.set(X,le),this.invokeOnInitCallbacks(we,X),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,X,we)}catch{}var nt;return we||null}normalizeInstanceIdentifier(X=Ue){return this.component?this.component.multipleInstances?X:Ue:X}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Jt{constructor(X){this.name=X,this.providers=new Map}addComponent(X){const le=this.getProvider(X.name);if(le.isComponentSet())throw new Error(`Component ${X.name} has already been registered with ${this.name}`);le.setComponent(X)}addOrOverwriteComponent(X){this.getProvider(X.name).isComponentSet()&&this.providers.delete(X.name),this.addComponent(X)}getProvider(X){if(this.providers.has(X))return this.providers.get(X);const le=new mt(X,this);return this.providers.set(X,le),le}getProviders(){return Array.from(this.providers.values())}}},812:(Is,tr,Oe)=>{var I=Oe(861),ke=Oe(303),W=Oe(537),Ue=Oe(58),mt=Oe(878);const Gt="@firebase/installations",Wt="0.6.5",Jt=1e4,nt=`w:${Wt}`,X="FIS_v2",le="https://firebaseinstallations.googleapis.com/v1",we=36e5,st=new Ue.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function qe(N){return N instanceof Ue.ZR&&N.code.includes("request-failed")}function Be({projectId:N}){return`${le}/projects/${N}/installations`}function hn(N){return{token:N.token,requestStatus:2,expiresIn:ue(N.expiresIn),creationTime:Date.now()}}function xn(N,ee){return On.apply(this,arguments)}function On(){return(On=(0,I.Z)(function*(N,ee){const Le=(yield ee.json()).error;return st.create("request-failed",{requestName:N,serverCode:Le.code,serverMessage:Le.message,serverStatus:Le.status})})).apply(this,arguments)}function Dt({apiKey:N}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":N})}function An(N){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,I.Z)(function*(N){const ee=yield N();return ee.status>=500&&ee.status<600?N():ee})).apply(this,arguments)}function ue(N){return Number(N.replace("s","000"))}function Ye(){return(Ye=(0,I.Z)(function*({appConfig:N,heartbeatServiceProvider:ee},{fid:S}){const Le=Be(N),Ie=Dt(N),Ve=ee.getImmediate({optional:!0});if(Ve){const Mr=yield Ve.getHeartbeatsHeader();Mr&&Ie.append("x-firebase-client",Mr)}const _i={method:"POST",headers:Ie,body:JSON.stringify({fid:S,authVersion:X,appId:N.appId,sdkVersion:nt})},Io=yield An(()=>fetch(Le,_i));if(Io.ok){const Mr=yield Io.json();return{fid:Mr.fid||S,registrationStatus:2,refreshToken:Mr.refreshToken,authToken:hn(Mr.authToken)}}throw yield xn("Create Installation",Io)})).apply(this,arguments)}function wt(N){return new Promise(ee=>{setTimeout(ee,N)})}const en=/^[cdef][\w-]{21}$/,at="";function ln(){try{const N=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(N),N[0]=112+N[0]%16;const S=function dr(N){return function Fn(N){return btoa(String.fromCharCode(...N)).replace(/\+/g,"-").replace(/\//g,"_")}(N).substr(0,22)}(N);return en.test(S)?S:at}catch{return at}}function U(N){return`${N.appName}!${N.appId}`}const $=new Map;function j(N,ee){const S=U(N);K(S,ee),function fe(N,ee){const S=function he(){return!rt&&"BroadcastChannel"in self&&(rt=new BroadcastChannel("[Firebase] FID Change"),rt.onmessage=N=>{K(N.data.key,N.data.fid)}),rt}();S&&S.postMessage({key:N,fid:ee}),function Se(){0===$.size&&rt&&(rt.close(),rt=null)}()}(S,ee)}function K(N,ee){const S=$.get(N);if(S)for(const Le of S)Le(ee)}let rt=null;const Ct="firebase-installations-database",Nt=1,kt="firebase-installations-store";let $n=null;function fn(){return $n||($n=(0,mt.X3)(Ct,Nt,{upgrade:(N,ee)=>{0===ee&&N.createObjectStore(kt)}})),$n}function nr(N,ee){return hr.apply(this,arguments)}function hr(){return(hr=(0,I.Z)(function*(N,ee){const S=U(N),Ie=(yield fn()).transaction(kt,"readwrite"),Ve=Ie.objectStore(kt),jr=yield Ve.get(S);return yield Ve.put(ee,S),yield Ie.done,(!jr||jr.fid!==ee.fid)&&j(N,ee.fid),ee})).apply(this,arguments)}function Rr(N){return is.apply(this,arguments)}function is(){return(is=(0,I.Z)(function*(N){const ee=U(N),Le=(yield fn()).transaction(kt,"readwrite");yield Le.objectStore(kt).delete(ee),yield Le.done})).apply(this,arguments)}function Er(N,ee){return pn.apply(this,arguments)}function pn(){return(pn=(0,I.Z)(function*(N,ee){const S=U(N),Ie=(yield fn()).transaction(kt,"readwrite"),Ve=Ie.objectStore(kt),jr=yield Ve.get(S),_i=ee(jr);return void 0===_i?yield Ve.delete(S):yield Ve.put(_i,S),yield Ie.done,_i&&(!jr||jr.fid!==_i.fid)&&j(N,_i.fid),_i})).apply(this,arguments)}function zs(N){return yo.apply(this,arguments)}function yo(){return yo=(0,I.Z)(function*(N){let ee;const S=yield Er(N.appConfig,Le=>{const Ie=function vo(N){return Kt(N||{fid:ln(),registrationStatus:0})}(Le),Ve=function Ts(N,ee){if(0===ee.registrationStatus){if(!navigator.onLine)return{installationEntry:ee,registrationPromise:Promise.reject(st.create("app-offline"))};const S={fid:ee.fid,registrationStatus:1,registrationTime:Date.now()},Le=function ss(N,ee){return qs.apply(this,arguments)}(N,S);return{installationEntry:S,registrationPromise:Le}}return 1===ee.registrationStatus?{installationEntry:ee,registrationPromise:bo(N)}:{installationEntry:ee}}(N,Ie);return ee=Ve.registrationPromise,Ve.installationEntry});return S.fid===at?{installationEntry:yield ee}:{installationEntry:S,registrationPromise:ee}}),yo.apply(this,arguments)}function qs(){return qs=(0,I.Z)(function*(N,ee){try{const S=yield function Pe(N,ee){return Ye.apply(this,arguments)}(N,ee);return nr(N.appConfig,S)}catch(S){throw qe(S)&&409===S.customData.serverCode?yield Rr(N.appConfig):yield nr(N.appConfig,{fid:ee.fid,registrationStatus:0}),S}}),qs.apply(this,arguments)}function bo(N){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,I.Z)(function*(N){let ee=yield Ho(N.appConfig);for(;1===ee.registrationStatus;)yield wt(100),ee=yield Ho(N.appConfig);if(0===ee.registrationStatus){const{installationEntry:S,registrationPromise:Le}=yield zs(N);return Le||S}return ee})).apply(this,arguments)}function Ho(N){return Er(N,ee=>{if(!ee)throw st.create("installation-not-found");return Kt(ee)})}function Kt(N){return function Jr(N){return 1===N.registrationStatus&&N.registrationTime+Jt<Date.now()}(N)?{fid:N.fid,registrationStatus:0}:N}function Gs(){return(Gs=(0,I.Z)(function*({appConfig:N,heartbeatServiceProvider:ee},S){const Le=function Ra(N,{fid:ee}){return`${Be(N)}/${ee}/authTokens:generate`}(N,S),Ie=function Lt(N,{refreshToken:ee}){const S=Dt(N);return S.append("Authorization",function L(N){return`${X} ${N}`}(ee)),S}(N,S),Ve=ee.getImmediate({optional:!0});if(Ve){const Mr=yield Ve.getHeartbeatsHeader();Mr&&Ie.append("x-firebase-client",Mr)}const _i={method:"POST",headers:Ie,body:JSON.stringify({installation:{sdkVersion:nt,appId:N.appId}})},Io=yield An(()=>fetch(Le,_i));if(Io.ok)return hn(yield Io.json());throw yield xn("Generate Auth Token",Io)})).apply(this,arguments)}function wr(N){return Li.apply(this,arguments)}function Li(){return Li=(0,I.Z)(function*(N,ee=!1){let S;const Le=yield Er(N.appConfig,Ve=>{if(!ve(Ve))throw st.create("not-registered");const jr=Ve.authToken;if(!ee&&function je(N){return 2===N.requestStatus&&!function Bt(N){const ee=Date.now();return ee<N.creationTime||N.creationTime+N.expiresIn<ee+we}(N)}(jr))return Ve;if(1===jr.requestStatus)return S=function Eo(N,ee){return Vi.apply(this,arguments)}(N,ee),Ve;{if(!navigator.onLine)throw st.create("app-offline");const _i=function Zt(N){const ee={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},N),{authToken:ee})}(Ve);return S=function ge(N,ee){return re.apply(this,arguments)}(N,_i),_i}});return S?yield S:Le.authToken}),Li.apply(this,arguments)}function Vi(){return(Vi=(0,I.Z)(function*(N,ee){let S=yield wo(N.appConfig);for(;1===S.authToken.requestStatus;)yield wt(100),S=yield wo(N.appConfig);const Le=S.authToken;return 0===Le.requestStatus?wr(N,ee):Le})).apply(this,arguments)}function wo(N){return Er(N,ee=>{if(!ve(ee))throw st.create("not-registered");return function zn(N){return 1===N.requestStatus&&N.requestTime+Jt<Date.now()}(ee.authToken)?Object.assign(Object.assign({},ee),{authToken:{requestStatus:0}}):ee})}function re(){return re=(0,I.Z)(function*(N,ee){try{const S=yield function Dn(N,ee){return Gs.apply(this,arguments)}(N,ee),Le=Object.assign(Object.assign({},ee),{authToken:S});return yield nr(N.appConfig,Le),S}catch(S){if(!qe(S)||401!==S.customData.serverCode&&404!==S.customData.serverCode){const Le=Object.assign(Object.assign({},ee),{authToken:{requestStatus:0}});yield nr(N.appConfig,Le)}else yield Rr(N.appConfig);throw S}}),re.apply(this,arguments)}function ve(N){return void 0!==N&&2===N.registrationStatus}function C(){return(C=(0,I.Z)(function*(N){const ee=N,{installationEntry:S,registrationPromise:Le}=yield zs(ee);return Le?Le.catch(console.error):wr(ee).catch(console.error),S.fid})).apply(this,arguments)}function J(){return J=(0,I.Z)(function*(N,ee=!1){const S=N;return yield function F(N){return Q.apply(this,arguments)}(S),(yield wr(S,ee)).token}),J.apply(this,arguments)}function Q(){return(Q=(0,I.Z)(function*(N){const{registrationPromise:ee}=yield zs(N);ee&&(yield ee)})).apply(this,arguments)}function Cs(N){return st.create("missing-app-config-values",{valueName:N})}const Gc="installations",He=N=>{const ee=N.getProvider("app").getImmediate(),S=function tn(N){if(!N||!N.options)throw Cs("App Configuration");if(!N.name)throw Cs("App Name");const ee=["projectId","apiKey","appId"];for(const S of ee)if(!N.options[S])throw Cs(S);return{appName:N.name,projectId:N.options.projectId,apiKey:N.options.apiKey,appId:N.options.appId}}(ee);return{app:ee,appConfig:S,heartbeatServiceProvider:(0,ke._getProvider)(ee,"heartbeat"),_delete:()=>Promise.resolve()}},Il=N=>{const ee=N.getProvider("app").getImmediate(),S=(0,ke._getProvider)(ee,Gc).getImmediate();return{getId:()=>function R(N){return C.apply(this,arguments)}(S),getToken:Ie=>function M(N){return J.apply(this,arguments)}(S,Ie)}};(function Tl(){(0,ke._registerComponent)(new W.wA(Gc,He,"PUBLIC")),(0,ke._registerComponent)(new W.wA("installations-internal",Il,"PRIVATE"))})(),(0,ke.registerVersion)(Gt,Wt),(0,ke.registerVersion)(Gt,Wt,"esm2017")},879:(Is,tr,Oe)=>{Oe.d(tr,{Am:()=>nt,Ub:()=>Jt,Yd:()=>Wt,in:()=>ke});const I=[];var ke=function(X){return X[X.DEBUG=0]="DEBUG",X[X.VERBOSE=1]="VERBOSE",X[X.INFO=2]="INFO",X[X.WARN=3]="WARN",X[X.ERROR=4]="ERROR",X[X.SILENT=5]="SILENT",X}(ke||{});const W={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},Ue=ke.INFO,mt={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},Gt=(X,le,...we)=>{if(le<X.logLevel)return;const ht=(new Date).toISOString(),Et=mt[le];if(!Et)throw new Error(`Attempted to log a message with an invalid logType (value: ${le})`);console[Et](`[${ht}]  ${X.name}:`,...we)};class Wt{constructor(le){this.name=le,this._logLevel=Ue,this._logHandler=Gt,this._userLogHandler=null,I.push(this)}get logLevel(){return this._logLevel}set logLevel(le){if(!(le in ke))throw new TypeError(`Invalid value "${le}" assigned to \`logLevel\``);this._logLevel=le}setLogLevel(le){this._logLevel="string"==typeof le?W[le]:le}get logHandler(){return this._logHandler}set logHandler(le){if("function"!=typeof le)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=le}get userLogHandler(){return this._userLogHandler}set userLogHandler(le){this._userLogHandler=le}debug(...le){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...le),this._logHandler(this,ke.DEBUG,...le)}log(...le){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...le),this._logHandler(this,ke.VERBOSE,...le)}info(...le){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...le),this._logHandler(this,ke.INFO,...le)}warn(...le){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...le),this._logHandler(this,ke.WARN,...le)}error(...le){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...le),this._logHandler(this,ke.ERROR,...le)}}function Jt(X){I.forEach(le=>{le.setLogLevel(X)})}function nt(X,le){for(const we of I){let ht=null;le&&le.level&&(ht=W[le.level]),we.userLogHandler=null===X?null:(Et,Hn,...st)=>{const qe=st.map(Be=>{if(null==Be)return null;if("string"==typeof Be)return Be;if("number"==typeof Be||"boolean"==typeof Be)return Be.toString();if(Be instanceof Error)return Be.message;try{return JSON.stringify(Be)}catch{return null}}).filter(Be=>Be).join(" ");Hn>=(ht??Et.logLevel)&&X({level:ke[Hn].toLowerCase(),message:qe,args:st,type:Et.name})}}}},999:(Is,tr,Oe)=>{Oe.r(tr);var I=Oe(861),ke=Oe(106),W=Oe(58),Ue=Oe(303),mt=Oe(879),Gt=Oe(582),Wt=Oe(537);const nt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Hn=function ht(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},st=function Et(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},qe=new W.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),hn=new mt.Yd("@firebase/auth");function On(f,...u){hn.logLevel<=mt.in.ERROR&&hn.error(`Auth (${Ue.SDK_VERSION}): ${f}`,...u)}function Dt(f,...u){throw ue(f,...u)}function Lt(f,...u){return ue(f,...u)}function An(f,u,d){const m=Object.assign(Object.assign({},st()),{[u]:d});return new W.LL("auth","Firebase",m).create(u,{appName:f.name})}function Ke(f,u,d){if(!(u instanceof d))throw d.name!==u.constructor.name&&Dt(f,"argument-error"),An(f,"argument-error",`Type of ${u.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ue(f,...u){if("string"!=typeof f){const d=u[0],m=[...u.slice(1)];return m[0]&&(m[0].appName=f.name),f._errorFactory.create(d,...m)}return qe.create(f,...u)}function L(f,u,...d){if(!f)throw ue(u,...d)}function Pe(f){const u="INTERNAL ASSERTION FAILED: "+f;throw On(u),new Error(u)}function Ye(f,u){f||Pe(u)}function wt(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.href)||""}function Fn(){return"http:"===en()||"https:"===en()}function en(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.protocol)||null}class dr{constructor(u,d){this.shortDelay=u,this.longDelay=d,Ye(d>u,"Short delay should be less than long delay!"),this.isMobile=(0,W.uI)()||(0,W.b$)()}get(){return function at(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Fn()||(0,W.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function U(f,u){Ye(f.emulator,"Emulator should always be set here");const{url:d}=f.emulator;return u?`${d}${u.startsWith("/")?u.slice(1):u}`:d}class ${static initialize(u,d,m){this.fetchImpl=u,d&&(this.headersImpl=d),m&&(this.responseImpl=m)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Pe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Pe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Pe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const j={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Y=new dr(3e4,6e4);function ie(f,u){return f.tenantId&&!u.tenantId?Object.assign(Object.assign({},u),{tenantId:f.tenantId}):u}function K(f,u,d,m){return fe.apply(this,arguments)}function fe(){return(fe=(0,I.Z)(function*(f,u,d,m,y={}){return rt(f,y,(0,I.Z)(function*(){let b={},x={};m&&("GET"===u?x=m:b={body:JSON.stringify(m)});const O=(0,W.xO)(Object.assign({key:f.config.apiKey},x)).slice(1),ne=yield f._getAdditionalHeaders();return ne["Content-Type"]="application/json",f.languageCode&&(ne["X-Firebase-Locale"]=f.languageCode),$.fetch()(Nt(f,f.config.apiHost,d,O),Object.assign({method:u,headers:ne,referrerPolicy:"no-referrer"},b))}))})).apply(this,arguments)}function rt(f,u,d){return he.apply(this,arguments)}function he(){return(he=(0,I.Z)(function*(f,u,d){f._canInitEmulator=!1;const m=Object.assign(Object.assign({},j),u);try{const y=new $n(f),b=yield Promise.race([d(),y.promise]);y.clearNetworkTimeout();const x=yield b.json();if("needConfirmation"in x)throw fn(f,"account-exists-with-different-credential",x);if(b.ok&&!("errorMessage"in x))return x;{const O=b.ok?x.errorMessage:x.error.message,[ne,_e]=O.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ne)throw fn(f,"credential-already-in-use",x);if("EMAIL_EXISTS"===ne)throw fn(f,"email-already-in-use",x);if("USER_DISABLED"===ne)throw fn(f,"user-disabled",x);const Ce=m[ne]||ne.toLowerCase().replace(/[_\s]+/g,"-");if(_e)throw An(f,Ce,_e);Dt(f,Ce)}}catch(y){if(y instanceof W.ZR)throw y;Dt(f,"network-request-failed",{message:String(y)})}})).apply(this,arguments)}function Se(f,u,d,m){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,I.Z)(function*(f,u,d,m,y={}){const b=yield K(f,u,d,m,y);return"mfaPendingCredential"in b&&Dt(f,"multi-factor-auth-required",{_serverResponse:b}),b})).apply(this,arguments)}function Nt(f,u,d,m){const y=`${u}${d}?${m}`;return f.config.emulator?U(f.config,y):`${f.config.apiScheme}://${y}`}function kt(f){switch(f){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $n{constructor(u){this.auth=u,this.timer=null,this.promise=new Promise((d,m)=>{this.timer=setTimeout(()=>m(Lt(this.auth,"network-request-failed")),Y.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function fn(f,u,d){const m={appName:f.name};d.email&&(m.email=d.email),d.phoneNumber&&(m.phoneNumber=d.phoneNumber);const y=Lt(f,u,m);return y.customData._tokenResponse=d,y}function nr(f){return void 0!==f&&void 0!==f.getResponse}function hr(f){return void 0!==f&&void 0!==f.enterprise}class Rr{constructor(u){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===u.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=u.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=u.recaptchaEnforcementState}getProviderEnforcementState(u){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===u)return kt(d.enforcementState);return null}isProviderEnabled(u){return"ENFORCE"===this.getProviderEnforcementState(u)||"AUDIT"===this.getProviderEnforcementState(u)}}function Er(){return(Er=(0,I.Z)(function*(f){return(yield K(f,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function pn(f,u){return zs.apply(this,arguments)}function zs(){return(zs=(0,I.Z)(function*(f,u){return K(f,"GET","/v2/recaptchaConfig",ie(f,u))})).apply(this,arguments)}function vo(){return(vo=(0,I.Z)(function*(f,u){return K(f,"POST","/v1/accounts:delete",u)})).apply(this,arguments)}function ss(){return(ss=(0,I.Z)(function*(f,u){return K(f,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function bo(){return(bo=(0,I.Z)(function*(f,u){return K(f,"POST","/v1/accounts:lookup",u)})).apply(this,arguments)}function Ln(f){if(f)try{const u=new Date(Number(f));if(!isNaN(u.getTime()))return u.toUTCString()}catch{}}function Jr(){return(Jr=(0,I.Z)(function*(f,u=!1){const d=(0,W.m9)(f),m=yield d.getIdToken(u),y=Gs(m);L(y&&y.exp&&y.auth_time&&y.iat,d.auth,"internal-error");const b="object"==typeof y.firebase?y.firebase:void 0,x=b?.sign_in_provider;return{claims:y,token:m,authTime:Ln(Dn(y.auth_time)),issuedAtTime:Ln(Dn(y.iat)),expirationTime:Ln(Dn(y.exp)),signInProvider:x||null,signInSecondFactor:b?.sign_in_second_factor||null}})).apply(this,arguments)}function Dn(f){return 1e3*Number(f)}function Gs(f){const[u,d,m]=f.split(".");if(void 0===u||void 0===d||void 0===m)return On("JWT malformed, contained fewer than 3 sections"),null;try{const y=(0,W.tV)(d);return y?JSON.parse(y):(On("Failed to decode base64 JWT payload"),null)}catch(y){return On("Caught error parsing JWT payload as JSON",y?.toString()),null}}function wr(f,u){return Li.apply(this,arguments)}function Li(){return(Li=(0,I.Z)(function*(f,u,d=!1){if(d)return u;try{return yield u}catch(m){throw m instanceof W.ZR&&function Eo({code:f}){return"auth/user-disabled"===f||"auth/user-token-expired"===f}(m)&&f.auth.currentUser===f&&(yield f.auth.signOut()),m}})).apply(this,arguments)}class Vi{constructor(u){this.user=u,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(u){var d;if(u){const m=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),m}{this.errorBackoff=3e4;const y=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,y)}}schedule(u=!1){var d=this;if(!this.isRunning)return;const m=this.getInterval(u);this.timerId=setTimeout((0,I.Z)(function*(){yield d.iteration()}),m)}iteration(){var u=this;return(0,I.Z)(function*(){try{yield u.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&u.schedule(!0))}u.schedule()})()}}class wo{constructor(u,d){this.createdAt=u,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ln(this.lastLoginAt),this.creationTime=Ln(this.createdAt)}_copy(u){this.createdAt=u.createdAt,this.lastLoginAt=u.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ge(f){return re.apply(this,arguments)}function re(){return re=(0,I.Z)(function*(f){var u;const d=f.auth,m=yield f.getIdToken(),y=yield wr(f,function qs(f,u){return bo.apply(this,arguments)}(d,{idToken:m}));L(y?.users.length,d,"internal-error");const b=y.users[0];f._notifyReloadListener(b);const x=null!==(u=b.providerUserInfo)&&void 0!==u&&u.length?function Zt(f){return f.map(u=>{var{providerId:d}=u,m=(0,Gt._T)(u,["providerId"]);return{providerId:d,uid:m.rawId||"",displayName:m.displayName||null,email:m.email||null,phoneNumber:m.phoneNumber||null,photoURL:m.photoUrl||null}})}(b.providerUserInfo):[],O=function Bt(f,u){return[...f.filter(m=>!u.some(y=>y.providerId===m.providerId)),...u]}(f.providerData,x),Ce=!!f.isAnonymous&&!(f.email&&b.passwordHash||O?.length),xe={uid:b.localId,displayName:b.displayName||null,photoURL:b.photoUrl||null,email:b.email||null,emailVerified:b.emailVerified||!1,phoneNumber:b.phoneNumber||null,tenantId:b.tenantId||null,providerData:O,metadata:new wo(b.createdAt,b.lastLoginAt),isAnonymous:Ce};Object.assign(f,xe)}),re.apply(this,arguments)}function je(){return(je=(0,I.Z)(function*(f){const u=(0,W.m9)(f);yield ge(u),yield u.auth._persistUserIfCurrent(u),u.auth._notifyListenersIfCurrent(u)})).apply(this,arguments)}function R(){return(R=(0,I.Z)(function*(f,u){const d=yield rt(f,{},(0,I.Z)(function*(){const m=(0,W.xO)({grant_type:"refresh_token",refresh_token:u}).slice(1),{tokenApiHost:y,apiKey:b}=f.config,x=Nt(f,y,"/v1/token",`key=${b}`),O=yield f._getAdditionalHeaders();return O["Content-Type"]="application/x-www-form-urlencoded",$.fetch()(x,{method:"POST",headers:O,body:m})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function M(){return(M=(0,I.Z)(function*(f,u){return K(f,"POST","/v2/accounts:revokeToken",ie(f,u))})).apply(this,arguments)}class J{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(u){L(u.idToken,"internal-error"),L(typeof u.idToken<"u","internal-error"),L(typeof u.refreshToken<"u","internal-error");const d="expiresIn"in u&&typeof u.expiresIn<"u"?Number(u.expiresIn):function Ra(f){const u=Gs(f);return L(u,"internal-error"),L(typeof u.exp<"u","internal-error"),L(typeof u.iat<"u","internal-error"),Number(u.exp)-Number(u.iat)}(u.idToken);this.updateTokensAndExpiration(u.idToken,u.refreshToken,d)}getToken(u,d=!1){var m=this;return(0,I.Z)(function*(){return L(!m.accessToken||m.refreshToken,u,"user-token-expired"),d||!m.accessToken||m.isExpired?m.refreshToken?(yield m.refresh(u,m.refreshToken),m.accessToken):null:m.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(u,d){var m=this;return(0,I.Z)(function*(){const{accessToken:y,refreshToken:b,expiresIn:x}=yield function zn(f,u){return R.apply(this,arguments)}(u,d);m.updateTokensAndExpiration(y,b,Number(x))})()}updateTokensAndExpiration(u,d,m){this.refreshToken=d||null,this.accessToken=u||null,this.expirationTime=Date.now()+1e3*m}static fromJSON(u,d){const{refreshToken:m,accessToken:y,expirationTime:b}=d,x=new J;return m&&(L("string"==typeof m,"internal-error",{appName:u}),x.refreshToken=m),y&&(L("string"==typeof y,"internal-error",{appName:u}),x.accessToken=y),b&&(L("number"==typeof b,"internal-error",{appName:u}),x.expirationTime=b),x}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(u){this.accessToken=u.accessToken,this.refreshToken=u.refreshToken,this.expirationTime=u.expirationTime}_clone(){return Object.assign(new J,this.toJSON())}_performRefresh(){return Pe("not implemented")}}function F(f,u){L("string"==typeof f||typeof f>"u","internal-error",{appName:u})}class Q{constructor(u){var{uid:d,auth:m,stsTokenManager:y}=u,b=(0,Gt._T)(u,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Vi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=m,this.stsTokenManager=y,this.accessToken=y.accessToken,this.displayName=b.displayName||null,this.email=b.email||null,this.emailVerified=b.emailVerified||!1,this.phoneNumber=b.phoneNumber||null,this.photoURL=b.photoURL||null,this.isAnonymous=b.isAnonymous||!1,this.tenantId=b.tenantId||null,this.providerData=b.providerData?[...b.providerData]:[],this.metadata=new wo(b.createdAt||void 0,b.lastLoginAt||void 0)}getIdToken(u){var d=this;return(0,I.Z)(function*(){const m=yield wr(d,d.stsTokenManager.getToken(d.auth,u));return L(m,d.auth,"internal-error"),d.accessToken!==m&&(d.accessToken=m,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),m})()}getIdTokenResult(u){return function Kt(f){return Jr.apply(this,arguments)}(this,u)}reload(){return function ve(f){return je.apply(this,arguments)}(this)}_assign(u){this!==u&&(L(this.uid===u.uid,this.auth,"internal-error"),this.displayName=u.displayName,this.photoURL=u.photoURL,this.email=u.email,this.emailVerified=u.emailVerified,this.phoneNumber=u.phoneNumber,this.isAnonymous=u.isAnonymous,this.tenantId=u.tenantId,this.providerData=u.providerData.map(d=>Object.assign({},d)),this.metadata._copy(u.metadata),this.stsTokenManager._assign(u.stsTokenManager))}_clone(u){const d=new Q(Object.assign(Object.assign({},this),{auth:u,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(u){L(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=u,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(u){this.reloadListener?this.reloadListener(u):this.reloadUserInfo=u}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(u,d=!1){var m=this;return(0,I.Z)(function*(){let y=!1;u.idToken&&u.idToken!==m.stsTokenManager.accessToken&&(m.stsTokenManager.updateFromServerResponse(u),y=!0),d&&(yield ge(m)),yield m.auth._persistUserIfCurrent(m),y&&m.auth._notifyListenersIfCurrent(m)})()}delete(){var u=this;return(0,I.Z)(function*(){const d=yield u.getIdToken();return yield wr(u,function yo(f,u){return vo.apply(this,arguments)}(u.auth,{idToken:d})),u.stsTokenManager.clearRefreshToken(),u.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(u=>Object.assign({},u)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(u,d){var m,y,b,x,O,ne,_e,Ce;const xe=null!==(m=d.displayName)&&void 0!==m?m:void 0,Rn=null!==(y=d.email)&&void 0!==y?y:void 0,Ii=null!==(b=d.phoneNumber)&&void 0!==b?b:void 0,Eu=null!==(x=d.photoURL)&&void 0!==x?x:void 0,vb=null!==(O=d.tenantId)&&void 0!==O?O:void 0,Dh=null!==(ne=d._redirectEventId)&&void 0!==ne?ne:void 0,uC=null!==(_e=d.createdAt)&&void 0!==_e?_e:void 0,Zm=null!==(Ce=d.lastLoginAt)&&void 0!==Ce?Ce:void 0,{uid:bb,emailVerified:Eb,isAnonymous:wb,providerData:wu,stsTokenManager:dC}=d;L(bb&&dC,u,"internal-error");const jk=J.fromJSON(this.name,dC);L("string"==typeof bb,u,"internal-error"),F(xe,u.name),F(Rn,u.name),L("boolean"==typeof Eb,u,"internal-error"),L("boolean"==typeof wb,u,"internal-error"),F(Ii,u.name),F(Eu,u.name),F(vb,u.name),F(Dh,u.name),F(uC,u.name),F(Zm,u.name);const Iu=new Q({uid:bb,auth:u,email:Rn,emailVerified:Eb,displayName:xe,isAnonymous:wb,photoURL:Eu,phoneNumber:Ii,tenantId:vb,stsTokenManager:jk,createdAt:uC,lastLoginAt:Zm});return wu&&Array.isArray(wu)&&(Iu.providerData=wu.map(Hk=>Object.assign({},Hk))),Dh&&(Iu._redirectEventId=Dh),Iu}static _fromIdTokenResponse(u,d,m=!1){return(0,I.Z)(function*(){const y=new J;y.updateFromServerResponse(d);const b=new Q({uid:d.localId,auth:u,stsTokenManager:y,isAnonymous:m});return yield ge(b),b})()}}const Ze=new Map;function ut(f){Ye(f instanceof Function,"Expected a class definition");let u=Ze.get(f);return u?(Ye(u instanceof f,"Instance stored in cache mismatched with class"),u):(u=new f,Ze.set(f,u),u)}const mn=(()=>{class f{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,I.Z)(function*(){return!0})()}_set(d,m){var y=this;return(0,I.Z)(function*(){y.storage[d]=m})()}_get(d){var m=this;return(0,I.Z)(function*(){const y=m.storage[d];return void 0===y?null:y})()}_remove(d){var m=this;return(0,I.Z)(function*(){delete m.storage[d]})()}_addListener(d,m){}_removeListener(d,m){}}return f.type="NONE",f})();function rr(f,u,d){return`firebase:${f}:${u}:${d}`}class Re{constructor(u,d,m){this.persistence=u,this.auth=d,this.userKey=m;const{config:y,name:b}=this.auth;this.fullUserKey=rr(this.userKey,y.apiKey,b),this.fullPersistenceKey=rr("persistence",y.apiKey,b),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(u){return this.persistence._set(this.fullUserKey,u.toJSON())}getCurrentUser(){var u=this;return(0,I.Z)(function*(){const d=yield u.persistence._get(u.fullUserKey);return d?Q._fromJSON(u.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(u){var d=this;return(0,I.Z)(function*(){if(d.persistence===u)return;const m=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=u,m?d.setCurrentUser(m):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(u,d,m="authUser"){return(0,I.Z)(function*(){if(!d.length)return new Re(ut(mn),u,m);const y=(yield Promise.all(d.map(function(){var _e=(0,I.Z)(function*(Ce){if(yield Ce._isAvailable())return Ce});return function(Ce){return _e.apply(this,arguments)}}()))).filter(_e=>_e);let b=y[0]||ut(mn);const x=rr(m,u.config.apiKey,u.name);let O=null;for(const _e of d)try{const Ce=yield _e._get(x);if(Ce){const xe=Q._fromJSON(u,Ce);_e!==b&&(O=xe),b=_e;break}}catch{}const ne=y.filter(_e=>_e._shouldAllowMigration);return b._shouldAllowMigration&&ne.length?(b=ne[0],O&&(yield b._set(x,O.toJSON())),yield Promise.all(d.map(function(){var _e=(0,I.Z)(function*(Ce){if(Ce!==b)try{yield Ce._remove(x)}catch{}});return function(Ce){return _e.apply(this,arguments)}}())),new Re(b,u,m)):new Re(b,u,m)})()}}function Br(f){const u=f.toLowerCase();if(u.includes("opera/")||u.includes("opr/")||u.includes("opios/"))return"Opera";if($t(u))return"IEMobile";if(u.includes("msie")||u.includes("trident/"))return"IE";if(u.includes("edge/"))return"Edge";if(tn(u))return"Firefox";if(u.includes("silk/"))return"Silk";if(Il(u))return"Blackberry";if(Tl(u))return"Webos";if(Cs(u))return"Safari";if((u.includes("chrome/")||Gc(u))&&!u.includes("edge/"))return"Chrome";if(He(u))return"Android";{const m=f.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===m?.length)return m[1]}return"Other"}function tn(f=(0,W.z$)()){return/firefox\//i.test(f)}function Cs(f=(0,W.z$)()){const u=f.toLowerCase();return u.includes("safari/")&&!u.includes("chrome/")&&!u.includes("crios/")&&!u.includes("android")}function Gc(f=(0,W.z$)()){return/crios\//i.test(f)}function $t(f=(0,W.z$)()){return/iemobile/i.test(f)}function He(f=(0,W.z$)()){return/android/i.test(f)}function Il(f=(0,W.z$)()){return/blackberry/i.test(f)}function Tl(f=(0,W.z$)()){return/webos/i.test(f)}function N(f=(0,W.z$)()){return/iphone|ipad|ipod/i.test(f)||/macintosh/i.test(f)&&/mobile/i.test(f)}function Ie(f=(0,W.z$)()){return N(f)||He(f)||Tl(f)||Il(f)||/windows phone/i.test(f)||$t(f)}function jr(f,u=[]){let d;switch(f){case"Browser":d=Br((0,W.z$)());break;case"Worker":d=`${Br((0,W.z$)())}-${f}`;break;default:d=f}const m=u.length?u.join(","):"FirebaseCore-web";return`${d}/JsCore/${Ue.SDK_VERSION}/${m}`}class _i{constructor(u){this.auth=u,this.queue=[]}pushCallback(u,d){const m=b=>new Promise((x,O)=>{try{x(u(b))}catch(ne){O(ne)}});m.onAbort=d,this.queue.push(m);const y=this.queue.length-1;return()=>{this.queue[y]=()=>Promise.resolve()}}runMiddleware(u){var d=this;return(0,I.Z)(function*(){if(d.auth.currentUser===u)return;const m=[];try{for(const y of d.queue)yield y(u),y.onAbort&&m.push(y.onAbort)}catch(y){m.reverse();for(const b of m)try{b()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:y?.message})}})()}}function Mr(){return(Mr=(0,I.Z)(function*(f,u={}){return K(f,"GET","/v2/passwordPolicy",ie(f,u))})).apply(this,arguments)}class ok{constructor(u){var d,m,y,b;const x=u.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=x.minPasswordLength)&&void 0!==d?d:6,x.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=x.maxPasswordLength),void 0!==x.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=x.containsLowercaseCharacter),void 0!==x.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=x.containsUppercaseCharacter),void 0!==x.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=x.containsNumericCharacter),void 0!==x.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=x.containsNonAlphanumericCharacter),this.enforcementState=u.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(y=null===(m=u.allowedNonAlphanumericCharacters)||void 0===m?void 0:m.join(""))&&void 0!==y?y:"",this.forceUpgradeOnSignin=null!==(b=u.forceUpgradeOnSignin)&&void 0!==b&&b,this.schemaVersion=u.schemaVersion}validatePassword(u){var d,m,y,b,x,O;const ne={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(u,ne),this.validatePasswordCharacterOptions(u,ne),ne.isValid&&(ne.isValid=null===(d=ne.meetsMinPasswordLength)||void 0===d||d),ne.isValid&&(ne.isValid=null===(m=ne.meetsMaxPasswordLength)||void 0===m||m),ne.isValid&&(ne.isValid=null===(y=ne.containsLowercaseLetter)||void 0===y||y),ne.isValid&&(ne.isValid=null===(b=ne.containsUppercaseLetter)||void 0===b||b),ne.isValid&&(ne.isValid=null===(x=ne.containsNumericCharacter)||void 0===x||x),ne.isValid&&(ne.isValid=null===(O=ne.containsNonAlphanumericCharacter)||void 0===O||O),ne}validatePasswordLengthOptions(u,d){const m=this.customStrengthOptions.minPasswordLength,y=this.customStrengthOptions.maxPasswordLength;m&&(d.meetsMinPasswordLength=u.length>=m),y&&(d.meetsMaxPasswordLength=u.length<=y)}validatePasswordCharacterOptions(u,d){let m;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let y=0;y<u.length;y++)m=u.charAt(y),this.updatePasswordCharacterOptionsStatuses(d,m>="a"&&m<="z",m>="A"&&m<="Z",m>="0"&&m<="9",this.allowedNonAlphanumericCharacters.includes(m))}updatePasswordCharacterOptionsStatuses(u,d,m,y,b){this.customStrengthOptions.containsLowercaseLetter&&(u.containsLowercaseLetter||(u.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(u.containsUppercaseLetter||(u.containsUppercaseLetter=m)),this.customStrengthOptions.containsNumericCharacter&&(u.containsNumericCharacter||(u.containsNumericCharacter=y)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(u.containsNonAlphanumericCharacter||(u.containsNonAlphanumericCharacter=b))}}class mT{constructor(u,d,m,y){this.app=u,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=m,this.config=y,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $o(this),this.idTokenSubscription=new $o(this),this.beforeStateQueue=new _i(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=u.name,this.clientVersion=y.sdkClientVersion}_initializeWithPersistence(u,d){var m=this;return d&&(this._popupRedirectResolver=ut(d)),this._initializationPromise=this.queue((0,I.Z)(function*(){var y,b;if(!m._deleted&&(m.persistenceManager=yield Re.create(m,u),!m._deleted)){if(null!==(y=m._popupRedirectResolver)&&void 0!==y&&y._shouldInitProactively)try{yield m._popupRedirectResolver._initialize(m)}catch{}yield m.initializeCurrentUser(d),m.lastNotifiedUid=(null===(b=m.currentUser)||void 0===b?void 0:b.uid)||null,!m._deleted&&(m._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var u=this;return(0,I.Z)(function*(){if(u._deleted)return;const d=yield u.assertedPersistence.getCurrentUser();if(u.currentUser||d){if(u.currentUser&&d&&u.currentUser.uid===d.uid)return u._currentUser._assign(d),void(yield u.currentUser.getIdToken());yield u._updateCurrentUser(d,!0)}})()}initializeCurrentUser(u){var d=this;return(0,I.Z)(function*(){var m;const y=yield d.assertedPersistence.getCurrentUser();let b=y,x=!1;if(u&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const O=null===(m=d.redirectUser)||void 0===m?void 0:m._redirectEventId,ne=b?._redirectEventId,_e=yield d.tryRedirectSignIn(u);(!O||O===ne)&&_e?.user&&(b=_e.user,x=!0)}if(!b)return d.directlySetCurrentUser(null);if(!b._redirectEventId){if(x)try{yield d.beforeStateQueue.runMiddleware(b)}catch(O){b=y,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(O))}return b?d.reloadAndSetCurrentUserOrClear(b):d.directlySetCurrentUser(null)}return L(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===b._redirectEventId?d.directlySetCurrentUser(b):d.reloadAndSetCurrentUserOrClear(b)})()}tryRedirectSignIn(u){var d=this;return(0,I.Z)(function*(){let m=null;try{m=yield d._popupRedirectResolver._completeRedirectFn(d,u,!0)}catch{yield d._setRedirectUser(null)}return m})()}reloadAndSetCurrentUserOrClear(u){var d=this;return(0,I.Z)(function*(){try{yield ge(u)}catch(m){if("auth/network-request-failed"!==m?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(u)})()}useDeviceLanguage(){this.languageCode=function ln(){if(typeof navigator>"u")return null;const f=navigator;return f.languages&&f.languages[0]||f.language||null}()}_delete(){var u=this;return(0,I.Z)(function*(){u._deleted=!0})()}updateCurrentUser(u){var d=this;return(0,I.Z)(function*(){const m=u?(0,W.m9)(u):null;return m&&L(m.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(m&&m._clone(d))})()}_updateCurrentUser(u,d=!1){var m=this;return(0,I.Z)(function*(){if(!m._deleted)return u&&L(m.tenantId===u.tenantId,m,"tenant-id-mismatch"),d||(yield m.beforeStateQueue.runMiddleware(u)),m.queue((0,I.Z)(function*(){yield m.directlySetCurrentUser(u),m.notifyAuthListeners()}))})()}signOut(){var u=this;return(0,I.Z)(function*(){return yield u.beforeStateQueue.runMiddleware(null),(u.redirectPersistenceManager||u._popupRedirectResolver)&&(yield u._setRedirectUser(null)),u._updateCurrentUser(null,!0)})()}setPersistence(u){var d=this;return this.queue((0,I.Z)(function*(){yield d.assertedPersistence.setPersistence(ut(u))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(u){var d=this;return(0,I.Z)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const m=d._getPasswordPolicyInternal();return m.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):m.validatePassword(u)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var u=this;return(0,I.Z)(function*(){const d=yield function Io(f){return Mr.apply(this,arguments)}(u),m=new ok(d);null===u.tenantId?u._projectPasswordPolicy=m:u._tenantPasswordPolicies[u.tenantId]=m})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(u){this._errorFactory=new W.LL("auth","Firebase",u())}onAuthStateChanged(u,d,m){return this.registerStateListener(this.authStateSubscription,u,d,m)}beforeAuthStateChanged(u,d){return this.beforeStateQueue.pushCallback(u,d)}onIdTokenChanged(u,d,m){return this.registerStateListener(this.idTokenSubscription,u,d,m)}authStateReady(){return new Promise((u,d)=>{if(this.currentUser)u();else{const m=this.onAuthStateChanged(()=>{m(),u()},d)}})}revokeAccessToken(u){var d=this;return(0,I.Z)(function*(){if(d.currentUser){const m=yield d.currentUser.getIdToken(),y={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:u,idToken:m};null!=d.tenantId&&(y.tenantId=d.tenantId),yield function C(f,u){return M.apply(this,arguments)}(d,y)}})()}toJSON(){var u;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(u=this._currentUser)||void 0===u?void 0:u.toJSON()}}_setRedirectUser(u,d){var m=this;return(0,I.Z)(function*(){const y=yield m.getOrInitRedirectPersistenceManager(d);return null===u?y.removeCurrentUser():y.setCurrentUser(u)})()}getOrInitRedirectPersistenceManager(u){var d=this;return(0,I.Z)(function*(){if(!d.redirectPersistenceManager){const m=u&&ut(u)||d._popupRedirectResolver;L(m,d,"argument-error"),d.redirectPersistenceManager=yield Re.create(d,[ut(m._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(u){var d=this;return(0,I.Z)(function*(){var m,y;return d._isInitialized&&(yield d.queue((0,I.Z)(function*(){}))),(null===(m=d._currentUser)||void 0===m?void 0:m._redirectEventId)===u?d._currentUser:(null===(y=d.redirectUser)||void 0===y?void 0:y._redirectEventId)===u?d.redirectUser:null})()}_persistUserIfCurrent(u){var d=this;return(0,I.Z)(function*(){if(u===d.currentUser)return d.queue((0,I.Z)(function*(){return d.directlySetCurrentUser(u)}))})()}_notifyListenersIfCurrent(u){u===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var u,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const m=null!==(d=null===(u=this.currentUser)||void 0===u?void 0:u.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==m&&(this.lastNotifiedUid=m,this.authStateSubscription.next(this.currentUser))}registerStateListener(u,d,m,y){if(this._deleted)return()=>{};const b="function"==typeof d?d:d.next.bind(d);let x=!1;const O=this._isInitialized?Promise.resolve():this._initializationPromise;if(L(O,this,"internal-error"),O.then(()=>{x||b(this.currentUser)}),"function"==typeof d){const ne=u.addObserver(d,m,y);return()=>{x=!0,ne()}}{const ne=u.addObserver(d);return()=>{x=!0,ne()}}}directlySetCurrentUser(u){var d=this;return(0,I.Z)(function*(){d.currentUser&&d.currentUser!==u&&d._currentUser._stopProactiveRefresh(),u&&d.isProactiveRefreshEnabled&&u._startProactiveRefresh(),d.currentUser=u,u?yield d.assertedPersistence.setCurrentUser(u):yield d.assertedPersistence.removeCurrentUser()})()}queue(u){return this.operations=this.operations.then(u,u),this.operations}get assertedPersistence(){return L(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(u){!u||this.frameworks.includes(u)||(this.frameworks.push(u),this.frameworks.sort(),this.clientVersion=jr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var u=this;return(0,I.Z)(function*(){var d;const m={"X-Client-Version":u.clientVersion};u.app.options.appId&&(m["X-Firebase-gmpid"]=u.app.options.appId);const y=yield null===(d=u.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();y&&(m["X-Firebase-Client"]=y);const b=yield u._getAppCheckToken();return b&&(m["X-Firebase-AppCheck"]=b),m})()}_getAppCheckToken(){var u=this;return(0,I.Z)(function*(){var d;const m=yield null===(d=u.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return m?.error&&function xn(f,...u){hn.logLevel<=mt.in.WARN&&hn.warn(`Auth (${Ue.SDK_VERSION}): ${f}`,...u)}(`Error while retrieving App Check token: ${m.error}`),m?.token})()}}function gn(f){return(0,W.m9)(f)}class $o{constructor(u){this.auth=u,this.observer=null,this.addObserver=(0,W.ne)(d=>this.observer=d)}get next(){return L(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let kd={loadJS:()=>(0,I.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ov(f){return kd.loadJS(f)}function av(f){return`__${f}${Math.floor(1e6*Math.random())}`}class Ge{constructor(u){this.type="recaptcha-enterprise",this.auth=gn(u)}verify(u="verify",d=!1){var m=this;return(0,I.Z)(function*(){function b(){return b=(0,I.Z)(function*(O){if(!d){if(null==O.tenantId&&null!=O._agentRecaptchaConfig)return O._agentRecaptchaConfig.siteKey;if(null!=O.tenantId&&void 0!==O._tenantRecaptchaConfigs[O.tenantId])return O._tenantRecaptchaConfigs[O.tenantId].siteKey}return new Promise(function(){var ne=(0,I.Z)(function*(_e,Ce){pn(O,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(xe=>{if(void 0!==xe.recaptchaKey){const Rn=new Rr(xe);return null==O.tenantId?O._agentRecaptchaConfig=Rn:O._tenantRecaptchaConfigs[O.tenantId]=Rn,_e(Rn.siteKey)}Ce(new Error("recaptcha Enterprise site key undefined"))}).catch(xe=>{Ce(xe)})});return function(_e,Ce){return ne.apply(this,arguments)}}())}),b.apply(this,arguments)}function x(O,ne,_e){const Ce=window.grecaptcha;hr(Ce)?Ce.enterprise.ready(()=>{Ce.enterprise.execute(O,{action:u}).then(xe=>{ne(xe)}).catch(()=>{ne("NO_RECAPTCHA")})}):_e(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((O,ne)=>{(function y(O){return b.apply(this,arguments)})(m.auth).then(_e=>{if(!d&&hr(window.grecaptcha))x(_e,O,ne);else{if(typeof window>"u")return void ne(new Error("RecaptchaVerifier is only supported in browser"));let Ce=function gT(){return kd.recaptchaEnterpriseScript}();0!==Ce.length&&(Ce+=_e),ov(Ce).then(()=>{x(_e,O,ne)}).catch(xe=>{ne(xe)})}}).catch(_e=>{ne(_e)})})})()}}function _T(f,u,d){return lv.apply(this,arguments)}function lv(){return(lv=(0,I.Z)(function*(f,u,d,m=!1){const y=new Ge(f);let b;try{b=yield y.verify(d)}catch{b=yield y.verify(d,!0)}const x=Object.assign({},u);return Object.assign(x,m?{captchaResp:b}:{captchaResponse:b}),Object.assign(x,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(x,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),x})).apply(this,arguments)}function Od(f,u,d,m){return pe.apply(this,arguments)}function pe(){return pe=(0,I.Z)(function*(f,u,d,m){var y;if(null!==(y=f._getRecaptchaConfig())&&void 0!==y&&y.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const b=yield _T(f,u,d,"getOobCode"===d);return m(f,b)}return m(f,u).catch(function(){var b=(0,I.Z)(function*(x){if("auth/missing-recaptcha-token"===x.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const O=yield _T(f,u,d,"getOobCode"===d);return m(f,O)}return Promise.reject(x)});return function(x){return b.apply(this,arguments)}}())}),pe.apply(this,arguments)}function cv(f){const u=f.indexOf(":");return u<0?"":f.substr(0,u+1)}function Wc(f){if(!f)return null;const u=Number(f);return isNaN(u)?null:u}class Ma{constructor(u,d){this.providerId=u,this.signInMethod=d}toJSON(){return Pe("not implemented")}_getIdTokenResponse(u){return Pe("not implemented")}_linkToIdToken(u,d){return Pe("not implemented")}_getReauthenticationResolver(u){return Pe("not implemented")}}function uv(f,u){return gt.apply(this,arguments)}function gt(){return(gt=(0,I.Z)(function*(f,u){return K(f,"POST","/v1/accounts:resetPassword",ie(f,u))})).apply(this,arguments)}function Vd(){return(Vd=(0,I.Z)(function*(f,u){return K(f,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function yi(f,u){return Ud.apply(this,arguments)}function Ud(){return(Ud=(0,I.Z)(function*(f,u){return K(f,"POST","/v1/accounts:signUp",u)})).apply(this,arguments)}function Qt(){return(Qt=(0,I.Z)(function*(f,u){return K(f,"POST","/v1/accounts:update",ie(f,u))})).apply(this,arguments)}function fk(f,u){return dv.apply(this,arguments)}function dv(){return(dv=(0,I.Z)(function*(f,u){return Se(f,"POST","/v1/accounts:signInWithPassword",ie(f,u))})).apply(this,arguments)}function te(f,u){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,I.Z)(function*(f,u){return K(f,"POST","/v1/accounts:sendOobCode",ie(f,u))})).apply(this,arguments)}function Bd(){return(Bd=(0,I.Z)(function*(f,u){return te(f,u)})).apply(this,arguments)}function Up(f,u){return Bp.apply(this,arguments)}function Bp(){return(Bp=(0,I.Z)(function*(f,u){return te(f,u)})).apply(this,arguments)}function jp(f,u){return hv.apply(this,arguments)}function hv(){return(hv=(0,I.Z)(function*(f,u){return te(f,u)})).apply(this,arguments)}function fv(){return(fv=(0,I.Z)(function*(f,u){return te(f,u)})).apply(this,arguments)}function pv(){return(pv=(0,I.Z)(function*(f,u){return Se(f,"POST","/v1/accounts:signInWithEmailLink",ie(f,u))})).apply(this,arguments)}function Qc(){return(Qc=(0,I.Z)(function*(f,u){return Se(f,"POST","/v1/accounts:signInWithEmailLink",ie(f,u))})).apply(this,arguments)}class zo extends Ma{constructor(u,d,m,y=null){super("password",m),this._email=u,this._password=d,this._tenantId=y}static _fromEmailAndPassword(u,d){return new zo(u,d,"password")}static _fromEmailAndCode(u,d,m=null){return new zo(u,d,"emailLink",m)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(u){var d=this;return(0,I.Z)(function*(){switch(d.signInMethod){case"password":return Od(u,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",fk);case"emailLink":return function mk(f,u){return pv.apply(this,arguments)}(u,{email:d._email,oobCode:d._password});default:Dt(u,"internal-error")}})()}_linkToIdToken(u,d){var m=this;return(0,I.Z)(function*(){switch(m.signInMethod){case"password":return Od(u,{idToken:d,returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yi);case"emailLink":return function Zc(f,u){return Qc.apply(this,arguments)}(u,{idToken:d,email:m._email,oobCode:m._password});default:Dt(u,"internal-error")}})()}_getReauthenticationResolver(u){return this._getIdTokenResponse(u)}}function To(f,u){return Hp.apply(this,arguments)}function Hp(){return(Hp=(0,I.Z)(function*(f,u){return Se(f,"POST","/v1/accounts:signInWithIdp",ie(f,u))})).apply(this,arguments)}class xs extends Ma{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(u){const d=new xs(u.providerId,u.signInMethod);return u.idToken||u.accessToken?(u.idToken&&(d.idToken=u.idToken),u.accessToken&&(d.accessToken=u.accessToken),u.nonce&&!u.pendingToken&&(d.nonce=u.nonce),u.pendingToken&&(d.pendingToken=u.pendingToken)):u.oauthToken&&u.oauthTokenSecret?(d.accessToken=u.oauthToken,d.secret=u.oauthTokenSecret):Dt("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u,{providerId:m,signInMethod:y}=d,b=(0,Gt._T)(d,["providerId","signInMethod"]);if(!m||!y)return null;const x=new xs(m,y);return x.idToken=b.idToken||void 0,x.accessToken=b.accessToken||void 0,x.secret=b.secret,x.nonce=b.nonce,x.pendingToken=b.pendingToken||null,x}_getIdTokenResponse(u){return To(u,this.buildRequest())}_linkToIdToken(u,d){const m=this.buildRequest();return m.idToken=d,To(u,m)}_getReauthenticationResolver(u){const d=this.buildRequest();return d.autoCreate=!1,To(u,d)}buildRequest(){const u={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)u.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),u.postBody=(0,W.xO)(d)}return u}}function $p(){return($p=(0,I.Z)(function*(f,u){return K(f,"POST","/v1/accounts:sendVerificationCode",ie(f,u))})).apply(this,arguments)}function zp(){return(zp=(0,I.Z)(function*(f,u){return Se(f,"POST","/v1/accounts:signInWithPhoneNumber",ie(f,u))})).apply(this,arguments)}function jd(){return(jd=(0,I.Z)(function*(f,u){const d=yield Se(f,"POST","/v1/accounts:signInWithPhoneNumber",ie(f,u));if(d.temporaryProof)throw fn(f,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const de={USER_NOT_FOUND:"user-not-found"};function Yc(){return(Yc=(0,I.Z)(function*(f,u){return Se(f,"POST","/v1/accounts:signInWithPhoneNumber",ie(f,Object.assign(Object.assign({},u),{operation:"REAUTH"})),de)})).apply(this,arguments)}class As extends Ma{constructor(u){super("phone","phone"),this.params=u}static _fromVerification(u,d){return new As({verificationId:u,verificationCode:d})}static _fromTokenResponse(u,d){return new As({phoneNumber:u,temporaryProof:d})}_getIdTokenResponse(u){return function qo(f,u){return zp.apply(this,arguments)}(u,this._makeVerificationRequest())}_linkToIdToken(u,d){return function B(f,u){return jd.apply(this,arguments)}(u,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(u){return function Hd(f,u){return Yc.apply(this,arguments)}(u,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:u,phoneNumber:d,verificationId:m,verificationCode:y}=this.params;return u&&d?{temporaryProof:u,phoneNumber:d}:{sessionInfo:m,code:y}}toJSON(){const u={providerId:this.providerId};return this.params.phoneNumber&&(u.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(u.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(u.verificationCode=this.params.verificationCode),this.params.verificationId&&(u.verificationId=this.params.verificationId),u}static fromJSON(u){"string"==typeof u&&(u=JSON.parse(u));const{verificationId:d,verificationCode:m,phoneNumber:y,temporaryProof:b}=u;return m||d||y||b?new As({verificationId:d,verificationCode:m,phoneNumber:y,temporaryProof:b}):null}}class Xc{constructor(u){var d,m,y,b,x,O;const ne=(0,W.zd)((0,W.pd)(u)),_e=null!==(d=ne.apiKey)&&void 0!==d?d:null,Ce=null!==(m=ne.oobCode)&&void 0!==m?m:null,xe=function bT(f){switch(f){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(y=ne.mode)&&void 0!==y?y:null);L(_e&&Ce&&xe,"argument-error"),this.apiKey=_e,this.operation=xe,this.code=Ce,this.continueUrl=null!==(b=ne.continueUrl)&&void 0!==b?b:null,this.languageCode=null!==(x=ne.languageCode)&&void 0!==x?x:null,this.tenantId=null!==(O=ne.tenantId)&&void 0!==O?O:null}static parseLink(u){const d=function ET(f){const u=(0,W.zd)((0,W.pd)(f)).link,d=u?(0,W.zd)((0,W.pd)(u)).deep_link_id:null,m=(0,W.zd)((0,W.pd)(f)).deep_link_id;return(m?(0,W.zd)((0,W.pd)(m)).link:null)||m||d||u||f}(u);try{return new Xc(d)}catch{return null}}}let xl=(()=>{class f{constructor(){this.providerId=f.PROVIDER_ID}static credential(d,m){return zo._fromEmailAndPassword(d,m)}static credentialWithLink(d,m){const y=Xc.parseLink(m);return L(y,"argument-error"),zo._fromEmailAndCode(d,y.code,y.tenantId)}}return f.PROVIDER_ID="password",f.EMAIL_PASSWORD_SIGN_IN_METHOD="password",f.EMAIL_LINK_SIGN_IN_METHOD="emailLink",f})();class ir{constructor(u){this.providerId=u,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(u){this.defaultLanguageCode=u}setCustomParameters(u){return this.customParameters=u,this}getCustomParameters(){return this.customParameters}}class ti extends ir{constructor(){super(...arguments),this.scopes=[]}addScope(u){return this.scopes.includes(u)||this.scopes.push(u),this}getScopes(){return[...this.scopes]}}class _t extends ti{static credentialFromJSON(u){const d="string"==typeof u?JSON.parse(u):u;return L("providerId"in d&&"signInMethod"in d,"argument-error"),xs._fromParams(d)}credential(u){return this._credential(Object.assign(Object.assign({},u),{nonce:u.rawNonce}))}_credential(u){return L(u.idToken||u.accessToken,"argument-error"),xs._fromParams(Object.assign(Object.assign({},u),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(u){return _t.oauthCredentialFromTaggedObject(u)}static credentialFromError(u){return _t.oauthCredentialFromTaggedObject(u.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{oauthIdToken:d,oauthAccessToken:m,oauthTokenSecret:y,pendingToken:b,nonce:x,providerId:O}=u;if(!m&&!y&&!d&&!b||!O)return null;try{return new _t(O)._credential({idToken:d,accessToken:m,nonce:x,pendingToken:b})}catch{return null}}}let Jc=(()=>{class f extends ti{constructor(){super("facebook.com")}static credential(d){return xs._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.FACEBOOK_SIGN_IN_METHOD="facebook.com",f.PROVIDER_ID="facebook.com",f})(),$d=(()=>{class f extends ti{constructor(){super("google.com"),this.addScope("profile")}static credential(d,m){return xs._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:m})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:m,oauthAccessToken:y}=d;if(!m&&!y)return null;try{return f.credential(m,y)}catch{return null}}}return f.GOOGLE_SIGN_IN_METHOD="google.com",f.PROVIDER_ID="google.com",f})(),zd=(()=>{class f extends ti{constructor(){super("github.com")}static credential(d){return xs._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.GITHUB_SIGN_IN_METHOD="github.com",f.PROVIDER_ID="github.com",f})();class vi extends Ma{constructor(u,d){super(u,u),this.pendingToken=d}_getIdTokenResponse(u){return To(u,this.buildRequest())}_linkToIdToken(u,d){const m=this.buildRequest();return m.idToken=d,To(u,m)}_getReauthenticationResolver(u){const d=this.buildRequest();return d.autoCreate=!1,To(u,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u,{providerId:m,signInMethod:y,pendingToken:b}=d;return m&&y&&b&&m===y?new vi(m,b):null}static _create(u,d){return new vi(u,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class tu extends ir{constructor(u){L(u.startsWith("saml."),"argument-error"),super(u)}static credentialFromResult(u){return tu.samlCredentialFromTaggedObject(u)}static credentialFromError(u){return tu.samlCredentialFromTaggedObject(u.customData||{})}static credentialFromJSON(u){const d=vi.fromJSON(u);return L(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{pendingToken:d,providerId:m}=u;if(!d||!m)return null;try{return vi._create(m,d)}catch{return null}}}let qp=(()=>{class f extends ti{constructor(){super("twitter.com")}static credential(d,m){return xs._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:m})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:m,oauthTokenSecret:y}=d;if(!m||!y)return null;try{return f.credential(m,y)}catch{return null}}}return f.TWITTER_SIGN_IN_METHOD="twitter.com",f.PROVIDER_ID="twitter.com",f})();function qd(f,u){return Gd.apply(this,arguments)}function Gd(){return(Gd=(0,I.Z)(function*(f,u){return Se(f,"POST","/v1/accounts:signUp",ie(f,u))})).apply(this,arguments)}class Ui{constructor(u){this.user=u.user,this.providerId=u.providerId,this._tokenResponse=u._tokenResponse,this.operationType=u.operationType}static _fromIdTokenResponse(u,d,m,y=!1){return(0,I.Z)(function*(){const b=yield Q._fromIdTokenResponse(u,m,y),x=Al(m);return new Ui({user:b,providerId:x,_tokenResponse:m,operationType:d})})()}static _forOperation(u,d,m){return(0,I.Z)(function*(){yield u._updateTokensIfNecessary(m,!0);const y=Al(m);return new Ui({user:u,providerId:y,_tokenResponse:m,operationType:d})})()}}function Al(f){return f.providerId?f.providerId:"phoneNumber"in f?"phone":null}function Wd(){return(Wd=(0,I.Z)(function*(f){var u;const d=gn(f);if(yield d._initializationPromise,null!==(u=d.currentUser)&&void 0!==u&&u.isAnonymous)return new Ui({user:d.currentUser,providerId:null,operationType:"signIn"});const m=yield qd(d,{returnSecureToken:!0}),y=yield Ui._fromIdTokenResponse(d,"signIn",m,!0);return yield d._updateCurrentUser(y.user),y})).apply(this,arguments)}class Kd extends W.ZR{constructor(u,d,m,y){var b;super(d.code,d.message),this.operationType=m,this.user=y,Object.setPrototypeOf(this,Kd.prototype),this.customData={appName:u.name,tenantId:null!==(b=u.tenantId)&&void 0!==b?b:void 0,_serverResponse:d.customData._serverResponse,operationType:m}}static _fromErrorAndOperation(u,d,m,y){return new Kd(u,d,m,y)}}function Gp(f,u,d,m){return("reauthenticate"===u?d._getReauthenticationResolver(f):d._getIdTokenResponse(f)).catch(b=>{throw"auth/multi-factor-auth-required"===b.code?Kd._fromErrorAndOperation(f,b,u,m):b})}function _v(f){return new Set(f.map(({providerId:u})=>u).filter(u=>!!u))}function Bi(){return Bi=(0,I.Z)(function*(f,u){const d=(0,W.m9)(f);yield Qd(!0,d,u);const{providerUserInfo:m}=yield function Ts(f,u){return ss.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[u]}),y=_v(m||[]);return d.providerData=d.providerData.filter(b=>y.has(b.providerId)),y.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),Bi.apply(this,arguments)}function Wp(f,u){return Zd.apply(this,arguments)}function Zd(){return(Zd=(0,I.Z)(function*(f,u,d=!1){const m=yield wr(f,u._linkToIdToken(f.auth,yield f.getIdToken()),d);return Ui._forOperation(f,"link",m)})).apply(this,arguments)}function Qd(f,u,d){return Kp.apply(this,arguments)}function Kp(){return(Kp=(0,I.Z)(function*(f,u,d){yield ge(u);const y=!1===f?"provider-already-linked":"no-such-provider";L(_v(u.providerData).has(d)===f,u.auth,y)})).apply(this,arguments)}function yv(f,u){return Zp.apply(this,arguments)}function Zp(){return(Zp=(0,I.Z)(function*(f,u,d=!1){const{auth:m}=f,y="reauthenticate";try{const b=yield wr(f,Gp(m,y,u,f),d);L(b.idToken,m,"internal-error");const x=Gs(b.idToken);L(x,m,"internal-error");const{sub:O}=x;return L(f.uid===O,m,"user-mismatch"),Ui._forOperation(f,y,b)}catch(b){throw"auth/user-not-found"===b?.code&&Dt(m,"user-mismatch"),b}})).apply(this,arguments)}function Qp(f,u){return Yp.apply(this,arguments)}function Yp(){return(Yp=(0,I.Z)(function*(f,u,d=!1){const m="signIn",y=yield Gp(f,m,u),b=yield Ui._fromIdTokenResponse(f,m,y);return d||(yield f._updateCurrentUser(b.user)),b})).apply(this,arguments)}function Yd(f,u){return Xp.apply(this,arguments)}function Xp(){return(Xp=(0,I.Z)(function*(f,u){return Qp(gn(f),u)})).apply(this,arguments)}function Hr(f,u){return Jp.apply(this,arguments)}function Jp(){return(Jp=(0,I.Z)(function*(f,u){const d=(0,W.m9)(f);return yield Qd(!1,d,u.providerId),Wp(d,u)})).apply(this,arguments)}function vv(f,u){return em.apply(this,arguments)}function em(){return(em=(0,I.Z)(function*(f,u){return yv((0,W.m9)(f),u)})).apply(this,arguments)}function tm(){return(tm=(0,I.Z)(function*(f,u){return Se(f,"POST","/v1/accounts:signInWithCustomToken",ie(f,u))})).apply(this,arguments)}function Te(){return Te=(0,I.Z)(function*(f,u){const d=gn(f),m=yield function jt(f,u){return tm.apply(this,arguments)}(d,{token:u,returnSecureToken:!0}),y=yield Ui._fromIdTokenResponse(d,"signIn",m);return yield d._updateCurrentUser(y.user),y}),Te.apply(this,arguments)}class Ir{constructor(u,d){this.factorId=u,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(u,d){return"phoneInfo"in d?It._fromServerResponse(u,d):"totpInfo"in d?fr._fromServerResponse(u,d):Dt(u,"internal-error")}}class It extends Ir{constructor(u){super("phone",u),this.phoneNumber=u.phoneInfo}static _fromServerResponse(u,d){return new It(d)}}class fr extends Ir{constructor(u){super("totp",u)}static _fromServerResponse(u,d){return new fr(d)}}function Tr(f,u,d){var m;L((null===(m=d.url)||void 0===m?void 0:m.length)>0,f,"invalid-continue-uri"),L(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,f,"invalid-dynamic-link-domain"),u.continueUrl=d.url,u.dynamicLinkDomain=d.dynamicLinkDomain,u.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(L(d.iOS.bundleId.length>0,f,"missing-ios-bundle-id"),u.iOSBundleId=d.iOS.bundleId),d.android&&(L(d.android.packageName.length>0,f,"missing-android-pkg-name"),u.androidInstallApp=d.android.installApp,u.androidMinimumVersionCode=d.android.minimumVersion,u.androidPackageName=d.android.packageName)}function Wo(f){return ni.apply(this,arguments)}function ni(){return(ni=(0,I.Z)(function*(f){const u=gn(f);u._getPasswordPolicyInternal()&&(yield u._updatePasswordPolicy())})).apply(this,arguments)}function Xd(){return(Xd=(0,I.Z)(function*(f,u,d){const m=gn(f),y={requestType:"PASSWORD_RESET",email:u,clientType:"CLIENT_TYPE_WEB"};d&&Tr(m,y,d),yield Od(m,y,"getOobCode",Up)})).apply(this,arguments)}function nm(){return nm=(0,I.Z)(function*(f,u,d){yield uv((0,W.m9)(f),{oobCode:u,newPassword:d}).catch(function(){var m=(0,I.Z)(function*(y){throw"auth/password-does-not-meet-requirements"===y.code&&Wo(f),y});return function(y){return m.apply(this,arguments)}}())}),nm.apply(this,arguments)}function _n(){return _n=(0,I.Z)(function*(f,u){yield function hk(f,u){return Qt.apply(this,arguments)}((0,W.m9)(f),{oobCode:u})}),_n.apply(this,arguments)}function be(f,u){return Je.apply(this,arguments)}function Je(){return(Je=(0,I.Z)(function*(f,u){const d=(0,W.m9)(f),m=yield uv(d,{oobCode:u}),y=m.requestType;switch(L(y,d,"internal-error"),y){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":L(m.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":L(m.mfaInfo,d,"internal-error");default:L(m.email,d,"internal-error")}let b=null;return m.mfaInfo&&(b=Ir._fromServerResponse(gn(d),m.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===m.requestType?m.newEmail:m.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===m.requestType?m.email:m.newEmail)||null,multiFactorInfo:b},operation:y}})).apply(this,arguments)}function ji(){return(ji=(0,I.Z)(function*(f,u){const{data:d}=yield be((0,W.m9)(f),u);return d.email})).apply(this,arguments)}function Cr(){return(Cr=(0,I.Z)(function*(f,u,d){const m=gn(f),x=yield Od(m,{returnSecureToken:!0,email:u,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",qd).catch(ne=>{throw"auth/password-does-not-meet-requirements"===ne.code&&Wo(f),ne}),O=yield Ui._fromIdTokenResponse(m,"signIn",x);return yield m._updateCurrentUser(O.user),O})).apply(this,arguments)}function Ws(){return(Ws=(0,I.Z)(function*(f,u,d){const m=gn(f),y={requestType:"EMAIL_SIGNIN",email:u,clientType:"CLIENT_TYPE_WEB"};(function b(x,O){L(O.handleCodeInApp,m,"argument-error"),O&&Tr(m,x,O)})(y,d),yield Od(m,y,"getOobCode",jp)})).apply(this,arguments)}function Pa(){return(Pa=(0,I.Z)(function*(f,u,d){const m=(0,W.m9)(f),y=xl.credentialWithLink(u,d||wt());return L(y._tenantId===(m.tenantId||null),m,"tenant-id-mismatch"),Yd(m,y)})).apply(this,arguments)}function Ko(){return(Ko=(0,I.Z)(function*(f,u){return K(f,"POST","/v1/accounts:createAuthUri",ie(f,u))})).apply(this,arguments)}function Na(){return Na=(0,I.Z)(function*(f,u){const m={identifier:u,continueUri:Fn()?wt():"http://localhost"},{signinMethods:y}=yield function wv(f,u){return Ko.apply(this,arguments)}((0,W.m9)(f),m);return y||[]}),Na.apply(this,arguments)}function as(){return as=(0,I.Z)(function*(f,u){const d=(0,W.m9)(f),y={requestType:"VERIFY_EMAIL",idToken:yield f.getIdToken()};u&&Tr(d.auth,y,u);const{email:b}=yield function Vp(f,u){return Bd.apply(this,arguments)}(d.auth,y);b!==f.email&&(yield f.reload())}),as.apply(this,arguments)}function eh(){return eh=(0,I.Z)(function*(f,u,d){const m=(0,W.m9)(f),b={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield f.getIdToken(),newEmail:u};d&&Tr(m.auth,b,d);const{email:x}=yield function pk(f,u){return fv.apply(this,arguments)}(m.auth,b);x!==f.email&&(yield f.reload())}),eh.apply(this,arguments)}function Ds(){return(Ds=(0,I.Z)(function*(f,u){return K(f,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function ka(){return ka=(0,I.Z)(function*(f,{displayName:u,photoURL:d}){if(void 0===u&&void 0===d)return;const m=(0,W.m9)(f),b={idToken:yield m.getIdToken(),displayName:u,photoUrl:d,returnSecureToken:!0},x=yield wr(m,function Zo(f,u){return Ds.apply(this,arguments)}(m.auth,b));m.displayName=x.displayName||null,m.photoURL=x.photoUrl||null;const O=m.providerData.find(({providerId:ne})=>"password"===ne);O&&(O.displayName=m.displayName,O.photoURL=m.photoURL),yield m._updateTokensIfNecessary(x)}),ka.apply(this,arguments)}function th(f,u,d){return nh.apply(this,arguments)}function nh(){return nh=(0,I.Z)(function*(f,u,d){const{auth:m}=f,b={idToken:yield f.getIdToken(),returnSecureToken:!0};u&&(b.email=u),d&&(b.password=d);const x=yield wr(f,function Lp(f,u){return Vd.apply(this,arguments)}(m,b));yield f._updateTokensIfNecessary(x,!0)}),nh.apply(this,arguments)}class Co{constructor(u,d,m={}){this.isNewUser=u,this.providerId=d,this.profile=m}}class Oa extends Co{constructor(u,d,m,y){super(u,d,m),this.username=y}}class su extends Co{constructor(u,d){super(u,"facebook.com",d)}}class Pr extends Oa{constructor(u,d){super(u,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class _k extends Co{constructor(u,d){super(u,"google.com",d)}}class bi extends Oa{constructor(u,d,m){super(u,"twitter.com",d,m)}}function ri(f){const{user:u,_tokenResponse:d}=f;return u.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function Ks(f){var u,d;if(!f)return null;const{providerId:m}=f,y=f.rawUserInfo?JSON.parse(f.rawUserInfo):{},b=f.isNewUser||"identitytoolkit#SignupNewUserResponse"===f.kind;if(!m&&f?.idToken){const x=null===(d=null===(u=Gs(f.idToken))||void 0===u?void 0:u.firebase)||void 0===d?void 0:d.sign_in_provider;if(x)return new Co(b,"anonymous"!==x&&"custom"!==x?x:null)}if(!m)return null;switch(m){case"facebook.com":return new su(b,y);case"github.com":return new Pr(b,y);case"google.com":return new _k(b,y);case"twitter.com":return new bi(b,y,f.screenName||null);case"custom":case"anonymous":return new Co(b,null);default:return new Co(b,m,y)}}(d)}class Pl{constructor(u,d,m){this.type=u,this.credential=d,this.user=m}static _fromIdtoken(u,d){return new Pl("enroll",u,d)}static _fromMfaPendingCredential(u){return new Pl("signin",u)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(u){var d,m;if(u?.multiFactorSession){if(null!==(d=u.multiFactorSession)&&void 0!==d&&d.pendingCredential)return Pl._fromMfaPendingCredential(u.multiFactorSession.pendingCredential);if(null!==(m=u.multiFactorSession)&&void 0!==m&&m.idToken)return Pl._fromIdtoken(u.multiFactorSession.idToken)}return null}}class Cv{constructor(u,d,m){this.session=u,this.hints=d,this.signInResolver=m}static _fromError(u,d){const m=gn(u),y=d.customData._serverResponse,b=(y.mfaInfo||[]).map(O=>Ir._fromServerResponse(m,O));L(y.mfaPendingCredential,m,"internal-error");const x=Pl._fromMfaPendingCredential(y.mfaPendingCredential);return new Cv(x,b,function(){var O=(0,I.Z)(function*(ne){const _e=yield ne._process(m,x);delete y.mfaInfo,delete y.mfaPendingCredential;const Ce=Object.assign(Object.assign({},y),{idToken:_e.idToken,refreshToken:_e.refreshToken});switch(d.operationType){case"signIn":const xe=yield Ui._fromIdTokenResponse(m,d.operationType,Ce);return yield m._updateCurrentUser(xe.user),xe;case"reauthenticate":return L(d.user,m,"internal-error"),Ui._forOperation(d.user,d.operationType,Ce);default:Dt(m,"internal-error")}});return function(ne){return O.apply(this,arguments)}}())}resolveSignIn(u){var d=this;return(0,I.Z)(function*(){return d.signInResolver(u)})()}}class xv{constructor(u){this.user=u,this.enrolledFactors=[],u._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(m=>Ir._fromServerResponse(u.auth,m)))})}static _fromUser(u){return new xv(u)}getSession(){var u=this;return(0,I.Z)(function*(){return Pl._fromIdtoken(yield u.user.getIdToken(),u.user)})()}enroll(u,d){var m=this;return(0,I.Z)(function*(){const y=u,b=yield m.getSession(),x=yield wr(m.user,y._process(m.user.auth,b,d));return yield m.user._updateTokensIfNecessary(x),m.user.reload()})()}unenroll(u){var d=this;return(0,I.Z)(function*(){const m="string"==typeof u?u:u.uid,y=yield d.user.getIdToken();try{const b=yield wr(d.user,function Ck(f,u){return K(f,"POST","/v2/accounts/mfaEnrollment:withdraw",ie(f,u))}(d.user.auth,{idToken:y,mfaEnrollmentId:m}));d.enrolledFactors=d.enrolledFactors.filter(({uid:x})=>x!==m),yield d.user._updateTokensIfNecessary(b),yield d.user.reload()}catch(b){throw b}})()}}const rh=new WeakMap,sm="__sak";class CT{constructor(u,d){this.storageRetriever=u,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(sm,"1"),this.storage.removeItem(sm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(u,d){return this.storage.setItem(u,JSON.stringify(d)),Promise.resolve()}_get(u){const d=this.storage.getItem(u);return Promise.resolve(d?JSON.parse(d):null)}_remove(u){return this.storage.removeItem(u),Promise.resolve()}get storage(){return this.storageRetriever()}}const om=(()=>{class f extends CT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,m)=>this.onStorageEvent(d,m),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function xk(){const f=(0,W.z$)();return Cs(f)||N(f)}()&&function Ve(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ie(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const m of Object.keys(this.listeners)){const y=this.storage.getItem(m),b=this.localCache[m];y!==b&&d(m,b,y)}}onStorageEvent(d,m=!1){if(!d.key)return void this.forAllChangedKeys((O,ne,_e)=>{this.notifyListeners(O,_e)});const y=d.key;if(m?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const O=this.storage.getItem(y);if(d.newValue!==O)null!==d.newValue?this.storage.setItem(y,d.newValue):this.storage.removeItem(y);else if(this.localCache[y]===d.newValue&&!m)return}const b=()=>{const O=this.storage.getItem(y);!m&&this.localCache[y]===O||this.notifyListeners(y,O)},x=this.storage.getItem(y);!function Le(){return(0,W.w1)()&&10===document.documentMode}()||x===d.newValue||d.newValue===d.oldValue?b():setTimeout(b,10)}notifyListeners(d,m){this.localCache[d]=m;const y=this.listeners[d];if(y)for(const b of Array.from(y))b(m&&JSON.parse(m))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,m,y)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:m,newValue:y}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,m){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(m)}_removeListener(d,m){this.listeners[d]&&(this.listeners[d].delete(m),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,m){var y=()=>super._set,b=this;return(0,I.Z)(function*(){yield y().call(b,d,m),b.localCache[d]=JSON.stringify(m)})()}_get(d){var m=()=>super._get,y=this;return(0,I.Z)(function*(){const b=yield m().call(y,d);return y.localCache[d]=JSON.stringify(b),b})()}_remove(d){var m=()=>super._remove,y=this;return(0,I.Z)(function*(){yield m().call(y,d),delete y.localCache[d]})()}}return f.type="LOCAL",f})(),Ss=(()=>{class f extends CT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,m){}_removeListener(d,m){}}return f.type="SESSION",f})();let Dv=(()=>{class f{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const m=this.receivers.find(b=>b.isListeningto(d));if(m)return m;const y=new f(d);return this.receivers.push(y),y}isListeningto(d){return this.eventTarget===d}handleEvent(d){var m=this;return(0,I.Z)(function*(){const y=d,{eventId:b,eventType:x,data:O}=y.data,ne=m.handlersMap[x];if(!ne?.size)return;y.ports[0].postMessage({status:"ack",eventId:b,eventType:x});const _e=Array.from(ne).map(function(){var xe=(0,I.Z)(function*(Rn){return Rn(y.origin,O)});return function(Rn){return xe.apply(this,arguments)}}()),Ce=yield function ls(f){return Promise.all(f.map(function(){var u=(0,I.Z)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(m){return{fulfilled:!1,reason:m}}});return function(d){return u.apply(this,arguments)}}()))}(_e);y.ports[0].postMessage({status:"done",eventId:b,eventType:x,response:Ce})})()}_subscribe(d,m){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(m)}_unsubscribe(d,m){this.handlersMap[d]&&m&&this.handlersMap[d].delete(m),(!m||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return f.receivers=[],f})();function Nl(f="",u=10){let d="";for(let m=0;m<u;m++)d+=Math.floor(10*Math.random());return f+d}class Sv{constructor(u){this.target=u,this.handlers=new Set}removeMessageHandler(u){u.messageChannel&&(u.messageChannel.port1.removeEventListener("message",u.onMessage),u.messageChannel.port1.close()),this.handlers.delete(u)}_send(u,d,m=50){var y=this;return(0,I.Z)(function*(){const b=typeof MessageChannel<"u"?new MessageChannel:null;if(!b)throw new Error("connection_unavailable");let x,O;return new Promise((ne,_e)=>{const Ce=Nl("",20);b.port1.start();const xe=setTimeout(()=>{_e(new Error("unsupported_event"))},m);O={messageChannel:b,onMessage(Rn){const Ii=Rn;if(Ii.data.eventId===Ce)switch(Ii.data.status){case"ack":clearTimeout(xe),x=setTimeout(()=>{_e(new Error("timeout"))},3e3);break;case"done":clearTimeout(x),ne(Ii.data.response);break;default:clearTimeout(xe),clearTimeout(x),_e(new Error("invalid_response"))}}},y.handlers.add(O),b.port1.addEventListener("message",O.onMessage),y.target.postMessage({eventType:u,eventId:Ce,data:d},[b.port2])}).finally(()=>{O&&y.removeMessageHandler(O)})})()}}function Wn(){return window}function ih(){return typeof Wn().WorkerGlobalScope<"u"&&"function"==typeof Wn().importScripts}function ou(){return(ou=(0,I.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const cm="firebaseLocalStorageDb",Yo="firebaseLocalStorage",La="fbase_key";class kl{constructor(u){this.request=u}toPromise(){return new Promise((u,d)=>{this.request.addEventListener("success",()=>{u(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function um(f,u){return f.transaction([Yo],u?"readwrite":"readonly").objectStore(Yo)}function Pv(){const f=indexedDB.open(cm,1);return new Promise((u,d)=>{f.addEventListener("error",()=>{d(f.error)}),f.addEventListener("upgradeneeded",()=>{const m=f.result;try{m.createObjectStore(Yo,{keyPath:La})}catch(y){d(y)}}),f.addEventListener("success",(0,I.Z)(function*(){const m=f.result;m.objectStoreNames.contains(Yo)?u(m):(m.close(),yield function Ak(){const f=indexedDB.deleteDatabase(cm);return new kl(f).toPromise()}(),u(yield Pv()))}))})}function Nv(f,u,d){return dm.apply(this,arguments)}function dm(){return(dm=(0,I.Z)(function*(f,u,d){const m=um(f,!0).put({[La]:u,value:d});return new kl(m).toPromise()})).apply(this,arguments)}function oh(){return(oh=(0,I.Z)(function*(f,u){const d=um(f,!1).get(u),m=yield new kl(d).toPromise();return void 0===m?null:m.value})).apply(this,arguments)}function ah(f,u){const d=um(f,!0).delete(u);return new kl(d).toPromise()}const au=(()=>{class f{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,I.Z)(function*(){return d.db||(d.db=yield Pv()),d.db})()}_withRetries(d){var m=this;return(0,I.Z)(function*(){let y=0;for(;;)try{const b=yield m._openDb();return yield d(b)}catch(b){if(y++>3)throw b;m.db&&(m.db.close(),m.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,I.Z)(function*(){return ih()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,I.Z)(function*(){d.receiver=Dv._getInstance(function Mv(){return ih()?self:null}()),d.receiver._subscribe("keyChanged",function(){var m=(0,I.Z)(function*(y,b){return{keyProcessed:(yield d._poll()).includes(b.key)}});return function(y,b){return m.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var m=(0,I.Z)(function*(y,b){return["keyChanged"]});return function(y,b){return m.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,I.Z)(function*(){var m,y;if(d.activeServiceWorker=yield function lm(){return ou.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new Sv(d.activeServiceWorker);const b=yield d.sender._send("ping",{},800);b&&null!==(m=b[0])&&void 0!==m&&m.fulfilled&&null!==(y=b[0])&&void 0!==y&&y.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var m=this;return(0,I.Z)(function*(){if(m.sender&&m.activeServiceWorker&&function Rv(){var f;return(null===(f=navigator?.serviceWorker)||void 0===f?void 0:f.controller)||null}()===m.activeServiceWorker)try{yield m.sender._send("keyChanged",{key:d},m.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,I.Z)(function*(){try{if(!indexedDB)return!1;const d=yield Pv();return yield Nv(d,sm,"1"),yield ah(d,sm),!0}catch{}return!1})()}_withPendingWrite(d){var m=this;return(0,I.Z)(function*(){m.pendingWrites++;try{yield d()}finally{m.pendingWrites--}})()}_set(d,m){var y=this;return(0,I.Z)(function*(){return y._withPendingWrite((0,I.Z)(function*(){return yield y._withRetries(b=>Nv(b,d,m)),y.localCache[d]=m,y.notifyServiceWorker(d)}))})()}_get(d){var m=this;return(0,I.Z)(function*(){const y=yield m._withRetries(b=>function Dk(f,u){return oh.apply(this,arguments)}(b,d));return m.localCache[d]=y,y})()}_remove(d){var m=this;return(0,I.Z)(function*(){return m._withPendingWrite((0,I.Z)(function*(){return yield m._withRetries(y=>ah(y,d)),delete m.localCache[d],m.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,I.Z)(function*(){const m=yield d._withRetries(x=>{const O=um(x,!1).getAll();return new kl(O).toPromise()});if(!m)return[];if(0!==d.pendingWrites)return[];const y=[],b=new Set;if(0!==m.length)for(const{fbase_key:x,value:O}of m)b.add(x),JSON.stringify(d.localCache[x])!==JSON.stringify(O)&&(d.notifyListeners(x,O),y.push(x));for(const x of Object.keys(d.localCache))d.localCache[x]&&!b.has(x)&&(d.notifyListeners(x,null),y.push(x));return y})()}notifyListeners(d,m){this.localCache[d]=m;const y=this.listeners[d];if(y)for(const b of Array.from(y))b(m)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,I.Z)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,m){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(m)}_removeListener(d,m){this.listeners[d]&&(this.listeners[d].delete(m),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return f.type="LOCAL",f})(),lh=1e12;class Fv{constructor(u){this.auth=u,this.counter=lh,this._widgets=new Map}render(u,d){const m=this.counter;return this._widgets.set(m,new RT(u,this.auth.name,d||{})),this.counter++,m}reset(u){var d;const m=u||lh;null===(d=this._widgets.get(m))||void 0===d||d.delete(),this._widgets.delete(m)}getResponse(u){var d;return(null===(d=this._widgets.get(u||lh))||void 0===d?void 0:d.getResponse())||""}execute(u){var d=this;return(0,I.Z)(function*(){var m;return null===(m=d._widgets.get(u||lh))||void 0===m||m.execute(),""})()}}class RT{constructor(u,d,m){this.params=m,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const y="string"==typeof u?document.getElementById(u):u;L(y,"argument-error",{appName:d}),this.container=y,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Lv(f){const u=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<f;m++)u.push(d.charAt(Math.floor(62*Math.random())));return u.join("")}(50);const{callback:u,"expired-callback":d}=this.params;if(u)try{u(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const fm=av("rcb"),Sk=new dr(3e4,6e4);class MT{constructor(){var u;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(u=Wn().grecaptcha)||void 0===u||!u.render)}load(u,d=""){return L(function $i(f){return f.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(f)}(d),u,"argument-error"),this.shouldResolveImmediately(d)&&nr(Wn().grecaptcha)?Promise.resolve(Wn().grecaptcha):new Promise((m,y)=>{const b=Wn().setTimeout(()=>{y(Lt(u,"network-request-failed"))},Sk.get());Wn()[fm]=()=>{Wn().clearTimeout(b),delete Wn()[fm];const O=Wn().grecaptcha;if(!O||!nr(O))return void y(Lt(u,"internal-error"));const ne=O.render;O.render=(_e,Ce)=>{const xe=ne(_e,Ce);return this.counter++,xe},this.hostLanguage=d,m(O)},ov(`${function lk(){return kd.recaptchaV2Script}()}?${(0,W.xO)({onload:fm,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(b),y(Lt(u,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(u){var d;return!(null===(d=Wn().grecaptcha)||void 0===d||!d.render)&&(u===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Vv{load(u){return(0,I.Z)(function*(){return new Fv(u)})()}clearedOneInstance(){}}const Uv="recaptcha",PT={theme:"light",type:"image"};class Bv{constructor(u,d,m=Object.assign({},PT)){this.parameters=m,this.type=Uv,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=gn(u),this.isInvisible="invisible"===this.parameters.size,L(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const y="string"==typeof d?document.getElementById(d):d;L(y,this.auth,"argument-error"),this.container=y,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Vv:new MT,this.validateStartingState()}verify(){var u=this;return(0,I.Z)(function*(){u.assertNotDestroyed();const d=yield u.render(),m=u.getAssertedRecaptcha();return m.getResponse(d)||new Promise(b=>{const x=O=>{O&&(u.tokenChangeListeners.delete(x),b(O))};u.tokenChangeListeners.add(x),u.isInvisible&&m.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(u){return Promise.reject(u)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(u=>{throw this.renderPromise=null,u})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(u=>{this.container.removeChild(u)})}validateStartingState(){L(!this.parameters.sitekey,this.auth,"argument-error"),L(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),L(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(u){return d=>{if(this.tokenChangeListeners.forEach(m=>m(d)),"function"==typeof u)u(d);else if("string"==typeof u){const m=Wn()[u];"function"==typeof m&&m(d)}}}assertNotDestroyed(){L(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var u=this;return(0,I.Z)(function*(){if(yield u.init(),!u.widgetId){let d=u.container;if(!u.isInvisible){const m=document.createElement("div");d.appendChild(m),d=m}u.widgetId=u.getAssertedRecaptcha().render(d,u.parameters)}return u.widgetId})()}init(){var u=this;return(0,I.Z)(function*(){L(Fn()&&!ih(),u.auth,"internal-error"),yield function jv(){let f=null;return new Promise(u=>{"complete"!==document.readyState?(f=()=>u(),window.addEventListener("load",f)):u()}).catch(u=>{throw f&&window.removeEventListener("load",f),u})}(),u.recaptcha=yield u._recaptchaLoader.load(u.auth,u.auth.languageCode||void 0);const d=yield function is(f){return Er.apply(this,arguments)}(u.auth);L(d,u.auth,"internal-error"),u.parameters.sitekey=d})()}getAssertedRecaptcha(){return L(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class pm{constructor(u,d){this.verificationId=u,this.onConfirmation=d}confirm(u){const d=As._fromVerification(this.verificationId,u);return this.onConfirmation(d)}}function gm(){return(gm=(0,I.Z)(function*(f,u,d){const m=gn(f),y=yield Ol(m,u,(0,W.m9)(d));return new pm(y,b=>Yd(m,b))})).apply(this,arguments)}function ch(){return(ch=(0,I.Z)(function*(f,u,d){const m=(0,W.m9)(f);yield Qd(!1,m,"phone");const y=yield Ol(m.auth,u,(0,W.m9)(d));return new pm(y,b=>Hr(m,b))})).apply(this,arguments)}function Yt(){return(Yt=(0,I.Z)(function*(f,u,d){const m=(0,W.m9)(f),y=yield Ol(m.auth,u,(0,W.m9)(d));return new pm(y,b=>vv(m,b))})).apply(this,arguments)}function Ol(f,u,d){return Fl.apply(this,arguments)}function Fl(){return Fl=(0,I.Z)(function*(f,u,d){var m;const y=yield d.verify();try{let b;if(L("string"==typeof y,f,"argument-error"),L(d.type===Uv,f,"argument-error"),b="string"==typeof u?{phoneNumber:u}:u,"session"in b){const x=b.session;if("phoneNumber"in b)return L("enroll"===x.type,f,"internal-error"),(yield function wk(f,u){return K(f,"POST","/v2/accounts/mfaEnrollment:start",ie(f,u))}(f,{idToken:x.credential,phoneEnrollmentInfo:{phoneNumber:b.phoneNumber,recaptchaToken:y}})).phoneSessionInfo.sessionInfo;{L("signin"===x.type,f,"internal-error");const O=(null===(m=b.multiFactorHint)||void 0===m?void 0:m.uid)||b.multiFactorUid;return L(O,f,"missing-multi-factor-info"),(yield function AT(f,u){return K(f,"POST","/v2/accounts/mfaSignIn:start",ie(f,u))}(f,{mfaPendingCredential:x.credential,mfaEnrollmentId:O,phoneSignInInfo:{recaptchaToken:y}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:x}=yield function Cl(f,u){return $p.apply(this,arguments)}(f,{phoneNumber:b.phoneNumber,recaptchaToken:y});return x}}finally{d._reset()}}),Fl.apply(this,arguments)}function _m(){return(_m=(0,I.Z)(function*(f,u){yield Wp((0,W.m9)(f),u)})).apply(this,arguments)}let Ll=(()=>{class f{constructor(d){this.providerId=f.PROVIDER_ID,this.auth=gn(d)}verifyPhoneNumber(d,m){return Ol(this.auth,d,(0,W.m9)(m))}static credential(d,m){return As._fromVerification(d,m)}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:m,temporaryProof:y}=d;return m&&y?As._fromTokenResponse(m,y):null}}return f.PROVIDER_ID="phone",f.PHONE_SIGN_IN_METHOD="phone",f})();function cs(f,u){return u?ut(u):(L(f._popupRedirectResolver,f,"argument-error"),f._popupRedirectResolver)}class ii extends Ma{constructor(u){super("custom","custom"),this.params=u}_getIdTokenResponse(u){return To(u,this._buildIdpRequest())}_linkToIdToken(u,d){return To(u,this._buildIdpRequest(d))}_getReauthenticationResolver(u){return To(u,this._buildIdpRequest())}_buildIdpRequest(u){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return u&&(d.idToken=u),d}}function NT(f){return Qp(f.auth,new ii(f),f.bypassAuthState)}function kT(f){const{auth:u,user:d}=f;return L(d,u,"internal-error"),yv(d,new ii(f),f.bypassAuthState)}function OT(f){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,I.Z)(function*(f){const{auth:u,user:d}=f;return L(d,u,"internal-error"),Wp(d,new ii(f),f.bypassAuthState)})).apply(this,arguments)}class ym{constructor(u,d,m,y,b=!1){this.auth=u,this.resolver=m,this.user=y,this.bypassAuthState=b,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var u=this;return new Promise(function(){var d=(0,I.Z)(function*(m,y){u.pendingPromise={resolve:m,reject:y};try{u.eventManager=yield u.resolver._initialize(u.auth),yield u.onExecution(),u.eventManager.registerConsumer(u)}catch(b){u.reject(b)}});return function(m,y){return d.apply(this,arguments)}}())}onAuthEvent(u){var d=this;return(0,I.Z)(function*(){const{urlResponse:m,sessionId:y,postBody:b,tenantId:x,error:O,type:ne}=u;if(O)return void d.reject(O);const _e={auth:d.auth,requestUri:m,sessionId:y,tenantId:x||void 0,postBody:b||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(ne)(_e))}catch(Ce){d.reject(Ce)}})()}onError(u){this.reject(u)}getIdpTask(u){switch(u){case"signInViaPopup":case"signInViaRedirect":return NT;case"linkViaPopup":case"linkViaRedirect":return OT;case"reauthViaPopup":case"reauthViaRedirect":return kT;default:Dt(this.auth,"internal-error")}}resolve(u){Ye(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(u),this.unregisterAndCleanUp()}reject(u){Ye(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(u),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const FT=new dr(2e3,1e4);function uh(){return(uh=(0,I.Z)(function*(f,u,d){const m=gn(f);Ke(f,u,ir);const y=cs(m,d);return new qv(m,"signInViaPopup",u,y).executeNotNull()})).apply(this,arguments)}function vm(){return(vm=(0,I.Z)(function*(f,u,d){const m=(0,W.m9)(f);Ke(m.auth,u,ir);const y=cs(m.auth,d);return new qv(m.auth,"reauthViaPopup",u,y,m).executeNotNull()})).apply(this,arguments)}function dh(){return(dh=(0,I.Z)(function*(f,u,d){const m=(0,W.m9)(f);Ke(m.auth,u,ir);const y=cs(m.auth,d);return new qv(m.auth,"linkViaPopup",u,y,m).executeNotNull()})).apply(this,arguments)}let qv=(()=>{class f extends ym{constructor(d,m,y,b,x){super(d,m,b,x),this.provider=y,this.authWindow=null,this.pollId=null,f.currentPopupAction&&f.currentPopupAction.cancel(),f.currentPopupAction=this}executeNotNull(){var d=this;return(0,I.Z)(function*(){const m=yield d.execute();return L(m,d.auth,"internal-error"),m})()}onExecution(){var d=this;return(0,I.Z)(function*(){Ye(1===d.filter.length,"Popup operations only handle one event");const m=Nl();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],m),d.authWindow.associatedEvent=m,d.resolver._originValidation(d.auth).catch(y=>{d.reject(y)}),d.resolver._isIframeWebStorageSupported(d.auth,y=>{y||d.reject(Lt(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(Lt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,f.currentPopupAction=null}pollUserCancellation(){const d=()=>{var m,y;this.pollId=null!==(y=null===(m=this.authWindow)||void 0===m?void 0:m.window)&&void 0!==y&&y.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Lt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,FT.get())};d()}}return f.currentPopupAction=null,f})();const LT="pendingRedirect",lu=new Map;class VT extends ym{constructor(u,d,m=!1){super(u,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,m),this.eventId=null}execute(){var u=()=>super.execute,d=this;return(0,I.Z)(function*(){let m=lu.get(d.auth._key());if(!m){try{const b=(yield function Gv(f,u){return Xo.apply(this,arguments)}(d.resolver,d.auth))?yield u().call(d):null;m=()=>Promise.resolve(b)}catch(y){m=()=>Promise.reject(y)}lu.set(d.auth._key(),m)}return d.bypassAuthState||lu.set(d.auth._key(),()=>Promise.resolve(null)),m()})()}onAuthEvent(u){var d=()=>super.onAuthEvent,m=this;return(0,I.Z)(function*(){if("signInViaRedirect"===u.type)return d().call(m,u);if("unknown"!==u.type){if(u.eventId){const y=yield m.auth._redirectUserForId(u.eventId);if(y)return m.user=y,d().call(m,u);m.resolve(null)}}else m.resolve(null)})()}onExecution(){return(0,I.Z)(function*(){})()}cleanUp(){}}function Xo(){return(Xo=(0,I.Z)(function*(f,u){const d=se(u),m=Wv(f);if(!(yield m._isAvailable()))return!1;const y="true"===(yield m._get(d));return yield m._remove(d),y})).apply(this,arguments)}function bm(f,u){return Em.apply(this,arguments)}function Em(){return(Em=(0,I.Z)(function*(f,u){return Wv(f)._set(se(u),"true")})).apply(this,arguments)}function wm(f,u){lu.set(f._key(),u)}function Wv(f){return ut(f._redirectPersistence)}function se(f){return rr(LT,f.config.apiKey,f.name)}function St(f,u,d){return function BT(f,u,d){return Im.apply(this,arguments)}(f,u,d)}function Im(){return(Im=(0,I.Z)(function*(f,u,d){const m=gn(f);Ke(f,u,ir),yield m._initializationPromise;const y=cs(m,d);return yield bm(y,m),y._openRedirect(m,u,"signInViaRedirect")})).apply(this,arguments)}function Nr(f,u,d){return function Kv(f,u,d){return Va.apply(this,arguments)}(f,u,d)}function Va(){return(Va=(0,I.Z)(function*(f,u,d){const m=(0,W.m9)(f);Ke(m.auth,u,ir),yield m.auth._initializationPromise;const y=cs(m.auth,d);yield bm(y,m.auth);const b=yield Xs(m);return y._openRedirect(m.auth,u,"reauthViaRedirect",b)})).apply(this,arguments)}function Ys(f,u,d){return function Tm(f,u,d){return cu.apply(this,arguments)}(f,u,d)}function cu(){return(cu=(0,I.Z)(function*(f,u,d){const m=(0,W.m9)(f);Ke(m.auth,u,ir),yield m.auth._initializationPromise;const y=cs(m.auth,d);yield Qd(!1,m,u.providerId),yield bm(y,m.auth);const b=yield Xs(m);return y._openRedirect(m.auth,u,"linkViaRedirect",b)})).apply(this,arguments)}function Zv(){return(Zv=(0,I.Z)(function*(f,u){return yield gn(f)._initializationPromise,uu(f,u,!1)})).apply(this,arguments)}function uu(f,u){return kr.apply(this,arguments)}function kr(){return(kr=(0,I.Z)(function*(f,u,d=!1){const m=gn(f),y=cs(m,u),x=yield new VT(m,y,d).execute();return x&&!d&&(delete x.user._redirectEventId,yield m._persistUserIfCurrent(x.user),yield m._setRedirectUser(null,u)),x})).apply(this,arguments)}function Xs(f){return hh.apply(this,arguments)}function hh(){return(hh=(0,I.Z)(function*(f){const u=Nl(`${f.uid}:::`);return f._redirectEventId=u,yield f.auth._setRedirectUser(f),yield f.auth._persistUserIfCurrent(f),u})).apply(this,arguments)}class Js{constructor(u){this.auth=u,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(u){this.consumers.add(u),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,u)&&(this.sendToConsumer(this.queuedRedirectEvent,u),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(u){this.consumers.delete(u)}onEvent(u){if(this.hasEventBeenHandled(u))return!1;let d=!1;return this.consumers.forEach(m=>{this.isEventForConsumer(u,m)&&(d=!0,this.sendToConsumer(u,m),this.saveEventToCache(u))}),this.hasHandledPotentialRedirect||!function HT(f){switch(f.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Cm(f);default:return!1}}(u)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=u,d=!0)),d}sendToConsumer(u,d){var m;if(u.error&&!Cm(u)){const y=(null===(m=u.error.code)||void 0===m?void 0:m.split("auth/")[1])||"internal-error";d.onError(Lt(this.auth,y))}else d.onAuthEvent(u)}isEventForConsumer(u,d){const m=null===d.eventId||!!u.eventId&&u.eventId===d.eventId;return d.filter.includes(u.type)&&m}hasEventBeenHandled(u){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qv(u))}saveEventToCache(u){this.cachedEventUids.add(Qv(u)),this.lastProcessedEventTime=Date.now()}}function Qv(f){return[f.type,f.eventId,f.sessionId,f.tenantId].filter(u=>u).join("-")}function Cm({type:f,error:u}){return"unknown"===f&&"auth/no-auth-event"===u?.code}function Yv(f){return du.apply(this,arguments)}function du(){return(du=(0,I.Z)(function*(f,u={}){return K(f,"GET","/v1/projects",u)})).apply(this,arguments)}const xm=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xv=/^https?/;function Dm(){return(Dm=(0,I.Z)(function*(f){if(f.config.emulator)return;const{authorizedDomains:u}=yield Yv(f);for(const d of u)try{if(Jv(d))return}catch{}Dt(f,"unauthorized-domain")})).apply(this,arguments)}function Jv(f){const u=wt(),{protocol:d,hostname:m}=new URL(u);if(f.startsWith("chrome-extension://")){const x=new URL(f);return""===x.hostname&&""===m?"chrome-extension:"===d&&f.replace("chrome-extension://","")===u.replace("chrome-extension://",""):"chrome-extension:"===d&&x.hostname===m}if(!Xv.test(d))return!1;if(xm.test(f))return m===f;const y=f.replace(/\./g,"\\.");return new RegExp("^(.+\\."+y+"|"+y+")$","i").test(m)}const Sm=new dr(3e4,6e4);function Rm(){const f=Wn().___jsl;if(f?.H)for(const u of Object.keys(f.H))if(f.H[u].r=f.H[u].r||[],f.H[u].L=f.H[u].L||[],f.H[u].r=[...f.H[u].L],f.CP)for(let d=0;d<f.CP.length;d++)f.CP[d]=null}let hu=null;const Mm=new dr(5e3,15e3),$T="__/auth/iframe",zT="emulator/auth/iframe",si={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ua=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Sn(f){const u=f.config;L(u.authDomain,f,"auth-domain-config-required");const d=u.emulator?U(u,zT):`https://${f.config.authDomain}/${$T}`,m={apiKey:u.apiKey,appName:f.name,v:Ue.SDK_VERSION},y=Ua.get(f.config.apiHost);y&&(m.eid=y);const b=f._getFrameworks();return b.length&&(m.fw=b.join(",")),`${d}?${(0,W.xO)(m).slice(1)}`}function Pm(){return Pm=(0,I.Z)(function*(f){const u=yield function tb(f){return hu=hu||function eb(f){return new Promise((u,d)=>{var m,y,b;function x(){Rm(),gapi.load("gapi.iframes",{callback:()=>{u(gapi.iframes.getContext())},ontimeout:()=>{Rm(),d(Lt(f,"network-request-failed"))},timeout:Sm.get()})}if(null!==(y=null===(m=Wn().gapi)||void 0===m?void 0:m.iframes)&&void 0!==y&&y.Iframe)u(gapi.iframes.getContext());else{if(null===(b=Wn().gapi)||void 0===b||!b.load){const O=av("iframefcb");return Wn()[O]=()=>{gapi.load?x():d(Lt(f,"network-request-failed"))},ov(`${function ck(){return kd.gapiScript}()}?onload=${O}`).catch(ne=>d(ne))}x()}}).catch(u=>{throw hu=null,u})}(f),hu}(f),d=Wn().gapi;return L(d,f,"internal-error"),u.open({where:document.body,url:Sn(f),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:si,dontclear:!0},m=>new Promise(function(){var y=(0,I.Z)(function*(b,x){yield m.restyle({setHideOnLeave:!1});const O=Lt(f,"network-request-failed"),ne=Wn().setTimeout(()=>{x(O)},Mm.get());function _e(){Wn().clearTimeout(ne),b(m)}m.ping(_e).then(_e,()=>{x(O)})});return function(b,x){return y.apply(this,arguments)}}()))}),Pm.apply(this,arguments)}const GT={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class xo{constructor(u){this.window=u,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const mh="__/auth/handler",gh="emulator/auth/handler",Nm=encodeURIComponent("fac");function _h(f,u,d,m,y,b){return yh.apply(this,arguments)}function yh(){return(yh=(0,I.Z)(function*(f,u,d,m,y,b){L(f.config.authDomain,f,"auth-domain-config-required"),L(f.config.apiKey,f,"invalid-api-key");const x={apiKey:f.config.apiKey,appName:f.name,authType:d,redirectUrl:m,v:Ue.SDK_VERSION,eventId:y};if(u instanceof ir){u.setDefaultLanguage(f.languageCode),x.providerId=u.providerId||"",(0,W.xb)(u.getCustomParameters())||(x.customParameters=JSON.stringify(u.getCustomParameters()));for(const[Ce,xe]of Object.entries(b||{}))x[Ce]=xe}if(u instanceof ti){const Ce=u.getScopes().filter(xe=>""!==xe);Ce.length>0&&(x.scopes=Ce.join(","))}f.tenantId&&(x.tid=f.tenantId);const O=x;for(const Ce of Object.keys(O))void 0===O[Ce]&&delete O[Ce];const ne=yield f._getAppCheckToken(),_e=ne?`#${Nm}=${encodeURIComponent(ne)}`:"";return`${function ZT({config:f}){return f.emulator?U(f,gh):`https://${f.authDomain}/${mh}`}(f)}?${(0,W.xO)(O).slice(1)}${_e}`})).apply(this,arguments)}const Jo="webStorageSupport",ib=class fu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ss,this._completeRedirectFn=uu,this._overrideRedirectResult=wm}_openPopup(u,d,m,y){var b=this;return(0,I.Z)(function*(){var x;Ye(null===(x=b.eventManagers[u._key()])||void 0===x?void 0:x.manager,"_initialize() not called before _openPopup()");const O=yield _h(u,d,m,wt(),y);return function KT(f,u,d,m=500,y=600){const b=Math.max((window.screen.availHeight-y)/2,0).toString(),x=Math.max((window.screen.availWidth-m)/2,0).toString();let O="";const ne=Object.assign(Object.assign({},GT),{width:m.toString(),height:y.toString(),top:b,left:x}),_e=(0,W.z$)().toLowerCase();d&&(O=Gc(_e)?"_blank":d),tn(_e)&&(u=u||"http://localhost",ne.scrollbars="yes");const Ce=Object.entries(ne).reduce((Rn,[Ii,Eu])=>`${Rn}${Ii}=${Eu},`,"");if(function S(f=(0,W.z$)()){var u;return N(f)&&!(null===(u=window.navigator)||void 0===u||!u.standalone)}(_e)&&"_self"!==O)return function ph(f,u){const d=document.createElement("a");d.href=f,d.target=u;const m=document.createEvent("MouseEvent");m.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(m)}(u||"",O),new xo(null);const xe=window.open(u||"",O,Ce);L(xe,f,"popup-blocked");try{xe.focus()}catch{}return new xo(xe)}(u,O,Nl())})()}_openRedirect(u,d,m,y){var b=this;return(0,I.Z)(function*(){return yield b._originValidation(u),function am(f){Wn().location.href=f}(yield _h(u,d,m,wt(),y)),new Promise(()=>{})})()}_initialize(u){const d=u._key();if(this.eventManagers[d]){const{manager:y,promise:b}=this.eventManagers[d];return y?Promise.resolve(y):(Ye(b,"If manager is not set, promise should be"),b)}const m=this.initAndGetManager(u);return this.eventManagers[d]={promise:m},m.catch(()=>{delete this.eventManagers[d]}),m}initAndGetManager(u){var d=this;return(0,I.Z)(function*(){const m=yield function qT(f){return Pm.apply(this,arguments)}(u),y=new Js(u);return m.register("authEvent",b=>(L(b?.authEvent,u,"invalid-auth-event"),{status:y.onEvent(b.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[u._key()]={manager:y},d.iframes[u._key()]=m,y})()}_isIframeWebStorageSupported(u,d){this.iframes[u._key()].send(Jo,{type:Jo},y=>{var b;const x=null===(b=y?.[0])||void 0===b?void 0:b[Jo];void 0!==x&&d(!!x),Dt(u,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(u){const d=u._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function Am(f){return Dm.apply(this,arguments)}(u)),this.originValidationPromises[d]}get _shouldInitProactively(){return Ie()||Cs()||N()}};class Rk{constructor(u){this.factorId=u}_process(u,d,m){switch(d.type){case"enroll":return this._finalizeEnroll(u,d.credential,m);case"signin":return this._finalizeSignIn(u,d.credential);default:return Pe("unexpected MultiFactorSessionType")}}}class pu extends Rk{constructor(u){super("phone"),this.credential=u}static _fromCredential(u){return new pu(u)}_finalizeEnroll(u,d,m){return function Ik(f,u){return K(f,"POST","/v2/accounts/mfaEnrollment:finalize",ie(f,u))}(u,{idToken:d,displayName:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(u,d){return function kv(f,u){return K(f,"POST","/v2/accounts/mfaSignIn:finalize",ie(f,u))}(u,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Mk=(()=>{class f{constructor(){}static assertion(d){return pu._fromCredential(d)}}return f.FACTOR_ID="phone",f})();var vh="@firebase/auth";class YT{constructor(u){this.auth=u,this.internalListeners=new Map}getUid(){var u;return this.assertAuthConfigured(),(null===(u=this.auth.currentUser)||void 0===u?void 0:u.uid)||null}getToken(u){var d=this;return(0,I.Z)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(u)}:null})()}addAuthTokenListener(u){if(this.assertAuthConfigured(),this.internalListeners.has(u))return;const d=this.auth.onIdTokenChanged(m=>{u(m?.stsTokenManager.accessToken||null)});this.internalListeners.set(u,d),this.updateProactiveRefresh()}removeAuthTokenListener(u){this.assertAuthConfigured();const d=this.internalListeners.get(u);d&&(this.internalListeners.delete(u),d(),this.updateProactiveRefresh())}assertAuthConfigured(){L(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ba(){return window}(0,W.Pz)("authIdTokenMaxAge"),function ak(f){kd=f}({loadJS:f=>new Promise((u,d)=>{const m=document.createElement("script");m.setAttribute("src",f),m.onload=u,m.onerror=y=>{const b=Lt("internal-error");b.customData=y,d(b)},m.type="text/javascript",m.charset="UTF-8",function eo(){var f,u;return null!==(u=null===(f=document.getElementsByTagName("head"))||void 0===f?void 0:f[0])&&void 0!==u?u:document}().appendChild(m)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Fm(f){(0,Ue._registerComponent)(new Wt.wA("auth",(u,{options:d})=>{const m=u.getProvider("app").getImmediate(),y=u.getProvider("heartbeat"),b=u.getProvider("app-check-internal"),{apiKey:x,authDomain:O}=m.options;L(x&&!x.includes(":"),"invalid-api-key",{appName:m.name});const ne={apiKey:x,authDomain:O,clientPlatform:f,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jr(f)},_e=new mT(m,y,b,ne);return function yT(f,u){const d=u?.persistence||[],m=(Array.isArray(d)?d:[d]).map(ut);u?.errorMap&&f._updateErrorMap(u.errorMap),f._initializeWithPersistence(m,u?.popupRedirectResolver)}(_e,d),_e},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((u,d,m)=>{u.getProvider("auth-internal").initialize()})),(0,Ue._registerComponent)(new Wt.wA("auth-internal",u=>{const d=gn(u.getProvider("auth").getImmediate());return new YT(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ue.registerVersion)(vh,"1.6.0",function mu(f){switch(f){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(f)),(0,Ue.registerVersion)(vh,"1.6.0","esm2017")}("Browser");function wh(){return wh=(0,I.Z)(function*(f,u,d){var m;const{BuildInfo:y}=Ba();Ye(u.sessionId,"AuthEvent did not contain a session ID");const b=yield function lb(f){return Um.apply(this,arguments)}(u.sessionId),x={};return N()?x.ibi=y.packageName:He()?x.apn=y.packageName:Dt(f,"operation-not-supported-in-this-environment"),y.displayName&&(x.appDisplayName=y.displayName),x.sessionId=b,_h(f,d,u.type,void 0,null!==(m=u.eventId)&&void 0!==m?m:void 0,x)}),wh.apply(this,arguments)}function gu(){return(gu=(0,I.Z)(function*(f){const{BuildInfo:u}=Ba(),d={};N()?d.iosBundleId=u.packageName:He()?d.androidPackageName=u.packageName:Dt(f,"operation-not-supported-in-this-environment"),yield Yv(f,d)})).apply(this,arguments)}function Th(){return(Th=(0,I.Z)(function*(f,u,d){const{cordova:m}=Ba();let y=()=>{};try{yield new Promise((b,x)=>{let O=null;function ne(){var xe;b();const Rn=null===(xe=m.plugins.browsertab)||void 0===xe?void 0:xe.close;"function"==typeof Rn&&Rn(),"function"==typeof d?.close&&d.close()}function _e(){O||(O=window.setTimeout(()=>{x(Lt(f,"redirect-cancelled-by-user"))},2e3))}function Ce(){"visible"===document?.visibilityState&&_e()}u.addPassiveListener(ne),document.addEventListener("resume",_e,!1),He()&&document.addEventListener("visibilitychange",Ce,!1),y=()=>{u.removePassiveListener(ne),document.removeEventListener("resume",_e,!1),document.removeEventListener("visibilitychange",Ce,!1),O&&window.clearTimeout(O)}})}finally{y()}})).apply(this,arguments)}function Um(){return(Um=(0,I.Z)(function*(f){const u=function Ch(f){if(Ye(/[0-9a-zA-Z]+/.test(f),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(f);const u=new ArrayBuffer(f.length),d=new Uint8Array(u);for(let m=0;m<f.length;m++)d[m]=f.charCodeAt(m);return d}(f),d=yield crypto.subtle.digest("SHA-256",u);return Array.from(new Uint8Array(d)).map(y=>y.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class JT extends Js{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(u=>{this.resolveInialized=u})}addPassiveListener(u){this.passiveListeners.add(u)}removePassiveListener(u){this.passiveListeners.delete(u)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(u){return this.resolveInialized(),this.passiveListeners.forEach(d=>d(u)),super.onEvent(u)}initialized(){var u=this;return(0,I.Z)(function*(){yield u.initPromise})()}}function Bl(f){return Bm.apply(this,arguments)}function Bm(){return(Bm=(0,I.Z)(function*(f){const u=yield pr()._get(_u(f));return u&&(yield pr()._remove(_u(f))),u})).apply(this,arguments)}function eC(){const f=[];for(let d=0;d<20;d++){const m=Math.floor(62*Math.random());f.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(m))}return f.join("")}function pr(){return ut(om)}function _u(f){return rr("authEvent",f.config.apiKey,f.name)}function ea(f){if(!f?.includes("?"))return{};const[u,...d]=f.split("?");return(0,W.zd)(d.join("?"))}const $l=class Hl{constructor(){this._redirectPersistence=Ss,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=uu,this._overrideRedirectResult=wm}_initialize(u){var d=this;return(0,I.Z)(function*(){const m=u._key();let y=d.eventManagers.get(m);return y||(y=new JT(u),d.eventManagers.set(m,y),d.attachCallbackListeners(u,y)),y})()}_openPopup(u){Dt(u,"operation-not-supported-in-this-environment")}_openRedirect(u,d,m,y){var b=this;return(0,I.Z)(function*(){!function ab(f){var u,d,m,y,b,x,O,ne,_e,Ce;const xe=Ba();L("function"==typeof(null===(u=xe?.universalLinks)||void 0===u?void 0:u.subscribe),f,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),L(typeof(null===(d=xe?.BuildInfo)||void 0===d?void 0:d.packageName)<"u",f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),L("function"==typeof(null===(b=null===(y=null===(m=xe?.cordova)||void 0===m?void 0:m.plugins)||void 0===y?void 0:y.browsertab)||void 0===b?void 0:b.openUrl),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),L("function"==typeof(null===(ne=null===(O=null===(x=xe?.cordova)||void 0===x?void 0:x.plugins)||void 0===O?void 0:O.browsertab)||void 0===ne?void 0:ne.isAvailable),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),L("function"==typeof(null===(Ce=null===(_e=xe?.cordova)||void 0===_e?void 0:_e.InAppBrowser)||void 0===Ce?void 0:Ce.open),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(u);const x=yield b._initialize(u);yield x.initialized(),x.resetRedirect(),function UT(){lu.clear()}(),yield b._originValidation(u);const O=function cb(f,u,d=null){return{type:u,eventId:d,urlResponse:null,sessionId:eC(),postBody:null,tenantId:f.tenantId,error:Lt(f,"no-auth-event")}}(u,m,y);yield function ub(f,u){return pr()._set(_u(f),u)}(u,O);const ne=yield function Vm(f,u,d){return wh.apply(this,arguments)}(u,O,d),_e=yield function XT(f){const{cordova:u}=Ba();return new Promise(d=>{u.plugins.browsertab.isAvailable(m=>{let y=null;m?u.plugins.browsertab.openUrl(f):y=u.InAppBrowser.open(f,function ee(f=(0,W.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(f)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(f)}()?"_blank":"_system","location=yes"),d(y)})})}(ne);return function ob(f,u,d){return Th.apply(this,arguments)}(u,x,_e)})()}_isIframeWebStorageSupported(u,d){throw new Error("Method not implemented.")}_originValidation(u){const d=u._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function Ih(f){return gu.apply(this,arguments)}(u)),this.originValidationPromises[d]}attachCallbackListeners(u,d){const{universalLinks:m,handleOpenURL:y,BuildInfo:b}=Ba(),x=setTimeout((0,I.Z)(function*(){yield Bl(u),d.onEvent(jm())}),500),O=function(){var Ce=(0,I.Z)(function*(xe){clearTimeout(x);const Rn=yield Bl(u);let Ii=null;Rn&&xe?.url&&(Ii=function oi(f,u){var d,m;const y=function db(f){const u=ea(f),d=u.link?decodeURIComponent(u.link):void 0,m=ea(d).link,y=u.deep_link_id?decodeURIComponent(u.deep_link_id):void 0;return ea(y).link||y||m||d||f}(u);if(y.includes("/__/auth/callback")){const b=ea(y),x=b.firebaseError?function tC(f){try{return JSON.parse(f)}catch{return null}}(decodeURIComponent(b.firebaseError)):null,O=null===(m=null===(d=x?.code)||void 0===d?void 0:d.split("auth/"))||void 0===m?void 0:m[1],ne=O?Lt(O):null;return ne?{type:f.type,eventId:f.eventId,tenantId:f.tenantId,error:ne,urlResponse:null,sessionId:null,postBody:null}:{type:f.type,eventId:f.eventId,tenantId:f.tenantId,sessionId:f.sessionId,urlResponse:y,postBody:null}}return null}(Rn,xe.url)),d.onEvent(Ii||jm())});return function(Rn){return Ce.apply(this,arguments)}}();typeof m<"u"&&"function"==typeof m.subscribe&&m.subscribe(null,O);const ne=y,_e=`${b.packageName.toLowerCase()}://`;Ba().handleOpenURL=function(){var Ce=(0,I.Z)(function*(xe){if(xe.toLowerCase().startsWith(_e)&&O({url:xe}),"function"==typeof ne)try{ne(xe)}catch(Rn){console.error(Rn)}});return function(xe){return Ce.apply(this,arguments)}}()}};function jm(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Lt("no-auth-event")}}function xh(){var f;return(null===(f=self?.location)||void 0===f?void 0:f.protocol)||null}function rC(f=(0,W.z$)()){return!("file:"!==xh()&&"ionic:"!==xh()&&"capacitor:"!==xh()||!f.toLowerCase().match(/iphone|ipad|ipod|android/))}function hb(){try{const f=self.localStorage,u=Nl();if(f)return f.setItem(u,"1"),f.removeItem(u),!function ql(f=(0,W.z$)()){return function Vk(){return(0,W.w1)()&&11===document?.documentMode}()||function Uk(f=(0,W.z$)()){return/Edge\/\d+/.test(f)}(f)}()||(0,W.hl)()}catch{return $m()&&(0,W.hl)()}return!1}function $m(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Kn(){return(function Fk(){return"http:"===xh()||"https:"===xh()}()||(0,W.ru)()||rC())&&!function Lk(){return(0,W.b$)()||(0,W.UG)()}()&&hb()&&!$m()}function fb(){return rC()&&typeof document<"u"}function zm(){return(zm=(0,I.Z)(function*(){return!!fb()&&new Promise(f=>{const u=setTimeout(()=>{f(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(u),f(!0)})})})).apply(this,arguments)}const xr={LOCAL:"local",NONE:"none",SESSION:"session"},Gl=L,vu="persistence";function qm(f){return pb.apply(this,arguments)}function pb(){return(pb=(0,I.Z)(function*(f){yield f._initializationPromise;const u=sC(),d=rr(vu,f.config.apiKey,f.name);u&&u.setItem(d,f._getPersistence())})).apply(this,arguments)}function sC(){var f;try{return(null===(f=function us(){return typeof window<"u"?window:null}())||void 0===f?void 0:f.sessionStorage)||null}catch{return null}}const zi=L;class to{constructor(){this.browserResolver=ut(ib),this.cordovaResolver=ut($l),this.underlyingResolver=null,this._redirectPersistence=Ss,this._completeRedirectFn=uu,this._overrideRedirectResult=wm}_initialize(u){var d=this;return(0,I.Z)(function*(){return yield d.selectUnderlyingResolver(),d.assertedUnderlyingResolver._initialize(u)})()}_openPopup(u,d,m,y){var b=this;return(0,I.Z)(function*(){return yield b.selectUnderlyingResolver(),b.assertedUnderlyingResolver._openPopup(u,d,m,y)})()}_openRedirect(u,d,m,y){var b=this;return(0,I.Z)(function*(){return yield b.selectUnderlyingResolver(),b.assertedUnderlyingResolver._openRedirect(u,d,m,y)})()}_isIframeWebStorageSupported(u,d){this.assertedUnderlyingResolver._isIframeWebStorageSupported(u,d)}_originValidation(u){return this.assertedUnderlyingResolver._originValidation(u)}get _shouldInitProactively(){return fb()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return zi(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var u=this;return(0,I.Z)(function*(){if(u.underlyingResolver)return;const d=yield function yu(){return zm.apply(this,arguments)}();u.underlyingResolver=d?u.cordovaResolver:u.browserResolver})()}}function Ha(f){return f.unwrap()}function mb(f){return gb(f)}function gb(f){const{_tokenResponse:u}=f instanceof W.ZR?f.customData:f;if(!u)return null;if(!(f instanceof W.ZR)&&"temporaryProof"in u&&"phoneNumber"in u)return Ll.credentialFromResult(f);const d=u.providerId;if(!d||d===nt.PASSWORD)return null;let m;switch(d){case nt.GOOGLE:m=$d;break;case nt.FACEBOOK:m=Jc;break;case nt.GITHUB:m=zd;break;case nt.TWITTER:m=qp;break;default:const{oauthIdToken:y,oauthAccessToken:b,oauthTokenSecret:x,pendingToken:O,nonce:ne}=u;return b||x||y||O?O?d.startsWith("saml.")?vi._create(d,O):xs._fromParams({providerId:d,signInMethod:d,pendingToken:O,idToken:y,accessToken:b}):new _t(d).credential({idToken:y,accessToken:b,rawNonce:ne}):null}return f instanceof W.ZR?m.credentialFromError(f):m.credentialFromResult(f)}function wi(f,u){return u.catch(d=>{throw d instanceof W.ZR&&function oC(f,u){var d;const m=null===(d=u.customData)||void 0===d?void 0:d._tokenResponse;if("auth/multi-factor-auth-required"===u?.code)u.resolver=new aC(f,function Ek(f,u){var d;const m=(0,W.m9)(f),y=u;return L(u.customData.operationType,m,"argument-error"),L(null===(d=y.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,m,"argument-error"),Cv._fromError(m,y)}(f,u));else if(m){const y=gb(u),b=u;y&&(b.credential=y,b.tenantId=m.tenantId||void 0,b.email=m.email||void 0,b.phoneNumber=m.phoneNumber||void 0)}}(f,d),d}).then(d=>{const y=d.user;return{operationType:d.operationType,credential:mb(d),additionalUserInfo:ri(d),user:Rs.getOrCreate(y)}})}function Gm(f,u){return Wm.apply(this,arguments)}function Wm(){return(Wm=(0,I.Z)(function*(f,u){const d=yield u;return{verificationId:d.verificationId,confirm:m=>wi(f,d.confirm(m))}})).apply(this,arguments)}class aC{constructor(u,d){this.resolver=d,this.auth=function Bk(f){return f.wrapped()}(u)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(u){return wi(Ha(this.auth),this.resolver.resolveSignIn(u))}}class Rs{constructor(u){this._delegate=u,this.multiFactor=function Av(f){const u=(0,W.m9)(f);return rh.has(u)||rh.set(u,xv._fromUser(u)),rh.get(u)}(u)}static getOrCreate(u){return Rs.USER_MAP.has(u)||Rs.USER_MAP.set(u,new Rs(u)),Rs.USER_MAP.get(u)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(u){return this._delegate.getIdTokenResult(u)}getIdToken(u){return this._delegate.getIdToken(u)}linkAndRetrieveDataWithCredential(u){return this.linkWithCredential(u)}linkWithCredential(u){var d=this;return(0,I.Z)(function*(){return wi(d.auth,Hr(d._delegate,u))})()}linkWithPhoneNumber(u,d){var m=this;return(0,I.Z)(function*(){return Gm(m.auth,function Zs(f,u,d){return ch.apply(this,arguments)}(m._delegate,u,d))})()}linkWithPopup(u){var d=this;return(0,I.Z)(function*(){return wi(d.auth,function We(f,u,d){return dh.apply(this,arguments)}(d._delegate,u,to))})()}linkWithRedirect(u){var d=this;return(0,I.Z)(function*(){return yield qm(gn(d.auth)),Ys(d._delegate,u,to)})()}reauthenticateAndRetrieveDataWithCredential(u){return this.reauthenticateWithCredential(u)}reauthenticateWithCredential(u){var d=this;return(0,I.Z)(function*(){return wi(d.auth,vv(d._delegate,u))})()}reauthenticateWithPhoneNumber(u,d){return Gm(this.auth,function Hv(f,u,d){return Yt.apply(this,arguments)}(this._delegate,u,d))}reauthenticateWithPopup(u){return wi(this.auth,function zv(f,u,d){return vm.apply(this,arguments)}(this._delegate,u,to))}reauthenticateWithRedirect(u){var d=this;return(0,I.Z)(function*(){return yield qm(gn(d.auth)),Nr(d._delegate,u,to)})()}sendEmailVerification(u){return function Rl(f,u){return as.apply(this,arguments)}(this._delegate,u)}unlink(u){var d=this;return(0,I.Z)(function*(){return yield function wT(f,u){return Bi.apply(this,arguments)}(d._delegate,u),d})()}updateEmail(u){return function yt(f,u){return th((0,W.m9)(f),u,null)}(this._delegate,u)}updatePassword(u){return function gk(f,u){return th((0,W.m9)(f),null,u)}(this._delegate,u)}updatePhoneNumber(u){return function Ei(f,u){return _m.apply(this,arguments)}(this._delegate,u)}updateProfile(u){return function iu(f,u){return ka.apply(this,arguments)}(this._delegate,u)}verifyBeforeUpdateEmail(u,d){return function ru(f,u,d){return eh.apply(this,arguments)}(this._delegate,u,d)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Rs.USER_MAP=new WeakMap;const ta=L;let _b=(()=>{class f{constructor(d,m){if(this.app=d,m.isInitialized())return this._delegate=m.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:y}=d.options;ta(y,"invalid-api-key",{appName:d.name}),ta(y,"invalid-api-key",{appName:d.name});const b=typeof window<"u"?to:void 0;this._delegate=m.initialize({options:{persistence:lC(y,d.name),popupRedirectResolver:b}}),this._delegate._updateErrorMap(Hn),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Rs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(d){this._delegate.languageCode=d}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(d){this._delegate.tenantId=d}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(d,m){!function Op(f,u,d){const m=gn(f);L(m._canInitEmulator,m,"emulator-config-failed"),L(/^https?:\/\//.test(u),m,"invalid-emulator-scheme");const y=!!d?.disableWarnings,b=cv(u),{host:x,port:O}=function Ld(f){const u=cv(f),d=/(\/\/)?([^?#/]+)/.exec(f.substr(u.length));if(!d)return{host:"",port:null};const m=d[2].split("@").pop()||"",y=/^(\[[^\]]+\])(:|$)/.exec(m);if(y){const b=y[1];return{host:b,port:Wc(m.substr(b.length+1))}}{const[b,x]=m.split(":");return{host:b,port:Wc(x)}}}(u);m.config.emulator={url:`${b}//${x}${null===O?"":`:${O}`}/`},m.settings.appVerificationDisabledForTesting=!0,m.emulatorConfig=Object.freeze({host:x,port:O,protocol:b.replace(":",""),options:Object.freeze({disableWarnings:y})}),y||function Fp(){function f(){const u=document.createElement("p"),d=u.style;u.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",u.classList.add("firebase-emulator-warning"),document.body.appendChild(u)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",f):f())}()}(this._delegate,d,m)}applyActionCode(d){return function IT(f,u){return _n.apply(this,arguments)}(this._delegate,d)}checkActionCode(d){return be(this._delegate,d)}confirmPasswordReset(d,m){return function Jd(f,u,d){return nm.apply(this,arguments)}(this._delegate,d,m)}createUserWithEmailAndPassword(d,m){var y=this;return(0,I.Z)(function*(){return wi(y._delegate,function nu(f,u,d){return Cr.apply(this,arguments)}(y._delegate,d,m))})()}fetchProvidersForEmail(d){return this.fetchSignInMethodsForEmail(d)}fetchSignInMethodsForEmail(d){return function Gn(f,u){return Na.apply(this,arguments)}(this._delegate,d)}isSignInWithEmailLink(d){return function Sl(f,u){const d=Xc.parseLink(u);return"EMAIL_SIGNIN"===d?.operation}(0,d)}getRedirectResult(){var d=this;return(0,I.Z)(function*(){ta(Kn(),d._delegate,"operation-not-supported-in-this-environment");const m=yield function jT(f,u){return Zv.apply(this,arguments)}(d._delegate,to);return m?wi(d._delegate,Promise.resolve(m)):{credential:null,user:null}})()}addFrameworkForLogging(d){!function Hm(f,u){gn(f)._logFramework(u)}(this._delegate,d)}onAuthStateChanged(d,m,y){const{next:b,error:x,complete:O}=Ao(d,m,y);return this._delegate.onAuthStateChanged(b,x,O)}onIdTokenChanged(d,m,y){const{next:b,error:x,complete:O}=Ao(d,m,y);return this._delegate.onIdTokenChanged(b,x,O)}sendSignInLinkToEmail(d,m){return function qn(f,u,d){return Ws.apply(this,arguments)}(this._delegate,d,m)}sendPasswordResetEmail(d,m){return function Ev(f,u,d){return Xd.apply(this,arguments)}(this._delegate,d,m||void 0)}setPersistence(d){var m=this;return(0,I.Z)(function*(){let y;switch(function bu(f,u){Gl(Object.values(xr).includes(u),f,"invalid-persistence-type"),(0,W.b$)()?Gl(u!==xr.SESSION,f,"unsupported-persistence-type"):(0,W.UG)()?Gl(u===xr.NONE,f,"unsupported-persistence-type"):$m()?Gl(u===xr.NONE||u===xr.LOCAL&&(0,W.hl)(),f,"unsupported-persistence-type"):Gl(u===xr.NONE||hb(),f,"unsupported-persistence-type")}(m._delegate,d),d){case xr.SESSION:y=Ss;break;case xr.LOCAL:y=(yield ut(au)._isAvailable())?au:om;break;case xr.NONE:y=mn;break;default:return Dt("argument-error",{appName:m._delegate.name})}return m._delegate.setPersistence(y)})()}signInAndRetrieveDataWithCredential(d){return this.signInWithCredential(d)}signInAnonymously(){return wi(this._delegate,function gv(f){return Wd.apply(this,arguments)}(this._delegate))}signInWithCredential(d){return wi(this._delegate,Yd(this._delegate,d))}signInWithCustomToken(d){return wi(this._delegate,function bv(f,u){return Te.apply(this,arguments)}(this._delegate,d))}signInWithEmailAndPassword(d,m){return wi(this._delegate,function Dl(f,u,d){return Yd((0,W.m9)(f),xl.credential(u,d)).catch(function(){var m=(0,I.Z)(function*(y){throw"auth/password-does-not-meet-requirements"===y.code&&Wo(f),y});return function(y){return m.apply(this,arguments)}}())}(this._delegate,d,m))}signInWithEmailLink(d,m){return wi(this._delegate,function et(f,u,d){return Pa.apply(this,arguments)}(this._delegate,d,m))}signInWithPhoneNumber(d,m){return Gm(this._delegate,function mm(f,u,d){return gm.apply(this,arguments)}(this._delegate,d,m))}signInWithPopup(d){var m=this;return(0,I.Z)(function*(){return ta(Kn(),m._delegate,"operation-not-supported-in-this-environment"),wi(m._delegate,function $v(f,u,d){return uh.apply(this,arguments)}(m._delegate,d,to))})()}signInWithRedirect(d){var m=this;return(0,I.Z)(function*(){return ta(Kn(),m._delegate,"operation-not-supported-in-this-environment"),yield qm(m._delegate),St(m._delegate,d,to)})()}updateCurrentUser(d){return this._delegate.updateCurrentUser(d)}verifyPasswordResetCode(d){return function yn(f,u){return ji.apply(this,arguments)}(this._delegate,d)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return f.Persistence=xr,f})();function Ao(f,u,d){let m=f;"function"!=typeof f&&({next:m,error:u,complete:d}=f);const y=m;return{next:x=>y(x&&Rs.getOrCreate(x)),error:u,complete:d}}function lC(f,u){const d=function iC(f,u){const d=sC();if(!d)return[];const m=rr(vu,f,u);switch(d.getItem(m)){case xr.NONE:return[mn];case xr.LOCAL:return[au,Ss];case xr.SESSION:return[Ss];default:return[]}}(f,u);if(typeof self<"u"&&!d.includes(au)&&d.push(au),typeof window<"u")for(const m of[om,Ss])d.includes(m)||d.push(m);return d.includes(mn)||d.push(mn),d}class $a{constructor(){this.providerId="phone",this._delegate=new Ll(Ha(ke.Z.auth()))}static credential(u,d){return Ll.credential(u,d)}verifyPhoneNumber(u,d){return this._delegate.verifyPhoneNumber(u,d)}unwrap(){return this._delegate}}$a.PHONE_SIGN_IN_METHOD=Ll.PHONE_SIGN_IN_METHOD,$a.PROVIDER_ID=Ll.PROVIDER_ID;const cC=L;class yb{constructor(u,d,m=ke.Z.app()){var y;cC(null===(y=m.options)||void 0===y?void 0:y.apiKey,"invalid-api-key",{appName:m.name}),this._delegate=new Bv(m.auth(),u,d),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ah(f){f.INTERNAL.registerComponent(new Wt.wA("auth-compat",u=>{const d=u.getProvider("app-compat").getImmediate(),m=u.getProvider("auth");return new _b(d,m)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:xl,FacebookAuthProvider:Jc,GithubAuthProvider:zd,GoogleAuthProvider:$d,OAuthProvider:_t,SAMLAuthProvider:tu,PhoneAuthProvider:$a,PhoneMultiFactorGenerator:Mk,RecaptchaVerifier:yb,TwitterAuthProvider:qp,Auth:_b,AuthCredential:Ma,Error:W.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),f.registerVersion("@firebase/auth-compat","0.5.2")}(ke.Z)},878:(Is,tr,Oe)=>{Oe.d(tr,{X3:()=>xn});var I=Oe(861);const ke=(ue,L)=>L.some(Pe=>ue instanceof Pe);let W,Ue;const Wt=new WeakMap,Jt=new WeakMap,nt=new WeakMap,X=new WeakMap,le=new WeakMap;let Et={get(ue,L,Pe){if(ue instanceof IDBTransaction){if("done"===L)return Jt.get(ue);if("objectStoreNames"===L)return ue.objectStoreNames||nt.get(ue);if("store"===L)return Pe.objectStoreNames[1]?void 0:Pe.objectStore(Pe.objectStoreNames[0])}return Be(ue[L])},set:(ue,L,Pe)=>(ue[L]=Pe,!0),has:(ue,L)=>ue instanceof IDBTransaction&&("done"===L||"store"===L)||L in ue};function qe(ue){return"function"==typeof ue?function st(ue){return ue!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Gt(){return Ue||(Ue=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ue)?function(...L){return ue.apply(hn(this),L),Be(Wt.get(this))}:function(...L){return Be(ue.apply(hn(this),L))}:function(L,...Pe){const Ye=ue.call(hn(this),L,...Pe);return nt.set(Ye,L.sort?L.sort():[L]),Be(Ye)}}(ue):(ue instanceof IDBTransaction&&function ht(ue){if(Jt.has(ue))return;const L=new Promise((Pe,Ye)=>{const wt=()=>{ue.removeEventListener("complete",Fn),ue.removeEventListener("error",en),ue.removeEventListener("abort",en)},Fn=()=>{Pe(),wt()},en=()=>{Ye(ue.error||new DOMException("AbortError","AbortError")),wt()};ue.addEventListener("complete",Fn),ue.addEventListener("error",en),ue.addEventListener("abort",en)});Jt.set(ue,L)}(ue),ke(ue,function mt(){return W||(W=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ue,Et):ue)}function Be(ue){if(ue instanceof IDBRequest)return function we(ue){const L=new Promise((Pe,Ye)=>{const wt=()=>{ue.removeEventListener("success",Fn),ue.removeEventListener("error",en)},Fn=()=>{Pe(Be(ue.result)),wt()},en=()=>{Ye(ue.error),wt()};ue.addEventListener("success",Fn),ue.addEventListener("error",en)});return L.then(Pe=>{Pe instanceof IDBCursor&&Wt.set(Pe,ue)}).catch(()=>{}),le.set(L,ue),L}(ue);if(X.has(ue))return X.get(ue);const L=qe(ue);return L!==ue&&(X.set(ue,L),le.set(L,ue)),L}const hn=ue=>le.get(ue);function xn(ue,L,{blocked:Pe,upgrade:Ye,blocking:wt,terminated:Fn}={}){const en=indexedDB.open(ue,L),at=Be(en);return Ye&&en.addEventListener("upgradeneeded",ln=>{Ye(Be(en.result),ln.oldVersion,ln.newVersion,Be(en.transaction),ln)}),Pe&&en.addEventListener("blocked",ln=>Pe(ln.oldVersion,ln.newVersion,ln)),at.then(ln=>{Fn&&ln.addEventListener("close",()=>Fn()),wt&&ln.addEventListener("versionchange",dr=>wt(dr.oldVersion,dr.newVersion,dr))}).catch(()=>{}),at}const Dt=["get","getKey","getAll","getAllKeys","count"],Lt=["put","add","delete","clear"],An=new Map;function Ke(ue,L){if(!(ue instanceof IDBDatabase)||L in ue||"string"!=typeof L)return;if(An.get(L))return An.get(L);const Pe=L.replace(/FromIndex$/,""),Ye=L!==Pe,wt=Lt.includes(Pe);if(!(Pe in(Ye?IDBIndex:IDBObjectStore).prototype)||!wt&&!Dt.includes(Pe))return;const Fn=function(){var en=(0,I.Z)(function*(at,...ln){const dr=this.transaction(at,wt?"readwrite":"readonly");let U=dr.store;return Ye&&(U=U.index(ln.shift())),(yield Promise.all([U[Pe](...ln),wt&&dr.done]))[0]});return function(ln){return en.apply(this,arguments)}}();return An.set(L,Fn),Fn}!function Hn(ue){Et=ue(Et)}(ue=>({...ue,get:(L,Pe,Ye)=>Ke(L,Pe)||ue.get(L,Pe,Ye),has:(L,Pe)=>!!Ke(L,Pe)||ue.has(L,Pe)}))},861:(Is,tr,Oe)=>{function I(W,Ue,mt,Gt,Wt,Jt,nt){try{var X=W[Jt](nt),le=X.value}catch(we){return void mt(we)}X.done?Ue(le):Promise.resolve(le).then(Gt,Wt)}function ke(W){return function(){var Ue=this,mt=arguments;return new Promise(function(Gt,Wt){var Jt=W.apply(Ue,mt);function nt(le){I(Jt,Gt,Wt,nt,X,"next",le)}function X(le){I(Jt,Gt,Wt,nt,X,"throw",le)}nt(void 0)})}}Oe.d(tr,{Z:()=>ke})},582:(Is,tr,Oe)=>{function Ue(U,$){var j={};for(var Y in U)Object.prototype.hasOwnProperty.call(U,Y)&&$.indexOf(Y)<0&&(j[Y]=U[Y]);if(null!=U&&"function"==typeof Object.getOwnPropertySymbols){var ie=0;for(Y=Object.getOwnPropertySymbols(U);ie<Y.length;ie++)$.indexOf(Y[ie])<0&&Object.prototype.propertyIsEnumerable.call(U,Y[ie])&&(j[Y[ie]]=U[Y[ie]])}return j}function we(U,$,j,Y){return new(j||(j=Promise))(function(K,fe){function rt(Ct){try{Se(Y.next(Ct))}catch(Nt){fe(Nt)}}function he(Ct){try{Se(Y.throw(Ct))}catch(Nt){fe(Nt)}}function Se(Ct){Ct.done?K(Ct.value):function ie(K){return K instanceof j?K:new j(function(fe){fe(K)})}(Ct.value).then(rt,he)}Se((Y=Y.apply(U,$||[])).next())})}function On(U){return this instanceof On?(this.v=U,this):new On(U)}function Dt(U,$,j){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ie,Y=j.apply(U,$||[]),K=[];return ie={},fe("next"),fe("throw"),fe("return"),ie[Symbol.asyncIterator]=function(){return this},ie;function fe(kt){Y[kt]&&(ie[kt]=function($n){return new Promise(function(fn,nr){K.push([kt,$n,fn,nr])>1||rt(kt,$n)})})}function rt(kt,$n){try{!function he(kt){kt.value instanceof On?Promise.resolve(kt.value.v).then(Se,Ct):Nt(K[0][2],kt)}(Y[kt]($n))}catch(fn){Nt(K[0][3],fn)}}function Se(kt){rt("next",kt)}function Ct(kt){rt("throw",kt)}function Nt(kt,$n){kt($n),K.shift(),K.length&&rt(K[0][0],K[0][1])}}function An(U){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var j,$=U[Symbol.asyncIterator];return $?$.call(U):(U=function st(U){var $="function"==typeof Symbol&&Symbol.iterator,j=$&&U[$],Y=0;if(j)return j.call(U);if(U&&"number"==typeof U.length)return{next:function(){return U&&Y>=U.length&&(U=void 0),{value:U&&U[Y++],done:!U}}};throw new TypeError($?"Object is not iterable.":"Symbol.iterator is not defined.")}(U),j={},Y("next"),Y("throw"),Y("return"),j[Symbol.asyncIterator]=function(){return this},j);function Y(K){j[K]=U[K]&&function(fe){return new Promise(function(rt,he){!function ie(K,fe,rt,he){Promise.resolve(he).then(function(Se){K({value:Se,done:rt})},fe)}(rt,he,(fe=U[K](fe)).done,fe.value)})}}}Oe.d(tr,{FC:()=>Dt,KL:()=>An,_T:()=>Ue,mG:()=>we,qq:()=>On}),"function"==typeof SuppressedError&&SuppressedError}},Is=>{Is(Is.s=986)}]);